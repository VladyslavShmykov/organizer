"use strict";var cC=Object.defineProperty,dC=Object.defineProperties,hC=Object.getOwnPropertyDescriptors,BE=Object.getOwnPropertySymbols,fC=Object.prototype.hasOwnProperty,pC=Object.prototype.propertyIsEnumerable,jE=(Mt,Ve,V)=>Ve in Mt?cC(Mt,Ve,{enumerable:!0,configurable:!0,writable:!0,value:V}):Mt[Ve]=V,HE=(Mt,Ve)=>{for(var V in Ve||(Ve={}))fC.call(Ve,V)&&jE(Mt,V,Ve[V]);if(BE)for(var V of BE(Ve))pC.call(Ve,V)&&jE(Mt,V,Ve[V]);return Mt},$E=(Mt,Ve)=>dC(Mt,hC(Ve));(self.webpackChunkangfiretest=self.webpackChunkangfiretest||[]).push([[179],{440:(Mt,Ve,V)=>{V.d(Ve,{nm:()=>Vr});var T=V(5813);V(5e3),V(5867);var tt=V(5861),Ne=V(9681),ke=V(4859),Tt=V(2090),wt=V(1877);const J=new Map,Ze={activated:!1,tokenObservers:[]},oe={initialized:!1,enabled:!1};function Se(we){return J.get(we)||Ze}function xe(we,fe){J.set(we,fe)}function We(){return oe}class cn{constructor(fe,je,Xe,mt,Ft){if(this.operation=fe,this.retryPolicy=je,this.getWaitDuration=Xe,this.lowerBound=mt,this.upperBound=Ft,this.pending=null,this.nextErrorWaitInterval=mt,mt>Ft)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(fe){var je=this;return(0,tt.Z)(function*(){je.stop();try{je.pending=new Tt.BH,yield function qt(we){return new Promise(fe=>{setTimeout(fe,we)})}(je.getNextRun(fe)),je.pending.resolve(),yield je.pending.promise,je.pending=new Tt.BH,yield je.operation(),je.pending.resolve(),yield je.pending.promise,je.process(!0).catch(()=>{})}catch(Xe){je.retryPolicy(Xe)?je.process(!1).catch(()=>{}):je.stop()}})()}getNextRun(fe){if(fe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),je}}}const jt=new Tt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sn(we){if(!Se(we).activated)throw jt.create("use-before-activation",{appName:we.name})}function or(we,fe){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,tt.Z)(function*({url:we,body:fe},je){var Xe,mt;const Ft={"Content-Type":"application/json"},rr=je.getImmediate({optional:!0});if(rr){const yi=yield rr.getHeartbeatsHeader();yi&&(Ft["X-Firebase-Client"]=yi)}const qr={method:"POST",body:JSON.stringify(fe),headers:Ft};let bn,Ir;try{bn=yield fetch(we,qr)}catch(yi){throw jt.create("fetch-network-error",{originalErrorMessage:null===(Xe=yi)||void 0===Xe?void 0:Xe.message})}if(200!==bn.status)throw jt.create("fetch-status-error",{httpStatus:bn.status});try{Ir=yield bn.json()}catch(yi){throw jt.create("fetch-parse-error",{originalErrorMessage:null===(mt=yi)||void 0===mt?void 0:mt.message})}const Mi=Ir.ttl.match(/^([\d.]+)(s)$/);if(!Mi||!Mi[2]||isNaN(Number(Mi[1])))throw jt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Ir.ttl}`});const Ts=1e3*Number(Mi[1]),ns=Date.now();return{token:Ir.token,expireTimeMillis:ns+Ts,issuedAtTimeMillis:ns}})).apply(this,arguments)}function hr(we,fe){const{projectId:je,appId:Xe,apiKey:mt}=we.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${je}/apps/${Xe}:exchangeDebugToken?key=${mt}`,body:{debug_token:fe}}}const Sn="firebase-app-check-store";let Mn=null;function Wi(){return Mn||(Mn=new Promise((we,fe)=>{var je;try{const Xe=indexedDB.open("firebase-app-check-database",1);Xe.onsuccess=mt=>{we(mt.target.result)},Xe.onerror=mt=>{var Ft;fe(jt.create("storage-open",{originalErrorMessage:null===(Ft=mt.target.error)||void 0===Ft?void 0:Ft.message}))},Xe.onupgradeneeded=mt=>{0===mt.oldVersion&&mt.target.result.createObjectStore(Sn,{keyPath:"compositeKey"})}}catch(Xe){fe(jt.create("storage-open",{originalErrorMessage:null===(je=Xe)||void 0===je?void 0:je.message}))}}),Mn)}function Le(){return(Le=(0,tt.Z)(function*(we,fe){const Xe=(yield Wi()).transaction(Sn,"readwrite"),Ft=Xe.objectStore(Sn).put({compositeKey:we,value:fe});return new Promise((rr,qr)=>{Ft.onsuccess=bn=>{rr()},Xe.onerror=bn=>{var Ir;qr(jt.create("storage-set",{originalErrorMessage:null===(Ir=bn.target.error)||void 0===Ir?void 0:Ir.message}))}})})).apply(this,arguments)}const on=new wt.Yd("@firebase/app-check");function fr(we,fe){return(0,Tt.hl)()?function Je(we,fe){return function dt(we,fe){return Le.apply(this,arguments)}(function Dn(we){return`${we.options.appId}-${we.name}`}(we),fe)}(we,fe).catch(je=>{on.warn(`Failed to write token to IndexedDB. Error: ${je}`)}):Promise.resolve()}function he(){return We().enabled}function ye(){return it.apply(this,arguments)}function it(){return(it=(0,tt.Z)(function*(){const we=We();if(we.enabled&&we.token)return we.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Re={error:"UNKNOWN_ERROR"};function rt(we){return Tt.US.encodeString(JSON.stringify(we),!1)}function kt(we){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,tt.Z)(function*(we,fe=!1){const je=we.app;sn(je);const Xe=Se(je);let Ft,mt=Xe.token;if(!mt){const bn=yield Xe.cachedTokenPromise;bn&&ws(bn)&&(mt=bn)}if(!fe&&mt&&ws(mt))return{token:mt.token};let qr,rr=!1;if(he()){Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=or(hr(je,yield ye()),we.heartbeatServiceProvider).then(Ir=>(Xe.exchangeTokenPromise=void 0,Ir)),rr=!0);const bn=yield Xe.exchangeTokenPromise;return yield fr(je,bn),xe(je,Object.assign(Object.assign({},Xe),{token:bn})),{token:bn.token}}try{Xe.exchangeTokenPromise||(Xe.exchangeTokenPromise=Xe.provider.getToken().then(bn=>(Xe.exchangeTokenPromise=void 0,bn)),rr=!0),mt=yield Xe.exchangeTokenPromise}catch(bn){"appCheck/throttled"===bn.code?on.warn(bn.message):on.error(bn),Ft=bn}return mt?(qr={token:mt.token},xe(je,Object.assign(Object.assign({},Xe),{token:mt})),yield fr(je,mt)):qr=Ai(Ft),rr&&Ur(je,qr),qr})).apply(this,arguments)}function lr(we,fe){const je=Se(we),Xe=je.tokenObservers.filter(mt=>mt.next!==fe);0===Xe.length&&je.tokenRefresher&&je.tokenRefresher.isRunning()&&je.tokenRefresher.stop(),xe(we,Object.assign(Object.assign({},je),{tokenObservers:Xe}))}function dn(we){const{app:fe}=we,je=Se(fe);let Xe=je.tokenRefresher;Xe||(Xe=function Mr(we){const{app:fe}=we;return new cn((0,tt.Z)(function*(){let Xe;if(Xe=Se(fe).token?yield kt(we,!0):yield kt(we),Xe.error)throw Xe.error}),()=>!0,()=>{const je=Se(fe);if(je.token){let Xe=je.token.issuedAtTimeMillis+.5*(je.token.expireTimeMillis-je.token.issuedAtTimeMillis)+3e5;return Xe=Math.min(Xe,je.token.expireTimeMillis-3e5),Math.max(0,Xe-Date.now())}return 0},3e4,96e4)}(we),xe(fe,Object.assign(Object.assign({},je),{tokenRefresher:Xe}))),!Xe.isRunning()&&je.isTokenAutoRefreshEnabled&&Xe.start()}function Ur(we,fe){const je=Se(we).tokenObservers;for(const Xe of je)try{"EXTERNAL"===Xe.type&&null!=fe.error?Xe.error(fe.error):Xe.next(fe)}catch(mt){}}function ws(we){return we.expireTimeMillis-Date.now()>0}function Ai(we){return{token:rt(Re),error:we}}class Qi{constructor(fe,je){this.app=fe,this.heartbeatServiceProvider=je}_delete(){const{tokenObservers:fe}=Se(this.app);for(const je of fe)lr(this.app,je.next);return Promise.resolve()}}const Ii="app-check-internal";!function pr(){(0,Ne._registerComponent)(new ke.wA("app-check",we=>function En(we,fe){return new Qi(we,fe)}(we.getProvider("app").getImmediate(),we.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((we,fe,je)=>{we.getProvider(Ii).initialize()})),(0,Ne._registerComponent)(new ke.wA(Ii,we=>function mr(we){return{getToken:fe=>kt(we,fe),addTokenListener:fe=>function Xt(we,fe,je,Xe){const{app:mt}=we,Ft=Se(mt),rr={next:je,error:Xe,type:fe};if(xe(mt,Object.assign(Object.assign({},Ft),{tokenObservers:[...Ft.tokenObservers,rr]})),Ft.token&&ws(Ft.token)){const qr=Ft.token;Promise.resolve().then(()=>{je({token:qr.token}),dn(we)}).catch(()=>{})}Ft.cachedTokenPromise.then(()=>dn(we))}(we,"INTERNAL",fe),removeTokenListener:fe=>lr(we.app,fe)}}(we.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ne.registerVersion)("@firebase/app-check","0.5.9")}();class Vr{constructor(){return(0,T.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Mt,Ve,V)=>{V.d(Ve,{zQ:()=>He,rT:()=>oe,f7:()=>xe,L6:()=>J,_Q:()=>Ze,lh:()=>Se,Qv:()=>wt,nw:()=>We});var T=V(5e3),Y=V(7579),Q=V(9646),ve=V(8306),Ee=V(8996),be=V(6451),Pe=V(6063);class Me extends Y.x{constructor(xt=1/0,Ut=1/0,lt=Pe.l){super(),this._bufferSize=xt,this._windowTime=Ut,this._timestampProvider=lt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ut===1/0,this._bufferSize=Math.max(1,xt),this._windowTime=Math.max(1,Ut)}next(xt){const{isStopped:Ut,_buffer:lt,_infiniteTimeWindow:cn,_timestampProvider:qt,_windowTime:Wt}=this;Ut||(lt.push(xt),!cn&&lt.push(qt.now()+Wt)),this._trimBuffer(),super.next(xt)}_subscribe(xt){this._throwIfClosed(),this._trimBuffer();const Ut=this._innerSubscribe(xt),{_infiniteTimeWindow:lt,_buffer:cn}=this,qt=cn.slice();for(let Wt=0;Wt<qt.length&&!xt.closed;Wt+=lt?1:2)xt.next(qt[Wt]);return this._checkFinalizedStatuses(xt),Ut}_trimBuffer(){const{_bufferSize:xt,_timestampProvider:Ut,_buffer:lt,_infiniteTimeWindow:cn}=this,qt=(cn?1:2)*xt;if(xt<1/0&&qt<lt.length&&lt.splice(0,lt.length-qt),!cn){const Wt=Ut.now();let jt=0;for(let pn=1;pn<lt.length&&lt[pn]<=Wt;pn+=2)jt=pn;jt&&lt.splice(0,jt+1)}}}var Oe=V(3099);function le(Nt,xt,Ut){let lt,cn=!1;return Nt&&"object"==typeof Nt?({bufferSize:lt=1/0,windowTime:xt=1/0,refCount:cn=!1,scheduler:Ut}=Nt):lt=null!=Nt?Nt:1/0,(0,Oe.B)({connector:()=>new Me(lt,xt,Ut),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:cn})}var ae=V(3900),Ae=V(576);function Ct(Nt,xt){return(0,Ae.m)(xt)?(0,ae.w)(()=>Nt,xt):(0,ae.w)(()=>Nt)}var nt=V(5363),st=V(4004),Dt=V(590),Ge=V(9468),et=V(9300),Ie=V(5813),At=V(2011),tt=V(9808),Ne=V(440);V(127);const wt=new T.OlP("angularfire2.auth.use-emulator"),J=new T.OlP("angularfire2.auth.settings"),Ze=new T.OlP("angularfire2.auth.tenant-id"),oe=new T.OlP("angularfire2.auth.langugage-code"),Se=new T.OlP("angularfire2.auth.use-device-language"),xe=new T.OlP("angularfire.auth.persistence"),We=(Nt,xt,Ut,lt,cn,qt,Wt,jt)=>(0,At.cc)(`${Nt.name}.auth`,"AngularFireAuth",Nt.name,()=>{const pn=xt.runOutsideAngular(()=>Nt.auth());if(Ut&&pn.useEmulator(...Ut),lt&&(pn.tenantId=lt),pn.languageCode=cn,qt&&pn.useDeviceLanguage(),Wt)for(const[sn,yn]of Object.entries(Wt))pn.settings[sn]=yn;return jt&&pn.setPersistence(jt),pn},[Ut,lt,cn,qt,Wt,jt]);let He=(()=>{class Nt{constructor(Ut,lt,cn,qt,Wt,jt,pn,sn,yn,ur,Xn,or){const Kn=new Y.x,Tr=(0,Q.of)(void 0).pipe((0,nt.Q)(Wt.outsideAngular),(0,ae.w)(()=>qt.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,9916)))),(0,st.U)(()=>(0,At.on)(Ut,qt,lt)),(0,st.U)(qn=>We(qn,qt,jt,sn,yn,ur,pn,Xn)),le({bufferSize:1,refCount:!1}));if((0,tt.PM)(cn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Q.of)(null);else{Tr.pipe((0,Dt.P)()).subscribe();const hr=Tr.pipe((0,ae.w)(Sn=>Sn.getRedirectResult().then(Rn=>Rn,()=>null)),Ie.iC,le({bufferSize:1,refCount:!1})),Zn=Tr.pipe((0,ae.w)(Sn=>new ve.y(Rn=>({unsubscribe:qt.runOutsideAngular(()=>Sn.onAuthStateChanged(Mn=>Rn.next(Mn),Mn=>Rn.error(Mn),()=>Rn.complete()))})))),Zt=Tr.pipe((0,ae.w)(Sn=>new ve.y(Rn=>({unsubscribe:qt.runOutsideAngular(()=>Sn.onIdTokenChanged(Mn=>Rn.next(Mn),Mn=>Rn.error(Mn),()=>Rn.complete()))}))));this.authState=hr.pipe(Ct(Zn),(0,Ge.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular)),this.user=hr.pipe(Ct(Zt),(0,Ge.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular)),this.idToken=this.user.pipe((0,ae.w)(Sn=>Sn?(0,Ee.D)(Sn.getIdToken()):(0,Q.of)(null))),this.idTokenResult=this.user.pipe((0,ae.w)(Sn=>Sn?(0,Ee.D)(Sn.getIdTokenResult()):(0,Q.of)(null))),this.credential=(0,be.T)(hr,Kn,this.authState.pipe((0,et.h)(Sn=>!Sn))).pipe((0,st.U)(Sn=>(null==Sn?void 0:Sn.user)?Sn:null),(0,Ge.R)(Wt.outsideAngular),(0,nt.Q)(Wt.insideAngular))}return(0,At.pX)(this,Tr,qt,{spy:{apply:(qn,hr,Zn)=>{(qn.startsWith("signIn")||qn.startsWith("createUser"))&&Zn.then(Zt=>Kn.next(Zt))}}})}}return Nt.\u0275fac=function(Ut){return new(Ut||Nt)(T.LFG(At.Dh),T.LFG(At.xv,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(Ie.HU),T.LFG(wt,8),T.LFG(J,8),T.LFG(Ze,8),T.LFG(oe,8),T.LFG(Se,8),T.LFG(xe,8),T.LFG(Ne.nm,8))},Nt.\u0275prov=T.Yz7({token:Nt,factory:Nt.\u0275fac,providedIn:"any"}),Nt})()},7407:(Mt,Ve,V)=>{V.d(Ve,{ST:()=>bm,yb:()=>fv});var T=V(5e3),Y=V(4986),Q=V(8306),ve=V(8996),Ee=V(9646),be=V(5813),Pe=V(4482),Me=V(5403);function Oe(){return(0,Pe.e)((i,e)=>{let t,s=!1;i.subscribe((0,Me.x)(e,c=>{const g=t;t=c,s&&e.next([g,c]),s=!0}))})}var J,le=V(8675),ae=V(4004),Ae=V(5026),Ct=V(1884),nt=V(9300),st=V(2011),Dt=V(9808),et=(V(9916),V(3942)),Ie=V(5861),At=V(9681),tt=V(4859),Ne=V(1877),ke=V(2090),Tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wt={},Ze=Ze||{},oe=Tt||self;function Se(){}function xe(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function We(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var vt="closure_uid_"+(1e9*Math.random()>>>0),Nt=0;function xt(i,e,t){return i.call.apply(i.bind,arguments)}function Ut(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function lt(i,e,t){return(lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xt:Ut).apply(null,arguments)}function cn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function qt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,c,g){for(var v=Array(arguments.length-2),x=2;x<arguments.length;x++)v[x-2]=arguments[x];return e.prototype[c].apply(s,v)}}function Wt(){this.s=this.s,this.o=this.o}var pn={};Wt.prototype.s=!1,Wt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function He(i){return Object.prototype.hasOwnProperty.call(i,vt)&&i[vt]||(i[vt]=++Nt)}(this);delete pn[i]}},Wt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},yn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,c="string"==typeof i?i.split(""):i;for(let g=0;g<s;g++)g in c&&e.call(t,c[g],g,i)};function Xn(i){return Array.prototype.concat.apply([],arguments)}function or(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Kn(i){return/^[\s\xa0]*$/.test(i)}var Zn,Tr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function qn(i,e){return-1!=i.indexOf(e)}function hr(i,e){return i<e?-1:i>e?1:0}e:{var Zt=oe.navigator;if(Zt){var Sn=Zt.userAgent;if(Sn){Zn=Sn;break e}}Zn=""}function Rn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function Mn(i){const e={};for(const t in i)e[t]=i[t];return e}var Wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function hi(i,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)i[t]=s[t];for(let g=0;g<Wi.length;g++)t=Wi[g],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Je(i){return Je[" "](i),i}Je[" "]=Se;var Jt,i,Ce=qn(Zn,"Opera"),dt=qn(Zn,"Trident")||qn(Zn,"MSIE"),Le=qn(Zn,"Edge"),pt=Le||dt,St=qn(Zn,"Gecko")&&!(qn(Zn.toLowerCase(),"webkit")&&!qn(Zn,"Edge"))&&!(qn(Zn,"Trident")||qn(Zn,"MSIE"))&&!qn(Zn,"Edge"),Dn=qn(Zn.toLowerCase(),"webkit")&&!qn(Zn,"Edge");function on(){var i=oe.document;return i?i.documentMode:void 0}e:{var Wr="",fr=(i=Zn,St?/rv:([^\);]+)(\)|;)/.exec(i):Le?/Edge\/([\d\.]+)/.exec(i):dt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Dn?/WebKit\/(\S+)/.exec(i):Ce?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(fr&&(Wr=fr?fr[1]:""),dt){var Nn=on();if(null!=Nn&&Nn>parseFloat(Wr)){Jt=String(Nn);break e}}Jt=Wr}var ie={};var ue=oe.document&&dt&&(on()||parseInt(Jt,10))||void 0,Re=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{oe.addEventListener("test",Se,e),oe.removeEventListener("test",Se,e)}catch(t){}return i}();function rt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function kt(i,e){if(rt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(St){e:{try{Je(e.nodeName);var c=!0;break e}catch(g){}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Yt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&kt.Z.h.call(this)}}rt.prototype.h=function(){this.defaultPrevented=!0},qt(kt,rt);var Yt={2:"touch",3:"pen",4:"mouse"};kt.prototype.h=function(){kt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),lr=0;function dn(i,e,t,s,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=c,this.key=++lr,this.ca=this.fa=!1}function Mr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Ur(i){this.src=i,this.g={},this.h=0}function ws(i,e){var t=e.type;if(t in i.g){var g,s=i.g[t],c=sn(s,e);(g=0<=c)&&Array.prototype.splice.call(s,c,1),g&&(Mr(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ai(i,e,t,s){for(var c=0;c<i.length;++c){var g=i[c];if(!g.ca&&g.listener==e&&g.capture==!!t&&g.ia==s)return c}return-1}Ur.prototype.add=function(i,e,t,s,c){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var v=Ai(i,e,s,c);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new dn(e,this.src,g,!!s,c)).fa=t,i.push(e)),e};var Qi="closure_lm_"+(1e6*Math.random()|0),En={};function mr(i,e,t,s,c){if(s&&s.once)return yr(i,e,t,s,c);if(Array.isArray(e)){for(var g=0;g<e.length;g++)mr(i,e[g],t,s,c);return null}return t=xi(t),i&&i[Xt]?i.N(e,t,We(s)?!!s.capture:!!s,c):fi(i,e,t,!1,s,c)}function fi(i,e,t,s,c,g){if(!e)throw Error("Invalid event type");var v=We(c)?!!c.capture:!!c,x=li(i);if(x||(i[Qi]=x=new Ur(i)),(t=x.add(e,t,s,v,g)).proxy)return t;if(s=function pi(){var e=Ji;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)Re||(c=v),void 0===c&&(c=!1),i.addEventListener(e.toString(),s,c);else if(i.attachEvent)i.attachEvent(Os(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function yr(i,e,t,s,c){if(Array.isArray(e)){for(var g=0;g<e.length;g++)yr(i,e[g],t,s,c);return null}return t=xi(t),i&&i[Xt]?i.O(e,t,We(s)?!!s.capture:!!s,c):fi(i,e,t,!0,s,c)}function ui(i,e,t,s,c){if(Array.isArray(e))for(var g=0;g<e.length;g++)ui(i,e[g],t,s,c);else s=We(s)?!!s.capture:!!s,t=xi(t),i&&i[Xt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ai(g=i.g[e],t,s,c))&&(Mr(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=li(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ai(e,t,s,c)),(t=-1<i?e[i]:null)&&Oo(t))}function Oo(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Xt])ws(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Os(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=li(e))?(ws(t,i),0==t.h&&(t.src=null,e[Qi]=null)):Mr(i)}}}function Os(i){return i in En?En[i]:En[i]="on"+i}function Ji(i,e){if(i.ca)i=!0;else{e=new kt(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&Oo(i),i=t.call(s,e)}return i}function li(i){return(i=i[Qi])instanceof Ur?i:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function xi(i){return"function"==typeof i?i:(i[cr]||(i[cr]=function(e){return i.handleEvent(e)}),i[cr])}function Yn(){Wt.call(this),this.i=new Ur(this),this.P=this,this.I=null}function bt(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new rt(e,i);else if(e instanceof rt)e.target=e.target||i;else{var c=e;hi(e=new rt(s,i),c)}if(c=!0,t)for(var g=t.length-1;0<=g;g--){var v=e.g=t[g];c=Ht(v,s,!0,e)&&c}if(c=Ht(v=e.g=i,s,!0,e)&&c,c=Ht(v,s,!1,e)&&c,t)for(g=0;g<t.length;g++)c=Ht(v=e.g=t[g],s,!1,e)&&c}function Ht(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,g=0;g<e.length;++g){var v=e[g];if(v&&!v.ca&&v.capture==t){var x=v.listener,U=v.ia||v.src;v.fa&&ws(i.i,v),c=!1!==x.call(U,s)&&c}}return c&&!s.defaultPrevented}qt(Yn,Wt),Yn.prototype[Xt]=!0,Yn.prototype.removeEventListener=function(i,e,t,s){ui(this,i,e,t,s)},Yn.prototype.M=function(){if(Yn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Mr(t[s]);delete i.g[e],i.h--}}this.I=null},Yn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Yn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var $n=oe.JSON.stringify;function ni(){var i=Ls;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Ar,Sr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new es,i=>i.reset());class es{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ar(i){oe.setTimeout(()=>{throw i},0)}function Ri(i,e){Ar||function hn(){var i=oe.Promise.resolve(void 0);Ar=function(){i.then(Is)}}(),ks||(Ar(),ks=!0),Ls.add(i,e)}var ks=!1,Ls=new class Xi{constructor(){this.h=this.g=null}add(e,t){const s=Sr.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Is(){for(var i;i=ni();){try{i.h.call(i.g)}catch(t){ar(t)}var e=Sr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}ks=!1}function Ii(i,e){Yn.call(this),this.h=i||1,this.g=e||oe,this.j=lt(this.kb,this),this.l=Date.now()}function pr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function te(i,e,t){if("function"==typeof i)t&&(i=lt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=lt(i.handleEvent,i)}return 2147483647<Number(e)?-1:oe.setTimeout(i,e||0)}function zr(i){i.g=te(()=>{i.g=null,i.i&&(i.i=!1,zr(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}qt(Ii,Yn),(J=Ii.prototype).da=!1,J.S=null,J.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),bt(this,"tick"),this.da&&(pr(this),this.start()))}},J.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},J.M=function(){Ii.Z.M.call(this),pr(this),delete this.g};class Vr extends Wt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zr(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(i){Wt.call(this),this.h=i,this.g={}}qt(Wn,Wt);var Cs=[];function ts(i,e,t,s){Array.isArray(t)||(t&&(Cs[0]=t.toString()),t=Cs);for(var c=0;c<t.length;c++){var g=mr(e,t[c],s||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function gi(i){Rn(i.g,function(e,t){this.g.hasOwnProperty(t)&&Oo(e)},i),i.g={}}function zi(){this.g=!0}function Kr(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function mo(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var g=c[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var v=1;v<c.length;v++)c[v]=""}}}return $n(t)}catch(x){return e}}(i,t)+(s?" "+s:"")})}Wn.prototype.M=function(){Wn.Z.M.call(this),gi(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zi.prototype.Aa=function(){this.g=!1},zi.prototype.info=function(){};var Us={},yo=null;function nr(){return yo=yo||new Yn}function bs(i){rt.call(this,Us.Ma,i)}function _o(i){const e=nr();bt(e,new bs(e,i))}function we(i,e){rt.call(this,Us.STAT_EVENT,i),this.stat=e}function fe(i){const e=nr();bt(e,new we(e,i))}function je(i,e){rt.call(this,Us.Na,i),this.size=e}function Xe(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){i()},e)}Us.Ma="serverreachability",qt(bs,rt),Us.STAT_EVENT="statevent",qt(we,rt),Us.Na="timingevent",qt(je,rt);var mt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ft={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function rr(){}function bn(){}rr.prototype.h=null;var ns,Ir={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Mi(){rt.call(this,"d")}function Ts(){rt.call(this,"c")}function yi(){}function Ss(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new Wn(this),this.P=Fa,this.W=new Ii(i=pt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zr}function Zr(){this.i=null,this.g="",this.h=!1}qt(Mi,rt),qt(Ts,rt),qt(yi,rr),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},ns=new yi;var Fa=45e3,ci={},Vs={};function ls(i,e,t){i.K=1,i.v=Ke(Un(e)),i.s=t,i.U=!0,ko(i,null)}function ko(i,e){i.F=Date.now(),Nr(i),i.A=Un(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),Fo(t.h,"t",s),i.C=0,t=i.l.H,i.h=new Zr,i.g=Ga(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Vr(lt(i.Ia,i,i.g),i.O)),ts(i.V,i.g,"readystatechange",i.gb),e=i.H?Mn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),_o(1),function Fs(i,e,t,s,c,g){i.info(function(){if(i.g)if(g)for(var v="",x=g.split("&"),U=0;U<x.length;U++){var $=x[U].split("=");if(1<$.length){var ee=$[0];$=$[1];var ge=ee.split("_");v=2<=ge.length&&"type"==ge[1]?v+(ee+"=")+$+"&":v+(ee+"=redacted&")}}else v=null;else v=g;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function ea(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function As(i,e,t){let c,s=!0;for(;!i.I&&i.C<t.length;){if(c=va(i,t),c==Vs){4==e&&(i.o=4,fe(14),s=!1),Kr(i.j,i.m,null,"[Incomplete Response]");break}if(c==ci){i.o=4,fe(15),Kr(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Kr(i.j,i.m,c,null),Ni(i,c)}ea(i)&&c!=Vs&&c!=ci&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,fe(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),zs(e),e.L=!0,fe(11))):(Kr(i.j,i.m,t,"[Invalid Chunked Response]"),Yr(i),ta(i))}function va(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Vs:(t=Number(e.substring(t,s)),isNaN(t)?ci:(s+=1)+t>e.length?Vs:(e=e.substr(s,t),i.C=s+t,e))}function Nr(i){i.Y=Date.now()+i.P,Lo(i,i.P)}function Lo(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Xe(lt(i.eb,i),e)}function Br(i){i.B&&(oe.clearTimeout(i.B),i.B=null)}function ta(i){0==i.l.G||i.I||ou(i.l,i)}function Yr(i){Br(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,pr(i.W),gi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Ni(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||er(t.i,i)))if(t.I=i.N,!i.J&&er(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch($){s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0])e:if(t.u)t.ta=c[1],0<t.ta-t.U&&37500>c[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xe(lt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;xn(t),is(t)}Bo(t),fe(18)}if(1>=Va(t.i)&&t.ka){try{t.ka()}catch($){}t.ka=void 0}}else Rs(t,11)}else if((i.J||t.g==i)&&xn(t),!Kn(e))for(c=t.Ca.g.parse(e),e=0;e<c.length;e++){let $=c[e];if(t.U=$[0],$=$[1],2==t.G)if("c"==$[0]){t.J=$[1],t.la=$[2];const ee=$[3];null!=ee&&(t.ma=ee,t.h.info("VER="+t.ma));const ge=$[4];null!=ge&&(t.za=ge,t.h.info("SVER="+t.za));const ze=$[5];null!=ze&&"number"==typeof ze&&0<ze&&(t.K=s=1.5*ze,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const ut=i.g;if(ut){const It=ut.g?ut.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(It){var g=s.i;!g.g&&(qn(It,"spdy")||qn(It,"quic")||qn(It,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(ia(g,g.h),g.h=null))}if(s.D){const Kt=ut.g?ut.g.getResponseHeader("X-HTTP-Session-Id"):null;Kt&&(s.sa=Kt,de(s.F,s.D,Kt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((s=t).oa=Ks(s,s.H?s.la:null,s.W),v.J){js(s.i,v);var x=v,U=s.K;U&&x.setTimeout(U),x.B&&(Br(x),Nr(x)),s.g=v}else Ru(s);0<t.l.length&&wn(t)}else"stop"!=$[0]&&"close"!=$[0]||Rs(t,7);else 3==t.G&&("stop"==$[0]||"close"==$[0]?"stop"==$[0]?Rs(t,7):ii(t):"noop"!=$[0]&&t.j&&t.j.wa($),t.A=0)}_o(4)}catch($){}}function na(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(xe(i)||"string"==typeof i)yn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(xe(i)||"string"==typeof i){t=[];for(var s=i.length,c=0;c<s;c++)t.push(c)}else for(c in t=[],s=0,i)t[s++]=c;s=function ri(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(xe(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),c=s.length;for(var g=0;g<c;g++)e.call(void 0,s[g],t&&t[g],i)}}function cs(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof cs)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function vo(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];rs(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var c={};for(t=e=0;e<i.g.length;)rs(c,s=i.g[e])||(i.g[t++]=s,c[s]=1),e++;i.g.length=t}}function rs(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(J=Ss.prototype).setTimeout=function(i){this.P=i},J.gb=function(i){i=i.target;const e=this.L;e&&3==Pn(i)?e.l():this.Ia(i)},J.Ia=function(i){try{if(i==this.g)e:{const ee=Pn(this.g);var e=this.g.Da();const ge=this.g.ba();if(!(3>ee)&&(3!=ee||pt||this.g&&(this.h.h||this.g.ga()||On(this.g)))){this.I||4!=ee||7==e||_o(8==e||0>=ge?3:2),Br(this);var t=this.g.ba();this.N=t;t:if(ea(this)){var s=On(this.g);i="";var c=s.length,g=4==Pn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Yr(this),ta(this);var v="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:g&&e==c-1});s.splice(0,c),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function Ds(i,e,t,s,c,g,v){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+g+" "+v})}(this.j,this.u,this.A,this.m,this.X,ee,t),this.i){if(this.$&&!this.J){t:{if(this.g){var x,U=this.g;if((x=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kn(x)){var $=x;break t}}$=null}if(!(t=$)){this.i=!1,this.o=3,fe(12),Yr(this),ta(this);break e}Kr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ni(this,t)}this.U?(As(this,ee,v),pt&&this.i&&3==ee&&(ts(this.V,this.W,"tick",this.fb),this.W.start())):(Kr(this.j,this.m,v,null),Ni(this,v)),4==ee&&Yr(this),this.i&&!this.I&&(4==ee?ou(this.l,this):(this.i=!1,Nr(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,fe(12)):(this.o=0,fe(13)),Yr(this),ta(this)}}}catch(ee){}},J.fb=function(){if(this.g){var i=Pn(this.g),e=this.g.ga();this.C<e.length&&(Br(this),As(this,i,e),this.i&&4!=i&&Nr(this))}},J.cancel=function(){this.I=!0,Yr(this)},J.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function mi(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(_o(3),fe(17)),Yr(this),this.o=2,ta(this)):Lo(this,this.Y-i)},(J=cs.prototype).R=function(){vo(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},J.T=function(){return vo(this),this.g.concat()},J.get=function(i,e){return rs(this.h,i)?this.h[i]:e},J.set=function(i,e){rs(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},J.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var c=t[s],g=this.get(c);i.call(e,g,c,this)}};var ra=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Eo(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Eo){this.g=void 0!==e?e:i.g,L(this,i.j),this.s=i.s,G(this,i.i),O(this,i.m),this.l=i.l,e=i.h;var t=new _i;t.i=e.i,e.g&&(t.g=new cs(e.g),t.h=e.h),Z(this,t),this.o=i.o}else i&&(t=String(i).match(ra))?(this.g=!!e,L(this,t[1]||"",!0),this.s=an(t[2]||""),G(this,t[3]||"",!0),O(this,t[4]),this.l=an(t[5]||"",!0),Z(this,t[6]||"",!0),this.o=an(t[7]||"")):(this.g=!!e,this.h=new _i(null,this.g))}function Un(i){return new Eo(i)}function L(i,e,t){i.j=t?an(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function G(i,e,t){i.i=t?an(e,!0):e}function O(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Z(i,e,t){e instanceof _i?(i.h=e,function wa(i,e){e&&!i.j&&(zt(i),i.i=null,i.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(Bs(this,s),Fo(this,c,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Hn(e,_r)),i.h=new _i(e,i.g))}function de(i,e,t){i.h.set(e,t)}function Ke(i){return de(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function an(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Hn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Cn),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Cn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Eo.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Hn(e,An,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Hn(e,An,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Hn(t,"/"==t.charAt(0)?ir:Pr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Hn(t,Pi)),i.join("")};var An=/[#\/\?@]/g,Pr=/[#\?:]/g,ir=/[#\?]/g,_r=/[#\?@]/g,Pi=/#/g;function _i(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function zt(i){i.g||(i.g=new cs,i.h=0,i.i&&function ds(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),c=null;if(0<=s){var g=i[t].substring(0,s);c=i[t].substring(s+1)}else g=i[t];e(g,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bs(i,e){zt(i),e=io(i,e),rs(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,rs((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&vo(i)))}function Ea(i,e){return zt(i),e=io(i,e),rs(i.g.h,e)}function Fo(i,e,t){Bs(i,e),0<t.length&&(i.i=null,i.g.set(io(i,e),or(t)),i.h+=t.length)}function io(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ua(i){this.l=i||gt,i=oe.PerformanceNavigationTiming?0<(i=oe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(oe.g&&oe.g.Ea&&oe.g.Ea()&&oe.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(J=_i.prototype).add=function(i,e){zt(this),this.i=null,i=io(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},J.forEach=function(i,e){zt(this),this.g.forEach(function(t,s){yn(t,function(c){i.call(e,c,s,this)},this)},this)},J.T=function(){zt(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var c=i[s],g=0;g<c.length;g++)t.push(e[s]);return t},J.R=function(i){zt(this);var e=[];if("string"==typeof i)Ea(this,i)&&(e=Xn(e,this.g.get(io(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=Xn(e,i[t])}return e},J.set=function(i,e){return zt(this),this.i=null,Ea(this,i=io(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},J.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},J.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],c=encodeURIComponent(String(s));s=this.R(s);for(var g=0;g<s.length;g++){var v=c;""!==s[g]&&(v+="="+encodeURIComponent(String(s[g]))),i.push(v)}}return this.i=i.join("&")};var gt=10;function Vn(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Va(i){return i.h?1:i.g?i.g.size:0}function er(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function ia(i,e){i.g?i.g.add(e):i.h=e}function js(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Hs(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return or(i.i)}function wo(){}function $s(){this.g=new wo}function jl(i,e,t){const s=t||"";try{na(i,function(c,g){let v=c;We(c)&&(v=$n(c)),e.push(s+g+"="+encodeURIComponent(v))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function sa(i,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch(g){}}function oa(i){this.l=i.$b||null,this.j=i.ib||!1}function Qr(i,e){Yn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=xs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ua.prototype.cancel=function(){if(this.i=Hs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},wo.prototype.stringify=function(i){return oe.JSON.stringify(i,void 0)},wo.prototype.parse=function(i){return oe.JSON.parse(i,void 0)},qt(oa,rr),oa.prototype.g=function(){return new Qr(this.l,this.j)},oa.prototype.i=function(i){return function(){return i}}({}),qt(Qr,Yn);var xs=0;function Ia(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Gs(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ki(i)}function Ki(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(J=Qr.prototype).open=function(i,e){if(this.readyState!=xs)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ki(this)},J.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||oe).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},J.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Gs(this)),this.readyState=xs},J.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ki(this)),this.g&&(this.readyState=3,Ki(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==oe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ia(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},J.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Gs(this):Ki(this),3==this.readyState&&Ia(this)}},J.Ua=function(i){this.g&&(this.response=this.responseText=i,Gs(this))},J.Ta=function(i){this.g&&(this.response=i,Gs(this))},J.ha=function(){this.g&&Gs(this)},J.setRequestHeader=function(i,e){this.v.append(i,e)},J.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},J.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Su=oe.JSON.parse;function Or(i){Yn.call(this),this.headers=new cs,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ru,this.K=this.L=!1}qt(Or,Yn);var ru="",iu=/^https?$/i,Ba=["POST","PUT"];function ja(i){return"content-type"==i.toLowerCase()}function Ha(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Au(i),so(i)}function Au(i){i.D||(i.D=!0,bt(i,"complete"),bt(i,"error"))}function Uo(i){if(i.h&&void 0!==Ze&&(!i.C[1]||4!=Pn(i)||2!=i.ba()))if(i.v&&4==Pn(i))te(i.Fa,0,i);else if(bt(i,"readystatechange"),4==Pn(i)){i.h=!1;try{const x=i.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===x){var c=String(i.H).match(ra)[1]||null;if(!c&&oe.self&&oe.self.location){var g=oe.self.location.protocol;c=g.substr(0,g.length-1)}s=!iu.test(c?c.toLowerCase():"")}t=s}if(t)bt(i,"complete"),bt(i,"success");else{i.m=6;try{var v=2<Pn(i)?i.g.statusText:""}catch(U){v=""}i.j=v+" ["+i.ba()+"]",Au(i)}}finally{so(i)}}}function so(i,e){if(i.g){aa(i);const t=i.g,s=i.C[0]?Se:null;i.g=null,i.C=null,e||bt(i,"ready");try{t.onreadystatechange=s}catch(c){}}}function aa(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(oe.clearTimeout(i.A),i.A=null)}function Pn(i){return i.g?i.g.readyState:0}function On(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case ru:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function hs(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function Tn(i){let e="";return Rn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):de(i,e,t))}function Qn(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function xu(i){this.za=0,this.l=[],this.h=new zi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Qn("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Qn("baseRetryDelayMs",5e3,i),this.$a=Qn("retryDelaySeedMs",1e4,i),this.Ya=Qn("forwardChannelMaxRetries",2,i),this.ra=Qn("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Ua(i&&i.concurrentRequestLimit),this.Ca=new $s,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ii(i){if(Jr(i),3==i.G){var e=i.V++,t=Un(i.F);de(t,"SID",i.J),de(t,"RID",e),de(t,"TYPE","terminate"),Vo(i,t),(e=new Ss(i,i.h,e,void 0)).K=2,e.v=Ke(Un(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon&&(t=oe.navigator.sendBeacon(e.v.toString(),"")),!t&&oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ga(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Nr(e)}$a(i)}function is(i){i.g&&(zs(i),i.g.cancel(),i.g=null)}function Jr(i){is(i),i.u&&(oe.clearTimeout(i.u),i.u=null),xn(i),i.i.cancel(),i.m&&("number"==typeof i.m&&oe.clearTimeout(i.m),i.m=null)}function kr(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&wn(i)}function wn(i){Vn(i.i)||i.m||(i.m=!0,Ri(i.Ha,i),i.C=0)}function pc(i,e){var t;t=e?e.m:i.V++;const s=Un(i.F);de(s,"SID",i.J),de(s,"RID",t),de(s,"AID",i.U),Vo(i,s),i.o&&i.s&&hs(s,i.o,i.s),t=new Ss(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Ws(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),ia(i.i,t),ls(t,s,e)}function Vo(i,e){i.j&&na({},function(t,s){de(e,s,t)})}function Ws(i,e,t){t=Math.min(i.l.length,t);var s=i.j?lt(i.j.Oa,i.j,i):null;e:{var c=i.l;let g=-1;for(;;){const v=["count="+t];-1==g?0<t?(g=c[0].h,v.push("ofs="+g)):g=0:v.push("ofs="+g);let x=!0;for(let U=0;U<t;U++){let $=c[U].h;const ee=c[U].g;if($-=g,0>$)g=Math.max(0,c[U].h-100),x=!1;else try{jl(ee,v,"req"+$+"_")}catch(ge){s&&s(ee)}}if(x){s=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function Ru(i){i.g||i.u||(i.Y=1,Ri(i.Ga,i),i.A=0)}function Bo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Xe(lt(i.Ga,i),ps(i,i.A)),i.A++,0))}function zs(i){null!=i.B&&(oe.clearTimeout(i.B),i.B=null)}function ua(i){i.g=new Ss(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Un(i.oa);de(e,"RID","rpc"),de(e,"SID",i.J),de(e,"CI",i.N?"0":"1"),de(e,"AID",i.U),Vo(i,e),de(e,"TYPE","xmlhttp"),i.o&&i.s&&hs(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Ke(Un(e)),t.s=null,t.U=!0,ko(t,i)}function xn(i){null!=i.v&&(oe.clearTimeout(i.v),i.v=null)}function ou(i,e){var t=null;if(i.g==e){xn(i),zs(i),i.g=null;var s=2}else{if(!er(i.i,e))return;t=e.D,js(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;bt(s=nr(),new je(s,t,e,c)),wn(i)}else Ru(i);else if(3==(c=e.o)||0==c&&0<i.I||!(1==s&&function fs(i,e){return!(Va(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Xe(lt(i.Ha,i,e),ps(i,i.C)),i.C++,0)))}(i,e)||2==s&&Bo(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),c){case 1:Rs(i,5);break;case 4:Rs(i,10);break;case 3:Rs(i,6);break;default:Rs(i,2)}}function ps(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Rs(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=lt(i.jb,i);t||(t=new Eo("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||L(t,"https"),Ke(t)),function nl(i,e){const t=new zi;if(oe.Image){const s=new Image;s.onload=cn(sa,t,s,"TestLoadImage: loaded",!0,e),s.onerror=cn(sa,t,s,"TestLoadImage: error",!1,e),s.onabort=cn(sa,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=cn(sa,t,s,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else fe(2);i.G=0,i.j&&i.j.va(e),$a(i),Jr(i)}function $a(i){i.G=0,i.I=-1,i.j&&((0!=Hs(i.i).length||0!=i.l.length)&&(i.i.i.length=0,or(i.l),i.l.length=0),i.j.ua())}function Ks(i,e,t){let s=function ct(i){return i instanceof Eo?Un(i):new Eo(i,void 0)}(t);if(""!=s.i)e&&G(s,e+"."+s.i),O(s,s.m);else{const c=oe.location;s=function $t(i,e,t,s){var c=new Eo(null,void 0);return i&&L(c,i),e&&G(c,e),t&&O(c,t),s&&(c.l=s),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,t)}return i.aa&&Rn(i.aa,function(c,g){de(s,g,c)}),t=i.sa,(e=i.D)&&t&&de(s,e,t),de(s,"VER",i.ma),Vo(i,s),s}function Ga(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&i.Ba&&!i.qa?new oa({ib:!0}):i.qa)).L=i.H,e}function jo(){}function Wa(){if(dt&&!(10<=Number(ue)))throw Error("Environmental error: no available transport.")}function gs(i,e){Yn.call(this),this.g=new xu(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Kn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Kn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new xr(this)}function la(i){Mi.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function kn(){Ts.call(this),this.status=1}function xr(i){this.g=i}(J=Or.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ns.g(),this.C=function qr(i){return i.h||(i.h=i.i())}(this.u?this.u:ns),this.g.onreadystatechange=lt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void Ha(this,g)}i=t||"";const c=new cs(this.headers);s&&na(s,function(g,v){c.set(v,g)}),s=function ur(i){e:{var e=ja;const t=i.length,s="string"==typeof i?i.split(""):i;for(let c=0;c<t;c++)if(c in s&&e.call(void 0,s[c],c,i)){e=c;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(c.T()),t=oe.FormData&&i instanceof oe.FormData,!(0<=sn(Ba,e))||s||t||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(g,v){this.g.setRequestHeader(v,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{aa(this),0<this.B&&((this.K=function su(i){return dt&&function he(){return function me(i){var e=ie;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Tr(String(Jt)).split("."),t=Tr("9").split("."),s=Math.max(e.length,t.length);for(let v=0;0==i&&v<s;v++){var c=e[v]||"",g=t[v]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==c[0].length&&0==g[0].length)break;i=hr(0==c[1].length?0:parseInt(c[1],10),0==g[1].length?0:parseInt(g[1],10))||hr(0==c[2].length,0==g[2].length)||hr(c[2],g[2]),c=c[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=lt(this.pa,this)):this.A=te(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){Ha(this,g)}},J.pa=function(){void 0!==Ze&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))},J.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,bt(this,"complete"),bt(this,"abort"),so(this))},J.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),so(this,!0)),Or.Z.M.call(this)},J.Fa=function(){this.s||(this.F||this.v||this.l?Uo(this):this.cb())},J.cb=function(){Uo(this)},J.ba=function(){try{return 2<Pn(this)?this.g.status:-1}catch(i){return-1}},J.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},J.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Su(e)}},J.Da=function(){return this.m},J.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(J=xu.prototype).ma=8,J.G=1,J.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},J.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const c=new Ss(this,this.h,i,void 0);let g=this.s;if(this.P&&(g?(g=Mn(g),hi(g,this.P)):g=this.P),null===this.o&&(c.H=g),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Ws(this,c,e),de(t=Un(this.F),"RID",i),de(t,"CVER",22),this.D&&de(t,"X-HTTP-Session-Id",this.D),Vo(this,t),this.o&&g&&hs(t,this.o,g),ia(this.i,c),this.Ra&&de(t,"TYPE","init"),this.ja?(de(t,"$req",e),de(t,"SID","null"),c.$=!0,ls(c,t,null)):ls(c,t,e),this.G=2}}else 3==this.G&&(i?pc(this,i):0==this.l.length||Vn(this.i)||pc(this))},J.Ga=function(){if(this.u=null,ua(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Xe(lt(this.bb,this),i)}},J.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,fe(10),is(this),ua(this))},J.ab=function(){null!=this.v&&(this.v=null,is(this),Bo(this),fe(19))},J.jb=function(i){i?(this.h.info("Successfully pinged google.com"),fe(2)):(this.h.info("Failed to ping google.com"),fe(1))},(J=jo.prototype).xa=function(){},J.wa=function(){},J.va=function(){},J.ua=function(){},J.Oa=function(){},Wa.prototype.g=function(i,e){return new gs(i,e)},qt(gs,Yn),gs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ri(lt(i.hb,i,e))),fe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Ks(i,null,i.W),wn(i)},gs.prototype.close=function(){ii(this.g)},gs.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,kr(this.g,e)}else this.v?((e={}).__data__=$n(i),kr(this.g,e)):kr(this.g,i)},gs.prototype.M=function(){this.g.j=null,delete this.j,ii(this.g),delete this.g,gs.Z.M.call(this)},qt(la,Mi),qt(kn,Ts),qt(xr,jo),xr.prototype.xa=function(){bt(this.g,"a")},xr.prototype.wa=function(i){bt(this.g,new la(i))},xr.prototype.va=function(i){bt(this.g,new kn(i))},xr.prototype.ua=function(){bt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,gs.prototype.send=gs.prototype.u,gs.prototype.open=gs.prototype.m,gs.prototype.close=gs.prototype.close,mt.NO_ERROR=0,mt.TIMEOUT=8,mt.HTTP_ERROR=6,Ft.COMPLETE="complete",bn.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",Yn.prototype.listen=Yn.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var Ca=wt.createWebChannelTransport=function(){return new Wa},Ho=wt.getStatEventTarget=function(){return nr()},jr=wt.ErrorCode=mt,za=wt.EventType=Ft,qs=wt.Event=Us,oo=wt.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qi=wt.FetchXmlHttpFactory=oa,vr=wt.WebChannel=bn,Da=wt.XhrIo=Or;const ao="@firebase/firestore";class vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vi.UNAUTHENTICATED=new vi(null),vi.GOOGLE_CREDENTIALS=new vi("google-credentials-uid"),vi.FIRST_PARTY=new vi("first-party-uid"),vi.MOCK_USER=new vi("mock-user");let Io="9.8.3";const Co=new Ne.Yd("@firebase/firestore");function Ka(){return Co.logLevel}function _t(i,...e){if(Co.logLevel<=Ne.in.DEBUG){const t=e.map($o);Co.debug(`Firestore (${Io}): ${i}`,...t)}}function Er(i,...e){if(Co.logLevel<=Ne.in.ERROR){const t=e.map($o);Co.error(`Firestore (${Io}): ${i}`,...t)}}function Do(i,...e){if(Co.logLevel<=Ne.in.WARN){const t=e.map($o);Co.warn(`Firestore (${Io}): ${i}`,...t)}}function $o(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function b(i="Unexpected state"){const e=`FIRESTORE (${Io}) INTERNAL ASSERTION FAILED: `+i;throw Er(e),new Error(e)}function I(i,e){i||b()}function R(i,e){return i}const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends ke.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ne{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pe{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ye{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vi.UNAUTHENTICATED))}shutdown(){}}class ht{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Bn{constructor(e){this.t=e,this.currentUser=vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const g=$=>this.i!==c?(c=this.i,t($)):Promise.resolve();let v=new ne;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ne,e.enqueueRetryable(()=>g(this.currentUser))};const x=()=>{const $=v;e.enqueueRetryable((0,Ie.Z)(function*(){yield $.promise,yield g(s.currentUser)}))},U=$=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit($=>U($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?U($):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ne)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(I("string"==typeof s.accessToken),new pe(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return I(null===e||"string"==typeof e),new vi(e)}}class Bt{constructor(e,t,s){this.type="FirstParty",this.user=vi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const c=e.auth.getAuthHeaderValueForFirstParty([]);c&&this.headers.set("Authorization",c),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class tr{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Bt(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ss{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=g=>{null!=g.error&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const v=g.token!==this.p;return this.p=g.token,_t("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const c=g=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>c(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?c(g):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(I("string"==typeof t.token),this.p=t.token,new Qt(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Go(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ms{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=Go(40);for(let g=0;g<c.length;++g)s.length<20&&c[g]<t&&(s+=e.charAt(c[g]%e.length))}return s}}function tn(i,e){return i<e?-1:i>e?1:0}function Zs(i,e,t){return i.length===e.length&&i.every((s,c)=>t(s,e[c]))}function Mu(i){return i+"\0"}class Cr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Cr.fromMillis(Date.now())}static fromDate(e){return Cr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Cr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tn(this.nanoseconds,e.nanoseconds):tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new Cr(0,0))}static max(){return new un(new Cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rl{constructor(e,t,s){void 0===t?t=0:t>e.length&&b(),void 0===s?s=e.length-t:s>e.length-t&&b(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===rl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const g=e.get(c),v=t.get(c);if(g<v)return-1;if(g>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class zn extends rl{construct(e,t,s){return new zn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new zn(t)}static emptyPath(){return new zn([])}}const Dr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xr extends rl{construct(e,t,s){return new Xr(e,t,s)}static isValidIdentifier(e){return Dr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xr(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const g=()=>{if(0===s.length)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let v=!1;for(;c<e.length;){const x=e[c];if("\\"===x){if(c+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const U=e[c+1];if("\\"!==U&&"."!==U&&"`"!==U)throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=U,c+=2}else"`"===x?(v=!v,c++):"."!==x||v?(s+=x,c++):(g(),c++)}if(g(),v)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xr(t)}static emptyPath(){return new Xr([])}}class Lt{constructor(e){this.path=e}static fromPath(e){return new Lt(zn.fromString(e))}static fromName(e){return new Lt(zn.fromString(e).popFirst(5))}static empty(){return new Lt(zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===zn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Lt(new zn(e.slice()))}}class gc{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Dl(i){return i.fields.find(e=>2===e.kind)}function Wo(i){return i.fields.filter(e=>2!==e.kind)}gc.UNKNOWN_ID=-1;class il{constructor(e,t){this.fieldPath=e,this.kind=t}}class au{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new au(0,sr.min())}}function Nu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=un.fromTimestamp(1e9===s?new Cr(t+1,0):new Cr(t,s));return new sr(c,Lt.empty(),e)}function nd(i){return new sr(i.readTime,i.key,-1)}class sr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new sr(un.min(),Lt.empty(),-1)}static max(){return new sr(un.max(),Lt.empty(),-1)}}function uu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Lt.comparator(i.documentKey,e.documentKey),0!==t?t:tn(i.largestBatchId,e.largestBatchId))}const qa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ca(i){return os.apply(this,arguments)}function os(){return os=(0,Ie.Z)(function*(i){if(i.code!==M.FAILED_PRECONDITION||i.message!==qa)throw i;_t("LocalStore","Unexpectedly lost primary lease")}),os.apply(this,arguments)}class Be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&b(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Be((s,c)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,c)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Be?t:Be.resolve(t)}catch(t){return Be.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Be.reject(t)}static resolve(e){return new Be((t,s)=>{t(e)})}static reject(e){return new Be((t,s)=>{s(e)})}static waitFor(e){return new Be((t,s)=>{let c=0,g=0,v=!1;e.forEach(x=>{++c,x.next(()=>{++g,v&&g===c&&t()},U=>s(U))}),v=!0,g===c&&t()})}static or(e){let t=Be.resolve(!1);for(const s of e)t=t.next(c=>c?Be.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,g)=>{s.push(t.call(this,c,g))}),this.waitFor(s)}static mapArray(e,t){return new Be((s,c)=>{const g=e.length,v=new Array(g);let x=0;for(let U=0;U<g;U++){const $=U;t(e[$]).next(ee=>{v[$]=ee,++x,x===g&&s(v)},ee=>c(ee))}})}static doWhile(e,t){return new Be((s,c)=>{const g=()=>{!0===e()?t().next(()=>{g()},c):s()};g()})}}class Ta{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ne,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new uo(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const c=Pu(s.target.error);this.T.reject(new uo(e,c))}}static open(e,t,s,c){try{return new Ta(t,e.transaction(c,s))}catch(g){throw new uo(t,g)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(_t("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zo(t)}}class Oi{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===Oi.v((0,ke.z$)())&&Er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return _t("SimpleDb","Removing database:",e),To(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,ke.hl)())return!1;if(Oi.S())return!0;const e=(0,ke.z$)(),t=Oi.v(e),s=0<t&&t<10,c=Oi.D(e),g=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(_t("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=v=>{s(v.target.result)},g.onblocked=()=>{c(new uo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=v=>{const x=v.target.error;c("VersionError"===x.name?new B(M.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new B(M.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new uo(e,x))},g.onupgradeneeded=v=>{_t("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.P.O(v.target.result,g.transaction,v.oldVersion,t.version).next(()=>{_t("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var g=this;return(0,Ie.Z)(function*(){const v="readonly"===t;let x=0;for(;;){++x;try{g.db=yield g.k(e);const U=Ta.open(g.db,e,v?"readonly":"readwrite",s),$=c(U).next(ee=>(U.R(),ee)).catch(ee=>(U.abort(ee),Be.reject(ee))).toPromise();return $.catch(()=>{}),yield U.A,$}catch(U){const $="FirebaseError"!==U.name&&x<3;if(_t("SimpleDb","Transaction failed with error:",U.message,"Retrying:",$),g.close(),!$)return Promise.reject(U)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class lu{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return To(this.$.delete())}}class uo extends B{constructor(e,t){super(M.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ki(i){return"IndexedDbTransactionError"===i.name}class zo{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(_t("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(_t("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),To(s)}add(e){return _t("SimpleDb","ADD",this.store.name,e,e),To(this.store.add(e))}get(e){return To(this.store.get(e)).next(t=>(void 0===t&&(t=null),_t("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return _t("SimpleDb","DELETE",this.store.name,e),To(this.store.delete(e))}count(){return _t("SimpleDb","COUNT",this.store.name),To(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),g=[];return this.G(c,(v,x)=>{g.push(x)}).next(()=>g)}{const c=this.store.getAll(s.range);return new Be((g,v)=>{c.onerror=x=>{v(x.target.error)},c.onsuccess=x=>{g(x.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Be((c,g)=>{s.onerror=v=>{g(v.target.error)},s.onsuccess=v=>{c(v.target.result)}})}W(e,t){_t("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const c=this.cursor(s);return this.G(c,(g,v,x)=>x.delete())}J(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.G(c,t)}Y(e){const t=this.cursor({});return new Be((s,c)=>{t.onerror=g=>{const v=Pu(g.target.error);c(v)},t.onsuccess=g=>{const v=g.target.result;v?e(v.primaryKey,v.value).next(x=>{x?v.continue():s()}):s()}})}G(e,t){const s=[];return new Be((c,g)=>{e.onerror=v=>{g(v.target.error)},e.onsuccess=v=>{const x=v.target.result;if(!x)return void c();const U=new lu(x),$=t(x.primaryKey,x.value,U);if($ instanceof Be){const ee=$.catch(ge=>(U.done(),Be.reject(ge)));s.push(ee)}U.isDone?c():null===U.U?x.continue():x.continue(U.U)}}).next(()=>Be.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function To(i){return new Be((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const c=Pu(s.target.error);t(c)}})}let Hl=!1;function Pu(i){const e=Oi.v((0,ke.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new B("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Hl||(Hl=!0,setTimeout(()=>{throw s},0)),s}}return i}class lo{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;_t("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{_t("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){ki(s)?_t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield ca(s)}yield t.Z(1)}))}}class bl{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let c=t,g=!0;return Be.doWhile(()=>!0===g&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return _t("IndexBackiller",`Processing collection: ${v}`),this.nt(e,v,c).next(x=>{c-=x,s.add(v)});g=!1})).next(()=>t-c)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(g=>{const v=g.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.st(c,g)).next(x=>(_t("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>v.size)}))}st(e,t){let s=e;return t.changes.forEach((c,g)=>{const v=nd(g);uu(v,s)>0&&(s=v)}),new sr(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Li{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function rd(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Fi(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Ko(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Li.ot=-1;class Hr{constructor(e,t){this.comparator=e,this.root=t||Ci.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ci.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Za(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Za(this.root,e,this.comparator,!1)}getReverseIterator(){return new Za(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Za(this.root,e,this.comparator,!0)}}class Za{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&c&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ci{constructor(e,t,s,c,g){this.key=e,this.value=t,this.color=null!=s?s:Ci.RED,this.left=null!=c?c:Ci.EMPTY,this.right=null!=g?g:Ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,g){return new Ci(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const g=s(e,c.key);return c=g<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===g?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return Ci.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw b();const e=this.left.check();if(e!==this.right.check())throw b();return e+(this.isRed()?0:1)}}Ci.EMPTY=null,Ci.RED=!0,Ci.BLACK=!1,Ci.EMPTY=new class{constructor(){this.size=0}get key(){throw b()}get value(){throw b()}get color(){throw b()}get left(){throw b()}get right(){throw b()}copy(i,e,t,s,c){return this}insert(i,e,t){return new Ci(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qo(this.data.getIterator())}getIteratorFrom(e){return new qo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(c,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class qo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ui(i){return i.hasNext()?i.getNext():void 0}class Lr{constructor(e){this.fields=e,e.sort(Xr.comparator)}static empty(){return new Lr([])}unionWith(e){let t=new jn(Xr.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Lr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ei(t)}static fromUint8Array(e){const t=function(s){let c="";for(let g=0;g<s.length;++g)c+=String.fromCharCode(s[g]);return c}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const Sa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function co(i){if(I(!!i),"string"==typeof i){let e=0;const t=Sa.exec(i);if(I(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:si(i.seconds),nanos:si(i.nanos)}}function si(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function P(i){return"string"==typeof i?ei.fromBase64String(i):ei.fromUint8Array(i)}function F(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function K(i){const e=i.mapValue.fields.__previous_value__;return F(e)?K(e):e}function se(i){const e=co(i.mapValue.fields.__local_write_time__.timestampValue);return new Cr(e.seconds,e.nanos)}class Te{constructor(e,t,s,c,g,v,x,U){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=g,this.forceLongPolling=v,this.autoDetectLongPolling=x,this.useFetchStreams=U}}class Ue{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ue("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ue&&e.projectId===this.projectId&&e.database===this.database}}function yt(i){return null==i}function ft(i){return 0===i&&1/i==-1/0}function nn(i){return"number"==typeof i&&Number.isInteger(i)&&!ft(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const vn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gn={nullValue:"NULL_VALUE"};function en(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?F(i)?4:yc(i)?9007199254740991:10:b()}function Fr(i,e){if(i===e)return!0;const t=en(i);if(t!==en(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return se(i).isEqual(se(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const g=co(s.timestampValue),v=co(c.timestampValue);return g.seconds===v.seconds&&g.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,P(i.bytesValue).isEqual(P(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,c){return si(s.geoPointValue.latitude)===si(c.geoPointValue.latitude)&&si(s.geoPointValue.longitude)===si(c.geoPointValue.longitude)}(i,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return si(s.integerValue)===si(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const g=si(s.doubleValue),v=si(c.doubleValue);return g===v?ft(g)===ft(v):isNaN(g)&&isNaN(v)}return!1}(i,e);case 9:return Zs(i.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:return function(s,c){const g=s.mapValue.fields||{},v=c.mapValue.fields||{};if(rd(g)!==rd(v))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(void 0===v[x]||!Fr(g[x],v[x])))return!1;return!0}(i,e);default:return b()}var c}function oi(i,e){return void 0!==(i.values||[]).find(t=>Fr(t,e))}function Ys(i,e){if(i===e)return 0;const t=en(i),s=en(e);if(t!==s)return tn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return tn(i.booleanValue,e.booleanValue);case 2:return function(c,g){const v=si(c.integerValue||c.doubleValue),x=si(g.integerValue||g.doubleValue);return v<x?-1:v>x?1:v===x?0:isNaN(v)?isNaN(x)?0:-1:1}(i,e);case 3:return Vi(i.timestampValue,e.timestampValue);case 4:return Vi(se(i),se(e));case 5:return tn(i.stringValue,e.stringValue);case 6:return function(c,g){const v=P(c),x=P(g);return v.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(c,g){const v=c.split("/"),x=g.split("/");for(let U=0;U<v.length&&U<x.length;U++){const $=tn(v[U],x[U]);if(0!==$)return $}return tn(v.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,g){const v=tn(si(c.latitude),si(g.latitude));return 0!==v?v:tn(si(c.longitude),si(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,g){const v=c.values||[],x=g.values||[];for(let U=0;U<v.length&&U<x.length;++U){const $=Ys(v[U],x[U]);if($)return $}return tn(v.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,g){if(c===vn.mapValue&&g===vn.mapValue)return 0;if(c===vn.mapValue)return 1;if(g===vn.mapValue)return-1;const v=c.fields||{},x=Object.keys(v),U=g.fields||{},$=Object.keys(U);x.sort(),$.sort();for(let ee=0;ee<x.length&&ee<$.length;++ee){const ge=tn(x[ee],$[ee]);if(0!==ge)return ge;const ze=Ys(v[x[ee]],U[$[ee]]);if(0!==ze)return ze}return tn(x.length,$.length)}(i.mapValue,e.mapValue);default:throw b()}}function Vi(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return tn(i,e);const t=co(i),s=co(e),c=tn(t.seconds,s.seconds);return 0!==c?c:tn(t.nanos,s.nanos)}function Bi(i){return da(i)}function da(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const c=co(s);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?P(i.bytesValue).toBase64():"referenceValue"in i?Lt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let c="[",g=!0;for(const v of s.values||[])g?g=!1:c+=",",c+=da(v);return c+"]"}(i.arrayValue):"mapValue"in i?function(s){const c=Object.keys(s.fields||{}).sort();let g="{",v=!0;for(const x of c)v?v=!1:g+=",",g+=`${x}:${da(s.fields[x])}`;return g+"}"}(i.mapValue):b();var e}function ys(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function ha(i){return!!i&&"integerValue"in i}function ho(i){return!!i&&"arrayValue"in i}function fa(i){return!!i&&"nullValue"in i}function cu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $l(i){return!!i&&"mapValue"in i}function Tl(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Fi(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Tl(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tl(i.arrayValue.values[t]);return e}return Object.assign({},i)}function yc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Sl(i){return"nullValue"in i?Gn:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?ys(Ue.empty(),Lt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:b()}function Al(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?ys(Ue.empty(),Lt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?vn:b()}function id(i,e){const t=Ys(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function sd(i,e){const t=Ys(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class _s{constructor(e){this.value=e}static empty(){return new _s({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$l(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tl(t)}setAll(e){let t=Xr.emptyPath(),s={},c=[];e.forEach((v,x)=>{if(!t.isImmediateParentOf(x)){const U=this.getFieldsMap(t);this.applyChanges(U,s,c),s={},c=[],t=x.popLast()}v?s[x.lastSegment()]=Tl(v):c.push(x.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,c)}delete(e){const t=this.field(e.popLast());$l(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];$l(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Fi(t,(c,g)=>e[c]=g);for(const c of s)delete e[c]}clone(){return new _s(Tl(this.value))}}function Kd(i){const e=[];return Fi(i.fields,(t,s)=>{const c=new Xr([t]);if($l(s)){const g=Kd(s.mapValue).fields;if(0===g.length)e.push(c);else for(const v of g)e.push(c.child(v))}else e.push(c)}),new Lr(e)}class ti{constructor(e,t,s,c,g,v){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.data=g,this.documentState=v}static newInvalidDocument(e){return new ti(e,0,un.min(),un.min(),_s.empty(),0)}static newFoundDocument(e,t,s){return new ti(e,1,t,un.min(),s,0)}static newNoDocument(e,t){return new ti(e,2,t,un.min(),_s.empty(),0)}static newUnknownDocument(e,t){return new ti(e,3,t,un.min(),_s.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_s.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_s.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Jh{constructor(e,t=null,s=[],c=[],g=null,v=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=g,this.startAt=v,this.endAt=x,this.ut=null}}function Gl(i,e=null,t=[],s=[],c=null,g=null,v=null){return new Jh(i,e,t,s,c,g,v)}function Ya(i){const e=R(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(c=s).field.canonicalString()+c.op.toString()+Bi(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),yt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Bi(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Bi(s)).join(",")),e.ut=t}return e.ut}function Ou(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!Qa(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(s=e.filters[c]).op||!t.field.isEqual(s.field)||!Fr(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Jd(i.startAt,e.startAt)&&Jd(i.endAt,e.endAt)}function pa(i){return Lt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function _c(i,e){return i.filters.filter(t=>t instanceof ji&&t.field.isEqual(e))}function vc(i,e,t){let s=Gn,c=!0;for(const g of _c(i,e)){let v=Gn,x=!0;switch(g.op){case"<":case"<=":v=Sl(g.value);break;case"==":case"in":case">=":v=g.value;break;case">":v=g.value,x=!1;break;case"!=":case"not-in":v=Gn}id({value:s,inclusive:c},{value:v,inclusive:x})<0&&(s=v,c=x)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const v=t.position[g];id({value:s,inclusive:c},{value:v,inclusive:t.inclusive})<0&&(s=v,c=t.inclusive);break}return{value:s,inclusive:c}}function qd(i,e,t){let s=vn,c=!0;for(const g of _c(i,e)){let v=vn,x=!0;switch(g.op){case">=":case">":v=Al(g.value),x=!1;break;case"==":case"in":case"<=":v=g.value;break;case"<":v=g.value,x=!1;break;case"!=":case"not-in":v=vn}sd({value:s,inclusive:c},{value:v,inclusive:x})>0&&(s=v,c=x)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const v=t.position[g];sd({value:s,inclusive:c},{value:v,inclusive:t.inclusive})>0&&(s=v,c=t.inclusive);break}return{value:s,inclusive:c}}class ji extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new Wl(e,t,s):"array-contains"===t?new Yd(e,s):"in"===t?new Xh(e,s):"not-in"===t?new Qd(e,s):"array-contains-any"===t?new ef(e,s):new ji(e,t,s)}static ct(e,t,s){return"in"===t?new Zd(e,s):new od(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Ys(t,this.value)):null!==t&&en(this.value)===en(t)&&this.at(Ys(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return b()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Wl extends ji{constructor(e,t,s){super(e,t,s),this.key=Lt.fromName(s.referenceValue)}matches(e){const t=Lt.comparator(e.key,this.key);return this.at(t)}}class Zd extends ji{constructor(e,t){super(e,"in",t),this.keys=zl(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class od extends ji{constructor(e,t){super(e,"not-in",t),this.keys=zl(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zl(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Lt.fromName(s.referenceValue))}class Yd extends ji{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ho(t)&&oi(t.arrayValue,this.value)}}class Xh extends ji{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oi(this.value.arrayValue,t)}}class Qd extends ji{constructor(e,t){super(e,"not-in",t)}matches(e){if(oi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oi(this.value.arrayValue,t)}}class ef extends ji{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ho(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>oi(this.value.arrayValue,s))}}class du{constructor(e,t){this.position=e,this.inclusive=t}}class hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Qa(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function fu(i,e,t){let s=0;for(let c=0;c<i.position.length;c++){const g=e[c],v=i.position[c];if(s=g.field.isKeyField()?Lt.comparator(Lt.fromName(v.referenceValue),t.key):Ys(v,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function Jd(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Fr(i.position[t],e.position[t]))return!1;return!0}class Aa{constructor(e,t=null,s=[],c=[],g=null,v="F",x=null,U=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=g,this.limitType=v,this.startAt=x,this.endAt=U,this.lt=null,this.ft=null}}function ad(i,e,t,s,c,g,v,x){return new Aa(i,e,t,s,c,g,v,x)}function Rl(i){return new Aa(i)}function Ec(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function wc(i){for(const e of i.filters)if(e.ht())return e.field;return null}function Ic(i){return null!==i.collectionGroup}function sl(i){const e=R(i);if(null===e.lt){e.lt=[];const t=wc(e),s=Ec(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new hu(t)),e.lt.push(new hu(Xr.keyField(),"asc"));else{let c=!1;for(const g of e.explicitOrderBy)e.lt.push(g),g.field.isKeyField()&&(c=!0);if(!c){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new hu(Xr.keyField(),g))}}}return e.lt}function ga(i){const e=R(i);if(!e.ft)if("F"===e.limitType)e.ft=Gl(e.path,e.collectionGroup,sl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of sl(e))t.push(new hu(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new du(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new du(e.startAt.position,e.startAt.inclusive):null;e.ft=Gl(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e.ft}function ud(i,e,t){return new Aa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Cc(i,e){return Ou(ga(i),ga(e))&&i.limitType===e.limitType}function Xd(i){return`${Ya(ga(i))}|lt:${i.limitType}`}function Zo(i){return`Query(target=${function xl(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Bi(s.value)}`;var s}).join(", ")}]`),yt(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Bi(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Bi(t)).join(",")),`Target(${e})`}(ga(i))}; limitType=${i.limitType})`}function Dc(i,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Lt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,s){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(i,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(c,g,v){const x=fu(c,g,v);return c.inclusive?x<=0:x<0}(t.startAt,sl(t),s)||t.endAt&&!function(c,g,v){const x=fu(c,g,v);return c.inclusive?x>=0:x>0}(t.endAt,sl(t),s)));var t,s}function ma(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function xa(i){return(e,t)=>{let s=!1;for(const c of sl(i)){const g=ld(c,e,t);if(0!==g)return g;s=s||c.field.isKeyField()}return 0}}function ld(i,e,t){const s=i.field.isKeyField()?Lt.comparator(e.key,t.key):function(c,g,v){const x=g.data.field(c),U=v.data.field(c);return null!==x&&null!==U?Ys(x,U):b()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return b()}}function Kl(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ft(e)?"-0":e}}function cd(i){return{integerValue:""+i}}function tf(i,e){return nn(e)?cd(e):Kl(i,e)}class ol{constructor(){this._=void 0}}function nf(i,e,t){return i instanceof pu?function(s,c){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&(g.fields.__previous_value__=c),{mapValue:g}}(t,e):i instanceof Yo?eh(i,e):i instanceof gu?mu(i,e):function(s,c){const g=Ml(s,c),v=al(g)+al(s._t);return ha(g)&&ha(s._t)?cd(v):Kl(s.wt,v)}(i,e)}function dd(i,e,t){return i instanceof Yo?eh(i,e):i instanceof gu?mu(i,e):t}function Ml(i,e){return i instanceof Ja?ha(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class pu extends ol{}class Yo extends ol{constructor(e){super(),this.elements=e}}function eh(i,e){const t=th(e);for(const s of i.elements)t.some(c=>Fr(c,s))||t.push(s);return{arrayValue:{values:t}}}class gu extends ol{constructor(e){super(),this.elements=e}}function mu(i,e){let t=th(e);for(const s of i.elements)t=t.filter(c=>!Fr(c,s));return{arrayValue:{values:t}}}class Ja extends ol{constructor(e,t){super(),this.wt=e,this._t=t}}function al(i){return si(i.integerValue||i.doubleValue)}function th(i){return ho(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Nl{constructor(e,t){this.field=e,this.transform=t}}class bc{constructor(e,t){this.version=e,this.transformResults=t}}class $r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new $r}static exists(e){return new $r(void 0,e)}static updateTime(e){return new $r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class dr{}function Ol(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Ra(i.key,$r.none()):new kl(i.key,i.data,$r.none());{const t=i.data,s=_s.empty();let c=new jn(Xr.comparator);for(let g of e.fields)if(!c.has(g)){let v=t.field(g);null===v&&g.length>1&&(g=g.popLast(),v=t.field(g)),null===v?s.delete(g):s.set(g,v),c=c.add(g)}return new yu(i.key,s,new Lr(c.toArray()),$r.none())}}function rf(i,e,t){i instanceof kl?function(s,c,g){const v=s.value.clone(),x=_u(s.fieldTransforms,c,g.transformResults);v.setAll(x),c.convertToFoundDocument(g.version,v).setHasCommittedMutations()}(i,e,t):i instanceof yu?function(s,c,g){if(!Tc(s.precondition,c))return void c.convertToUnknownDocument(g.version);const v=_u(s.fieldTransforms,c,g.transformResults),x=c.data;x.setAll(fd(s)),x.setAll(v),c.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ul(i,e,t,s){return i instanceof kl?function(c,g,v,x){if(!Tc(c.precondition,g))return v;const U=c.value.clone(),$=sf(c.fieldTransforms,x,g);return U.setAll($),g.convertToFoundDocument(g.version,U).setHasLocalMutations(),null}(i,e,t,s):i instanceof yu?function(c,g,v,x){if(!Tc(c.precondition,g))return v;const U=sf(c.fieldTransforms,x,g),$=g.data;return $.setAll(fd(c)),$.setAll(U),g.convertToFoundDocument(g.version,$).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ee=>ee.field))}(i,e,t,s):(v=t,Tc(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):v);var g,v}function hd(i,e){let t=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),g=Ml(s.transform,c||null);null!=g&&(null===t&&(t=_s.empty()),t.set(s.field,g))}return t||null}function Sc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&Zs(t,s,(c,g)=>function Pl(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Yo&&s instanceof Yo||t instanceof gu&&s instanceof gu?Zs(t.elements,s.elements,Fr):t instanceof Ja&&s instanceof Ja?Fr(t._t,s._t):t instanceof pu&&s instanceof pu);var t,s}(c,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class kl extends dr{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class yu extends dr{constructor(e,t,s,c,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function fd(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function _u(i,e,t){const s=new Map;I(i.length===t.length);for(let c=0;c<t.length;c++){const g=i[c],v=g.transform,x=e.data.field(g.field);s.set(g.field,dd(v,x,t[c]))}return s}function sf(i,e,t){const s=new Map;for(const c of i){const g=c.transform,v=t.data.field(c.field);s.set(c.field,nf(g,v,e))}return s}class Ra extends dr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ku extends dr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Qs{constructor(e){this.count=e}}var Ei,Jn;function ll(i){switch(i){default:return b();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Hi(i){if(void 0===i)return Er("GRPC error has no .code"),M.UNKNOWN;switch(i){case Ei.OK:return M.OK;case Ei.CANCELLED:return M.CANCELLED;case Ei.UNKNOWN:return M.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return M.INTERNAL;case Ei.UNAVAILABLE:return M.UNAVAILABLE;case Ei.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ei.NOT_FOUND:return M.NOT_FOUND;case Ei.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ei.ABORTED:return M.ABORTED;case Ei.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ei.DATA_LOSS:return M.DATA_LOSS;default:return b()}}(Jn=Ei||(Ei={}))[Jn.OK=0]="OK",Jn[Jn.CANCELLED=1]="CANCELLED",Jn[Jn.UNKNOWN=2]="UNKNOWN",Jn[Jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jn[Jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jn[Jn.NOT_FOUND=5]="NOT_FOUND",Jn[Jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jn[Jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jn[Jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jn[Jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jn[Jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jn[Jn.ABORTED=10]="ABORTED",Jn[Jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jn[Jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jn[Jn.INTERNAL=13]="INTERNAL",Jn[Jn.UNAVAILABLE=14]="UNAVAILABLE",Jn[Jn.DATA_LOSS=15]="DATA_LOSS";class Js{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,g]of s)if(this.equalsFn(c,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<c.length;g++)if(this.equalsFn(c[g][0],e))return void(c[g]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(t,s)=>{for(const[c,g]of s)e(c,g)})}isEmpty(){return Ko(this.inner)}size(){return this.innerSize}}const Ll=new Hr(Lt.comparator);function So(){return Ll}const Lu=new Hr(Lt.comparator);function Fl(...i){let e=Lu;for(const t of i)e=e.insert(t.key,t);return e}function Ao(i){let e=Lu;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function fo(){return Fu()}function ql(){return Fu()}function Fu(){return new Js(i=>i.toString(),(i,e)=>i.isEqual(e))}const pd=new Hr(Lt.comparator),Ac=new jn(Lt.comparator);function Ln(...i){let e=Ac;for(const t of i)e=e.add(t);return e}const nh=new jn(tn);function Zl(){return nh}class Xs{constructor(e,t,s,c,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,Uu.createSynthesizedTargetChangeForCurrentChange(e,t)),new Xs(un.min(),s,Zl(),So(),Ln())}}class Uu{constructor(e,t,s,c,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Uu(ei.EMPTY_BYTE_STRING,t,Ln(),Ln(),Ln())}}class Ul{constructor(e,t,s,c){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=c}}class Vu{constructor(e,t){this.targetId=e,this.It=t}}class Bu{constructor(e,t,s=ei.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Yl{constructor(){this.Tt=0,this.Et=cl(),this.At=ei.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Ln(),t=Ln(),s=Ln();return this.Et.forEach((c,g)=>{switch(g){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:b()}}),new Uu(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=cl()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class po{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=So(),this.Bt=xc(),this.Lt=new jn(tn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:b()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,c)=>{this.jt(c)&&t(c)})}zt(e){const t=e.targetId,s=e.It.count,c=this.Ht(t);if(c){const g=c.target;if(pa(g))if(0===s){const v=new Lt(g.path);this.Kt(t,v,ti.newNoDocument(v,un.min()))}else I(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((g,v)=>{const x=this.Ht(v);if(x){if(g.current&&pa(x.target)){const U=new Lt(x.target.path);null!==this.$t.get(U)||this.Xt(v,U)||this.Kt(v,U,ti.newNoDocument(U,e))}g.vt&&(t.set(v,g.St()),g.Dt())}});let s=Ln();this.Bt.forEach((g,v)=>{let x=!0;v.forEachWhile(U=>{const $=this.Ht(U);return!$||2===$.purpose||(x=!1,!1)}),x&&(s=s.add(g))}),this.$t.forEach((g,v)=>v.setReadTime(e));const c=new Xs(e,t,this.Lt,this.$t,s);return this.$t=So(),this.Bt=xc(),this.Lt=new jn(tn),c}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const c=this.Qt(e);this.Xt(e,t)?c.Ct(t,1):c.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Yl,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new jn(tn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||_t("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Yl),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function xc(){return new Hr(Lt.comparator)}function cl(){return new Hr(Lt.comparator)}const gd={asc:"ASCENDING",desc:"DESCENDING"},vu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Eu{constructor(e,t){this.databaseId=e,this.dt=t}}function ju(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function md(i,e){return i.dt?e.toBase64():e.toUint8Array()}function of(i,e){return ju(i,e.toTimestamp())}function Zi(i){return I(!!i),un.fromTimestamp(function(e){const t=co(e);return new Cr(t.seconds,t.nanos)}(i))}function Ql(i,e){return(t=i,new zn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Jl(i){const e=zn.fromString(i);return I(Mc(e)),e}function Ma(i,e){return Ql(i.databaseId,e.path)}function as(i,e){const t=Jl(e);if(t.get(1)!==i.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Lt(D(t))}function E(i,e){return Ql(i.databaseId,e)}function p(i){const e=Jl(i);return 4===e.length?zn.emptyPath():D(e)}function m(i){return new zn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function D(i){return I(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function j(i,e,t){return{name:Ma(i,e),fields:t.value.mapValue.fields}}function q(i,e,t){const s=as(i,e.name),c=Zi(e.updateTime),g=new _s({mapValue:{fields:e.fields}}),v=ti.newFoundDocument(s,c,g);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Rt(i,e){let t;if(e instanceof kl)t={update:j(i,e.key,e.value)};else if(e instanceof Ra)t={delete:Ma(i,e.key)};else if(e instanceof yu)t={update:j(i,e.key,e.data),updateMask:dl(e.fieldMask)};else{if(!(e instanceof ku))return b();t={verify:Ma(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,g){const v=g.transform;if(v instanceof pu)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Yo)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof gu)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Ja)return{fieldPath:g.field.canonicalString(),increment:v._t};throw b()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:of(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:b()),t;var c}function Pt(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?$r.updateTime(Zi(c.updateTime)):void 0!==c.exists?$r.exists(c.exists):$r.none():$r.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(g,v){let x=null;"setToServerValue"in v?(I("REQUEST_TIME"===v.setToServerValue),x=new pu):"appendMissingElements"in v?x=new Yo(v.appendMissingElements.values||[]):"removeAllFromArray"in v?x=new gu(v.removeAllFromArray.values||[]):"increment"in v?x=new Ja(g,v.increment):b();const U=Xr.fromServerFormat(v.fieldPath);return new Nl(U,x)}(i,c)):[];var c;if(e.update){const c=as(i,e.update.name),g=new _s({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Lr((e.updateMask.fieldPaths||[]).map($=>Xr.fromServerFormat($)));return new yu(c,g,v,t,s)}return new kl(c,g,t,s)}if(e.delete){const c=as(i,e.delete);return new Ra(c,t)}if(e.verify){const c=as(i,e.verify);return new ku(c,t)}return b()}function ln(i,e){return{documents:[E(i,e.path)]}}function ai(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=E(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(U){if(0===U.length)return;const $=U.map(ee=>function(ge){if("=="===ge.op){if(cu(ge.value))return{unaryFilter:{field:$u(ge.field),op:"IS_NAN"}};if(fa(ge.value))return{unaryFilter:{field:$u(ge.field),op:"IS_NULL"}}}else if("!="===ge.op){if(cu(ge.value))return{unaryFilter:{field:$u(ge.field),op:"IS_NOT_NAN"}};if(fa(ge.value))return{unaryFilter:{field:$u(ge.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$u(ge.field),op:Xl(ge.op),value:ge.value}}}(ee));return 1===$.length?$[0]:{compositeFilter:{op:"AND",filters:$}}}(e.filters);c&&(t.structuredQuery.where=c);const g=function(U){if(0!==U.length)return U.map($=>{return{field:$u((ee=$).field),direction:Hu(ee.dir)};var ee})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const v=($=e.limit,i.dt||yt($)?$:{value:$});var $,x,U;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(U=e.endAt).inclusive,values:U.position}),t}function eo(i){let e=p(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){I(1===s);const ee=t.from[0];ee.allDescendants?c=ee.collectionId:e=e.child(ee.collectionId)}let g=[];t.where&&(g=yd(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ee=>{return new hu(Gu((ge=ee).field),function(ze){switch(ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ge.direction));var ge}));let x=null;t.limit&&(x=function(ee){let ge;return ge="object"==typeof ee?ee.value:ee,yt(ge)?null:ge}(t.limit));let U=null;var ee;t.startAt&&(U=new du((ee=t.startAt).values||[],!!ee.before));let $=null;return t.endAt&&($=function(ee){return new du(ee.values||[],!ee.before)}(t.endAt)),ad(e,c,v,g,x,"F",U,$)}function yd(i){return i?void 0!==i.unaryFilter?[_d(i)]:void 0!==i.fieldFilter?[Rc(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>yd(e)).reduce((e,t)=>e.concat(t)):b():[]}function Hu(i){return gd[i]}function Xl(i){return vu[i]}function $u(i){return{fieldPath:i.canonicalString()}}function Gu(i){return Xr.fromServerFormat(i.fieldPath)}function Rc(i){return ji.create(Gu(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return b()}}(i.fieldFilter.op),i.fieldFilter.value)}function _d(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Gu(i.unaryFilter.field);return ji.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gu(i.unaryFilter.field);return ji.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Gu(i.unaryFilter.field);return ji.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gu(i.unaryFilter.field);return ji.create(c,"!=",{nullValue:"NULL_VALUE"});default:return b()}}function dl(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Mc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function no(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Nc(e)),e=vd(i.get(t),e);return Nc(e)}function vd(i,e){let t=e;const s=i.length;for(let c=0;c<s;c++){const g=i.charAt(c);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function Nc(i){return i+"\x01\x01"}function ya(i){const e=i.length;if(I(e>=2),2===e)return I("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),zn.emptyPath();const t=e-2,s=[];let c="";for(let g=0;g<e;){const v=i.indexOf("\x01",g);switch((v<0||v>t)&&b(),i.charAt(v+1)){case"\x01":const x=i.substring(g,v);let U;0===c.length?U=x:(c+=x,U=c,c=""),s.push(U);break;case"\x10":c+=i.substring(g,v),c+="\0";break;case"\x11":c+=i.substring(g,v+1);break;default:b()}g=v+2}return new zn(s)}const rh=["userId","batchId"];function ec(i,e){return[i,no(e)]}function ih(i,e,t){return[i,no(e),t]}const og={},ag=["prefixPath","collectionGroup","readTime","documentId"],af=["prefixPath","collectionGroup","documentId"],rp=["collectionGroup","readTime","prefixPath","documentId"],tc=["canonicalId","targetId"],ip=["targetId","path"],sh=["path","targetId"],sp=["collectionId","parent"],oh=["indexId","uid"],Pc=["uid","sequenceNumber"],hl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],op=["indexId","uid","orderedDocumentKey"],ah=["userId","collectionPath","documentId"],Oc=["userId","collectionPath","largestBatchId"],ap=["userId","collectionGroup","largestBatchId"],Wu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uh=[...Wu,"documentOverlays"],lh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ed=lh,uf=[...Ed,"indexConfiguration","indexState","indexEntries"];class Vl extends mc{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Di(i,e){const t=R(i);return Oi.N(t.ee,e)}class wd{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const g=this.mutations[c];g.key.isEqual(e.key)&&rf(g,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ul(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ul(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ql();return this.mutations.forEach(c=>{const g=e.get(c.key),v=g.overlayedDocument;let x=this.applyToLocalView(v,g.mutatedFields);x=t.has(c.key)?null:x;const U=Ol(v,x);null!==U&&s.set(c.key,U),v.isValidDocument()||v.convertToNoDocument(un.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ln())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(t,s)=>Sc(t,s))&&Zs(this.baseMutations,e.baseMutations,(t,s)=>Sc(t,s))}}class ch{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){I(e.mutations.length===s.length);let c=pd;const g=e.mutations;for(let v=0;v<g.length;v++)c=c.insert(g[v].key,s[v].version);return new ch(e,t,s,c)}}class lf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class zu{constructor(e,t,s,c,g=un.min(),v=un.min(),x=ei.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=x}withSequenceNumber(e){return new zu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new zu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class cf{constructor(e){this.ne=e}}function hh(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ma(c=i.ne,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:ju(c,g.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:fl(e.version)};else{if(!e.isUnknownDocument())return b();s.unknownDocument={path:t.path.toArray(),version:fl(e.version)}}var c,g;return s}function fh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function fl(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vs(i){const e=new Cr(i.seconds,i.nanoseconds);return un.fromTimestamp(e)}function wu(i,e){const t=(e.baseMutations||[]).map(g=>Pt(i.ne,g));for(let g=0;g<e.mutations.length-1;++g){const v=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(v.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const s=e.mutations.map(g=>Pt(i.ne,g)),c=Cr.fromMillis(e.localWriteTimeMs);return new wd(e.batchId,c,t,s)}function Xa(i){const e=vs(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?vs(i.lastLimboFreeSnapshotVersion):un.min();let s;var c;return void 0!==i.query.documents?(I(1===(c=i.query).documents.length),s=ga(Rl(p(c.documents[0])))):s=ga(eo(i.query)),new zu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,ei.fromBase64String(i.resumeToken))}function Id(i,e){const t=fl(e.snapshotVersion),s=fl(e.lastLimboFreeSnapshotVersion);let c;c=pa(e.target)?ln(i.ne,e.target):ai(i.ne,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ya(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function bi(i){const e=eo({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?ud(e,e.limit,"L"):e}function pl(i,e){return new lf(e.largestBatchId,Pt(i.ne,e.overlayMutation))}function ph(i,e){const t=e.path.lastSegment();return[i,no(e.path.popLast()),t]}function df(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:fl(s.readTime),documentKey:no(s.documentKey.path),largestBatchId:s.largestBatchId}}class nc{getBundleMetadata(e,t){return ug(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:vs(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return ug(e).put({bundleId:(s=t).id,createTime:fl(Zi(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return up(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:bi(c.bundledQuery),readTime:vs(c.readTime)};var c})}saveNamedQuery(e,t){return up(e).put({name:(s=t).name,readTime:fl(Zi(s.readTime)),bundledQuery:s.bundledQuery});var s}}function ug(i){return Di(i,"bundles")}function up(i){return Di(i,"namedQueries")}class Cd{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Cd(e,t.uid||"")}getOverlay(e,t){return rc(e).get(ph(this.userId,t)).next(s=>s?pl(this.wt,s):null)}getOverlays(e,t){const s=fo();return Be.forEach(t,c=>this.getOverlay(e,c).next(g=>{null!==g&&s.set(c,g)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((g,v)=>{const x=new lf(t,v);c.push(this.ie(e,x))}),Be.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(v=>c.add(no(v.getCollectionPath())));const g=[];return c.forEach(v=>{const x=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);g.push(rc(e).W("collectionPathOverlayIndex",x))}),Be.waitFor(g)}getOverlaysForCollection(e,t,s){const c=fo(),g=no(t),v=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return rc(e).K("collectionPathOverlayIndex",v).next(x=>{for(const U of x){const $=pl(this.wt,U);c.set($.getKey(),$)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const g=fo();let v;const x=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return rc(e).J({index:"collectionGroupOverlayIndex",range:x},(U,$,ee)=>{const ge=pl(this.wt,$);g.size()<c||ge.largestBatchId===v?(g.set(ge.getKey(),ge),v=ge.largestBatchId):ee.done()}).next(()=>g)}ie(e,t){return rc(e).put(function(s,c,g){const[v,x,U]=ph(c,g.mutation.key);return{userId:c,collectionPath:x,documentId:U,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Rt(s.ne,g.mutation)}}(this.wt,this.userId,t))}}function rc(i){return Di(i,"documentOverlays")}class ic{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(si(e.integerValue));else if("doubleValue"in e){const s=si(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),ft(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(P(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?yc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):b()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const c of Object.keys(s))this.le(c,t),this.oe(s[c],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const c of s)this.oe(c,t)}_e(e,t){this.ce(t,37),Lt.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function lg(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Fn(i){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const g=lg(255&t[c]);if(s+=g,8!==g)break}return s}(i);return Math.ceil(e/8)}ic.ye=new ic;class lp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const c=t.codePointAt(0);this.Ie(240|c>>>18),this.Ie(128|63&c>>>12),this.Ie(128|63&c>>>6),this.Ie(128|63&c)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const c=t.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}ve(e){const t=this.Ve(e),s=Fn(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}De(e){const t=this.Ve(e),s=Fn(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(c){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,c,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class Dd{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class bd{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class eu{constructor(){this.Me=new lp,this.Fe=new Dd(this.Me),this.$e=new bd(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Ms{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ms(this.indexId,this.documentKey,this.arrayValue,s)}}function gl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=hf(i.arrayValue,e.arrayValue),0!==t?t:(t=hf(i.directionalValue,e.directionalValue),0!==t?t:Lt.comparator(i.documentKey,e.documentKey)))}function hf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class gh{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Dl(e);if(void 0!==t&&!this.Qe(t))return!1;const s=Wo(e);let c=0,g=0;for(;c<s.length&&this.Qe(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Ke){const v=s[c];if(!this.je(this.Ke,v)||!this.We(this.Ue[g++],v))return!1;++c}for(;c<s.length;++c){const v=s[c];if(g>=this.Ue.length||!this.We(this.Ue[g++],v))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ku{constructor(){this.ze=new kc}addToCollectionParentIndex(e,t){return this.ze.add(t),Be.resolve()}getCollectionParents(e,t){return Be.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Be.resolve()}deleteFieldIndex(e,t){return Be.resolve()}getDocumentsMatchingTarget(e,t){return Be.resolve(null)}getIndexType(e,t){return Be.resolve(0)}getFieldIndexes(e,t){return Be.resolve([])}getNextCollectionGroupToUpdate(e){return Be.resolve(null)}getMinOffset(e,t){return Be.resolve(sr.min())}getMinOffsetFromCollectionGroup(e,t){return Be.resolve(sr.min())}updateCollectionGroup(e,t,s){return Be.resolve()}updateIndexEntries(e,t){return Be.resolve()}}class kc{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new jn(zn.comparator),g=!c.has(s);return this.index[t]=c.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new jn(zn.comparator)).toArray()}}const Qo=new Uint8Array(0);class mh{constructor(e,t){this.user=e,this.databaseId=t,this.He=new kc,this.Je=new Js(s=>Ya(s),(s,c)=>Ou(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const g={collectionId:s,parent:no(c)};return cg(e).put(g)}return Be.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[Mu(t),""],!1,!0);return cg(e).K(c).next(g=>{for(const v of g){if(v.collectionId!==t)break;s.push(ya(v.parent))}return s})}addFieldIndex(e,t){const s=ff(e),c={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var v;delete c.indexId;const g=s.add(c);if(t.indexState){const v=ml(e);return g.next(x=>{v.put(df(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=ff(e),c=ml(e),g=Lc(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Lc(e);let c=!0;const g=new Map;return Be.forEach(this.Ye(t),v=>this.Xe(e,v).next(x=>{c&&(c=!!x),g.set(v,x)})).next(()=>{if(c){let v=Ln();const x=[];return Be.forEach(g,(U,$)=>{var ee;_t("IndexedDbIndexManager",`Using index ${ee=U,`id=${ee.indexId}|cg=${ee.collectionGroup}|f=${ee.fields.map(Rr=>`${Rr.fieldPath}:${Rr.kind}`).join(",")}`} to execute ${Ya(t)}`);const ge=function(Rr,ro){const Si=Dl(ro);if(void 0===Si)return null;for(const us of _c(Rr,Si.fieldPath))switch(us.op){case"array-contains-any":return us.value.arrayValue.values||[];case"array-contains":return[us.value]}return null}($,U),ze=function(Rr,ro){const Si=new Map;for(const us of Wo(ro))for(const Xo of _c(Rr,us.fieldPath))switch(Xo.op){case"==":case"in":Si.set(us.fieldPath.canonicalString(),Xo.value);break;case"not-in":case"!=":return Si.set(us.fieldPath.canonicalString(),Xo.value),Array.from(Si.values())}return null}($,U),ut=function(Rr,ro){const Si=[];let us=!0;for(const Xo of Wo(ro)){const Jf=0===Xo.kind?vc(Rr,Xo.fieldPath,Rr.startAt):qd(Rr,Xo.fieldPath,Rr.startAt);Si.push(Jf.value),us&&(us=Jf.inclusive)}return new du(Si,us)}($,U),It=function(Rr,ro){const Si=[];let us=!0;for(const Xo of Wo(ro)){const Jf=0===Xo.kind?qd(Rr,Xo.fieldPath,Rr.endAt):vc(Rr,Xo.fieldPath,Rr.endAt);Si.push(Jf.value),us&&(us=Jf.inclusive)}return new du(Si,us)}($,U),Kt=this.Ze(U,$,ut),fn=this.Ze(U,$,It),Gr=this.tn(U,$,ze),Gi=this.en(U.indexId,ge,Kt,ut.inclusive,fn,It.inclusive,Gr);return Be.forEach(Gi,Rr=>s.j(Rr,t.limit).next(ro=>{ro.forEach(Si=>{const us=Lt.fromSegments(Si.documentKey);v.has(us)||(v=v.add(us),x.push(us))})}))}).next(()=>x)}return Be.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,c,g,v,x){const U=(null!=t?t.length:1)*Math.max(s.length,g.length),$=U/(null!=t?t.length:1),ee=[];for(let ge=0;ge<U;++ge){const ze=t?this.nn(t[ge/$]):Qo,ut=this.sn(e,ze,s[ge%$],c),It=this.rn(e,ze,g[ge%$],v),Kt=x.map(fn=>this.sn(e,ze,fn,!0));ee.push(...this.createRange(ut,It,Kt))}return ee}sn(e,t,s,c){const g=new Ms(e,Lt.empty(),t,s);return c?g:g.Le()}rn(e,t,s,c){const g=new Ms(e,Lt.empty(),t,s);return c?g.Le():g}Xe(e,t){const s=new gh(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(g=>{let v=null;for(const x of g)s.Ge(x)&&(!v||x.fields.length>v.fields.length)&&(v=x);return v})}getIndexType(e,t){let s=2;return Be.forEach(this.Ye(t),c=>this.Xe(e,c).next(g=>{g?0!==s&&g.fields.length<function(v){let x=new jn(Xr.comparator),U=!1;for(const $ of v.filters){const ee=$;ee.field.isKeyField()||("array-contains"===ee.op||"array-contains-any"===ee.op?U=!0:x=x.add(ee.field))}for(const $ of v.orderBy)$.field.isKeyField()||(x=x.add($.field));return x.size+(U?1:0)}(c)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new eu;for(const c of Wo(e)){const g=t.data.field(c.fieldPath);if(null==g)return null;const v=s.Be(c.kind);ic.ye.re(g,v)}return s.Oe()}nn(e){const t=new eu;return ic.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new eu;return ic.ye.re(ys(this.databaseId,t),s.Be(function(c){const g=Wo(c);return 0===g.length?0:g[g.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let c=[];c.push(new eu);let g=0;for(const v of Wo(e)){const x=s[g++];for(const U of c)if(this.cn(t,v.fieldPath)&&ho(x))c=this.an(c,v,x);else{const $=U.Be(v.kind);ic.ye.re(x,$)}}return this.hn(c)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const c=[...e],g=[];for(const v of s.arrayValue.values||[])for(const x of c){const U=new eu;U.seed(x.Oe()),ic.ye.re(v,U.Be(t.kind)),g.push(U)}return g}cn(e,t){return!!e.filters.find(s=>s instanceof ji&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=ff(e),c=ml(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(g=>{const v=[];return Be.forEach(g,x=>c.get([x.indexId,this.uid]).next(U=>{v.push(function($,ee){const ge=ee?new au(ee.sequenceNumber,new sr(vs(ee.readTime),new Lt(ya(ee.documentKey)),ee.largestBatchId)):au.empty(),ze=$.fields.map(([ut,It])=>new il(Xr.fromServerFormat(ut),It));return new gc($.indexId,$.collectionGroup,ze,ge)}(x,U))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const g=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==g?g:tn(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=ff(e),g=ml(e);return this.ln(e).next(v=>c.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>Be.forEach(x,U=>g.put(df(U.indexId,this.user,v,s)))))}updateIndexEntries(e,t){const s=new Map;return Be.forEach(t,(c,g)=>{const v=s.get(c.collectionGroup);return(v?Be.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(x=>(s.set(c.collectionGroup,x),Be.forEach(x,U=>this.fn(e,c,U).next($=>{const ee=this.dn(g,U);return $.isEqual(ee)?Be.resolve():this._n(e,g,U,$,ee)}))))})}wn(e,t,s,c){return Lc(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,c){return Lc(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const c=Lc(e);let g=new jn(gl);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(v,x)=>{g=g.add(new Ms(s.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>g)}dn(e,t){let s=new jn(gl);const c=this.on(t,e);if(null==c)return s;const g=Dl(t);if(null!=g){const v=e.data.field(g.fieldPath);if(ho(v))for(const x of v.arrayValue.values||[])s=s.add(new Ms(t.indexId,e.key,this.nn(x),c))}else s=s.add(new Ms(t.indexId,e.key,Qo,c));return s}_n(e,t,s,c,g){_t("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(x,U,$,ee,ge){const ze=x.getIterator(),ut=U.getIterator();let It=Ui(ze),Kt=Ui(ut);for(;It||Kt;){let fn=!1,Gr=!1;if(It&&Kt){const Gi=$(It,Kt);Gi<0?Gr=!0:Gi>0&&(fn=!0)}else null!=It?Gr=!0:fn=!0;fn?(ee(Kt),Kt=Ui(ut)):Gr?(ge(It),It=Ui(ze)):(It=Ui(ze),Kt=Ui(ut))}}(c,g,gl,x=>{v.push(this.wn(e,t,s,x))},x=>{v.push(this.mn(e,t,s,x))}),Be.waitFor(v)}ln(e){let t=1;return ml(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,g)=>{g.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((v,x)=>gl(v,x)).filter((v,x,U)=>!x||0!==gl(v,U[x-1]));const c=[];c.push(e);for(const v of s){const x=gl(v,e),U=gl(v,t);if(0===x)c[0]=e.Le();else if(x>0&&U<0)c.push(v),c.push(v.Le());else if(U>0)break}c.push(t);const g=[];for(let v=0;v<c.length;v+=2)g.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,Qo,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,Qo,[]]));return g}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Td)}getMinOffset(e,t){return Be.mapArray(this.Ye(t),s=>this.Xe(e,s).next(c=>c||b())).next(Td)}}function cg(i){return Di(i,"collectionParents")}function Lc(i){return Di(i,"indexEntries")}function ff(i){return Di(i,"indexConfiguration")}function ml(i){return Di(i,"indexState")}function Td(i){I(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const c=i[s].indexState.offset;uu(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new sr(e.readTime,e.documentKey,t)}const yh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _h(i,e,t){const s=i.store("mutations"),c=i.store("documentMutations"),g=[],v=IDBKeyRange.only(t.batchId);let x=0;const U=s.J({range:v},(ee,ge,ze)=>(x++,ze.delete()));g.push(U.next(()=>{I(1===x)}));const $=[];for(const ee of t.mutations){const ge=ih(e,ee.key.path,t.batchId);g.push(c.delete(ge)),$.push(ee.key)}return Be.waitFor(g).next(()=>$)}function pf(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw b();e=i.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class vh{constructor(e,t,s,c){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=c,this.gn={}}static se(e,t,s,c){I(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new vh(g,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bl(e).J({index:"userMutationsIndex",range:s},(c,g,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const g=Fc(e),v=Bl(e);return v.add({}).next(x=>{I("number"==typeof x);const U=new wd(x,t,s,c),$=function(ze,ut,It){const Kt=It.baseMutations.map(Gr=>Rt(ze.ne,Gr)),fn=It.mutations.map(Gr=>Rt(ze.ne,Gr));return{userId:ut,batchId:It.batchId,localWriteTimeMs:It.localWriteTime.toMillis(),baseMutations:Kt,mutations:fn}}(this.wt,this.userId,U),ee=[];let ge=new jn((ze,ut)=>tn(ze.canonicalString(),ut.canonicalString()));for(const ze of c){const ut=ih(this.userId,ze.key.path,x);ge=ge.add(ze.key.path.popLast()),ee.push(v.put($)),ee.push(g.put(ut,og))}return ge.forEach(ze=>{ee.push(this.indexManager.addToCollectionParentIndex(e,ze))}),e.addOnCommittedListener(()=>{this.gn[x]=U.keys()}),Be.waitFor(ee).next(()=>U)})}lookupMutationBatch(e,t){return Bl(e).get(t).next(s=>s?(I(s.userId===this.userId),wu(this.wt,s)):null)}yn(e,t){return this.gn[t]?Be.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.gn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return Bl(e).J({index:"userMutationsIndex",range:c},(v,x,U)=>{x.userId===this.userId&&(I(x.batchId>=s),g=wu(this.wt,x)),U.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return Bl(e).J({index:"userMutationsIndex",range:t,reverse:!0},(c,g,v)=>{s=g.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bl(e).K("userMutationsIndex",t).next(s=>s.map(c=>wu(this.wt,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ec(this.userId,t.path),c=IDBKeyRange.lowerBound(s),g=[];return Fc(e).J({range:c},(v,x,U)=>{const[$,ee,ge]=v,ze=ya(ee);if($===this.userId&&t.path.isEqual(ze))return Bl(e).get(ge).next(ut=>{if(!ut)throw b();I(ut.userId===this.userId),g.push(wu(this.wt,ut))});U.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jn(tn);const c=[];return t.forEach(g=>{const v=ec(this.userId,g.path),x=IDBKeyRange.lowerBound(v),U=Fc(e).J({range:x},($,ee,ge)=>{const[ze,ut,It]=$,Kt=ya(ut);ze===this.userId&&g.path.isEqual(Kt)?s=s.add(It):ge.done()});c.push(U)}),Be.waitFor(c).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,g=ec(this.userId,s),v=IDBKeyRange.lowerBound(g);let x=new jn(tn);return Fc(e).J({range:v},(U,$,ee)=>{const[ge,ze,ut]=U,It=ya(ze);ge===this.userId&&s.isPrefixOf(It)?It.length===c&&(x=x.add(ut)):ee.done()}).next(()=>this.pn(e,x))}pn(e,t){const s=[],c=[];return t.forEach(g=>{c.push(Bl(e).get(g).next(v=>{if(null===v)throw b();I(v.userId===this.userId),s.push(wu(this.wt,v))}))}),Be.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return _h(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Be.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Be.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Fc(e).J({range:s},(g,v,x)=>{if(g[0]===this.userId){const U=ya(g[1]);c.push(U)}else x.done()}).next(()=>{I(0===c.length)})})}containsKey(e,t){return cp(e,this.userId,t)}Tn(e){return gf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function cp(i,e,t){const s=ec(e,t.path),c=s[1],g=IDBKeyRange.lowerBound(s);let v=!1;return Fc(i).J({range:g,H:!0},(x,U,$)=>{const[ee,ge,ze]=x;ee===e&&ge===c&&(v=!0),$.done()}).next(()=>v)}function Bl(i){return Di(i,"mutations")}function Fc(i){return Di(i,"documentMutations")}function gf(i){return Di(i,"mutationQueues")}class Uc{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Uc(0)}static Rn(){return new Uc(-1)}}class dg{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new Uc(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>un.fromTimestamp(new Cr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Pn(e,c)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Sd(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(I(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let c=0;const g=[];return Sd(e).J((v,x)=>{const U=Xa(x);U.sequenceNumber<=t&&null===s.get(U.targetId)&&(c++,g.push(this.removeTargetData(e,U)))}).next(()=>Be.waitFor(g)).next(()=>c)}forEachTarget(e,t){return Sd(e).J((s,c)=>{const g=Xa(c);t(g)})}bn(e){return mf(e).get("targetGlobalKey").next(t=>(I(null!==t),t))}Pn(e,t){return mf(e).put("targetGlobalKey",t)}vn(e,t){return Sd(e).put(Id(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Ya(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return Sd(e).J({range:c,index:"queryTargetsIndex"},(v,x,U)=>{const $=Xa(x);Ou(t,$.target)&&(g=$,U.done())}).next(()=>g)}addMatchingKeys(e,t,s){const c=[],g=yl(e);return t.forEach(v=>{const x=no(v.path);c.push(g.put({targetId:s,path:x})),c.push(this.referenceDelegate.addReference(e,s,v))}),Be.waitFor(c)}removeMatchingKeys(e,t,s){const c=yl(e);return Be.forEach(t,g=>{const v=no(g.path);return Be.waitFor([c.delete([s,v]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=yl(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=yl(e);let g=Ln();return c.J({range:s,H:!0},(v,x,U)=>{const $=ya(v[1]),ee=new Lt($);g=g.add(ee)}).next(()=>g)}containsKey(e,t){const s=no(t.path),c=IDBKeyRange.bound([s],[Mu(s)],!1,!0);let g=0;return yl(e).J({index:"documentTargetsIndex",H:!0,range:c},([v,x],U,$)=>{0!==v&&(g++,$.done())}).next(()=>g>0)}te(e,t){return Sd(e).get(t).next(s=>s?Xa(s):null)}}function Sd(i){return Di(i,"targets")}function mf(i){return Di(i,"targetGlobal")}function yl(i){return Di(i,"targetDocuments")}function dp([i,e],[t,s]){const c=tn(i,t);return 0===c?tn(e,s):c}class yf{constructor(e){this.Sn=e,this.buffer=new jn(dp),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();dp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qu{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;_t("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){ki(s)?_t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield ca(s)}yield t.kn(3e5)}))}}class Nm{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Be.resolve(Li.ot);const s=new yf(t);return this.On.forEachTarget(e,c=>s.xn(c.sequenceNumber)).next(()=>this.On.Fn(e,c=>s.xn(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),Be.resolve(yh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yh):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,c,g,v,x,U,$;const ee=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ge=>(ge>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ge}`),c=this.params.maximumSequenceNumbersToCollect):c=ge,v=Date.now(),this.nthSequenceNumber(e,c))).next(ge=>(s=ge,x=Date.now(),this.removeTargets(e,s,t))).next(ge=>(g=ge,U=Date.now(),this.removeOrphanedDocuments(e,s))).next(ge=>($=Date.now(),Ka()<=Ne.in.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ee}ms\n\tDetermined least recently used ${c} in `+(x-v)+`ms\n\tRemoved ${g} targets in `+(U-x)+`ms\n\tRemoved ${ge} documents in `+($-U)+`ms\nTotal Duration: ${$-ee}ms`),Be.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:g,documentsRemoved:ge})))}}class hp{constructor(e,t){this.db=e,this.garbageCollector=new Nm(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,c)=>t(c))}addReference(e,t,s){return Eh(e,s)}removeReference(e,t,s){return Eh(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return Eh(e,t)}Un(e,t){return function(s,c){let g=!1;return gf(s).Y(v=>cp(s,v,c).next(x=>(x&&(g=!0),Be.resolve(!x)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let g=0;return this.Ln(e,(v,x)=>{if(x<=t){const U=this.Un(e,v).next($=>{if(!$)return g++,s.getEntry(e,v).next(()=>(s.removeEntry(v,un.min()),yl(e).delete([0,no(v.path)])))});c.push(U)}}).next(()=>Be.waitFor(c)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return Eh(e,t)}Ln(e,t){const s=yl(e);let c,g=Li.ot;return s.J({index:"documentTargetsIndex"},([v,x],{path:U,sequenceNumber:$})=>{0===v?(g!==Li.ot&&t(new Lt(ya(c)),g),g=$,c=U):g=Li.ot}).next(()=>{g!==Li.ot&&t(new Lt(ya(c)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Eh(i,e){return yl(i).put((s=i.currentSequenceNumber,{targetId:0,path:no(e.path),sequenceNumber:s}));var s}class hg{constructor(){this.changes=new Js(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Be.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class fg{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Vc(e).put(s)}removeEntry(e,t,s){return Vc(e).delete(function(c,g){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],fh(g),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=ti.newInvalidDocument(t);return Vc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Na(t))},(c,g)=>{s=this.Kn(t,g)}).next(()=>s)}Gn(e,t){let s={size:0,document:ti.newInvalidDocument(t)};return Vc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Na(t))},(c,g)=>{s={document:this.Kn(t,g),size:pf(g)}}).next(()=>s)}getEntries(e,t){let s=So();return this.Qn(e,t,(c,g)=>{const v=this.Kn(c,g);s=s.insert(c,v)}).next(()=>s)}jn(e,t){let s=So(),c=new Hr(Lt.comparator);return this.Qn(e,t,(g,v)=>{const x=this.Kn(g,v);s=s.insert(g,x),c=c.insert(g,pf(v))}).next(()=>({documents:s,Wn:c}))}Qn(e,t,s){if(t.isEmpty())return Be.resolve();let c=new jn(fp);t.forEach(U=>c=c.add(U));const g=IDBKeyRange.bound(Na(c.first()),Na(c.last())),v=c.getIterator();let x=v.getNext();return Vc(e).J({index:"documentKeyIndex",range:g},(U,$,ee)=>{const ge=Lt.fromSegments([...$.prefixPath,$.collectionGroup,$.documentId]);for(;x&&fp(x,ge)<0;)s(x,null),x=v.getNext();x&&x.isEqual(ge)&&(s(x,$),x=v.hasNext()?v.getNext():null),x?ee.q(Na(x)):ee.done()}).next(()=>{for(;x;)s(x,null),x=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,s){const c=[t.popLast().toArray(),t.lastSegment(),fh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Vc(e).K(IDBKeyRange.bound(c,g,!0)).next(v=>{let x=So();for(const U of v){const $=this.Kn(Lt.fromSegments(U.prefixPath.concat(U.collectionGroup,U.documentId)),U);x=x.insert($.key,$)}return x})}getAllFromCollectionGroup(e,t,s,c){let g=So();const v=wh(t,s),x=wh(t,sr.max());return Vc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,x,!0)},(U,$,ee)=>{const ge=this.Kn(Lt.fromSegments($.prefixPath.concat($.collectionGroup,$.documentId)),$);g=g.insert(ge.key,ge),g.size===c&&ee.done()}).next(()=>g)}newChangeBuffer(e){return new Pm(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return gg(e).get("remoteDocumentGlobalKey").next(t=>(I(!!t),t))}qn(e,t){return gg(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function dh(i,e){let t;if(e.document)t=q(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Lt.fromSegments(e.noDocument.path),c=vs(e.noDocument.readTime);t=ti.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return b();{const s=Lt.fromSegments(e.unknownDocument.path),c=vs(e.unknownDocument.version);t=ti.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new Cr(s[0],s[1]);return un.fromTimestamp(c)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(un.min()))return s}return ti.newInvalidDocument(e)}}function pg(i){return new fg(i)}class Pm extends hg{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Js(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new jn((g,v)=>tn(g.canonicalString(),v.canonicalString()));return this.changes.forEach((g,v)=>{const x=this.Hn.get(g);if(t.push(this.zn.removeEntry(e,g,x.readTime)),v.isValidDocument()){const U=hh(this.zn.wt,v);c=c.add(g.path.popLast()),s+=pf(U)-x.size,t.push(this.zn.addEntry(e,g,U))}else if(s-=x.size,this.trackRemovals){const U=hh(this.zn.wt,v.convertToNoDocument(un.min()));t.push(this.zn.addEntry(e,g,U))}}),c.forEach(g=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.zn.updateMetadata(e,s)),Be.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:c})=>(c.forEach((g,v)=>{this.Hn.set(g,{size:v,readTime:s.get(g).readTime})}),s))}}function gg(i){return Di(i,"remoteDocumentGlobal")}function Vc(i){return Di(i,"remoteDocumentsV14")}function Na(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wh(i,e){const t=e.documentKey.path.toArray();return[i,fh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fp(i,e){const t=i.path.toArray(),s=e.path.toArray();let c=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(c=tn(t[g],s[g]),c)return c;return c=tn(t.length,s.length),c||(c=tn(t[t.length-2],s[s.length-2]),c||tn(t[t.length-1],s[s.length-1]))}class mg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ih{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.getBaseDocument(e,t,s))).next(c=>(null!==s&&ul(s.mutation,c,Lr.empty(),Cr.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ln()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ln()){const c=fo();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(g=>{let v=Fl();return g.forEach((x,U)=>{v=v.insert(x,U.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const s=fo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ln()))}populateOverlays(e,t,s){const c=[];return s.forEach(g=>{t.has(g)||c.push(g)}),this.documentOverlayCache.getOverlays(e,c).next(g=>{g.forEach((v,x)=>{t.set(v,x)})})}computeViews(e,t,s,c){let g=So();const v=Fu(),x=Fu();return t.forEach((U,$)=>{const ee=s.get($.key);c.has($.key)&&(void 0===ee||ee.mutation instanceof yu)?g=g.insert($.key,$):void 0!==ee&&(v.set($.key,ee.mutation.getFieldMask()),ul(ee.mutation,$,ee.mutation.getFieldMask(),Cr.now()))}),this.recalculateAndSaveOverlays(e,g).next(U=>(U.forEach(($,ee)=>v.set($,ee)),t.forEach(($,ee)=>{var ge;return x.set($,new mg(ee,null!==(ge=v.get($))&&void 0!==ge?ge:null))}),x))}recalculateAndSaveOverlays(e,t){const s=Fu();let c=new Hr((v,x)=>v-x),g=Ln();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const x of v)x.keys().forEach(U=>{const $=t.get(U);if(null===$)return;let ee=s.get(U)||Lr.empty();ee=x.applyToLocalView($,ee),s.set(U,ee);const ge=(c.get(x.batchId)||Ln()).add(U);c=c.insert(x.batchId,ge)})}).next(()=>{const v=[],x=c.getReverseIterator();for(;x.hasNext();){const U=x.getNext(),$=U.key,ee=U.value,ge=ql();ee.forEach(ze=>{if(!g.has(ze)){const ut=Ol(t.get(ze),s.get(ze));null!==ut&&ge.set(ze,ut),g=g.add(ze)}}),v.push(this.documentOverlayCache.saveOverlays(e,$,ge))}return Be.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Lt.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ic(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(g=>{const v=c-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-g.size):Be.resolve(fo());let x=-1,U=g;return v.next($=>Be.forEach($,(ee,ge)=>(x<ge.largestBatchId&&(x=ge.largestBatchId),g.get(ee)?Be.resolve():this.getBaseDocument(e,ee,ge).next(ze=>{U=U.insert(ee,ze)}))).next(()=>this.populateOverlays(e,$,g)).next(()=>this.computeViews(e,U,$,Ln())).next(ee=>({batchId:x,changes:Ao(ee)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Lt(t)).next(s=>{let c=Fl();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let g=Fl();return this.indexManager.getCollectionParents(e,c).next(v=>Be.forEach(v,x=>{const U=($=t,ee=x.child(c),new Aa(ee,null,$.explicitOrderBy.slice(),$.filters.slice(),$.limit,$.limitType,$.startAt,$.endAt));var $,ee;return this.getDocumentsMatchingCollectionQuery(e,U,s).next($=>{$.forEach((ee,ge)=>{g=g.insert(ee,ge)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(g=>(c=g,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(g=>{g.forEach((x,U)=>{const $=U.getKey();null===c.get($)&&(c=c.insert($,ti.newInvalidDocument($)))});let v=Fl();return c.forEach((x,U)=>{const $=g.get(x);void 0!==$&&ul($.mutation,U,Lr.empty(),Cr.now()),Dc(t,U)&&(v=v.insert(x,U))}),v})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):Be.resolve(ti.newInvalidDocument(t))}}class pp{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Be.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:Zi(s.createTime)}),Be.resolve()}getNamedQuery(e,t){return Be.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:bi(s.bundledQuery),readTime:Zi(s.readTime)}),Be.resolve();var s}}class _f{constructor(){this.overlays=new Hr(Lt.comparator),this.Xn=new Map}getOverlay(e,t){return Be.resolve(this.overlays.get(t))}getOverlays(e,t){const s=fo();return Be.forEach(t,c=>this.getOverlay(e,c).next(g=>{null!==g&&s.set(c,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,g)=>{this.ie(e,t,g)}),Be.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.Xn.get(s);return void 0!==c&&(c.forEach(g=>this.overlays=this.overlays.remove(g)),this.Xn.delete(s)),Be.resolve()}getOverlaysForCollection(e,t,s){const c=fo(),g=t.length+1,v=new Lt(t.child("")),x=this.overlays.getIteratorFrom(v);for(;x.hasNext();){const U=x.getNext().value,$=U.getKey();if(!t.isPrefixOf($.path))break;$.path.length===g&&U.largestBatchId>s&&c.set(U.getKey(),U)}return Be.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let g=new Hr(($,ee)=>$-ee);const v=this.overlays.getIterator();for(;v.hasNext();){const $=v.getNext().value;if($.getKey().getCollectionGroup()===t&&$.largestBatchId>s){let ee=g.get($.largestBatchId);null===ee&&(ee=fo(),g=g.insert($.largestBatchId,ee)),ee.set($.getKey(),$)}}const x=fo(),U=g.getIterator();for(;U.hasNext()&&(U.getNext().value.forEach(($,ee)=>x.set($,ee)),!(x.size()>=c)););return Be.resolve(x)}ie(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const v=this.Xn.get(c.largestBatchId).delete(s.key);this.Xn.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new lf(t,s));let g=this.Xn.get(t);void 0===g&&(g=Ln(),this.Xn.set(t,g)),this.Xn.set(t,g.add(s.key))}}class vf{constructor(){this.Zn=new jn(wi.ts),this.es=new jn(wi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new wi(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new wi(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Lt(new zn([])),s=new wi(t,e),c=new wi(t,e+1),g=[];return this.es.forEachInRange([s,c],v=>{this.rs(v),g.push(v.key)}),g}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Lt(new zn([])),s=new wi(t,e),c=new wi(t,e+1);let g=Ln();return this.es.forEachInRange([s,c],v=>{g=g.add(v.key)}),g}containsKey(e){const t=new wi(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class wi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Lt.comparator(e.key,t.key)||tn(e.ls,t.ls)}static ns(e,t){return tn(e.ls,t.ls)||Lt.comparator(e.key,t.key)}}class gp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new jn(wi.ts)}checkEmpty(e){return Be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const g=this.fs;this.fs++;const v=new wd(g,t,s,c);this.mutationQueue.push(v);for(const x of c)this.ds=this.ds.add(new wi(x.key,g)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Be.resolve(v)}lookupMutationBatch(e,t){return Be.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ws(t+1),g=c<0?0:c;return Be.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Be.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new wi(t,0),c=new wi(t,Number.POSITIVE_INFINITY),g=[];return this.ds.forEachInRange([s,c],v=>{const x=this._s(v.ls);g.push(x)}),Be.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new jn(tn);return t.forEach(c=>{const g=new wi(c,0),v=new wi(c,Number.POSITIVE_INFINITY);this.ds.forEachInRange([g,v],x=>{s=s.add(x.ls)})}),Be.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let g=s;Lt.isDocumentKey(g)||(g=g.child(""));const v=new wi(new Lt(g),0);let x=new jn(tn);return this.ds.forEachWhile(U=>{const $=U.key.path;return!!s.isPrefixOf($)&&($.length===c&&(x=x.add(U.ls)),!0)},v),Be.resolve(this.gs(x))}gs(e){const t=[];return e.forEach(s=>{const c=this._s(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){I(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return Be.forEach(t.mutations,c=>{const g=new wi(c.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new wi(t,0),c=this.ds.firstAfterOrEqual(s);return Be.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Be.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yg{constructor(e){this.ps=e,this.docs=new Hr(Lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),g=c?c.size:0,v=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:v}),this.size+=v-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Be.resolve(s?s.document.mutableCopy():ti.newInvalidDocument(t))}getEntries(e,t){let s=So();return t.forEach(c=>{const g=this.docs.get(c);s=s.insert(c,g?g.document.mutableCopy():ti.newInvalidDocument(c))}),Be.resolve(s)}getAllFromCollection(e,t,s){let c=So();const g=new Lt(t.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:x,value:{document:U}}=v.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||uu(nd(U),s)<=0||(c=c.insert(U.key,U.mutableCopy()))}return Be.resolve(c)}getAllFromCollectionGroup(e,t,s,c){b()}Is(e,t){return Be.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Ef(this)}getSize(e){return Be.resolve(this.size)}}class Ef extends hg{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.zn.addEntry(e,c)):this.zn.removeEntry(s)}),Be.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class _g{constructor(e){this.persistence=e,this.Ts=new Js(t=>Ya(t),Ou),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Es=0,this.As=new vf,this.targetCount=0,this.Rs=Uc.An()}forEachTarget(e,t){return this.Ts.forEach((s,c)=>t(c)),Be.resolve()}getLastRemoteSnapshotVersion(e){return Be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Be.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),Be.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Uc(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Be.resolve()}updateTargetData(e,t){return this.vn(t),Be.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Be.resolve()}removeTargets(e,t,s){let c=0;const g=[];return this.Ts.forEach((v,x)=>{x.sequenceNumber<=t&&null===s.get(x.targetId)&&(this.Ts.delete(v),g.push(this.removeMatchingKeysForTargetId(e,x.targetId)),c++)}),Be.waitFor(g).next(()=>c)}getTargetCount(e){return Be.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return Be.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Be.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const c=this.persistence.referenceDelegate,g=[];return c&&t.forEach(v=>{g.push(c.markPotentiallyOrphaned(e,v))}),Be.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Be.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Be.resolve(s)}containsKey(e,t){return Be.resolve(this.As.containsKey(t))}}class wf{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Li(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new _g(this),this.indexManager=new Ku,this.remoteDocumentCache=new yg(s=>this.referenceDelegate.Ss(s)),this.wt=new cf(t),this.Ds=new pp(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _f,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new gp(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){_t("MemoryPersistence","Starting transaction:",e);const c=new Om(this.Ps.next());return this.referenceDelegate.Cs(),s(c).next(g=>this.referenceDelegate.xs(c).next(()=>g)).toPromise().then(g=>(c.raiseOnCommittedEvent(),g))}Ns(e,t){return Be.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class Om extends mc{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.ks=new vf,this.Os=null}static Ms(e){return new If(e)}get Fs(){if(this.Os)return this.Os;throw b()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),Be.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),Be.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Be.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(c=>this.Fs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(g=>this.Fs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Be.forEach(this.Fs,s=>{const c=Lt.fromPath(s);return this.$s(e,c).next(g=>{g||t.removeEntry(c,un.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Be.or([()=>Be.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Ad{constructor(e){this.wt=e}O(e,t,s,c){const g=new Ta("createOrUpgrade",t);var x;s<1&&c>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rh,{unique:!0}),x.createObjectStore("documentMutations"),sc(e),function(x){x.createObjectStore("remoteDocuments")}(e));let v=Be.resolve();return s<3&&c>=3&&(0!==s&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),sc(e)),v=v.next(()=>function(x){const U=x.store("targetGlobal"),$={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return U.put("targetGlobalKey",$)}(g))),s<4&&c>=4&&(0!==s&&(v=v.next(()=>function(x,U){return U.store("mutations").K().next($=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rh,{unique:!0});const ee=U.store("mutations"),ge=$.map(ze=>ee.put(ze));return Be.waitFor(ge)})}(e,g))),v=v.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(v=v.next(()=>this.Bs(g))),s<6&&c>=6&&(v=v.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(g)))),s<7&&c>=7&&(v=v.next(()=>this.Us(g))),s<8&&c>=8&&(v=v.next(()=>this.qs(e,g))),s<9&&c>=9&&(v=v.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(v=v.next(()=>this.Ks(g))),s<11&&c>=11&&(v=v.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(v=v.next(()=>{!function(x){const U=x.createObjectStore("documentOverlays",{keyPath:ah});U.createIndex("collectionPathOverlayIndex",Oc,{unique:!1}),U.createIndex("collectionGroupOverlayIndex",ap,{unique:!1})}(e)})),s<13&&c>=13&&(v=v.next(()=>function(x){const U=x.createObjectStore("remoteDocumentsV14",{keyPath:ag});U.createIndex("documentKeyIndex",af),U.createIndex("collectionGroupIndex",rp)}(e)).next(()=>this.Gs(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(v=v.next(()=>this.Qs(e,g))),s<15&&c>=15&&(v=v.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:oh}).createIndex("sequenceNumberIndex",Pc,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:hl}).createIndex("documentKeyIndex",op,{unique:!1})}(e))),v}Ls(e){let t=0;return e.store("remoteDocuments").J((s,c)=>{t+=pf(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(c=>Be.forEach(c,g=>{const v=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",v).next(x=>Be.forEach(x,U=>{I(U.userId===g.userId);const $=wu(this.wt,U);return _h(e,g.userId,$).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const g=[];return s.J((v,x)=>{const U=new zn(v),$=[0,no(U)];g.push(t.get($).next(ee=>ee?Be.resolve():t.put({targetId:0,path:no(U),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Be.waitFor(g))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:sp});const s=t.store("collectionParents"),c=new kc,g=v=>{if(c.add(v)){const x=v.lastSegment(),U=v.popLast();return s.put({collectionId:x,parent:no(U)})}};return t.store("remoteDocuments").J({H:!0},(v,x)=>{const U=new zn(v);return g(U.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([v,x,U],$)=>{const ee=ya(x);return g(ee.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,c)=>{const g=Xa(c),v=Id(this.wt,g);return t.put(v)})}Gs(e,t){const s=t.store("remoteDocuments"),c=[];return s.J((g,v)=>{const x=t.store("remoteDocumentsV14"),U=($=v,$.document?new Lt(zn.fromString($.document.name).popFirst(5)):$.noDocument?Lt.fromSegments($.noDocument.path):$.unknownDocument?Lt.fromSegments($.unknownDocument.path):b()).path.toArray();var $;const ee={prefixPath:U.slice(0,U.length-2),collectionGroup:U[U.length-2],documentId:U[U.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};c.push(x.put(ee))}).next(()=>Be.waitFor(c))}Qs(e,t){const s=t.store("mutations"),c=pg(this.wt),g=new wf(If.Ms,this.wt.ne);return s.K().next(v=>{const x=new Map;return v.forEach(U=>{var $;let ee=null!==($=x.get(U.userId))&&void 0!==$?$:Ln();wu(this.wt,U).keys().forEach(ge=>ee=ee.add(ge)),x.set(U.userId,ee)}),Be.forEach(x,(U,$)=>{const ee=new vi($),ge=Cd.se(this.wt,ee),ze=g.getIndexManager(ee),ut=vh.se(ee,this.wt,ze,g.referenceDelegate);return new Ih(c,ut,ge,ze).recalculateAndSaveOverlaysForDocumentKeys(new Vl(t,Li.ot),U).next()})})}}function sc(i){i.createObjectStore("targetDocuments",{keyPath:ip}).createIndex("documentTargetsIndex",sh,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tc,{unique:!0}),i.createObjectStore("targetGlobal")}const xd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class _l{constructor(e,t,s,c,g,v,x,U,$,ee,ge=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=g,this.window=v,this.document=x,this.Ws=$,this.zs=ee,this.Hs=ge,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=ze=>Promise.resolve(),!_l.V())throw new B(M.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new hp(this,c),this.ei=t+"main",this.wt=new cf(U),this.ni=new Oi(this.ei,this.Hs,new Ad(this.wt)),this.Vs=new dg(this.referenceDelegate,this.wt),this.remoteDocumentCache=pg(this.wt),this.Ds=new nc,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ee&&Er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new B(M.FAILED_PRECONDITION,xd);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Li(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,Ie.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ie.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>El(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ki(e))return _t("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return _t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return vl(e).get("owner").next(t=>Be.resolve(this.di(t)))}_i(e){return El(e).delete(this.clientId)}wi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Di(s,"clientMetadata");return c.K().next(g=>{const v=e.gi(g,18e5),x=g.filter(U=>-1===v.indexOf(U));return Be.forEach(x,U=>c.delete(U.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Be.resolve(!0):vl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new B(M.FAILED_PRECONDITION,xd);return!1}}return!(!this.networkEnabled||!this.inForeground)||El(e).K().next(s=>void 0===this.gi(s,5e3).find(c=>{if(this.clientId!==c.clientId){const v=!this.inForeground&&c.inForeground,x=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||v&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&_t("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Vl(t,Li.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>El(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return vh.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mh(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Cd.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){_t("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",g=15===(v=this.Hs)?uf:14===v?Ed:13===v?lh:12===v?uh:11===v?Wu:void b();var v;let x;return this.ni.runTransaction(e,c,g,U=>(x=new Vl(U,this.Ps?this.Ps.next():Li.ot),"readwrite-primary"===t?this.ai(x).next($=>!!$||this.hi(x)).next($=>{if(!$)throw Er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new B(M.FAILED_PRECONDITION,qa);return s(x)}).next($=>this.fi(x).next(()=>$)):this.bi(x).next(()=>s(x)))).then(U=>(x.raiseOnCommittedEvent(),U))}bi(e){return vl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new B(M.FAILED_PRECONDITION,xd)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vl(e).put("owner",t)}static V(){return Oi.V()}li(e){const t=vl(e);return t.get("owner").next(s=>this.di(s)?(_t("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Be.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Er(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,ke.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return _t("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Er("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Er("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vl(i){return Di(i,"owner")}function El(i){return Di(i,"clientMetadata")}function Cf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Ch{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=c}static Vi(e,t){let s=Ln(),c=Ln();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:c=c.add(g.doc.key)}return new Ch(e,t.fromCache,s,c)}}class Zu{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ci(e,t).next(g=>g||this.xi(e,t,c,s)).next(g=>g||this.Ni(e,t))}Ci(e,t){return Be.resolve(null)}xi(e,t,s,c){return function np(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||c.isEqual(un.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(g=>{const v=this.ki(t,g);return this.Oi(t,v,s,c)?this.Ni(e,t):(Ka()<=Ne.in.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Zo(t)),this.Mi(e,v,t,Nu(c,-1)))})}ki(e,t){let s=new jn(xa(e));return t.forEach((c,g)=>{Dc(e,g)&&(s=s.add(g))}),s}Oi(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(c)>0)}Ni(e,t){return Ka()<=Ne.in.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",Zo(t)),this.Di.getDocumentsMatchingQuery(e,t,sr.min())}Mi(e,t,s,c){return this.Di.getDocumentsMatchingQuery(e,s,c).next(g=>(t.forEach(v=>{g=g.insert(v.key,v)}),g))}}class Ns{constructor(e,t,s,c){this.persistence=e,this.Fi=t,this.wt=c,this.$i=new Hr(tn),this.Bi=new Js(g=>Ya(g),Ou),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ih(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Ro(i,e,t,s){return new Ns(i,e,t,s)}function oc(i,e){return Bc.apply(this,arguments)}function Bc(){return Bc=(0,Ie.Z)(function*(i,e){const t=R(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(g=>(c=g,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const v=[],x=[];let U=Ln();for(const $ of c){v.push($.batchId);for(const ee of $.mutations)U=U.add(ee.key)}for(const $ of g){x.push($.batchId);for(const ee of $.mutations)U=U.add(ee.key)}return t.localDocuments.getDocuments(s,U).next($=>({Ki:$,removedBatchIds:v,addedBatchIds:x}))})})}),Bc.apply(this,arguments)}function vg(i,e){const t=R(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),g=t.Ui.newChangeBuffer({trackRemovals:!0});return function(v,x,U,$){const ee=U.batch,ge=ee.keys();let ze=Be.resolve();return ge.forEach(ut=>{ze=ze.next(()=>$.getEntry(x,ut)).next(It=>{const Kt=U.docVersions.get(ut);I(null!==Kt),It.version.compareTo(Kt)<0&&(ee.applyToRemoteDocument(It,U),It.isValidDocument()&&(It.setReadTime(U.commitVersion),$.addEntry(It)))})}),ze.next(()=>v.mutationQueue.removeMutationBatch(x,ee))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let x=Ln();for(let U=0;U<v.mutationResults.length;++U)v.mutationResults[U].transformResults.length>0&&(x=x.add(v.batch.mutations[U].key));return x}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}function Df(i){const e=R(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function km(i,e){const t=R(i),s=e.snapshotVersion;let c=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const v=t.Ui.newChangeBuffer({trackRemovals:!0});c=t.$i;const x=[];e.targetChanges.forEach((ee,ge)=>{const ze=c.get(ge);if(!ze)return;x.push(t.Vs.removeMatchingKeys(g,ee.removedDocuments,ge).next(()=>t.Vs.addMatchingKeys(g,ee.addedDocuments,ge)));let ut=ze.withSequenceNumber(g.currentSequenceNumber);var It,Kt,fn;e.targetMismatches.has(ge)?ut=ut.withResumeToken(ei.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):ee.resumeToken.approximateByteSize()>0&&(ut=ut.withResumeToken(ee.resumeToken,s)),c=c.insert(ge,ut),Kt=ut,fn=ee,(0===(It=ze).resumeToken.approximateByteSize()||Kt.snapshotVersion.toMicroseconds()-It.snapshotVersion.toMicroseconds()>=3e8||fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0)&&x.push(t.Vs.updateTargetData(g,ut))});let U=So(),$=Ln();if(e.documentUpdates.forEach(ee=>{e.resolvedLimboDocuments.has(ee)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(g,ee))}),x.push(Yu(g,v,e.documentUpdates).next(ee=>{U=ee.Gi,$=ee.Qi})),!s.isEqual(un.min())){const ee=t.Vs.getLastRemoteSnapshotVersion(g).next(ge=>t.Vs.setTargetsMetadata(g,g.currentSequenceNumber,s));x.push(ee)}return Be.waitFor(x).next(()=>v.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,U,$)).next(()=>U)}).then(g=>(t.$i=c,g))}function Yu(i,e,t){let s=Ln(),c=Ln();return t.forEach(g=>s=s.add(g)),e.getEntries(i,s).next(g=>{let v=So();return t.forEach((x,U)=>{const $=g.get(x);U.isFoundDocument()!==$.isFoundDocument()&&(c=c.add(x)),U.isNoDocument()&&U.version.isEqual(un.min())?(e.removeEntry(x,U.readTime),v=v.insert(x,U)):!$.isValidDocument()||U.version.compareTo($.version)>0||0===U.version.compareTo($.version)&&$.hasPendingWrites?(e.addEntry(U),v=v.insert(x,U)):_t("LocalStore","Ignoring outdated watch update for ",x,". Current version:",$.version," Watch version:",U.version)}),{Gi:v,Qi:c}})}function mp(i,e){const t=R(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function jc(i,e){const t=R(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Vs.getTargetData(s,e).next(g=>g?(c=g,Be.resolve(c)):t.Vs.allocateTargetId(s).next(v=>(c=new zu(e,v,0,s.currentSequenceNumber),t.Vs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.$i.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function ac(i,e,t){return bf.apply(this,arguments)}function bf(){return bf=(0,Ie.Z)(function*(i,e,t){const s=R(i),c=s.$i.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,v=>s.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!ki(v))throw v;_t("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.$i=s.$i.remove(e),s.Bi.delete(c.target)}),bf.apply(this,arguments)}function Rd(i,e,t){const s=R(i);let c=un.min(),g=Ln();return s.persistence.runTransaction("Execute query","readonly",v=>function(x,U,$){const ee=R(x),ge=ee.Bi.get($);return void 0!==ge?Be.resolve(ee.$i.get(ge)):ee.Vs.getTargetData(U,$)}(s,v,ga(e)).next(x=>{if(x)return c=x.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(v,x.targetId).next(U=>{g=U})}).next(()=>s.Fi.getDocumentsMatchingQuery(v,e,t?c:un.min(),t?g:Ln())).next(x=>(Sf(s,ma(e),x),{documents:x,ji:g})))}function Jo(i,e){const t=R(i),s=R(t.Vs),c=t.$i.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",g=>s.te(g,e).next(v=>v?v.target:null))}function Tf(i,e){const t=R(i),s=t.Li.get(e)||un.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Ui.getAllFromCollectionGroup(c,e,Nu(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(Sf(t,e,c),c))}function Sf(i,e,t){let s=un.min();t.forEach((c,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),i.Li.set(e,s)}function yp(){return yp=(0,Ie.Z)(function*(i,e,t,s){const c=R(i);let g=Ln(),v=So();for(const $ of t){const ee=e.Wi($.metadata.name);$.document&&(g=g.add(ee));const ge=e.zi($);ge.setReadTime(e.Hi($.metadata.readTime)),v=v.insert(ee,ge)}const x=c.Ui.newChangeBuffer({trackRemovals:!0}),U=yield jc(c,($=s,ga(Rl(zn.fromString(`__bundle__/docs/${$}`)))));var $;return c.persistence.runTransaction("Apply bundle documents","readwrite",$=>Yu($,x,v).next(ee=>(x.apply($),ee)).next(ee=>c.Vs.removeMatchingKeysForTargetId($,U.targetId).next(()=>c.Vs.addMatchingKeys($,g,U.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments($,ee.Gi,ee.Qi)).next(()=>ee.Gi)))}),yp.apply(this,arguments)}function Af(i,e){return _p.apply(this,arguments)}function _p(){return _p=(0,Ie.Z)(function*(i,e,t=Ln()){const s=yield jc(i,ga(bi(e.bundledQuery))),c=R(i);return c.persistence.runTransaction("Save named query","readwrite",g=>{const v=Zi(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return c.Ds.saveNamedQuery(g,e);const x=s.withResumeToken(ei.EMPTY_BYTE_STRING,v);return c.$i=c.$i.insert(x.targetId,x),c.Vs.updateTargetData(g,x).next(()=>c.Vs.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>c.Vs.addMatchingKeys(g,t,s.targetId)).next(()=>c.Ds.saveNamedQuery(g,e))})}),_p.apply(this,arguments)}function vp(i,e){return`firestore_clients_${i}_${e}`}function Md(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Nd(i,e){return`firestore_targets_${i}_${e}`}class Pd{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static Ji(e,t,s){const c=JSON.parse(s);let g,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(g=new B(c.error.code,c.error.message))),v?new Pd(e,t,c.state,g):(Er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Od{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let c,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(c=new B(s.error.code,s.error.message))),g?new Od(e,s.state,c):(Er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,g=Zl();for(let v=0;c&&v<s.activeTargetIds.length;++v)c=nn(s.activeTargetIds[v]),g=g.add(s.activeTargetIds[v]);return c?new bh(e,g):(Er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Th{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Th(t.clientId,t.onlineState):(Er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Sh{constructor(){this.activeTargetIds=Zl()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ah{constructor(e,t,s,c,g){this.window=e,this.js=t,this.persistenceKey=s,this.tr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Hr(tn),this.started=!1,this.ir=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.rr=vp(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Sh),this.cr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Ri();for(const c of t){if(c===e.tr)continue;const g=e.getItem(vp(e.persistenceKey,c));if(g){const v=bh.Ji(c,g);v&&(e.sr=e.sr.insert(v.clientId,v))}}e._r();const s=e.storage.getItem(e.lr);if(s){const c=e.wr(s);c&&e.mr(c)}for(const c of e.ir)e.nr(c);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Nd(this.persistenceKey,e));if(s){const c=Od.Ji(e,s);c&&(t=c.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Nd(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.pr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return _t("SharedClientState","READ",e,t),t}setItem(e,t){_t("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){_t("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(_t("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void Er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const c=t.Rr(s.key);return t.br(c,null)}{const c=t.Pr(s.key,s.newValue);if(c)return t.br(c.clientId,c)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const c=t.vr(s.key,s.newValue);if(c)return t.Vr(c)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const c=t.Sr(s.key,s.newValue);if(c)return t.Dr(c)}}else if(s.key===t.lr){if(null!==s.newValue){const c=t.wr(s.newValue);if(c)return t.mr(c)}}else if(s.key===t.ur){const c=function(g){let v=Li.ot;if(null!=g)try{const x=JSON.parse(g);I("number"==typeof x),v=x}catch(x){Er("SharedClientState","Failed to read sequence number from WebStorage",x)}return v}(s.newValue);c!==Li.ot&&t.sequenceNumberHandler(c)}else if(s.key===t.dr){const c=t.Cr(s.newValue);yield Promise.all(c.map(g=>t.syncEngine.Nr(g)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const c=new Pd(this.currentUser,e,t,s),g=Md(this.persistenceKey,this.currentUser,e);this.setItem(g,c.Yi())}pr(e){const t=Md(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const c=Nd(this.persistenceKey,e),g=new Od(e,t,s);this.setItem(c,g.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return bh.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),c=Number(s[1]);return Pd.Ji(new vi(void 0!==s[2]?s[2]:null),c,t)}Sr(e,t){const s=this.hr.exec(e),c=Number(s[1]);return Od.Ji(c,t)}wr(e){return Th.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);_t("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),c=this.gr(this.sr),g=this.gr(s),v=[],x=[];return g.forEach(U=>{c.has(U)||v.push(U)}),c.forEach(U=>{g.has(U)||x.push(U)}),this.syncEngine.Mr(v,x).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Zl();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class Ep{constructor(){this.Fr=new Sh,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Sh,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wp{Br(e){}shutdown(){}}class xf{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){_t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){_t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Ip={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Eg{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Qu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,c,g){const v=this.oo(e,t);_t("RestConnection","Sending: ",v,s);const x={};return this.uo(x,c,g),this.co(e,v,x,s).then(U=>(_t("RestConnection","Received: ",U),U),U=>{throw Do("RestConnection",`${e} failed with error: `,U,"url: ",v,"request:",s),U})}ao(e,t,s,c,g){return this.ro(e,t,s,c,g)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Io,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,g)=>e[g]=c),s&&s.headers.forEach((c,g)=>e[g]=c)}oo(e,t){return`${this.so}/v1/${t}:${Ip[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,c){return new Promise((g,v)=>{const x=new Da;x.listenOnce(za.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case jr.NO_ERROR:const $=x.getResponseJson();_t("Connection","XHR received:",JSON.stringify($)),g($);break;case jr.TIMEOUT:_t("Connection",'RPC "'+e+'" timed out'),v(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case jr.HTTP_ERROR:const ee=x.getStatus();if(_t("Connection",'RPC "'+e+'" failed with status:',ee,"response text:",x.getResponseText()),ee>0){const ge=x.getResponseJson().error;if(ge&&ge.status&&ge.message){const ze=function(ut){const It=ut.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(It)>=0?It:M.UNKNOWN}(ge.status);v(new B(ze,ge.message))}else v(new B(M.UNKNOWN,"Server responded with status "+x.getStatus()))}else v(new B(M.UNAVAILABLE,"Connection failed."));break;default:b()}}finally{_t("Connection",'RPC "'+e+'" completed.')}});const U=JSON.stringify(c);x.send(t,"POST",U,s,15)})}ho(e,t,s){const c=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ca(),v=Ho(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new qi({})),this.uo(x.initMessageHeaders,t,s),(0,ke.uI)()||(0,ke.b$)()||(0,ke.d)()||(0,ke.w1)()||(0,ke.Mn)()||(0,ke.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const U=c.join("");_t("Connection","Creating WebChannel: "+U,x);const $=g.createWebChannel(U,x);let ee=!1,ge=!1;const ze=new Eg({jr:It=>{ge?_t("Connection","Not sending because WebChannel is closed:",It):(ee||(_t("Connection","Opening WebChannel transport."),$.open(),ee=!0),_t("Connection","WebChannel sending:",It),$.send(It))},Wr:()=>$.close()}),ut=(It,Kt,fn)=>{It.listen(Kt,Gr=>{try{fn(Gr)}catch(Gi){setTimeout(()=>{throw Gi},0)}})};return ut($,vr.EventType.OPEN,()=>{ge||_t("Connection","WebChannel transport opened.")}),ut($,vr.EventType.CLOSE,()=>{ge||(ge=!0,_t("Connection","WebChannel transport closed"),ze.eo())}),ut($,vr.EventType.ERROR,It=>{ge||(ge=!0,Do("Connection","WebChannel transport errored:",It),ze.eo(new B(M.UNAVAILABLE,"The operation could not be completed")))}),ut($,vr.EventType.MESSAGE,It=>{var Kt;if(!ge){const fn=It.data[0];I(!!fn);const Gr=fn,Gi=Gr.error||(null===(Kt=Gr[0])||void 0===Kt?void 0:Kt.error);if(Gi){_t("Connection","WebChannel received error:",Gi);const Rr=Gi.status;let ro=function(us){const Xo=Ei[us];if(void 0!==Xo)return Hi(Xo)}(Rr),Si=Gi.message;void 0===ro&&(ro=M.INTERNAL,Si="Unknown error status: "+Rr+" with message "+Gi.message),ge=!0,ze.eo(new B(ro,Si)),$.close()}else _t("Connection","WebChannel received:",fn),ze.no(fn)}}),ut(v,qs.STAT_EVENT,It=>{It.stat===oo.PROXY?_t("Connection","Detected buffering proxy"):It.stat===oo.NOPROXY&&_t("Connection","Detected no buffering proxy")}),setTimeout(()=>{ze.Zr()},0),ze}}function xh(){return"undefined"!=typeof window?window:null}function Rh(){return"undefined"!=typeof document?document:null}function kd(i){return new Eu(i,!0)}class d{constructor(e,t,s=1e3,c=1.5,g=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=c,this._o=g,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),c=Math.max(0,t-s);c>0&&_t("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,c,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class u{constructor(e,t,s,c,g,v,x,U){this.js=e,this.Ao=s,this.Ro=c,this.bo=g,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=x,this.listener=U,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new d(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,Ie.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Er(t.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===M.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Po===t&&this.Uo(s,c)},s=>{e(()=>{const c=new B(M.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(c)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(c=>{s(()=>this.qo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return _t("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(_t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a extends u{constructor(e,t,s,c,g,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,v),this.wt=g}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Qe(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(U=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===U?1:"REMOVE"===U?2:"CURRENT"===U?3:"RESET"===U?4:b(),c=e.targetChange.targetIds||[],g=function(U,$){return U.dt?(I(void 0===$||"string"==typeof $),ei.fromBase64String($||"")):(I(void 0===$||$ instanceof Uint8Array),ei.fromUint8Array($||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,x=v&&function(U){const $=void 0===U.code?M.UNKNOWN:Hi(U.code);return new B($,U.message||"")}(v);t=new Bu(s,c,g,x||null)}else if("documentChange"in e){const s=e.documentChange,c=as(i,s.document.name),g=Zi(s.document.updateTime),v=new _s({mapValue:{fields:s.document.fields}}),x=ti.newFoundDocument(c,g,v);t=new Ul(s.targetIds||[],s.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const s=e.documentDelete,c=as(i,s.document),g=s.readTime?Zi(s.readTime):un.min(),v=ti.newNoDocument(c,g);t=new Ul([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,c=as(i,s.document);t=new Ul([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return b();{const s=e.filter,g=new Qs(s.count||0);t=new Vu(s.targetId,g)}}var U;return t}(this.wt,e),s=function(c){if(!("targetChange"in c))return un.min();const g=c.targetChange;return g.targetIds&&g.targetIds.length?un.min():g.readTime?Zi(g.readTime):un.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=m(this.wt),t.addTarget=function(c,g){let v;const x=g.target;return v=pa(x)?{documents:ln(c,x)}:{query:ai(c,x)},v.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?v.resumeToken=md(c,g.resumeToken):g.snapshotVersion.compareTo(un.min())>0&&(v.readTime=ju(c,g.snapshotVersion.toTimestamp())),v}(this.wt,e);const s=function to(i,e){const t=function(s,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return b()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=m(this.wt),t.removeTarget=e,this.Mo(t)}}class f extends u{constructor(e,t,s,c,g,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,v),this.wt=g,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(I(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function _n(i,e){return i&&i.length>0?(I(void 0!==e),i.map(t=>function(s,c){let g=Zi(s.updateTime?s.updateTime:c);return g.isEqual(un.min())&&(g=Zi(c)),new bc(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Zi(e.commitTime);return this.listener.Jo(s,t)}return I(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=m(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Rt(this.wt,s))};this.Mo(t)}}class _ extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=c,this.Zo=!1}tu(){if(this.Zo)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.bo.ro(e,t,s,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new B(M.UNKNOWN,c.toString())})}ao(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,g])=>this.bo.ao(e,t,s,c,g)).catch(c=>{throw"FirebaseError"===c.name?(c.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new B(M.UNKNOWN,c.toString())})}terminate(){this.Zo=!0}}class A{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Er(t),this.su=!1):_t("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class k{constructor(e,t,s,c,g){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=g,this.du.Br(x=>{s.enqueueAndForget((0,Ie.Z)(function*(){var U;Pa(v)&&(_t("RemoteStore","Restarting streams for network reachability change."),yield(U=(0,Ie.Z)(function*($){const ee=R($);ee.lu.add(4),yield ce(ee),ee._u.set("Unknown"),ee.lu.delete(4),yield W(ee)}),function($){return U.apply(this,arguments)})(v))}))}),this._u=new A(s,c)}}function W(i){return X.apply(this,arguments)}function X(){return X=(0,Ie.Z)(function*(i){if(Pa(i))for(const e of i.fu)yield e(!0)}),X.apply(this,arguments)}function ce(i){return qe.apply(this,arguments)}function qe(){return qe=(0,Ie.Z)(function*(i){for(const e of i.fu)yield e(!1)}),qe.apply(this,arguments)}function $e(i,e){const t=R(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Yi(t)?br(t):Ph(t).Co()&&Gt(t,e))}function ot(i,e){const t=R(i),s=Ph(t);t.hu.delete(e),s.Co()&&gn(t,e),0===t.hu.size&&(s.Co()?s.ko():Pa(t)&&t._u.set("Unknown"))}function Gt(i,e){i.wu.Nt(e.targetId),Ph(i).Qo(e)}function gn(i,e){i.wu.Nt(e),Ph(i).jo(e)}function br(i){i.wu=new po({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),Ph(i).start(),i._u.iu()}function Yi(i){return Pa(i)&&!Ph(i).Do()&&i.hu.size>0}function Pa(i){return 0===R(i).lu.size}function Ju(i){i.wu=void 0}function uc(i){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,Ie.Z)(function*(i){i.hu.forEach((e,t)=>{Gt(i,e)})}),Mh.apply(this,arguments)}function Lm(i,e){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,Ie.Z)(function*(i,e){Ju(i),Yi(i)?(i._u.uu(e),br(i)):i._u.set("Unknown")}),Cp.apply(this,arguments)}function Fm(i,e,t){return wl.apply(this,arguments)}function wl(){return wl=(0,Ie.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Bu&&2===e.state&&e.cause)try{yield(s=(0,Ie.Z)(function*(c,g){const v=g.cause;for(const x of g.targetIds)c.hu.has(x)&&(yield c.remoteSyncer.rejectListen(x,v),c.hu.delete(x),c.wu.removeTarget(x))}),function(c,g){return s.apply(this,arguments)})(i,e)}catch(s){_t("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ld(i,s)}else if(e instanceof Ul?i.wu.Ut(e):e instanceof Vu?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(un.min()))try{const s=yield Df(i.localStore);t.compareTo(s)>=0&&(yield function(c,g){const v=c.wu.Yt(g);return v.targetChanges.forEach((x,U)=>{if(x.resumeToken.approximateByteSize()>0){const $=c.hu.get(U);$&&c.hu.set(U,$.withResumeToken(x.resumeToken,g))}}),v.targetMismatches.forEach(x=>{const U=c.hu.get(x);if(!U)return;c.hu.set(x,U.withResumeToken(ei.EMPTY_BYTE_STRING,U.snapshotVersion)),gn(c,x);const $=new zu(U.target,x,1,U.sequenceNumber);Gt(c,$)}),c.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(s){_t("RemoteStore","Failed to raise snapshot:",s),yield Ld(i,s)}var s}),wl.apply(this,arguments)}function Ld(i,e,t){return wg.apply(this,arguments)}function wg(){return wg=(0,Ie.Z)(function*(i,e,t){if(!ki(e))throw e;i.lu.add(1),yield ce(i),i._u.set("Offline"),t||(t=()=>Df(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){_t("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield W(i)}))}),wg.apply(this,arguments)}function Um(i,e){return e().catch(t=>Ld(i,t,e))}function Rf(i){return Mf.apply(this,arguments)}function Mf(){return Mf=(0,Ie.Z)(function*(i){const e=R(i),t=Iu(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;Vm(e);)try{const c=yield mp(e.localStore,s);if(null===c){0===e.au.length&&t.ko();break}s=c.batchId,Ig(e,c)}catch(c){yield Ld(e,c)}Nh(e)&&Bm(e)}),Mf.apply(this,arguments)}function Vm(i){return Pa(i)&&i.au.length<10}function Ig(i,e){i.au.push(e);const t=Iu(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function Nh(i){return Pa(i)&&!Iu(i).Do()&&i.au.length>0}function Bm(i){Iu(i).start()}function Cg(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ie.Z)(function*(i){Iu(i).Xo()}),Dp.apply(this,arguments)}function jm(i){return bp.apply(this,arguments)}function bp(){return bp=(0,Ie.Z)(function*(i){const e=Iu(i);for(const t of i.au)e.Ho(t.mutations)}),bp.apply(this,arguments)}function f_(i,e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,Ie.Z)(function*(i,e,t){const s=i.au.shift(),c=ch.from(s,e,t);yield Um(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield Rf(i)}),Nf.apply(this,arguments)}function p_(i,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,Ie.Z)(function*(i,e){var t;e&&Iu(i).zo&&(yield(t=(0,Ie.Z)(function*(s,c){if(ll(g=c.code)&&g!==M.ABORTED){const v=s.au.shift();Iu(s).No(),yield Um(s,()=>s.remoteSyncer.rejectFailedWrite(v.batchId,c)),yield Rf(s)}var g}),function(s,c){return t.apply(this,arguments)})(i,e)),Nh(i)&&Bm(i)}),Dg.apply(this,arguments)}function bg(i,e){return Hc.apply(this,arguments)}function Hc(){return Hc=(0,Ie.Z)(function*(i,e){const t=R(i);t.asyncQueue.verifyOperationInProgress(),_t("RemoteStore","RemoteStore received new credentials");const s=Pa(t);t.lu.add(3),yield ce(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield W(t)}),Hc.apply(this,arguments)}function Tp(i,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Ie.Z)(function*(i,e){const t=R(i);e?(t.lu.delete(2),yield W(t)):e||(t.lu.add(2),yield ce(t),t._u.set("Unknown"))}),Tg.apply(this,arguments)}function Ph(i){return i.mu||(i.mu=function(e,t,s){const c=R(e);return c.tu(),new a(t,c.bo,c.authCredentials,c.appCheckCredentials,c.wt,s)}(i.datastore,i.asyncQueue,{zr:uc.bind(null,i),Jr:Lm.bind(null,i),Go:Fm.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.mu.No(),Yi(i)?br(i):i._u.set("Unknown")):(yield i.mu.stop(),Ju(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function Iu(i){return i.gu||(i.gu=function(e,t,s){const c=R(e);return c.tu(),new f(t,c.bo,c.authCredentials,c.appCheckCredentials,c.wt,s)}(i.datastore,i.asyncQueue,{zr:Cg.bind(null,i),Jr:p_.bind(null,i),Yo:jm.bind(null,i),Jo:f_.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.gu.No(),yield Rf(i)):(yield i.gu.stop(),i.au.length>0&&(_t("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Sg{constructor(e,t,s,c,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=g,this.deferred=new ne,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,s,c,g){const v=Date.now()+s,x=new Sg(e,t,v,c,g);return x.start(s),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oh(i,e){if(Er("AsyncQueue",`${e}: ${i}`),ki(i))return new B(M.UNAVAILABLE,`${e}: ${i}`);throw i}class kh{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Lt.comparator(t.key,s.key):(t,s)=>Lt.comparator(t.key,s.key),this.keyedMap=Fl(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new kh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof kh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,g=s.getNext().key;if(!c.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new kh;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class Hm{constructor(){this.yu=new Hr(Lt.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):b():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Oa{constructor(e,t,s,c,g,v,x,U){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=g,this.fromCache=v,this.syncStateChanged=x,this.excludesMetadataChanges=U}static fromInitialDocuments(e,t,s,c){const g=[];return t.forEach(v=>{g.push({type:0,doc:v})}),new Oa(e,t,kh.emptySet(t),g,s,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class Ag{constructor(){this.Iu=void 0,this.listeners=[]}}class $m{constructor(){this.queries=new Js(e=>Xd(e),Cc),this.onlineState="Unknown",this.Tu=new Set}}function Sp(i,e){return Ap.apply(this,arguments)}function Ap(){return Ap=(0,Ie.Z)(function*(i,e){const t=R(i),s=e.query;let c=!1,g=t.queries.get(s);if(g||(c=!0,g=new Ag),c)try{g.Iu=yield t.onListen(s)}catch(v){const x=Oh(v,`Initialization of query '${Zo(e.query)}' failed`);return void e.onError(x)}t.queries.set(s,g),g.listeners.push(e),e.Eu(t.onlineState),g.Iu&&e.Au(g.Iu)&&Rg(t)}),Ap.apply(this,arguments)}function xp(i,e){return xg.apply(this,arguments)}function xg(){return xg=(0,Ie.Z)(function*(i,e){const t=R(i),s=e.query;let c=!1;const g=t.queries.get(s);if(g){const v=g.listeners.indexOf(e);v>=0&&(g.listeners.splice(v,1),c=0===g.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),xg.apply(this,arguments)}function g_(i,e){const t=R(i);let s=!1;for(const c of e){const v=t.queries.get(c.query);if(v){for(const x of v.listeners)x.Au(c)&&(s=!0);v.Iu=c}}s&&Rg(t)}function m_(i,e,t){const s=R(i),c=s.queries.get(e);if(c)for(const g of c.listeners)g.onError(t);s.queries.delete(e)}function Rg(i){i.Tu.forEach(e=>{e.next()})}class Rp{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new Oa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class u0{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Mg{constructor(e){this.wt=e}Wi(e){return as(this.wt,e)}zi(e){return e.metadata.exists?q(this.wt,e.document,!1):ti.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Zi(e)}}class y_{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Gm(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=zn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new Mg(this.wt);for(const c of e)if(c.metadata.queries){const g=s.Wi(c.metadata.name);for(const v of c.metadata.queries){const x=(t.get(v)||Ln()).add(g);t.set(v,x)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function Dh(i,e,t,s){return yp.apply(this,arguments)}(e.localStore,new Mg(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const c of e.queries)yield Af(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Gm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class __{constructor(e){this.key=e}}class v_{constructor(e){this.key=e}}class Mp{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Ln(),this.mutatedKeys=Ln(),this.Lu=xa(e),this.Uu=new kh(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new Hm,c=t?t.Uu:this.Uu;let g=t?t.mutatedKeys:this.mutatedKeys,v=c,x=!1;const U="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,$="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ee,ge)=>{const ze=c.get(ee),ut=Dc(this.query,ge)?ge:null,It=!!ze&&this.mutatedKeys.has(ze.key),Kt=!!ut&&(ut.hasLocalMutations||this.mutatedKeys.has(ut.key)&&ut.hasCommittedMutations);let fn=!1;ze&&ut?ze.data.isEqual(ut.data)?It!==Kt&&(s.track({type:3,doc:ut}),fn=!0):this.Qu(ze,ut)||(s.track({type:2,doc:ut}),fn=!0,(U&&this.Lu(ut,U)>0||$&&this.Lu(ut,$)<0)&&(x=!0)):!ze&&ut?(s.track({type:0,doc:ut}),fn=!0):ze&&!ut&&(s.track({type:1,doc:ze}),fn=!0,(U||$)&&(x=!0)),fn&&(ut?(v=v.add(ut),g=Kt?g.add(ee):g.delete(ee)):(v=v.delete(ee),g=g.delete(ee)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ee="F"===this.query.limitType?v.last():v.first();v=v.delete(ee.key),g=g.delete(ee.key),s.track({type:1,doc:ee})}return{Uu:v,Gu:s,Oi:x,mutatedKeys:g}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const g=e.Gu.pu();g.sort(($,ee)=>function(ge,ze){const ut=It=>{switch(It){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return b()}};return ut(ge)-ut(ze)}($.type,ee.type)||this.Lu($.doc,ee.doc)),this.ju(s);const v=t?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,U=x!==this.$u;return this.$u=x,0!==g.length||U?{snapshot:new Oa(this.query,e.Uu,c,g,e.mutatedKeys,0===x,U,!1),zu:v}:{zu:v}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new Hm,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Ln(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new v_(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new __(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=Ln();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Oa.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class E_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Wm{constructor(e){this.key=e,this.Xu=!1}}class zm{constructor(e,t,s,c,g,v){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=g,this.maxConcurrentLimboResolutions=v,this.Zu={},this.tc=new Js(x=>Xd(x),Cc),this.ec=new Map,this.nc=new Set,this.sc=new Hr(Lt.comparator),this.ic=new Map,this.rc=new vf,this.oc={},this.uc=new Map,this.cc=Uc.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function l0(i,e){return Cu.apply(this,arguments)}function Cu(){return Cu=(0,Ie.Z)(function*(i,e){const t=Up(i);let s,c;const g=t.tc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),c=g.view.Yu();else{const v=yield jc(t.localStore,ga(e));t.isPrimaryClient&&$e(t.remoteStore,v);const x=t.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,c=yield Km(t,e,s,"current"===x)}return c}),Cu.apply(this,arguments)}function Km(i,e,t,s){return qm.apply(this,arguments)}function qm(){return qm=(0,Ie.Z)(function*(i,e,t,s){i.hc=(ee,ge,ze)=>{return(ut=(0,Ie.Z)(function*(It,Kt,fn,Gr){let Gi=Kt.view.Ku(fn);Gi.Oi&&(Gi=yield Rd(It.localStore,Kt.query,!1).then(({documents:Si})=>Kt.view.Ku(Si,Gi)));const Rr=Gr&&Gr.targetChanges.get(Kt.targetId),ro=Kt.view.applyChanges(Gi,It.isPrimaryClient,Rr);return Lg(It,Kt.targetId,ro.zu),ro.snapshot}),function(It,Kt,fn,Gr){return ut.apply(this,arguments)})(i,ee,ge,ze);var ut};const c=yield Rd(i.localStore,e,!0),g=new Mp(e,c.ji),v=g.Ku(c.documents),x=Uu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),U=g.applyChanges(v,i.isPrimaryClient,x);Lg(i,t,U.zu);const $=new E_(e,t,g);return i.tc.set(e,$),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),U.snapshot}),qm.apply(this,arguments)}function Zm(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,Ie.Z)(function*(i,e){const t=R(i),s=t.tc.get(e),c=t.ec.get(s.targetId);if(c.length>1)return t.ec.set(s.targetId,c.filter(g=>!Cc(g,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ac(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),ot(t.remoteStore,s.targetId),Fh(t,s.targetId)}).catch(ca))):(Fh(t,s.targetId),yield ac(t.localStore,s.targetId,!0))}),Np.apply(this,arguments)}function Ng(){return Ng=(0,Ie.Z)(function*(i,e,t){const s=Vp(i);try{const c=yield function(g,v){const x=R(g),U=Cr.now(),$=v.reduce((ze,ut)=>ze.add(ut.key),Ln());let ee,ge;return x.persistence.runTransaction("Locally write mutations","readwrite",ze=>{let ut=So(),It=Ln();return x.Ui.getEntries(ze,$).next(Kt=>{ut=Kt,ut.forEach((fn,Gr)=>{Gr.isValidDocument()||(It=It.add(fn))})}).next(()=>x.localDocuments.getOverlayedDocuments(ze,ut)).next(Kt=>{ee=Kt;const fn=[];for(const Gr of v){const Gi=hd(Gr,ee.get(Gr.key).overlayedDocument);null!=Gi&&fn.push(new yu(Gr.key,Gi,Kd(Gi.value.mapValue),$r.exists(!0)))}return x.mutationQueue.addMutationBatch(ze,U,fn,v)}).next(Kt=>{ge=Kt;const fn=Kt.applyToLocalDocumentSet(ee,It);return x.documentOverlayCache.saveOverlays(ze,Kt.batchId,fn)})}).then(()=>({batchId:ge.batchId,changes:Ao(ee)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(g,v,x){let U=g.oc[g.currentUser.toKey()];U||(U=new Hr(tn)),U=U.insert(v,x),g.oc[g.currentUser.toKey()]=U}(s,c.batchId,t),yield Mo(s,c.changes),yield Rf(s.remoteStore)}catch(c){const g=Oh(c,"Failed to persist write");t.reject(g)}}),Ng.apply(this,arguments)}function w_(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,Ie.Z)(function*(i,e){const t=R(i);try{const s=yield km(t.localStore,e);e.targetChanges.forEach((c,g)=>{const v=t.ic.get(g);v&&(I(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.Xu=!0:c.modifiedDocuments.size>0?I(v.Xu):c.removedDocuments.size>0&&(I(v.Xu),v.Xu=!1))}),yield Mo(t,s,e)}catch(s){yield ca(s)}}),Pp.apply(this,arguments)}function Op(i,e,t){const s=R(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.tc.forEach((g,v)=>{const x=v.view.Eu(e);x.snapshot&&c.push(x.snapshot)}),function(g,v){const x=R(g);x.onlineState=v;let U=!1;x.queries.forEach(($,ee)=>{for(const ge of ee.listeners)ge.Eu(v)&&(U=!0)}),U&&Rg(x)}(s.eventManager,e),c.length&&s.Zu.Go(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function I_(i,e,t){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,Ie.Z)(function*(i,e,t){const s=R(i);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.ic.get(e),g=c&&c.key;if(g){let v=new Hr(Lt.comparator);v=v.insert(g,ti.newNoDocument(g,un.min()));const x=Ln().add(g),U=new Xs(un.min(),new Map,new jn(tn),v,x);yield w_(s,U),s.sc=s.sc.remove(g),s.ic.delete(e),Of(s)}else yield ac(s.localStore,e,!1).then(()=>Fh(s,e,t)).catch(ca)}),Pf.apply(this,arguments)}function C_(i,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Ie.Z)(function*(i,e){const t=R(i),s=e.batch.batchId;try{const c=yield vg(t.localStore,e);$c(t,s,null),Lh(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Mo(t,c)}catch(c){yield ca(c)}}),Pg.apply(this,arguments)}function D_(i,e,t){return Og.apply(this,arguments)}function Og(){return Og=(0,Ie.Z)(function*(i,e,t){const s=R(i);try{const c=yield function(g,v){const x=R(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",U=>{let $;return x.mutationQueue.lookupMutationBatch(U,v).next(ee=>(I(null!==ee),$=ee.keys(),x.mutationQueue.removeMutationBatch(U,ee))).next(()=>x.mutationQueue.performConsistencyCheck(U)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(U,$,v)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(U,$)).next(()=>x.localDocuments.getDocuments(U,$))})}(s.localStore,e);$c(s,e,t),Lh(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Mo(s,c)}catch(c){yield ca(c)}}),Og.apply(this,arguments)}function kg(){return kg=(0,Ie.Z)(function*(i,e){const t=R(i);Pa(t.remoteStore)||_t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const v=R(g);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>v.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===s)return void e.resolve();const c=t.uc.get(s)||[];c.push(e),t.uc.set(s,c)}catch(s){const c=Oh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),kg.apply(this,arguments)}function Lh(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function $c(i,e,t){const s=R(i);let c=s.oc[s.currentUser.toKey()];if(c){const g=c.get(e);g&&(t?g.reject(t):g.resolve(),c=c.remove(e)),s.oc[s.currentUser.toKey()]=c}}function Fh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||Uh(i,s)})}function Uh(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(ot(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),Of(i))}function Lg(i,e,t){for(const s of t)s instanceof __?(i.rc.addReference(s.key,e),T_(i,s)):s instanceof v_?(_t("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||Uh(i,s.key)):b()}function T_(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(_t("SyncEngine","New document in limbo: "+t),i.nc.add(s),Of(i))}function Of(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new Lt(zn.fromString(e)),s=i.cc.next();i.ic.set(s,new Wm(t)),i.sc=i.sc.insert(t,s),$e(i.remoteStore,new zu(ga(Rl(t.path)),s,2,Li.ot))}}function Mo(i,e,t){return Fd.apply(this,arguments)}function Fd(){return Fd=(0,Ie.Z)(function*(i,e,t){const s=R(i),c=[],g=[],v=[];var x;s.tc.isEmpty()||(s.tc.forEach((x,U)=>{v.push(s.hc(U,e,t).then($=>{if($){s.isPrimaryClient&&s.sharedClientState.updateQueryState(U.targetId,$.fromCache?"not-current":"current"),c.push($);const ee=Ch.Vi(U.targetId,$);g.push(ee)}}))}),yield Promise.all(v),s.Zu.Go(c),yield(x=(0,Ie.Z)(function*(U,$){const ee=R(U);try{yield ee.persistence.runTransaction("notifyLocalViewChanges","readwrite",ge=>Be.forEach($,ze=>Be.forEach(ze.Pi,ut=>ee.persistence.referenceDelegate.addReference(ge,ze.targetId,ut)).next(()=>Be.forEach(ze.vi,ut=>ee.persistence.referenceDelegate.removeReference(ge,ze.targetId,ut)))))}catch(ge){if(!ki(ge))throw ge;_t("LocalStore","Failed to update sequence numbers: "+ge)}for(const ge of $){const ze=ge.targetId;if(!ge.fromCache){const ut=ee.$i.get(ze),Kt=ut.withLastLimboFreeSnapshotVersion(ut.snapshotVersion);ee.$i=ee.$i.insert(ze,Kt)}}}),function(U,$){return x.apply(this,arguments)})(s.localStore,g))}),Fd.apply(this,arguments)}function _a(i,e){return lc.apply(this,arguments)}function lc(){return lc=(0,Ie.Z)(function*(i,e){const t=R(i);if(!t.currentUser.isEqual(e)){_t("SyncEngine","User change. New user:",e.toKey());const s=yield oc(t.localStore,e);t.currentUser=e,(c=t).uc.forEach(v=>{v.forEach(x=>{x.reject(new B(M.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Mo(t,s.Ki)}var c}),lc.apply(this,arguments)}function kp(i,e){const t=R(i),s=t.ic.get(e);if(s&&s.Xu)return Ln().add(s.key);{let c=Ln();const g=t.ec.get(e);if(!g)return c;for(const v of g){const x=t.tc.get(v);c=c.unionWith(x.view.qu)}return c}}function Xu(i,e){return kf.apply(this,arguments)}function kf(){return kf=(0,Ie.Z)(function*(i,e){const t=R(i),s=yield Rd(t.localStore,e.query,!0),c=e.view.Ju(s);return t.isPrimaryClient&&Lg(t,e.targetId,c.zu),c}),kf.apply(this,arguments)}function Vh(i,e){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,Ie.Z)(function*(i,e){const t=R(i);return Tf(t.localStore,e).then(s=>Mo(t,s))}),Gc.apply(this,arguments)}function Bh(i,e,t,s){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,Ie.Z)(function*(i,e,t,s){const c=R(i),g=yield function(v,x){const U=R(v),$=R(U.mutationQueue);return U.persistence.runTransaction("Lookup mutation documents","readonly",ee=>$.yn(ee,x).next(ge=>ge?U.localDocuments.getDocuments(ee,ge):Be.resolve(null)))}(c.localStore,e);var x;null!==g?("pending"===t?yield Rf(c.remoteStore):"acknowledged"===t||"rejected"===t?($c(c,e,s||null),Lh(c,e),x=e,R(R(c.localStore).mutationQueue).In(x)):b(),yield Mo(c,g)):_t("SyncEngine","Cannot apply mutation batch with id: "+e)}),Wc.apply(this,arguments)}function zc(){return zc=(0,Ie.Z)(function*(i,e){const t=R(i);if(Up(t),Vp(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield Ud(t,s.toArray());t.ac=!0,yield Tp(t.remoteStore,!0);for(const g of c)$e(t.remoteStore,g)}else if(!1===e&&!1!==t.ac){const s=[];let c=Promise.resolve();t.ec.forEach((g,v)=>{t.sharedClientState.isLocalQueryTarget(v)?s.push(v):c=c.then(()=>(Fh(t,v),ac(t.localStore,v,!0))),ot(t.remoteStore,v)}),yield c,yield Ud(t,s),function(g){const v=R(g);v.ic.forEach((x,U)=>{ot(v.remoteStore,U)}),v.rc.cs(),v.ic=new Map,v.sc=new Hr(Lt.comparator)}(t),t.ac=!1,yield Tp(t.remoteStore,!1)}}),zc.apply(this,arguments)}function Ud(i,e,t){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,Ie.Z)(function*(i,e,t){const s=R(i),c=[],g=[];for(const v of e){let x;const U=s.ec.get(v);if(U&&0!==U.length){x=yield jc(s.localStore,ga(U[0]));for(const $ of U){const ee=s.tc.get($),ge=yield Xu(s,ee);ge.snapshot&&g.push(ge.snapshot)}}else{const $=yield Jo(s.localStore,v);x=yield jc(s.localStore,$),yield Km(s,Vd($),v,!1)}c.push(x)}return s.Zu.Go(g),c}),Kc.apply(this,arguments)}function Vd(i){return ad(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Qm(i){const e=R(i);return R(R(e.localStore).persistence).Ri()}function Jm(i,e,t,s){return Lp.apply(this,arguments)}function Lp(){return Lp=(0,Ie.Z)(function*(i,e,t,s){const c=R(i);if(c.ac)return void _t("SyncEngine","Ignoring unexpected query state notification.");const g=c.ec.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const v=yield Tf(c.localStore,ma(g[0])),x=Xs.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Mo(c,v,x);break}case"rejected":yield ac(c.localStore,e,!0),Fh(c,e,s);break;default:b()}}),Lp.apply(this,arguments)}function Xm(i,e,t){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,Ie.Z)(function*(i,e,t){const s=Up(i);if(s.ac){for(const c of e){if(s.ec.has(c)){_t("SyncEngine","Adding an already active target "+c);continue}const g=yield Jo(s.localStore,c),v=yield jc(s.localStore,g);yield Km(s,Vd(g),v.targetId,!1),$e(s.remoteStore,v)}for(const c of t)s.ec.has(c)&&(yield ac(s.localStore,c,!1).then(()=>{ot(s.remoteStore,c),Fh(s,c)}).catch(ca))}}),Fp.apply(this,arguments)}function Up(i){const e=R(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=w_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=I_.bind(null,e),e.Zu.Go=g_.bind(null,e.eventManager),e.Zu.lc=m_.bind(null,e.eventManager),e}function Vp(i){const e=R(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D_.bind(null,e),e}class Fg{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.wt=kd(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Ro(this.persistence,new Zu,e.initialUser,this.wt)}_c(e){return new wf(If.Ms,this.wt)}dc(e){return new Ep}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ty extends Fg{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield Vp(s.yc.syncEngine),yield Rf(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Ro(this.persistence,new Zu,e.initialUser,this.wt)}mc(e,t){return new qu(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new bl(t,this.persistence);return new lo(e.asyncQueue,s)}_c(e){const t=Cf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new _l(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,xh(),Rh(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new Ep}}class ny extends ty{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e);const c=s.yc.syncEngine;s.sharedClientState instanceof Ah&&(s.sharedClientState.syncEngine={kr:Bh.bind(null,c),Or:Jm.bind(null,c),Mr:Xm.bind(null,c),Ri:Qm.bind(null,c),Nr:Vh.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var g=(0,Ie.Z)(function*(v){yield function jh(i,e){return zc.apply(this,arguments)}(s.yc.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return g.apply(this,arguments)}}())})()}dc(e){const t=xh();if(!Ah.V(t))throw new B(M.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Cf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ah(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Ug{initialize(e,t){var s=this;return(0,Ie.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>Op(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=_a.bind(null,s.syncEngine),yield Tp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new $m}createDatastore(e){const t=kd(e.databaseInfo.databaseId),s=new Qu(e.databaseInfo);return new _(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,g=x=>Op(this.syncEngine,x,0),v=xf.V()?new xf:new wp,new k(t,s,c,g,v);var t,s,c,g,v}createSyncEngine(e,t){return function(s,c,g,v,x,U,$){const ee=new zm(s,c,g,v,x,U);return $&&(ee.ac=!0),ee}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const s=R(t);_t("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield ce(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Vg(i,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class S_{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ne,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),c=Number(s);isNaN(c)&&e.Pc(`length string (${s}) is not valid number`);const g=yield e.vc(c);return new u0(JSON.parse(g),t.length+c)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class A_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new B(M.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,Ie.Z)(function*(g,v){const x=R(g),U=m(x.wt)+"/documents",$={documents:v.map(ut=>Ma(x.wt,ut))},ee=yield x.ao("BatchGetDocuments",U,$),ge=new Map;ee.forEach(ut=>{const It=function De(i,e){return"found"in e?function(t,s){I(!!s.found);const c=as(t,s.found.name),g=Zi(s.found.updateTime),v=new _s({mapValue:{fields:s.found.fields}});return ti.newFoundDocument(c,g,v)}(i,e):"missing"in e?function(t,s){I(!!s.missing),I(!!s.readTime);const c=as(t,s.missing),g=Zi(s.readTime);return ti.newNoDocument(c,g)}(i,e):b()}(x.wt,ut);ge.set(It.key.toString(),It)});const ze=[];return v.forEach(ut=>{const It=ge.get(ut.toString());I(!!It),ze.push(It)}),ze}),function(g,v){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ra(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const g=Lt.fromPath(c);e.mutations.push(new ku(g,e.precondition(g)))}),yield(s=(0,Ie.Z)(function*(c,g){const v=R(c),x=m(v.wt)+"/documents",U={writes:g.map($=>Rt(v.wt,$))};yield v.ro("Commit",x,U)}),function(c,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw b();t=un.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new B(M.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?$r.updateTime(t):$r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(un.min()))throw new B(M.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $r.updateTime(t)}return $r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ry{constructor(e,t,s,c,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=g,this.Dc=s.maxAttempts,this.So=new d(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new A_(e.datastore),s=e.xc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(g=>{e.Nc(g)}))}).catch(c=>{e.Nc(c)})}))}xc(e){try{const t=this.updateFunction(e);return!yt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ll(t)}return!1}}class x_{constructor(e,t,s,c){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=vi.UNAUTHENTICATED,this.clientId=ms.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,Ie.Z)(function*(x){_t("FirestoreClient","Received user=",x.uid),yield g.authCredentialListener(x),g.user=x});return function(x){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(_t("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ne;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=Oh(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Bg(i,e){return jg.apply(this,arguments)}function jg(){return jg=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),_t("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,Ie.Z)(function*(g){s.isEqual(g)||(yield oc(e.localStore,g),s=g)});return function(g){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),jg.apply(this,arguments)}function iy(i,e){return sy.apply(this,arguments)}function sy(){return sy=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield Hg(i);_t("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(c=>bg(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,g)=>bg(e.remoteStore,g)),i.onlineComponents=e}),sy.apply(this,arguments)}function Hg(i){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,Ie.Z)(function*(i){return i.offlineComponents||(_t("FirestoreClient","Using default OfflineComponentProvider"),yield Bg(i,new Fg)),i.offlineComponents}),Ff.apply(this,arguments)}function Hh(i){return $g.apply(this,arguments)}function $g(){return $g=(0,Ie.Z)(function*(i){return i.onlineComponents||(_t("FirestoreClient","Using default OnlineComponentProvider"),yield iy(i,new Ug)),i.onlineComponents}),$g.apply(this,arguments)}function R_(i){return Hg(i).then(e=>e.persistence)}function oy(i){return Hg(i).then(e=>e.localStore)}function M_(i){return Hh(i).then(e=>e.remoteStore)}function Gg(i){return Hh(i).then(e=>e.syncEngine)}function Bd(i){return ay.apply(this,arguments)}function ay(){return ay=(0,Ie.Z)(function*(i){const e=yield Hh(i),t=e.eventManager;return t.onListen=l0.bind(null,e.syncEngine),t.onUnlisten=Zm.bind(null,e.syncEngine),t}),ay.apply(this,arguments)}function Wg(i,e,t={}){const s=new ne;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(c,g,v,x,U){const $=new Lf({next:ge=>{g.enqueueAndForget(()=>xp(c,ee));const ze=ge.docs.has(v);!ze&&ge.fromCache?U.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):ze&&ge.fromCache&&x&&"server"===x.source?U.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):U.resolve(ge)},error:ge=>U.reject(ge)}),ee=new Rp(Rl(v.path),$,{includeMetadataChanges:!0,Du:!0});return Sp(c,ee)}(yield Bd(i),i.asyncQueue,e,t,s)})),s.promise}function zg(i,e,t={}){const s=new ne;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(c,g,v,x,U){const $=new Lf({next:ge=>{g.enqueueAndForget(()=>xp(c,ee)),ge.fromCache&&"server"===x.source?U.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):U.resolve(ge)},error:ge=>U.reject(ge)}),ee=new Rp(v,$,{includeMetadataChanges:!0,Du:!0});return Sp(c,ee)}(yield Bd(i),i.asyncQueue,e,t,s)})),s.promise}const ly=new Map;function Kg(i,e,t){if(!t)throw new B(M.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function cy(i,e,t,s){if(!0===e&&!0===s)throw new B(M.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function dy(i){if(!Lt.isDocumentKey(i))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qg(i){if(Lt.isDocumentKey(i))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function jp(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":b()}function gr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jp(i);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Zg(i,e){if(e<=0)throw new B(M.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Hp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,cy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $p{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hp({}),this._settingsFrozen=!1,e instanceof Ue?this._databaseId=e:(this._app=e,this._databaseId=function(c){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ue(c.options.projectId)}(e))}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ye;switch(t.type){case"gapi":const s=t.client;return I(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new tr(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ly.get(e);t&&(_t("ComponentProvider","Removing Datastore"),ly.delete(e),t.terminate())}(this),Promise.resolve()}}class $i{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $i(this.firestore,e,this._key)}}class ka{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ka(this.firestore,e,this._query)}}class tu extends ka{constructor(e,t,s){super(e,t,Rl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $i(this.firestore,null,new Lt(e))}withConverter(e){return new tu(this.firestore,e,this._path)}}function Qg(i,e,...t){if(i=(0,ke.m9)(i),Kg("collection","path",e),i instanceof $p){const s=zn.fromString(e,...t);return qg(s),new tu(i,null,s)}{if(!(i instanceof $i||i instanceof tu))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(zn.fromString(e,...t));return qg(s),new tu(i.firestore,null,s)}}function Gh(i,e,...t){if(i=(0,ke.m9)(i),1===arguments.length&&(e=ms.I()),Kg("doc","path",e),i instanceof $p){const s=zn.fromString(e,...t);return dy(s),new $i(i,null,new Lt(s))}{if(!(i instanceof $i||i instanceof tu))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(zn.fromString(e,...t));return dy(s),new $i(i.firestore,i instanceof tu?i.converter:null,new Lt(s))}}function hy(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),(i instanceof $i||i instanceof tu)&&(e instanceof $i||e instanceof tu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Uf(i,e){return i=(0,ke.m9)(i),e=(0,ke.m9)(e),i instanceof ka&&e instanceof ka&&i.firestore===e.firestore&&Cc(i._query,e._query)&&i.converter===e.converter}class Gp{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new d(this,"async_queue_retry"),this.Kc=()=>{const t=Rh();t&&_t("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Rh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Rh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ne;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!ki(t))throw t;_t("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,Er("INTERNAL UNHANDLED ERROR: ",function(g){let v=g.message||"";return g.stack&&(v=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),v}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const c=Sg.createAndSchedule(this,e,t,s,g=>this.Wc(g));return this.$c.push(c),c}Gc(){this.Bc&&b()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Vf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(i)}class c0{constructor(){this._progressObserver={},this._taskCompletionResolver=new ne,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ti extends $p{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new Gp,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Wp(this),this._firestoreClient.terminate()}}function Ps(i){return i._firestoreClient||Wp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Wp(i){var e;const t=i._freezeSettings(),s=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Te(i._databaseId,g,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var g,x;i._firestoreClient=new x_(i._authCredentials,i._appCheckCredentials,i._queue,s)}function zp(i,e,t){const s=new ne;return i.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield Bg(i,t),yield iy(i,e),s.resolve()}catch(c){if(!("FirebaseError"===(g=c).name?g.code===M.FAILED_PRECONDITION||g.code===M.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&g instanceof DOMException)||22===g.code||20===g.code||11===g.code))throw c;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+c),s.reject(c)}var g})).then(()=>s.promise)}function wy(i){if(i._initialized||i._terminated)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class cc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class el{constructor(e){this._byteString=e}static fromBase64String(e){try{return new el(ei.fromBase64String(e))}catch(t){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new el(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class qc{constructor(e){this._methodName=e}}class Bf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return tn(this._lat,e._lat)||tn(this._long,e._long)}}const Iy=/^__.*__$/;class Cy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new yu(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}class Xg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new yu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function em(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw b()}}class jf{constructor(e,t,s,c,g,v){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=c,void 0===g&&this.Xc(),this.fieldTransforms=g||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new jf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ta({path:s,na:!1});return c.sa(e),c}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ta({path:s,na:!1});return c.Xc(),c}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return $f(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(em(this.Zc)&&Iy.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Dy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||kd(e)}aa(e,t,s,c=!1){return new jf({Zc:e,methodName:t,ca:s,path:Xr.emptyPath(),na:!1,ua:c},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Wh(i){const e=i._freezeSettings(),t=kd(i._databaseId);return new Dy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Kp(i,e,t,s,c,g={}){const v=i.aa(g.merge||g.mergeFields?2:0,e,t,c);sm("Data must be an object, but it was:",v,s);const x=im(s,v);let U,$;if(g.merge)U=new Lr(v.fieldMask),$=v.fieldTransforms;else if(g.mergeFields){const ee=[];for(const ge of g.mergeFields){const ze=om(e,ge,t);if(!v.contains(ze))throw new B(M.INVALID_ARGUMENT,`Field '${ze}' is specified in your field mask but missing from your input data.`);$_(ee,ze)||ee.push(ze)}U=new Lr(ee),$=v.fieldTransforms.filter(ge=>U.covers(ge.field))}else U=null,$=v.fieldTransforms;return new Cy(new _s(x),U,$)}class Hf extends qc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hf}}function tm(i,e,t){return new jf({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class nm extends qc{_toFieldTransform(e){return new Nl(e.path,new pu)}isEqual(e){return e instanceof nm}}class go extends qc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=tm(this,e,!0),s=this.ha.map(g=>Zc(g,t)),c=new Yo(s);return new Nl(e.path,c)}isEqual(e){return this===e}}class by extends qc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=tm(this,e,!0),s=this.ha.map(g=>Zc(g,t)),c=new gu(s);return new Nl(e.path,c)}isEqual(e){return this===e}}class H_ extends qc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Ja(e.wt,tf(e.wt,this.la));return new Nl(e.path,t)}isEqual(e){return this===e}}function rm(i,e,t,s){const c=i.aa(1,e,t);sm("Data must be an object, but it was:",c,s);const g=[],v=_s.empty();Fi(s,(U,$)=>{const ee=Zp(e,U,t);$=(0,ke.m9)($);const ge=c.ia(ee);if($ instanceof Hf)g.push(ee);else{const ze=Zc($,ge);null!=ze&&(g.push(ee),v.set(ee,ze))}});const x=new Lr(g);return new Xg(v,x,c.fieldTransforms)}function qp(i,e,t,s,c,g){const v=i.aa(1,e,t),x=[om(e,s,t)],U=[c];if(g.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ze=0;ze<g.length;ze+=2)x.push(om(e,g[ze])),U.push(g[ze+1]);const $=[],ee=_s.empty();for(let ze=x.length-1;ze>=0;--ze)if(!$_($,x[ze])){const ut=x[ze];let It=U[ze];It=(0,ke.m9)(It);const Kt=v.ia(ut);if(It instanceof Hf)$.push(ut);else{const fn=Zc(It,Kt);null!=fn&&($.push(ut),ee.set(ut,fn))}}const ge=new Lr($);return new Xg(ee,ge,v.fieldTransforms)}function Ty(i,e,t,s=!1){return Zc(t,i.aa(s?4:3,e))}function Zc(i,e){if(jd(i=(0,ke.m9)(i)))return sm("Unsupported field value:",e,i),im(i,e);if(i instanceof qc)return function(t,s){if(!em(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const c=[];let g=0;for(const v of t){let x=Zc(v,s.ra(g));null==x&&(x={nullValue:"NULL_VALUE"}),c.push(x),g++}return{arrayValue:{values:c}}}(i,e)}return function(t,s){if(null===(t=(0,ke.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return tf(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Cr.fromDate(t);return{timestampValue:ju(s.wt,c)}}if(t instanceof Cr){const c=new Cr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ju(s.wt,c)}}if(t instanceof Bf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof el)return{bytesValue:md(s.wt,t._byteString)};if(t instanceof $i){const c=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(c))throw s.oa(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Ql(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${jp(t)}`)}(i,e)}function im(i,e){const t={};return Ko(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(i,(s,c)=>{const g=Zc(c,e.ea(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function jd(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Cr||i instanceof Bf||i instanceof el||i instanceof $i||i instanceof qc)}function sm(i,e,t){if(!jd(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=jp(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function om(i,e,t){if((e=(0,ke.m9)(e))instanceof cc)return e._internalPath;if("string"==typeof e)return Zp(i,e);throw $f("Field path arguments must be of type string or ",i,!1,void 0,t)}const Sy=new RegExp("[~\\*/\\[\\]]");function Zp(i,e,t){if(e.search(Sy)>=0)throw $f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new cc(...e.split("."))._internalPath}catch(s){throw $f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function $f(i,e,t,s,c){const g=s&&!s.isEmpty(),v=void 0!==c;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let U="";return(g||v)&&(U+=" (found",g&&(U+=` in field ${s}`),v&&(U+=` in document ${c}`),U+=")"),new B(M.INVALID_ARGUMENT,x+i+U)}function $_(i,e){return i.some(t=>t.isEqual(e))}class zh{constructor(e,t,s,c,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new $i(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new am(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Du("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class am extends zh{data(){return super.data()}}function Du(i,e){return"string"==typeof e?Zp(i,e):e instanceof cc?e._internalPath:e._delegate._internalPath}class Hd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dc extends zh{constructor(e,t,s,c,g,v){super(e,t,s,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Du("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class nu extends dc{data(e={}){return super.data(e)}}class No{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new Hd(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new nu(this._firestore,this._userDataWriter,s.key,s,new Hd(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(v=>({type:"added",doc:new nu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new Hd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const x=new nu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new Hd(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter);let U=-1,$=-1;return 0!==v.type&&(U=g.indexOf(v.doc.key),g=g.delete(v.doc.key)),1!==v.type&&(g=g.add(v.doc),$=g.indexOf(v.doc.key)),{type:Il(v.type),doc:x,oldIndex:U,newIndex:$}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Il(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return b()}}function um(i,e){return i instanceof dc&&e instanceof dc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof No&&e instanceof No&&i._firestore===e._firestore&&Uf(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function lm(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gf{}function Yc(i,...e){for(const t of e)i=t._apply(i);return i}class G_ extends Gf{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=Wh(e.firestore),s=function(c,g,v,x,U,$,ee){let ge;if(U.isKeyField()){if("array-contains"===$||"array-contains-any"===$)throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${$}' queries on documentId().`);if("in"===$||"not-in"===$){hm(ee,$);const ut=[];for(const It of ee)ut.push(zf(x,c,It));ge={arrayValue:{values:ut}}}else ge=zf(x,c,ee)}else"in"!==$&&"not-in"!==$&&"array-contains-any"!==$||hm(ee,$),ge=Ty(v,"where",ee,"in"===$||"not-in"===$);const ze=ji.create(U,$,ge);return function(ut,It){if(It.ht()){const fn=wc(ut);if(null!==fn&&!fn.isEqual(It.field))throw new B(M.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${fn.toString()}' and '${It.field.toString()}'`);const Gr=Ec(ut);null!==Gr&&fm(0,It.field,Gr)}const Kt=function(fn,Gr){for(const Gi of fn.filters)if(Gr.indexOf(Gi.op)>=0)return Gi.op;return null}(ut,function(fn){switch(fn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(It.op));if(null!==Kt)throw new B(M.INVALID_ARGUMENT,Kt===It.op?`Invalid query. You cannot use more than one '${It.op.toString()}' filter.`:`Invalid query. You cannot use '${It.op.toString()}' filters with '${Kt.toString()}' filters.`)}(c,ze),ze}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ka(e.firestore,e.converter,function(c,g){const v=c.filters.concat([g]);return new Aa(c.path,c.collectionGroup,c.explicitOrderBy.slice(),v,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,s))}}class cm extends Gf{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,c,g){if(null!==s.startAt)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new hu(c,g);return function(x,U){if(null===Ec(x)){const $=wc(x);null!==$&&fm(0,$,U.field)}}(s,v),v}(e._query,this.fa,this.wa);return new ka(e.firestore,e.converter,function(s,c){const g=s.explicitOrderBy.concat([c]);return new Aa(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class Ay extends Gf{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new ka(e.firestore,e.converter,ud(e._query,this.ma,this.ga))}}class dm extends Gf{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Qp(e,this.type,this.ya,this.pa);return new ka(e.firestore,e.converter,(c=t,new Aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class My extends Gf{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Qp(e,this.type,this.ya,this.pa);return new ka(e.firestore,e.converter,(c=t,new Aa((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function Qp(i,e,t,s){if(t[0]=(0,ke.m9)(t[0]),t[0]instanceof zh)return function(c,g,v,x,U){if(!x)throw new B(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const $=[];for(const ee of sl(c))if(ee.field.isKeyField())$.push(ys(g,x.key));else{const ge=x.data.field(ee.field);if(F(ge))throw new B(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ee.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ge){const ze=ee.field.canonicalString();throw new B(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ze}' (used as the orderBy) does not exist.`)}$.push(ge)}return new du($,U)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const c=Wh(i.firestore);return function(g,v,x,U,$,ee){const ge=g.explicitOrderBy;if($.length>ge.length)throw new B(M.INVALID_ARGUMENT,`Too many arguments provided to ${U}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ze=[];for(let ut=0;ut<$.length;ut++){const It=$[ut];if(ge[ut].field.isKeyField()){if("string"!=typeof It)throw new B(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${U}(), but got a ${typeof It}`);if(!Ic(g)&&-1!==It.indexOf("/"))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${U}() must be a plain document ID, but '${It}' contains a slash.`);const Kt=g.path.child(zn.fromString(It));if(!Lt.isDocumentKey(Kt))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${U}() must result in a valid document path, but '${Kt}' is not because it contains an odd number of segments.`);const fn=new Lt(Kt);ze.push(ys(v,fn))}else{const Kt=Ty(x,U,It);ze.push(Kt)}}return new du(ze,ee)}(i._query,i.firestore._databaseId,c,e,t,s)}}function zf(i,e,t){if("string"==typeof(t=(0,ke.m9)(t))){if(""===t)throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ic(e)&&-1!==t.indexOf("/"))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(zn.fromString(t));if(!Lt.isDocumentKey(s))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ys(i,new Lt(s))}if(t instanceof $i)return ys(i,t._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jp(t)}.`)}function hm(i,e){if(!Array.isArray(i)||0===i.length)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new B(M.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function fm(i,e,t){if(!t.isEqual(e))throw new B(M.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Oy={maxAttempts:5};class Jp{convertValue(e,t="none"){switch(en(e)){case 0:return null;case 1:return e.booleanValue;case 2:return si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(P(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw b()}}convertObject(e,t){const s={};return Fi(e.fields,(c,g)=>{s[c]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new Bf(si(e.latitude),si(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=K(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(se(e));default:return null}}convertTimestamp(e){const t=co(e);return new Cr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=zn.fromString(e);I(Mc(s));const c=new Ue(s.get(1),s.get(3)),g=new Lt(s.popFirst(5));return c.isEqual(t)||Er(`Document ${g} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Kf(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class ky extends Jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $i(this.firestore,null,t)}}class pm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wh(e)}set(e,t,s){this._verifyNotCommitted();const c=hc(e,this._firestore),g=Kf(c.converter,t,s),v=Kp(this._dataReader,"WriteBatch.set",c._key,g,null!==c.converter,s);return this._mutations.push(v.toMutation(c._key,$r.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const g=hc(e,this._firestore);let v;return v="string"==typeof(t=(0,ke.m9)(t))||t instanceof cc?qp(this._dataReader,"WriteBatch.update",g._key,t,s,c):rm(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(v.toMutation(g._key,$r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=hc(e,this._firestore);return this._mutations=this._mutations.concat(new Ra(t._key,$r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new B(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hc(i,e){if((i=(0,ke.m9)(i)).firestore!==e)throw new B(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class $d extends Jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new el(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $i(this.firestore,null,t)}}function Ly(i,e,t){i=gr(i,$i);const s=gr(i.firestore,Ti),c=Kf(i.converter,e,t);return Kh(s,[Kp(Wh(s),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,$r.none())])}function Fy(i,e,t,...s){i=gr(i,$i);const c=gr(i.firestore,Ti),g=Wh(c);let v;return v="string"==typeof(e=(0,ke.m9)(e))||e instanceof cc?qp(g,"updateDoc",i._key,e,t,s):rm(g,"updateDoc",i._key,e),Kh(c,[v.toMutation(i._key,$r.exists(!0))])}function Uy(i,...e){var t,s,c;i=(0,ke.m9)(i);let g={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Vf(e[v])||(g=e[v],v++);const x={includeMetadataChanges:g.includeMetadataChanges};if(Vf(e[v])){const ge=e[v];e[v]=null===(t=ge.next)||void 0===t?void 0:t.bind(ge),e[v+1]=null===(s=ge.error)||void 0===s?void 0:s.bind(ge),e[v+2]=null===(c=ge.complete)||void 0===c?void 0:c.bind(ge)}let U,$,ee;if(i instanceof $i)$=gr(i.firestore,Ti),ee=Rl(i._key.path),U={next:ge=>{e[v]&&e[v](gm($,i,ge))},error:e[v+1],complete:e[v+2]};else{const ge=gr(i,ka);$=gr(ge.firestore,Ti),ee=ge._query;const ze=new $d($);U={next:ut=>{e[v]&&e[v](new No($,ze,ge,ut))},error:e[v+1],complete:e[v+2]},lm(i._query)}return function(ge,ze,ut,It){const Kt=new Lf(It),fn=new Rp(ze,Kt,ut);return ge.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return Sp(yield Bd(ge),fn)})),()=>{Kt.Tc(),ge.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return xp(yield Bd(ge),fn)}))}}(Ps($),ee,x,U)}function Kh(i,e){return function(t,s){const c=new ne;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function Ym(i,e,t){return Ng.apply(this,arguments)}(yield Gg(t),s,c)})),c.promise}(Ps(i),e)}function gm(i,e,t){const s=t.docs.get(e._key),c=new $d(i);return new dc(i,c,e._key,s,new Hd(t.hasPendingWrites,t.fromCache),e.converter)}class nv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wh(e)}get(e){const t=hc(e,this._firestore),s=new ky(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return b();const g=c[0];if(g.isFoundDocument())return new zh(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new zh(this._firestore,s,t._key,null,t.converter);throw b()})}set(e,t,s){const c=hc(e,this._firestore),g=Kf(c.converter,t,s),v=Kp(this._dataReader,"Transaction.set",c._key,g,null!==c.converter,s);return this._transaction.set(c._key,v),this}update(e,t,s,...c){const g=hc(e,this._firestore);let v;return v="string"==typeof(t=(0,ke.m9)(t))||t instanceof cc?qp(this._dataReader,"Transaction.update",g._key,t,s,c):rm(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,v),this}delete(e){const t=hc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=hc(e,this._firestore),s=new $d(this._firestore);return super.get(e).then(c=>new dc(this._firestore,s,t._key,c._document,new Hd(!1,!1),t.converter))}}function Xp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new B("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function ym(){if("undefined"==typeof Uint8Array)throw new B("unimplemented","Uint8Arrays are not available in this environment.")}function Qc(){if(!function Qh(){return"undefined"!=typeof atob}())throw new B("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Io=At.SDK_VERSION,(0,At._registerComponent)(new tt.wA("firestore",(t,{options:s})=>{const c=t.getProvider("app").getImmediate(),g=new Ti(c,new Bn(t.getProvider("auth-internal")),new ss(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),g._setSettings(s),g},"PUBLIC")),(0,At.registerVersion)(ao,"3.4.10",i),(0,At.registerVersion)(ao,"3.4.10","esm2017")}();class qf{constructor(e){this._delegate=e}static fromBase64String(e){return Qc(),new qf(el.fromBase64String(e))}static fromUint8Array(e){return ym(),new qf(el.fromUint8Array(e))}toBase64(){return Qc(),this._delegate.toBase64()}toUint8Array(){return ym(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _m(i){return function qh(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class d0{enableIndexedDbPersistence(e,t){return function py(i,e){wy(i=gr(i,Ti));const t=Ps(i),s=i._freezeSettings(),c=new Ug;return zp(t,c,new ty(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gy(i){wy(i=gr(i,Ti));const e=Ps(i),t=i._freezeSettings(),s=new Ug;return zp(e,s,new ny(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function my(i){if(i._initialized&&!i._terminated)throw new B(M.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ne;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(s){if(!Oi.V())return Promise.resolve();const c=s+"main";yield Oi.delete(c)}),function(s){return t.apply(this,arguments)})(Cf(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class eg{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ue||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Do("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Yg(i,e,t,s={}){var c;const g=(i=gr(i,$p))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Do("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let v,x;if("string"==typeof s.mockUserToken)v=s.mockUserToken,x=vi.MOCK_USER;else{v=(0,ke.Sg)(s.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new vi(U)}i._authCredentials=new ht(new pe(v,x))}}(this._delegate,e,t,s)}enableNetwork(){return function yy(i){return function N_(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield R_(i),t=yield M_(i);return e.setNetworkEnabled(!0),function(s){const c=R(s);return c.lu.delete(0),W(c)}(t)}))}(Ps(i=gr(i,Ti)))}(this._delegate)}disableNetwork(){return function _y(i){return function $h(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield R_(i),t=yield M_(i);return e.setNetworkEnabled(!1),(s=(0,Ie.Z)(function*(c){const g=R(c);g.lu.add(0),yield ce(g),g._u.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(Ps(i=gr(i,Ti)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,cy("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function V_(i){return function(e){const t=new ne;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function b_(i,e){return kg.apply(this,arguments)}(yield Gg(e),t)})),t.promise}(Ps(i=gr(i,Ti)))}(this._delegate)}onSnapshotsInSync(e){return function tv(i,e){return function Bp(i,e){const t=new Lf(e);return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield Bd(i),c=t,R(s).Tu.add(c),void c.next();var s,c})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield Bd(i),c=t,void R(s).Tu.delete(c);var s,c}))}}(Ps(i=gr(i,Ti)),Vf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new B("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gd(this,Qg(this._delegate,e))}catch(t){throw La(t,"collection()","Firestore.collection()")}}doc(e){try{return new tl(this,Gh(this._delegate,e))}catch(t){throw La(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Po(this,function Jg(i,e){if(i=gr(i,$p),Kg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ka(i,null,(t=e,new Aa(zn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw La(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rv(i,e,t){i=gr(i,Ti);const s=Object.assign(Object.assign({},Oy),t);return function(c){if(c.maxAttempts<1)throw new B(M.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function k_(i,e,t){const s=new ne;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const c=yield(g=i,Hh(g).then(v=>v.datastore));var g;new ry(i.asyncQueue,c,t,e,s).run()})),s.promise}(Ps(i),c=>e(new nv(i,c)),s)}(this._delegate,t=>e(new Em(this,t)))}batch(){return Ps(this._delegate),new av(new pm(this._delegate,e=>Kh(this._delegate,e)))}loadBundle(e){return function Ey(i,e){const t=Ps(i=gr(i,Ti)),s=new c0;return function uy(i,e,t,s){const c=function(g,v){let x;return x="string"==typeof g?(new TextEncoder).encode(g):g,U=function(U,$){if(U instanceof Uint8Array)return Vg(U,$);if(U instanceof ArrayBuffer)return Vg(new Uint8Array(U),$);if(U instanceof ReadableStream)return U.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new S_(U,v);var U}(t,kd(e));i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function ey(i,e,t){const s=R(i);var c;(c=(0,Ie.Z)(function*(g,v,x){try{const U=yield v.getMetadata();if(yield function(ze,ut){const It=R(ze),Kt=Zi(ut.createTime);return It.persistence.runTransaction("hasNewerBundle","readonly",fn=>It.Ds.getBundleMetadata(fn,ut.id)).then(fn=>!!fn&&fn.createTime.compareTo(Kt)>=0)}(g.localStore,U))return yield v.close(),x._completeWith({taskState:"Success",documentsLoaded:(ze=U).totalDocuments,bytesLoaded:ze.totalBytes,totalDocuments:ze.totalDocuments,totalBytes:ze.totalBytes}),Promise.resolve(new Set);x._updateProgress(Gm(U));const $=new y_(U,g.localStore,v.wt);let ee=yield v.fc();for(;ee;){const ze=yield $.Nu(ee);ze&&x._updateProgress(ze),ee=yield v.fc()}const ge=yield $.complete();return yield Mo(g,ge.Mu,void 0),yield function(ze,ut){const It=R(ze);return It.persistence.runTransaction("Save bundle","readwrite",Kt=>It.Ds.saveBundleMetadata(Kt,ut))}(g.localStore,U),x._completeWith(ge.progress),Promise.resolve(ge.Ou)}catch(U){return Do("SyncEngine",`Loading bundle failed with ${U}`),x._failWith(U),Promise.resolve(new Set)}var ze}),function(g,v,x){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Gg(i),c,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function B_(i,e){return function L_(i,e){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,s){const c=R(t);return c.persistence.runTransaction("Get named query","readonly",g=>c.Ds.getNamedQuery(g,s))}(yield oy(i),e)}))}(Ps(i=gr(i,Ti)),e).then(t=>t?new ka(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Po(this,t):null)}}class vm extends Jp{constructor(e){super(),this.firestore=e}convertBytes(e){return new qf(new el(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return tl.forKey(t,this.firestore,null)}}class Em{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}get(e){const t=Wd(e);return this._delegate.get(t).then(s=>new Yf(this._firestore,new dc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=Wd(e);return s?(Xp("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const g=Wd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...c),this}delete(e){const t=Wd(e);return this._delegate.delete(t),this}}class av{constructor(e){this._delegate=e}set(e,t,s){const c=Wd(e);return s?(Xp("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const g=Wd(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...c),this}delete(e){const t=Wd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class mn{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new nu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jc(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=mn.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let g=c.get(t);return g||(g=new mn(e,new vm(e),t),c.set(t,g)),g}}mn.INSTANCES=new WeakMap;class tl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}static forPath(e,t,s){if(e.length%2!=0)throw new B("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new tl(t,new $i(t._delegate,s,new Lt(e)))}static forKey(e,t,s){return new tl(t,new $i(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new Gd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gd(this.firestore,Qg(this._delegate,e))}catch(t){throw La(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ke.m9)(e))instanceof $i&&hy(this._delegate,e)}set(e,t){t=Xp("DocumentReference.set",t);try{return t?Ly(this._delegate,e,t):Ly(this._delegate,e)}catch(s){throw La(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?Fy(this._delegate,e):Fy(this._delegate,e,t,...s)}catch(c){throw La(c,"updateDoc()","DocumentReference.update()")}}delete(){return function X_(i){return Kh(gr(i.firestore,Ti),[new Ra(i._key,$r.none())])}(this._delegate)}onSnapshot(...e){const t=zy(e),s=Zf(e,c=>new Yf(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Uy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function q_(i){i=gr(i,$i);const e=gr(i.firestore,Ti),t=Ps(e),s=new $d(e);return function P_(i,e){const t=new ne;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(c,g,v){try{const x=yield function(U,$){const ee=R(U);return ee.persistence.runTransaction("read document","readonly",ge=>ee.localDocuments.getDocument(ge,$))}(c,g);x.isFoundDocument()?v.resolve(x):x.isNoDocument()?v.resolve(null):v.reject(new B(M.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const U=Oh(x,`Failed to get document '${g} from cache`);v.reject(U)}}),function(c,g,v){return s.apply(this,arguments)})(yield oy(i),e,t);var s})),t.promise}(t,i._key).then(c=>new dc(e,s,i._key,c,new Hd(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Z_(i){i=gr(i,$i);const e=gr(i.firestore,Ti);return Wg(Ps(e),i._key,{source:"server"}).then(t=>gm(e,i,t))}(this._delegate):function K_(i){i=gr(i,$i);const e=gr(i.firestore,Ti);return Wg(Ps(e),i._key).then(t=>gm(e,i,t))}(this._delegate),t.then(s=>new Yf(this.firestore,new dc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new tl(this.firestore,this._delegate.withConverter(e?mn.getInstance(this.firestore,e):null))}}function La(i,e,t){return i.message=i.message.replace(e,t),i}function zy(i){for(const e of i)if("object"==typeof e&&!_m(e))return e;return{}}function Zf(i,e){var t,s;let c;return c=_m(i[0])?i[0]:_m(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{c.next&&c.next(e(g))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Yf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return um(this._delegate,e._delegate)}}class Jc extends Yf{data(e){const t=this._delegate.data(e);return function C(i,e){i||b()}(void 0!==t),t}}class Po{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vm(e)}where(e,t,s){try{return new Po(this.firestore,Yc(this._delegate,function W_(i,e,t){const s=e,c=Du("where",i);return new G_(c,s,t)}(e,t,s)))}catch(c){throw La(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Po(this.firestore,Yc(this._delegate,function Wf(i,e="asc"){const t=e,s=Du("orderBy",i);return new cm(s,t)}(e,t)))}catch(s){throw La(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Po(this.firestore,Yc(this._delegate,function xy(i){return Zg("limit",i),new Ay("limit",i,"F")}(e)))}catch(t){throw La(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Po(this.firestore,Yc(this._delegate,function z_(i){return Zg("limitToLast",i),new Ay("limitToLast",i,"L")}(e)))}catch(t){throw La(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Po(this.firestore,Yc(this._delegate,function Ry(...i){return new dm("startAt",i,!0)}(...e)))}catch(t){throw La(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Po(this.firestore,Yc(this._delegate,function Yp(...i){return new dm("startAfter",i,!1)}(...e)))}catch(t){throw La(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Po(this.firestore,Yc(this._delegate,function Ny(...i){return new My("endBefore",i,!1)}(...e)))}catch(t){throw La(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Po(this.firestore,Yc(this._delegate,function Py(...i){return new My("endAt",i,!0)}(...e)))}catch(t){throw La(t,"endAt()","Query.endAt()")}}isEqual(e){return Uf(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Q_(i){i=gr(i,ka);const e=gr(i.firestore,Ti),t=Ps(e),s=new $d(e);return function O_(i,e){const t=new ne;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(c,g,v){try{const x=yield Rd(c,g,!0),U=new Mp(g,x.ji),$=U.Ku(x.documents),ee=U.applyChanges($,!1);v.resolve(ee.snapshot)}catch(x){const U=Oh(x,`Failed to execute query '${g} against cache`);v.reject(U)}}),function(c,g,v){return s.apply(this,arguments)})(yield oy(i),e,t);var s})),t.promise}(t,i._query).then(c=>new No(e,s,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function J_(i){i=gr(i,ka);const e=gr(i.firestore,Ti),t=Ps(e),s=new $d(e);return zg(t,i._query,{source:"server"}).then(c=>new No(e,s,i,c))}(this._delegate):function Y_(i){i=gr(i,ka);const e=gr(i.firestore,Ti),t=Ps(e),s=new $d(e);return lm(i._query),zg(t,i._query).then(c=>new No(e,s,i,c))}(this._delegate),t.then(s=>new Ky(this.firestore,new No(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=zy(e),s=Zf(e,c=>new Ky(this.firestore,new No(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Uy(this._delegate,t,s)}withConverter(e){return new Po(this.firestore,this._delegate.withConverter(e?mn.getInstance(this.firestore,e):null))}}class Es{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ky{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Po(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Es(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Jc(this._firestore,s))})}isEqual(e){return um(this._delegate,e._delegate)}}class Gd extends Po{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new tl(this.firestore,e):null}doc(e){try{return new tl(this.firestore,void 0===e?Gh(this._delegate):Gh(this._delegate,e))}catch(t){throw La(t,"doc()","CollectionReference.doc()")}}add(e){return function ev(i,e){const t=gr(i.firestore,Ti),s=Gh(i),c=Kf(i.converter,e);return Kh(t,[Kp(Wh(i.firestore),"addDoc",s._key,c,null!==i.converter,{}).toMutation(s._key,$r.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new tl(this.firestore,t))}isEqual(e){return hy(this._delegate,e._delegate)}withConverter(e){return new Gd(this.firestore,this._delegate.withConverter(e?mn.getInstance(this.firestore,e):null))}}function Wd(i){return gr(i,$i)}class wm{constructor(...e){this._delegate=new cc(...e)}static documentId(){return new wm(Xr.keyField().canonicalString())}isEqual(e){return(e=(0,ke.m9)(e))instanceof cc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Vy(){return new nm("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xc(e)}static delete(){const e=function iv(){return new Hf("deleteField")}();return e._methodName="FieldValue.delete",new Xc(e)}static arrayUnion(...e){const t=function By(...i){return new go("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xc(t)}static arrayRemove(...e){const t=function jy(...i){return new by("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xc(t)}static increment(e){const t=function Hy(i){return new H_("increment",i)}(e);return t._methodName="FieldValue.increment",new Xc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const qy={Firestore:eg,GeoPoint:Bf,Timestamp:Cr,Blob:qf,Transaction:Em,WriteBatch:av,DocumentReference:tl,DocumentSnapshot:Yf,Query:Po,QueryDocumentSnapshot:Jc,QuerySnapshot:Ky,CollectionReference:Gd,FieldPath:wm,FieldValue:Xc,setLogLevel:function Wy(i){!function ba(i){Co.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Yy(i){(function Zy(i,e){i.INTERNAL.registerComponent(new tt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},qy)))})(i,(e,t)=>new eg(e,t,new d0)),i.registerVersion("@firebase/firestore-compat","0.1.19")}(et.Z);var ed=V(1205),uv=V(440),lv=V(127);function Qy(i,e){return function Qf(i,e=Y.z){return new Q.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Im(i,e){return Qy(i,e).pipe((0,ae.U)(t=>({payload:t,type:"query"})))}function zd(i,e){return Im(i,e).pipe((0,le.O)(void 0),Oe(),(0,ae.U)(([t,s])=>{const c=s.payload.docChanges(),g=c.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((v,x)=>{const U=c.find(ee=>ee.doc.ref.isEqual(v.ref)),$=null==t?void 0:t.payload.docs.find(ee=>ee.ref.isEqual(v.ref));U&&JSON.stringify(U.doc.metadata)===JSON.stringify(v.metadata)||!U&&$&&JSON.stringify($.metadata)===JSON.stringify(v.metadata)||g.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:v}})}),g}))}function Cm(i,e,t){return zd(i,t).pipe((0,Ae.R)((s,c)=>function Jy(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function dv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return tg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return tg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return tg(i,e.oldIndex,1)}return i}(i,s))}),i}(s,c.map(g=>g.payload),e),[]),(0,Ct.x)(),(0,ae.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function tg(i,e,t,...s){const c=i.slice();return c.splice(e,t,...s),c}function Zh(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Yh{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=zd(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ae.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,le.O)(void 0),Oe(),(0,nt.h)(([s,c])=>c.length>0||!s),(0,ae.U)(([s,c])=>c),be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ae.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Zh(e);return Cm(this.query,t,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return Im(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),be.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(be.iC)}add(e){return this.ref.add(e)}doc(e){return new Xy(this.ref.doc(e),this.afs)}}class Xy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:g}=r_(s,t);return new Yh(c,g,this.afs)}snapshotChanges(){return function cv(i,e){return Qy(i,e).pipe((0,le.O)(void 0),Oe(),(0,ae.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ae.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ve.D)(this.ref.get(e)).pipe(be.iC)}}class hv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zd(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,nt.h)(t=>t.length>0),be.iC):zd(this.query,this.afs.schedulers.outsideAngular).pipe(be.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ae.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Zh(e);return Cm(this.query,t,this.afs.schedulers.outsideAngular).pipe(be.iC)}valueChanges(e={}){return Im(this.query,this.afs.schedulers.outsideAngular).pipe((0,ae.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),be.iC)}get(e){return(0,ve.D)(this.query.get(e)).pipe(be.iC)}}const e_=new T.OlP("angularfire2.enableFirestorePersistence"),Dm=new T.OlP("angularfire2.firestore.persistenceSettings"),t_=new T.OlP("angularfire2.firestore.settings"),n_=new T.OlP("angularfire2.firestore.use-emulator");function r_(i,e=(t=>t)){return{query:e(i),ref:i}}let bm=(()=>{class i{constructor(t,s,c,g,v,x,U,$,ee,ge,ze,ut,It,Kt,fn,Gr,Gi){this.schedulers=U;const Rr=(0,st.on)(t,x,s),ro=ee;ge&&(0,ed.nw)(Rr,x,ze,It,Kt,fn,ut,Gr),[this.firestore,this.persistenceEnabled$]=(0,st.cc)(`${Rr.name}.firestore`,"AngularFirestore",Rr.name,()=>{const Si=x.runOutsideAngular(()=>Rr.firestore());if(g&&Si.settings(g),ro&&Si.useEmulator(...ro),c&&!(0,Dt.PM)(v)){const us=()=>{try{return(0,ve.D)(Si.enablePersistence($||void 0).then(()=>!0,()=>!1))}catch(Xo){return"undefined"!=typeof console&&console.warn(Xo),(0,Ee.of)(!1)}};return[Si,x.runOutsideAngular(us)]}return[Si,(0,Ee.of)(!1)]},[g,ro,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:v}=r_(c,s),x=this.schedulers.ngZone.run(()=>g);return new Yh(x,v,this)}collectionGroup(t,s){const c=s||(v=>v),g=this.firestore.collectionGroup(t);return new hv(c(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new Xy(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(T.LFG(st.Dh),T.LFG(st.xv,8),T.LFG(e_,8),T.LFG(t_,8),T.LFG(T.Lbi),T.LFG(T.R0b),T.LFG(be.HU),T.LFG(Dm,8),T.LFG(n_,8),T.LFG(ed.zQ,8),T.LFG(ed.Qv,8),T.LFG(ed.L6,8),T.LFG(ed._Q,8),T.LFG(ed.rT,8),T.LFG(ed.lh,8),T.LFG(ed.f7,8),T.LFG(uv.nm,8))},i.\u0275prov=T.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),fv=(()=>{class i{constructor(){lv.Z.registerVersion("angularfire",be.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:e_,useValue:!0},{provide:Dm,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=T.oAB({type:i}),i.\u0275inj=T.cJS({providers:[bm]}),i})()},2011:(Mt,Ve,V)=>{V.d(Ve,{Dh:()=>Me,GT:()=>be,cc:()=>nt,hO:()=>Ct,on:()=>le,pX:()=>Ee,xv:()=>Oe});var T=V(5e3),Y=V(127),Q=V(5813);Mt=V.hmd(Mt);const ve=["ngOnDestroy"],Ee=(et,Ie,At,tt={})=>new Proxy(et,{get:(Ne,ke)=>At.runOutsideAngular(()=>{var Tt;if(et[ke])return(null===(Tt=null==tt?void 0:tt.spy)||void 0===Tt?void 0:Tt.get)&&tt.spy.get(ke,et[ke]),et[ke];if(ve.indexOf(ke)>-1)return()=>{};const wt=Ie.toPromise().then(J=>{const Ze=J&&J[ke];return"function"==typeof Ze?Ze.bind(J):Ze&&Ze.then?Ze.then(oe=>At.run(()=>oe)):At.run(()=>Ze)});return new Proxy(()=>{},{get:(J,Ze)=>wt[Ze],apply:(J,Ze,oe)=>wt.then(Se=>{var xe;const We=Se&&Se(...oe);return(null===(xe=null==tt?void 0:tt.spy)||void 0===xe?void 0:xe.apply)&&tt.spy.apply(ke,oe,We),We})})})}),be=(et,Ie)=>{Ie.forEach(At=>{Object.getOwnPropertyNames(At.prototype||At).forEach(tt=>{Object.defineProperty(et.prototype,tt,Object.getOwnPropertyDescriptor(At.prototype||At,tt))})})};class Pe{constructor(Ie){return Ie}}const Me=new T.OlP("angularfire2.app.options"),Oe=new T.OlP("angularfire2.app.name");function le(et,Ie,At){const Ne="object"==typeof At&&At||{};Ne.name=Ne.name||"string"==typeof At&&At||"[DEFAULT]";const Tt=Y.Z.apps.filter(wt=>wt&&wt.name===Ne.name)[0]||Ie.runOutsideAngular(()=>Y.Z.initializeApp(et,Ne));try{JSON.stringify(et)!==JSON.stringify(Tt.options)&&ae("error",`${Tt.name} Firebase App already initialized with different options${Mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(wt){}return new Pe(Tt)}const ae=(et,...Ie)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[et](...Ie)},Ae={provide:Pe,useFactory:le,deps:[Me,T.R0b,[new T.FiY,Oe]]};let Ct=(()=>{class et{constructor(At){Y.Z.registerVersion("angularfire",Q.q4.full,"core"),Y.Z.registerVersion("angularfire",Q.q4.full,"app-compat"),Y.Z.registerVersion("angular",T.q4F.full,At.toString())}static initializeApp(At,tt){return{ngModule:et,providers:[{provide:Me,useValue:At},{provide:Oe,useValue:tt}]}}}return et.\u0275fac=function(At){return new(At||et)(T.LFG(T.Lbi))},et.\u0275mod=T.oAB({type:et}),et.\u0275inj=T.cJS({providers:[Ae]}),et})();function nt(et,Ie,At,tt,Ne){const[,ke,Tt]=globalThis.\u0275AngularfireInstanceCache.find(wt=>wt[0]===et)||[];if(ke)return function st(et,Ie){try{return et.toString()===Ie.toString()}catch(At){return et===Ie}}(Ne,Tt)||(Ge("error",`${Ie} was already initialized on the ${At} Firebase App with different settings.${Dt?" You may need to reload as Firebase is not HMR aware.":""}`),Ge("warn",{is:Ne,was:Tt})),ke;{const wt=tt();return globalThis.\u0275AngularfireInstanceCache.push([et,wt,Ne]),wt}}const Dt=!!Mt.hot,Ge=(et,...Ie)=>{(0,T.X6Q)()&&"undefined"!=typeof console&&console[et](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Mt,Ve,V)=>{V.d(Ve,{q4:()=>Oi,iC:()=>ei,HU:()=>Ci,vb:()=>Fi,JM:()=>rd});var T=V(5e3),Y=V(5867),Q=V(5861),ve=V(9681),Ee=V(2090),be=V(4859),Pe=V(1877),Me=V(8766);const Oe="@firebase/installations",le="0.5.10",Ae=`w:${le}`,Ct="FIS_v2",Ie=new Ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function At(P){return P instanceof Ee.ZR&&P.code.includes("request-failed")}function tt({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Ne(P){return{token:P.token,requestStatus:2,expiresIn:Se(P.expiresIn),creationTime:Date.now()}}function ke(P,F){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,Q.Z)(function*(P,F){const se=(yield F.json()).error;return Ie.create("request-failed",{requestName:P,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function wt({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function J(P,{refreshToken:F}){const K=wt(P);return K.append("Authorization",function xe(P){return`${Ct} ${P}`}(F)),K}function Ze(P){return oe.apply(this,arguments)}function oe(){return(oe=(0,Q.Z)(function*(P){const F=yield P();return F.status>=500&&F.status<600?P():F})).apply(this,arguments)}function Se(P){return Number(P.replace("s","000"))}function We(P,F){return He.apply(this,arguments)}function He(){return(He=(0,Q.Z)(function*({appConfig:P,heartbeatServiceProvider:F},{fid:K}){const se=tt(P),Te=wt(P),Ue=F.getImmediate({optional:!0});if(Ue){const vn=yield Ue.getHeartbeatsHeader();vn&&Te.append("x-firebase-client",vn)}const ft={method:"POST",headers:Te,body:JSON.stringify({fid:K,authVersion:Ct,appId:P.appId,sdkVersion:Ae})},nn=yield Ze(()=>fetch(se,ft));if(nn.ok){const vn=yield nn.json();return{fid:vn.fid||K,registrationStatus:2,refreshToken:vn.refreshToken,authToken:Ne(vn.authToken)}}throw yield ke("Create Installation",nn)})).apply(this,arguments)}function vt(P){return new Promise(F=>{setTimeout(F,P)})}const xt=/^[cdef][\w-]{21}$/;function lt(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const K=function cn(P){return function Nt(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return xt.test(K)?K:""}catch(P){return""}}function qt(P){return`${P.appName}!${P.appId}`}const Wt=new Map;function jt(P,F){const K=qt(P);yn(K,F),function ur(P,F){const K=function or(){return!Xn&&"BroadcastChannel"in self&&(Xn=new BroadcastChannel("[Firebase] FID Change"),Xn.onmessage=P=>{yn(P.data.key,P.data.fid)}),Xn}();K&&K.postMessage({key:P,fid:F}),function Kn(){0===Wt.size&&Xn&&(Xn.close(),Xn=null)}()}(K,F)}function yn(P,F){const K=Wt.get(P);if(K)for(const se of K)se(F)}let Xn=null;const hr="firebase-installations-store";let Zn=null;function Zt(){return Zn||(Zn=(0,Me.X3)("firebase-installations-database",1,{upgrade:(P,F)=>{0===F&&P.createObjectStore(hr)}})),Zn}function Sn(P,F){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,Q.Z)(function*(P,F){const K=qt(P),Te=(yield Zt()).transaction(hr,"readwrite"),Ue=Te.objectStore(hr),yt=yield Ue.get(K);return yield Ue.put(F,K),yield Te.done,(!yt||yt.fid!==F.fid)&&jt(P,F.fid),F})).apply(this,arguments)}function Mn(P){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,Q.Z)(function*(P){const F=qt(P),se=(yield Zt()).transaction(hr,"readwrite");yield se.objectStore(hr).delete(F),yield se.done})).apply(this,arguments)}function hi(P,F){return Je.apply(this,arguments)}function Je(){return(Je=(0,Q.Z)(function*(P,F){const K=qt(P),Te=(yield Zt()).transaction(hr,"readwrite"),Ue=Te.objectStore(hr),yt=yield Ue.get(K),ft=F(yt);return void 0===ft?yield Ue.delete(K):yield Ue.put(ft,K),yield Te.done,ft&&(!yt||yt.fid!==ft.fid)&&jt(P,ft.fid),ft})).apply(this,arguments)}function me(P){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,Q.Z)(function*(P){let F;const K=yield hi(P.appConfig,se=>{const Te=dt(se),Ue=Le(P,Te);return F=Ue.registrationPromise,Ue.installationEntry});return""===K.fid?{installationEntry:yield F}:{installationEntry:K,registrationPromise:F}})).apply(this,arguments)}function dt(P){return Wr(P||{fid:lt(),registrationStatus:0})}function Le(P,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Ie.create("app-offline"))};const K={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},se=function pt(P,F){return St.apply(this,arguments)}(P,K);return{installationEntry:K,registrationPromise:se}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:Dn(P)}:{installationEntry:F}}function St(){return(St=(0,Q.Z)(function*(P,F){try{const K=yield We(P,F);return Sn(P.appConfig,K)}catch(K){throw At(K)&&409===K.customData.serverCode?yield Mn(P.appConfig):yield Sn(P.appConfig,{fid:F.fid,registrationStatus:0}),K}})).apply(this,arguments)}function Dn(P){return on.apply(this,arguments)}function on(){return(on=(0,Q.Z)(function*(P){let F=yield Jt(P.appConfig);for(;1===F.registrationStatus;)yield vt(100),F=yield Jt(P.appConfig);if(0===F.registrationStatus){const{installationEntry:K,registrationPromise:se}=yield me(P);return se||K}return F})).apply(this,arguments)}function Jt(P){return hi(P,F=>{if(!F)throw Ie.create("installation-not-found");return Wr(F)})}function Wr(P){return function fr(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function Nn(P,F){return ie.apply(this,arguments)}function ie(){return(ie=(0,Q.Z)(function*({appConfig:P,heartbeatServiceProvider:F},K){const se=he(P,K),Te=J(P,K),Ue=F.getImmediate({optional:!0});if(Ue){const vn=yield Ue.getHeartbeatsHeader();vn&&Te.append("x-firebase-client",vn)}const ft={method:"POST",headers:Te,body:JSON.stringify({installation:{sdkVersion:Ae,appId:P.appId}})},nn=yield Ze(()=>fetch(se,ft));if(nn.ok)return Ne(yield nn.json());throw yield ke("Generate Auth Token",nn)})).apply(this,arguments)}function he(P,{fid:F}){return`${tt(P)}/${F}/authTokens:generate`}function ye(P){return it.apply(this,arguments)}function it(){return(it=(0,Q.Z)(function*(P,F=!1){let K;const se=yield hi(P.appConfig,Ue=>{if(!Xt(Ue))throw Ie.create("not-registered");const yt=Ue.authToken;if(!F&&lr(yt))return Ue;if(1===yt.requestStatus)return K=ue(P,F),Ue;{if(!navigator.onLine)throw Ie.create("app-offline");const ft=Mr(Ue);return K=kt(P,ft),ft}});return K?yield K:se.authToken})).apply(this,arguments)}function ue(P,F){return Re.apply(this,arguments)}function Re(){return(Re=(0,Q.Z)(function*(P,F){let K=yield rt(P.appConfig);for(;1===K.authToken.requestStatus;)yield vt(100),K=yield rt(P.appConfig);const se=K.authToken;return 0===se.requestStatus?ye(P,F):se})).apply(this,arguments)}function rt(P){return hi(P,F=>{if(!Xt(F))throw Ie.create("not-registered");return function Ur(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function kt(P,F){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,Q.Z)(function*(P,F){try{const K=yield Nn(P,F),se=Object.assign(Object.assign({},F),{authToken:K});return yield Sn(P.appConfig,se),K}catch(K){if(!At(K)||401!==K.customData.serverCode&&404!==K.customData.serverCode){const se=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield Sn(P.appConfig,se)}else yield Mn(P.appConfig);throw K}})).apply(this,arguments)}function Xt(P){return void 0!==P&&2===P.registrationStatus}function lr(P){return 2===P.requestStatus&&!function dn(P){const F=Date.now();return F<P.creationTime||P.creationTime+P.expiresIn<F+36e5}(P)}function Mr(P){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:F})}function Ai(){return(Ai=(0,Q.Z)(function*(P){const F=P,{installationEntry:K,registrationPromise:se}=yield me(F);return se?se.catch(console.error):ye(F).catch(console.error),K.fid})).apply(this,arguments)}function En(){return(En=(0,Q.Z)(function*(P,F=!1){const K=P;return yield mr(K),(yield ye(K,F)).token})).apply(this,arguments)}function mr(P){return fi.apply(this,arguments)}function fi(){return(fi=(0,Q.Z)(function*(P){const{registrationPromise:F}=yield me(P);F&&(yield F)})).apply(this,arguments)}function xi(P){return Ie.create("missing-app-config-values",{valueName:P})}const Yn="installations",Ht=P=>{const F=P.getProvider("app").getImmediate(),K=function cr(P){if(!P||!P.options)throw xi("App Configuration");if(!P.name)throw xi("App Name");const F=["projectId","apiKey","appId"];for(const K of F)if(!P.options[K])throw xi(K);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(F);return{app:F,appConfig:K,heartbeatServiceProvider:(0,ve._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},$n=P=>{const F=P.getProvider("app").getImmediate(),K=(0,ve._getProvider)(F,Yn).getImmediate();return{getId:()=>function ws(P){return Ai.apply(this,arguments)}(K),getToken:Te=>function Qi(P){return En.apply(this,arguments)}(K,Te)}};(function ni(){(0,ve._registerComponent)(new be.wA(Yn,Ht,"PUBLIC")),(0,ve._registerComponent)(new be.wA("installations-internal",$n,"PRIVATE"))})(),(0,ve.registerVersion)(Oe,le),(0,ve.registerVersion)(Oe,le,"esm2017");const Xi="@firebase/remote-config",Ar=new Ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Us{constructor(F,K,se,Te){this.client=F,this.storage=K,this.storageCache=se,this.logger=Te}isCachedDataFresh(F,K){if(!K)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const se=Date.now()-K,Te=se<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${se}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Te}.`),Te}fetch(F){var K=this;return(0,Q.Z)(function*(){const[se,Te]=yield Promise.all([K.storage.getLastSuccessfulFetchTimestampMillis(),K.storage.getLastSuccessfulFetchResponse()]);if(Te&&K.isCachedDataFresh(F.cacheMaxAgeMillis,se))return Te;F.eTag=Te&&Te.eTag;const Ue=yield K.client.fetch(F),yt=[K.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ue.status&&yt.push(K.storage.setLastSuccessfulFetchResponse(Ue)),yield Promise.all(yt),Ue})()}}function yo(P=navigator){return P.languages&&P.languages[0]||P.language}class nr{constructor(F,K,se,Te,Ue,yt){this.firebaseInstallations=F,this.sdkVersion=K,this.namespace=se,this.projectId=Te,this.apiKey=Ue,this.appId=yt}fetch(F){var K=this;return(0,Q.Z)(function*(){var se,Te,Ue;const[yt,ft]=yield Promise.all([K.firebaseInstallations.getId(),K.firebaseInstallations.getToken()]),vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${K.projectId}/namespaces/${K.namespace}:fetch?key=${K.apiKey}`,Gn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},en={sdk_version:K.sdkVersion,app_instance_id:yt,app_instance_id_token:ft,app_id:K.appId,language_code:yo()},Fr={method:"POST",headers:Gn,body:JSON.stringify(en)},oi=fetch(vn,Fr),Ys=new Promise((ho,fa)=>{F.signal.addEventListener(()=>{const cu=new Error("The operation was aborted.");cu.name="AbortError",fa(cu)})});let Vi;try{yield Promise.race([oi,Ys]),Vi=yield oi}catch(ho){let fa="fetch-client-network";throw"AbortError"===(null===(se=ho)||void 0===se?void 0:se.name)&&(fa="fetch-timeout"),Ar.create(fa,{originalErrorMessage:null===(Te=ho)||void 0===Te?void 0:Te.message})}let Bi=Vi.status;const da=Vi.headers.get("ETag")||void 0;let ys,ha;if(200===Vi.status){let ho;try{ho=yield Vi.json()}catch(fa){throw Ar.create("fetch-client-parse",{originalErrorMessage:null===(Ue=fa)||void 0===Ue?void 0:Ue.message})}ys=ho.entries,ha=ho.state}if("INSTANCE_STATE_UNSPECIFIED"===ha?Bi=500:"NO_CHANGE"===ha?Bi=304:("NO_TEMPLATE"===ha||"EMPTY_CONFIG"===ha)&&(ys={}),304!==Bi&&200!==Bi)throw Ar.create("fetch-status",{httpStatus:Bi});return{status:Bi,eTag:da,config:ys}})()}}class we{constructor(F,K){this.client=F,this.storage=K}fetch(F){var K=this;return(0,Q.Z)(function*(){const se=(yield K.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return K.attemptFetch(F,se)})()}attemptFetch(F,{throttleEndTimeMillis:K,backoffCount:se}){var Te=this;return(0,Q.Z)(function*(){yield function bs(P,F){return new Promise((K,se)=>{const Te=Math.max(F-Date.now(),0),Ue=setTimeout(K,Te);P.addEventListener(()=>{clearTimeout(Ue),se(Ar.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,K);try{const Ue=yield Te.client.fetch(F);return yield Te.storage.deleteThrottleMetadata(),Ue}catch(Ue){if(!function _o(P){if(!(P instanceof Ee.ZR&&P.customData))return!1;const F=Number(P.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Ue))throw Ue;const yt={throttleEndTimeMillis:Date.now()+(0,Ee.$s)(se),backoffCount:se+1};return yield Te.storage.setThrottleMetadata(yt),Te.attemptFetch(F,yt)}})()}}class Xe{constructor(F,K,se,Te,Ue){this.app=F,this._client=K,this._storageCache=se,this._storage=Te,this._logger=Ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function mt(P,F){var K;const se=P.target.error||void 0;return Ar.create(F,{originalErrorMessage:se&&(null===(K=se)||void 0===K?void 0:K.message)})}const Ft="app_namespace_store";class Ir{constructor(F,K,se,Te=function bn(){return new Promise((P,F)=>{var K;try{const se=indexedDB.open("firebase_remote_config",1);se.onerror=Te=>{F(mt(Te,"storage-open"))},se.onsuccess=Te=>{P(Te.target.result)},se.onupgradeneeded=Te=>{0===Te.oldVersion&&Te.target.result.createObjectStore(Ft,{keyPath:"compositeKey"})}}catch(se){F(Ar.create("storage-open",{originalErrorMessage:null===(K=se)||void 0===K?void 0:K.message}))}})}()){this.appId=F,this.appName=K,this.namespace=se,this.openDbPromise=Te}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var K=this;return(0,Q.Z)(function*(){const se=yield K.openDbPromise;return new Promise((Te,Ue)=>{var yt;const nn=se.transaction([Ft],"readonly").objectStore(Ft),vn=K.createCompositeKey(F);try{const Gn=nn.get(vn);Gn.onerror=en=>{Ue(mt(en,"storage-get"))},Gn.onsuccess=en=>{const Fr=en.target.result;Te(Fr?Fr.value:void 0)}}catch(Gn){Ue(Ar.create("storage-get",{originalErrorMessage:null===(yt=Gn)||void 0===yt?void 0:yt.message}))}})})()}set(F,K){var se=this;return(0,Q.Z)(function*(){const Te=yield se.openDbPromise;return new Promise((Ue,yt)=>{var ft;const vn=Te.transaction([Ft],"readwrite").objectStore(Ft),Gn=se.createCompositeKey(F);try{const en=vn.put({compositeKey:Gn,value:K});en.onerror=Fr=>{yt(mt(Fr,"storage-set"))},en.onsuccess=()=>{Ue()}}catch(en){yt(Ar.create("storage-set",{originalErrorMessage:null===(ft=en)||void 0===ft?void 0:ft.message}))}})})()}delete(F){var K=this;return(0,Q.Z)(function*(){const se=yield K.openDbPromise;return new Promise((Te,Ue)=>{var yt;const nn=se.transaction([Ft],"readwrite").objectStore(Ft),vn=K.createCompositeKey(F);try{const Gn=nn.delete(vn);Gn.onerror=en=>{Ue(mt(en,"storage-delete"))},Gn.onsuccess=()=>{Te()}}catch(Gn){Ue(Ar.create("storage-delete",{originalErrorMessage:null===(yt=Gn)||void 0===yt?void 0:yt.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Mi{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,Q.Z)(function*(){const K=F.storage.getLastFetchStatus(),se=F.storage.getLastSuccessfulFetchTimestampMillis(),Te=F.storage.getActiveConfig(),Ue=yield K;Ue&&(F.lastFetchStatus=Ue);const yt=yield se;yt&&(F.lastSuccessfulFetchTimestampMillis=yt);const ft=yield Te;ft&&(F.activeConfig=ft)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function Ss(){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,Q.Z)(function*(){if(!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(P){return!1}})).apply(this,arguments)}!function Ts(){(0,ve._registerComponent)(new be.wA("remote-config",function P(F,{instanceIdentifier:K}){const se=F.getProvider("app").getImmediate(),Te=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ar.create("registration-window");if(!(0,Ee.hl)())throw Ar.create("indexed-db-unavailable");const{projectId:Ue,apiKey:yt,appId:ft}=se.options;if(!Ue)throw Ar.create("registration-project-id");if(!yt)throw Ar.create("registration-api-key");if(!ft)throw Ar.create("registration-app-id");const nn=new Ir(ft,se.name,K=K||"firebase"),vn=new Mi(nn),Gn=new Pe.Yd(Xi);Gn.logLevel=Pe.in.ERROR;const en=new nr(Te,ve.SDK_VERSION,K,Ue,yt,ft),Fr=new we(en,nn),oi=new Us(Fr,nn,vn,Gn),Ys=new Xe(se,oi,vn,nn,Gn);return function Wn(P){const F=(0,Ee.m9)(P);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(Ys),Ys},"PUBLIC").setMultipleInstances(!0)),(0,ve.registerVersion)(Xi,"0.3.9"),(0,ve.registerVersion)(Xi,"0.3.9","esm2017")}();const Fa="/firebase-messaging-sw.js",ci="/firebase-cloud-messaging-push-scope",Vs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ko="google.c.a.c_id",ea="google.c.a.c_l",As="google.c.a.ts",va="google.c.a.e";var Lo=(()=>{return(P=Lo||(Lo={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",Lo;var P})();function Br(P){const F=new Uint8Array(P);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ta(P){const K=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),se=atob(K),Te=new Uint8Array(se.length);for(let Ue=0;Ue<se.length;++Ue)Te[Ue]=se.charCodeAt(Ue);return Te}const Yr="fcm_token_details_db",ri="fcm_token_object_Store";function na(P){return cs.apply(this,arguments)}function cs(){return cs=(0,Q.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ue=>Ue.name).includes(Yr))return null;let F=null;return(yield(0,Me.X3)(Yr,5,{upgrade:(se=(0,Q.Z)(function*(Te,Ue,yt,ft){var nn;if(Ue<2||!Te.objectStoreNames.contains(ri))return;const vn=ft.objectStore(ri),Gn=yield vn.index("fcmSenderId").get(P);if(yield vn.clear(),Gn)if(2===Ue){const en=Gn;if(!en.auth||!en.p256dh||!en.endpoint)return;F={token:en.fcmToken,createTime:null!==(nn=en.createTime)&&void 0!==nn?nn:Date.now(),subscriptionOptions:{auth:en.auth,p256dh:en.p256dh,endpoint:en.endpoint,swScope:en.swScope,vapidKey:"string"==typeof en.vapidKey?en.vapidKey:Br(en.vapidKey)}}}else if(3===Ue){const en=Gn;F={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Br(en.auth),p256dh:Br(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Br(en.vapidKey)}}}else if(4===Ue){const en=Gn;F={token:en.fcmToken,createTime:en.createTime,subscriptionOptions:{auth:Br(en.auth),p256dh:Br(en.p256dh),endpoint:en.endpoint,swScope:en.swScope,vapidKey:Br(en.vapidKey)}}}}),function(Ue,yt,ft,nn){return se.apply(this,arguments)})})).close(),yield(0,Me.Lj)(Yr),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),vo(F)?F:null;var se}),cs.apply(this,arguments)}function vo(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:F}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const ds="firebase-messaging-store";let Eo=null;function Un(){return Eo||(Eo=(0,Me.X3)("firebase-messaging-database",1,{upgrade:(P,F)=>{0===F&&P.createObjectStore(ds)}})),Eo}function L(P){return G.apply(this,arguments)}function G(){return(G=(0,Q.Z)(function*(P){const F=ct(P),se=yield(yield Un()).transaction(ds).objectStore(ds).get(F);if(se)return se;{const Te=yield na(P.appConfig.senderId);if(Te)return yield O(P,Te),Te}})).apply(this,arguments)}function O(P,F){return Z.apply(this,arguments)}function Z(){return(Z=(0,Q.Z)(function*(P,F){const K=ct(P),Te=(yield Un()).transaction(ds,"readwrite");return yield Te.objectStore(ds).put(F,K),yield Te.done,F})).apply(this,arguments)}function de(P){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,Q.Z)(function*(P){const F=ct(P),se=(yield Un()).transaction(ds,"readwrite");yield se.objectStore(ds).delete(F),yield se.done})).apply(this,arguments)}function ct({appConfig:P}){return P.appId}const an=new Ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Hn(P,F){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,Q.Z)(function*(P,F){const K=yield _i(P),se=Bs(F),Te={method:"POST",headers:K,body:JSON.stringify(se)};let Ue;try{Ue=yield(yield fetch(Pi(P.appConfig),Te)).json()}catch(yt){throw an.create("token-subscribe-failed",{errorInfo:yt})}if(Ue.error)throw an.create("token-subscribe-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw an.create("token-subscribe-no-token");return Ue.token})).apply(this,arguments)}function An(P,F){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,Q.Z)(function*(P,F){const K=yield _i(P),se=Bs(F.subscriptionOptions),Te={method:"PATCH",headers:K,body:JSON.stringify(se)};let Ue;try{Ue=yield(yield fetch(`${Pi(P.appConfig)}/${F.token}`,Te)).json()}catch(yt){throw an.create("token-update-failed",{errorInfo:yt})}if(Ue.error)throw an.create("token-update-failed",{errorInfo:Ue.error.message});if(!Ue.token)throw an.create("token-update-no-token");return Ue.token})).apply(this,arguments)}function ir(P,F){return _r.apply(this,arguments)}function _r(){return(_r=(0,Q.Z)(function*(P,F){const se={method:"DELETE",headers:yield _i(P)};try{const Ue=yield(yield fetch(`${Pi(P.appConfig)}/${F}`,se)).json();if(Ue.error)throw an.create("token-unsubscribe-failed",{errorInfo:Ue.error.message})}catch(Te){throw an.create("token-unsubscribe-failed",{errorInfo:Te})}})).apply(this,arguments)}function Pi({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function _i(P){return zt.apply(this,arguments)}function zt(){return(zt=(0,Q.Z)(function*({appConfig:P,installations:F}){const K=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${K}`})})).apply(this,arguments)}function Bs({p256dh:P,auth:F,endpoint:K,vapidKey:se}){const Te={web:{endpoint:K,auth:F,p256dh:P}};return se!==Vs&&(Te.web.applicationPubKey=se),Te}const Ea=6048e5;function Fo(P){return io.apply(this,arguments)}function io(){return(io=(0,Q.Z)(function*(P){const F=yield er(P.swRegistration,P.vapidKey),K={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:F.endpoint,auth:Br(F.getKey("auth")),p256dh:Br(F.getKey("p256dh"))},se=yield L(P.firebaseDependencies);if(se){if(js(se.subscriptionOptions,K))return Date.now()>=se.createTime+Ea?Ua(P,{token:se.token,createTime:Date.now(),subscriptionOptions:K}):se.token;try{yield ir(P.firebaseDependencies,se.token)}catch(Te){console.warn(Te)}return Vn(P.firebaseDependencies,K)}return Vn(P.firebaseDependencies,K)})).apply(this,arguments)}function wa(P){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,Q.Z)(function*(P){const F=yield L(P.firebaseDependencies);F&&(yield ir(P.firebaseDependencies,F.token),yield de(P.firebaseDependencies));const K=yield P.swRegistration.pushManager.getSubscription();return!K||K.unsubscribe()})).apply(this,arguments)}function Ua(P,F){return gt.apply(this,arguments)}function gt(){return(gt=(0,Q.Z)(function*(P,F){try{const K=yield An(P.firebaseDependencies,F),se=Object.assign(Object.assign({},F),{token:K,createTime:Date.now()});return yield O(P.firebaseDependencies,se),K}catch(K){throw yield wa(P),K}})).apply(this,arguments)}function Vn(P,F){return Va.apply(this,arguments)}function Va(){return(Va=(0,Q.Z)(function*(P,F){const se={token:yield Hn(P,F),createTime:Date.now(),subscriptionOptions:F};return yield O(P,se),se.token})).apply(this,arguments)}function er(P,F){return ia.apply(this,arguments)}function ia(){return(ia=(0,Q.Z)(function*(P,F){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ta(F)})})).apply(this,arguments)}function js(P,F){return F.vapidKey===P.vapidKey&&F.endpoint===P.endpoint&&F.auth===P.auth&&F.p256dh===P.p256dh}function Hs(P){const F={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function wo(P,F){if(!F.notification)return;P.notification={};const K=F.notification.title;K&&(P.notification.title=K);const se=F.notification.body;se&&(P.notification.body=se);const Te=F.notification.image;Te&&(P.notification.image=Te)}(F,P),function $s(P,F){!F.data||(P.data=F.data)}(F,P),function jl(P,F){var K,se,Te,Ue,yt;if(!F.fcmOptions&&!(null===(K=F.notification)||void 0===K?void 0:K.click_action))return;P.fcmOptions={};const ft=null!==(Te=null===(se=F.fcmOptions)||void 0===se?void 0:se.link)&&void 0!==Te?Te:null===(Ue=F.notification)||void 0===Ue?void 0:Ue.click_action;ft&&(P.fcmOptions.link=ft);const nn=null===(yt=F.fcmOptions)||void 0===yt?void 0:yt.analytics_label;nn&&(P.fcmOptions.analyticsLabel=nn)}(F,P),F}function nl(P){return"object"==typeof P&&!!P&&ko in P}function sa(P,F){const K=[];for(let se=0;se<P.length;se++)K.push(P.charAt(se)),se<F.length&&K.push(F.charAt(se));return K.join("")}function Qr(P){return an.create("missing-app-config-values",{valueName:P})}sa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class xs{constructor(F,K,se){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Te=function oa(P){if(!P||!P.options)throw Qr("App Configuration Object");if(!P.name)throw Qr("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:K}=P;for(const se of F)if(!K[se])throw Qr(se);return{appName:P.name,projectId:K.projectId,apiKey:K.apiKey,appId:K.appId,senderId:K.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Te,installations:K,analyticsProvider:se}}_delete(){return Promise.resolve()}}function Ia(P){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,Q.Z)(function*(P){var F;try{P.swRegistration=yield navigator.serviceWorker.register(Fa,{scope:ci}),P.swRegistration.update().catch(()=>{})}catch(K){throw an.create("failed-service-worker-registration",{browserErrorMessage:null===(F=K)||void 0===F?void 0:F.message})}})).apply(this,arguments)}function Ki(P,F){return Su.apply(this,arguments)}function Su(){return(Su=(0,Q.Z)(function*(P,F){if(!F&&!P.swRegistration&&(yield Ia(P)),F||!P.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");P.swRegistration=F}})).apply(this,arguments)}function Or(P,F){return ru.apply(this,arguments)}function ru(){return(ru=(0,Q.Z)(function*(P,F){F?P.vapidKey=F:P.vapidKey||(P.vapidKey=Vs)})).apply(this,arguments)}function Ba(){return(Ba=(0,Q.Z)(function*(P,F){if(!navigator)throw an.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw an.create("permission-blocked");return yield Or(P,null==F?void 0:F.vapidKey),yield Ki(P,null==F?void 0:F.serviceWorkerRegistration),Fo(P)})).apply(this,arguments)}function su(P,F,K){return ja.apply(this,arguments)}function ja(){return(ja=(0,Q.Z)(function*(P,F,K){const se=Ha(F);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(se,{message_id:K[ko],message_name:K[ea],message_time:K[As],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ha(P){switch(P){case Lo.NOTIFICATION_CLICKED:return"notification_open";case Lo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Uo(){return(Uo=(0,Q.Z)(function*(P,F){const K=F.data;if(!K.isFirebaseMessaging)return;P.onMessageHandler&&K.messageType===Lo.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(Hs(K)):P.onMessageHandler.next(Hs(K)));const se=K.data;nl(se)&&"1"===se[va]&&(yield su(P,K.messageType,se))})).apply(this,arguments)}const so="@firebase/messaging",Pn=P=>{const F=new xs(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",K=>function Au(P,F){return Uo.apply(this,arguments)}(F,K)),F},On=P=>{const F=P.getProvider("messaging").getImmediate();return{getToken:se=>function iu(P,F){return Ba.apply(this,arguments)}(F,se)}};function hs(){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,Q.Z)(function*(){try{yield(0,Ee.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Tn(){(0,ve._registerComponent)(new be.wA("messaging",Pn,"PUBLIC")),(0,ve._registerComponent)(new be.wA("messaging-internal",On,"PRIVATE")),(0,ve.registerVersion)(so,"0.9.14"),(0,ve.registerVersion)(so,"0.9.14","esm2017")}();const Vo="analytics",Ws="firebase_id",zs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ua="https://www.googletagmanager.com/gtag/js",xn=new Pe.Yd("@firebase/analytics");function ou(P){return Promise.all(P.map(F=>F.catch(K=>K)))}function ps(P,F){const K=document.createElement("script");K.src=`${ua}?l=${P}&id=${F}`,K.async=!0,document.head.appendChild(K)}function $a(P,F,K,se,Te,Ue){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,Q.Z)(function*(P,F,K,se,Te,Ue){const yt=se[Te];try{if(yt)yield F[yt];else{const nn=(yield ou(K)).find(vn=>vn.measurementId===Te);nn&&(yield F[nn.appId])}}catch(ft){xn.error(ft)}P("config",Te,Ue)})).apply(this,arguments)}function Ga(P,F,K,se,Te){return jo.apply(this,arguments)}function jo(){return(jo=(0,Q.Z)(function*(P,F,K,se,Te){try{let Ue=[];if(Te&&Te.send_to){let yt=Te.send_to;Array.isArray(yt)||(yt=[yt]);const ft=yield ou(K);for(const nn of yt){const vn=ft.find(en=>en.measurementId===nn),Gn=vn&&F[vn.appId];if(!Gn){Ue=[];break}Ue.push(Gn)}}0===Ue.length&&(Ue=Object.values(F)),yield Promise.all(Ue),P("event",se,Te||{})}catch(Ue){xn.error(Ue)}})).apply(this,arguments)}function la(){const P=window.document.getElementsByTagName("script");for(const F of Object.values(P))if(F.src&&F.src.includes(ua))return F;return null}const xr=new Ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),za=new class jr{constructor(F={},K=1e3){this.throttleMetadata=F,this.intervalMillis=K}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,K){this.throttleMetadata[F]=K}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function qs(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function oo(P){return qi.apply(this,arguments)}function qi(){return(qi=(0,Q.Z)(function*(P){var F;const{appId:K,apiKey:se}=P,Te={method:"GET",headers:qs(se)},Ue=zs.replace("{app-id}",K),yt=yield fetch(Ue,Te);if(200!==yt.status&&304!==yt.status){let ft="";try{const nn=yield yt.json();(null===(F=nn.error)||void 0===F?void 0:F.message)&&(ft=nn.error.message)}catch(nn){}throw xr.create("config-fetch-failed",{httpStatus:yt.status,responseMessage:ft})}return yt.json()})).apply(this,arguments)}function vr(P){return Da.apply(this,arguments)}function Da(){return(Da=(0,Q.Z)(function*(P,F=za,K){const{appId:se,apiKey:Te,measurementId:Ue}=P.options;if(!se)throw xr.create("no-app-id");if(!Te){if(Ue)return{measurementId:Ue,appId:se};throw xr.create("no-api-key")}const yt=F.getThrottleMetadata(se)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ft=new Ka;return setTimeout((0,Q.Z)(function*(){ft.abort()}),void 0!==K?K:6e4),ao({appId:se,apiKey:Te,measurementId:Ue},yt,ft,F)})).apply(this,arguments)}function ao(P,F,K){return vi.apply(this,arguments)}function vi(){return(vi=(0,Q.Z)(function*(P,{throttleEndTimeMillis:F,backoffCount:K},se,Te=za){const{appId:Ue,measurementId:yt}=P;try{yield Io(se,F)}catch(ft){if(yt)return xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${ft.message}]`),{appId:Ue,measurementId:yt};throw ft}try{const ft=yield oo(P);return Te.deleteThrottleMetadata(Ue),ft}catch(ft){if(!Co(ft)){if(Te.deleteThrottleMetadata(Ue),yt)return xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${ft.message}]`),{appId:Ue,measurementId:yt};throw ft}const nn=503===Number(ft.customData.httpStatus)?(0,Ee.$s)(K,Te.intervalMillis,30):(0,Ee.$s)(K,Te.intervalMillis),vn={throttleEndTimeMillis:Date.now()+nn,backoffCount:K+1};return Te.setThrottleMetadata(Ue,vn),xn.debug(`Calling attemptFetch again in ${nn} millis`),ao(P,vn,se,Te)}})).apply(this,arguments)}function Io(P,F){return new Promise((K,se)=>{const Te=Math.max(F-Date.now(),0),Ue=setTimeout(K,Te);P.addEventListener(()=>{clearTimeout(Ue),se(xr.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Co(P){if(!(P instanceof Ee.ZR&&P.customData))return!1;const F=Number(P.customData.httpStatus);return 429===F||500===F||503===F||504===F}class Ka{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function ba(){return _t.apply(this,arguments)}function _t(){return(_t=(0,Q.Z)(function*(){if(!(0,Ee.hl)())return xn.warn(xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ee.eu)()}catch(P){return xn.warn(xr.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function Do(){return(Do=(0,Q.Z)(function*(P,F,K,se,Te,Ue,yt){var ft;const nn=vr(P);nn.then(oi=>{K[oi.measurementId]=oi.appId,P.options.measurementId&&oi.measurementId!==P.options.measurementId&&xn.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${oi.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(oi=>xn.error(oi)),F.push(nn);const vn=ba().then(oi=>{if(oi)return se.getId()}),[Gn,en]=yield Promise.all([nn,vn]);la()||ps(Ue,Gn.measurementId),Te("js",new Date);const Fr=null!==(ft=null==yt?void 0:yt.config)&&void 0!==ft?ft:{};return Fr.origin="firebase",Fr.update=!0,null!=en&&(Fr[Ws]=en),Te("config",Gn.measurementId,Fr),Gn.measurementId})).apply(this,arguments)}class $o{constructor(F){this.app=F}_delete(){return delete b[this.app.options.appId],Promise.resolve()}}let b={},I=[];const C={};let B,ne,R="dataLayer",pe=!1;function Bn(P,F,K){!function ht(){const P=[];if((0,Ee.ru)()&&P.push("This is a browser extension environment."),(0,Ee.zI)()||P.push("Cookies are not available."),P.length>0){const F=P.map((se,Te)=>`(${Te+1}) ${se}`).join(" "),K=xr.create("invalid-analytics-context",{errorInfo:F});xn.warn(K.message)}}();const se=P.options.appId;if(!se)throw xr.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw xr.create("no-api-key");xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=b[se])throw xr.create("already-exists",{id:se});if(!pe){!function Rs(P){let F=[];Array.isArray(window[P])?F=window[P]:window[P]=F}(R);const{wrappedGtag:Ue,gtagCore:yt}=function gs(P,F,K,se,Te){let Ue=function(...yt){window[se].push(arguments)};return window[Te]&&"function"==typeof window[Te]&&(Ue=window[Te]),window[Te]=function Wa(P,F,K,se){function Ue(){return(Ue=(0,Q.Z)(function*(yt,ft,nn){try{"event"===yt?yield Ga(P,F,K,ft,nn):"config"===yt?yield $a(P,F,K,se,ft,nn):P("set",ft)}catch(vn){xn.error(vn)}})).apply(this,arguments)}return function Te(yt,ft,nn){return Ue.apply(this,arguments)}}(Ue,P,F,K),{gtagCore:Ue,wrappedGtag:window[Te]}}(b,I,C,R,"gtag");ne=Ue,B=yt,pe=!0}return b[se]=function Er(P,F,K,se,Te,Ue,yt){return Do.apply(this,arguments)}(P,I,C,F,B,R,K),new $o(P)}function tr(){return(tr=(0,Q.Z)(function*(P,F,K,se,Te){if(Te&&Te.global)P("event",K,se);else{const Ue=yield F;P("event",K,Object.assign(Object.assign({},se),{send_to:Ue}))}})).apply(this,arguments)}function rl(){return zn.apply(this,arguments)}function zn(){return(zn=(0,Q.Z)(function*(){if((0,Ee.ru)()||!(0,Ee.zI)()||!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(P){return!1}})).apply(this,arguments)}const Wo="@firebase/analytics";!function au(){(0,ve._registerComponent)(new be.wA(Vo,(F,{options:K})=>Bn(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),K),"PUBLIC")),(0,ve._registerComponent)(new be.wA("analytics-internal",function P(F){try{const K=F.getProvider(Vo).getImmediate();return{logEvent:(se,Te,Ue)=>function Dl(P,F,K,se){P=(0,Ee.m9)(P),function Bt(P,F,K,se,Te){return tr.apply(this,arguments)}(ne,b[P.app.options.appId],F,K,se).catch(Te=>xn.error(Te))}(K,se,Te,Ue)}}catch(K){throw xr.create("interop-component-reg-failed",{reason:K})}},"PRIVATE")),(0,ve.registerVersion)(Wo,"0.7.10"),(0,ve.registerVersion)(Wo,"0.7.10","esm2017")}();var Nu=V(4408),sr=V(7565);const qa=new class uu extends sr.v{}(class nd extends Nu.o{constructor(F,K){super(F,K),this.scheduler=F,this.work=K}schedule(F,K=0){return K>0?super.schedule(F,K):(this.delay=K,this.state=F,this.scheduler.flush(this),this)}execute(F,K){return K>0||this.closed?super.execute(F,K):this._execute(F,K)}requestAsyncId(F,K,se=0){return null!=se&&se>0||null==se&&this.delay>0?super.requestAsyncId(F,K,se):F.flush(this)}});var ca=V(4986),os=V(8505),Be=V(9468),Ta=V(5363);const Oi=new T.GfV("7.4.1"),lu="__angularfire_symbol__analyticsIsSupportedValue",uo="__angularfire_symbol__analyticsIsSupported",ki="__angularfire_symbol__remoteConfigIsSupportedValue",zo="__angularfire_symbol__remoteConfigIsSupported",To="__angularfire_symbol__messagingIsSupportedValue",Hl="__angularfire_symbol__messagingIsSupported";function rd(P,F,K){if(F){if(1===F.length)return F[0];const Ue=F.filter(yt=>yt.app===K);if(1===Ue.length)return Ue[0]}return K.container.getProvider(P).getImmediate({optional:!0})}globalThis[uo]||(globalThis[uo]=rl().then(P=>globalThis[lu]=P).catch(()=>globalThis[lu]=!1)),globalThis[Hl]||(globalThis[Hl]=hs().then(P=>globalThis[To]=P).catch(()=>globalThis[To]=!1)),globalThis[zo]||(globalThis[zo]=Ss().then(P=>globalThis[ki]=P).catch(()=>globalThis[ki]=!1));const Fi=(P,F)=>{const K=F?[F]:(0,Y.C6)(),se=[];return K.forEach(Te=>{Te.container.getProvider(P).instances.forEach(yt=>{se.includes(yt)||se.push(yt)})}),se};function Ko(){}class Hr{constructor(F,K=qa){this.zone=F,this.delegate=K}now(){return this.delegate.now()}schedule(F,K,se){const Te=this.zone;return this.delegate.schedule(function(yt){Te.runGuarded(()=>{F.apply(this,[yt])})},K,se)}}class Za{constructor(F){this.zone=F,this.task=null}call(F,K){const se=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),K.pipe((0,os.b)({next:se,complete:se,error:se})).subscribe(F).add(se)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Ci=(()=>{class P{constructor(K){this.ngZone=K,this.outsideAngular=K.runOutsideAngular(()=>new Hr(Zone.current)),this.insideAngular=K.run(()=>new Hr(Zone.current,ca.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(K){return new(K||P)(T.LFG(T.R0b))},P.\u0275prov=T.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function jn(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function ei(P){return jn(),function Sa(P){return function(K){return(K=K.lift(new Za(P.ngZone))).pipe((0,Be.R)(P.outsideAngular),(0,Ta.Q)(P.insideAngular))}}(jn())(P)}},2090:(Mt,Ve,V)=>{V.d(Ve,{$s:()=>Jt,BH:()=>Ct,DV:()=>sn,Dv:()=>Wi,G6:()=>wt,GJ:()=>jt,L:()=>Me,LL:()=>He,Mn:()=>ke,Pz:()=>Ut,Sg:()=>nt,UG:()=>Ge,UI:()=>ur,US:()=>be,Wj:()=>me,Yr:()=>Tt,ZB:()=>ae,ZR:()=>We,b$:()=>At,cI:()=>xt,d:()=>tt,dS:()=>dt,eu:()=>Ze,g5:()=>Q,gK:()=>hi,gQ:()=>hr,h$:()=>Pe,hl:()=>J,hu:()=>Y,jU:()=>et,lb:()=>Ce,m9:()=>Nn,ne:()=>Zn,p$:()=>le,pd:()=>qn,r3:()=>pn,ru:()=>Ie,tV:()=>Oe,uI:()=>Dt,ug:()=>Le,vZ:()=>Xn,w1:()=>Ne,w9:()=>Wt,xO:()=>Kn,xb:()=>yn,z$:()=>st,zI:()=>oe,zd:()=>Tr});const Y=function(ie,he){if(!ie)throw Q(he)},Q=function(ie){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ie)},ve=function(ie){const he=[];let ye=0;for(let it=0;it<ie.length;it++){let ue=ie.charCodeAt(it);ue<128?he[ye++]=ue:ue<2048?(he[ye++]=ue>>6|192,he[ye++]=63&ue|128):55296==(64512&ue)&&it+1<ie.length&&56320==(64512&ie.charCodeAt(it+1))?(ue=65536+((1023&ue)<<10)+(1023&ie.charCodeAt(++it)),he[ye++]=ue>>18|240,he[ye++]=ue>>12&63|128,he[ye++]=ue>>6&63|128,he[ye++]=63&ue|128):(he[ye++]=ue>>12|224,he[ye++]=ue>>6&63|128,he[ye++]=63&ue|128)}return he},be={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ie,he){if(!Array.isArray(ie))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ye=he?this.byteToCharMapWebSafe_:this.byteToCharMap_,it=[];for(let ue=0;ue<ie.length;ue+=3){const Re=ie[ue],rt=ue+1<ie.length,kt=rt?ie[ue+1]:0,Yt=ue+2<ie.length,Xt=Yt?ie[ue+2]:0;let Mr=(15&kt)<<2|Xt>>6,Ur=63&Xt;Yt||(Ur=64,rt||(Mr=64)),it.push(ye[Re>>2],ye[(3&Re)<<4|kt>>4],ye[Mr],ye[Ur])}return it.join("")},encodeString(ie,he){return this.HAS_NATIVE_SUPPORT&&!he?btoa(ie):this.encodeByteArray(ve(ie),he)},decodeString(ie,he){return this.HAS_NATIVE_SUPPORT&&!he?atob(ie):function(ie){const he=[];let ye=0,it=0;for(;ye<ie.length;){const ue=ie[ye++];if(ue<128)he[it++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const Re=ie[ye++];he[it++]=String.fromCharCode((31&ue)<<6|63&Re)}else if(ue>239&&ue<365){const Yt=((7&ue)<<18|(63&ie[ye++])<<12|(63&ie[ye++])<<6|63&ie[ye++])-65536;he[it++]=String.fromCharCode(55296+(Yt>>10)),he[it++]=String.fromCharCode(56320+(1023&Yt))}else{const Re=ie[ye++],rt=ie[ye++];he[it++]=String.fromCharCode((15&ue)<<12|(63&Re)<<6|63&rt)}}return he.join("")}(this.decodeStringToByteArray(ie,he))},decodeStringToByteArray(ie,he){this.init_();const ye=he?this.charToByteMapWebSafe_:this.charToByteMap_,it=[];for(let ue=0;ue<ie.length;){const Re=ye[ie.charAt(ue++)],kt=ue<ie.length?ye[ie.charAt(ue)]:0;++ue;const Xt=ue<ie.length?ye[ie.charAt(ue)]:64;++ue;const dn=ue<ie.length?ye[ie.charAt(ue)]:64;if(++ue,null==Re||null==kt||null==Xt||null==dn)throw Error();it.push(Re<<2|kt>>4),64!==Xt&&(it.push(kt<<4&240|Xt>>2),64!==dn&&it.push(Xt<<6&192|dn))}return it},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ie=0;ie<this.ENCODED_VALS.length;ie++)this.byteToCharMap_[ie]=this.ENCODED_VALS.charAt(ie),this.charToByteMap_[this.byteToCharMap_[ie]]=ie,this.byteToCharMapWebSafe_[ie]=this.ENCODED_VALS_WEBSAFE.charAt(ie),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ie]]=ie,ie>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ie)]=ie,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ie)]=ie)}}},Pe=function(ie){const he=ve(ie);return be.encodeByteArray(he,!0)},Me=function(ie){return Pe(ie).replace(/\./g,"")},Oe=function(ie){try{return be.decodeString(ie,!0)}catch(he){console.error("base64Decode failed: ",he)}return null};function le(ie){return ae(void 0,ie)}function ae(ie,he){if(!(he instanceof Object))return he;switch(he.constructor){case Date:return new Date(he.getTime());case Object:void 0===ie&&(ie={});break;case Array:ie=[];break;default:return he}for(const ye in he)!he.hasOwnProperty(ye)||!Ae(ye)||(ie[ye]=ae(ie[ye],he[ye]));return ie}function Ae(ie){return"__proto__"!==ie}class Ct{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((he,ye)=>{this.resolve=he,this.reject=ye})}wrapCallback(he){return(ye,it)=>{ye?this.reject(ye):this.resolve(it),"function"==typeof he&&(this.promise.catch(()=>{}),1===he.length?he(ye):he(ye,it))}}}function nt(ie,he){if(ie.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const it=he||"demo-project",ue=ie.iat||0,Re=ie.sub||ie.user_id;if(!Re)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${it}`,aud:it,iat:ue,exp:ue+3600,auth_time:ue,sub:Re,user_id:Re,firebase:{sign_in_provider:"custom",identities:{}}},ie);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(rt)),""].join(".")}function st(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Dt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function Ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(ie){return!1}}function et(){return"object"==typeof self&&self.self===self}function Ie(){const ie="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ie&&void 0!==ie.id}function At(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){return st().indexOf("Electron/")>=0}function Ne(){const ie=st();return ie.indexOf("MSIE ")>=0||ie.indexOf("Trident/")>=0}function ke(){return st().indexOf("MSAppHost/")>=0}function Tt(){return!1}function wt(){return!Ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J(){return"object"==typeof indexedDB}function Ze(){return new Promise((ie,he)=>{try{let ye=!0;const it="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(it);ue.onsuccess=()=>{ue.result.close(),ye||self.indexedDB.deleteDatabase(it),ie(!0)},ue.onupgradeneeded=()=>{ye=!1},ue.onerror=()=>{var Re;he((null===(Re=ue.error)||void 0===Re?void 0:Re.message)||"")}}catch(ye){he(ye)}})}function oe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class We extends Error{constructor(he,ye,it){super(ye),this.code=he,this.customData=it,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(he,ye,it){this.service=he,this.serviceName=ye,this.errors=it}create(he,...ye){const it=ye[0]||{},ue=`${this.service}/${he}`,Re=this.errors[he],rt=Re?function vt(ie,he){return ie.replace(Nt,(ye,it)=>{const ue=he[it];return null!=ue?String(ue):`<${it}?>`})}(Re,it):"Error";return new We(ue,`${this.serviceName}: ${rt} (${ue}).`,it)}}const Nt=/\{\$([^}]+)}/g;function xt(ie){return JSON.parse(ie)}function Ut(ie){return JSON.stringify(ie)}const lt=function(ie){let he={},ye={},it={},ue="";try{const Re=ie.split(".");he=xt(Oe(Re[0])||""),ye=xt(Oe(Re[1])||""),ue=Re[2],it=ye.d||{},delete ye.d}catch(Re){}return{header:he,claims:ye,data:it,signature:ue}},Wt=function(ie){const ye=lt(ie).claims;return!!ye&&"object"==typeof ye&&ye.hasOwnProperty("iat")},jt=function(ie){const he=lt(ie).claims;return"object"==typeof he&&!0===he.admin};function pn(ie,he){return Object.prototype.hasOwnProperty.call(ie,he)}function sn(ie,he){if(Object.prototype.hasOwnProperty.call(ie,he))return ie[he]}function yn(ie){for(const he in ie)if(Object.prototype.hasOwnProperty.call(ie,he))return!1;return!0}function ur(ie,he,ye){const it={};for(const ue in ie)Object.prototype.hasOwnProperty.call(ie,ue)&&(it[ue]=he.call(ye,ie[ue],ue,ie));return it}function Xn(ie,he){if(ie===he)return!0;const ye=Object.keys(ie),it=Object.keys(he);for(const ue of ye){if(!it.includes(ue))return!1;const Re=ie[ue],rt=he[ue];if(or(Re)&&or(rt)){if(!Xn(Re,rt))return!1}else if(Re!==rt)return!1}for(const ue of it)if(!ye.includes(ue))return!1;return!0}function or(ie){return null!==ie&&"object"==typeof ie}function Kn(ie){const he=[];for(const[ye,it]of Object.entries(ie))Array.isArray(it)?it.forEach(ue=>{he.push(encodeURIComponent(ye)+"="+encodeURIComponent(ue))}):he.push(encodeURIComponent(ye)+"="+encodeURIComponent(it));return he.length?"&"+he.join("&"):""}function Tr(ie){const he={};return ie.replace(/^\?/,"").split("&").forEach(it=>{if(it){const[ue,Re]=it.split("=");he[decodeURIComponent(ue)]=decodeURIComponent(Re)}}),he}function qn(ie){const he=ie.indexOf("?");if(!he)return"";const ye=ie.indexOf("#",he);return ie.substring(he,ye>0?ye:void 0)}class hr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let he=1;he<this.blockSize;++he)this.pad_[he]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(he,ye){ye||(ye=0);const it=this.W_;if("string"==typeof he)for(let dn=0;dn<16;dn++)it[dn]=he.charCodeAt(ye)<<24|he.charCodeAt(ye+1)<<16|he.charCodeAt(ye+2)<<8|he.charCodeAt(ye+3),ye+=4;else for(let dn=0;dn<16;dn++)it[dn]=he[ye]<<24|he[ye+1]<<16|he[ye+2]<<8|he[ye+3],ye+=4;for(let dn=16;dn<80;dn++){const Mr=it[dn-3]^it[dn-8]^it[dn-14]^it[dn-16];it[dn]=4294967295&(Mr<<1|Mr>>>31)}let Xt,lr,ue=this.chain_[0],Re=this.chain_[1],rt=this.chain_[2],kt=this.chain_[3],Yt=this.chain_[4];for(let dn=0;dn<80;dn++){dn<40?dn<20?(Xt=kt^Re&(rt^kt),lr=1518500249):(Xt=Re^rt^kt,lr=1859775393):dn<60?(Xt=Re&rt|kt&(Re|rt),lr=2400959708):(Xt=Re^rt^kt,lr=3395469782);const Mr=(ue<<5|ue>>>27)+Xt+Yt+lr+it[dn]&4294967295;Yt=kt,kt=rt,rt=4294967295&(Re<<30|Re>>>2),Re=ue,ue=Mr}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+Re&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+kt&4294967295,this.chain_[4]=this.chain_[4]+Yt&4294967295}update(he,ye){if(null==he)return;void 0===ye&&(ye=he.length);const it=ye-this.blockSize;let ue=0;const Re=this.buf_;let rt=this.inbuf_;for(;ue<ye;){if(0===rt)for(;ue<=it;)this.compress_(he,ue),ue+=this.blockSize;if("string"==typeof he){for(;ue<ye;)if(Re[rt]=he.charCodeAt(ue),++rt,++ue,rt===this.blockSize){this.compress_(Re),rt=0;break}}else for(;ue<ye;)if(Re[rt]=he[ue],++rt,++ue,rt===this.blockSize){this.compress_(Re),rt=0;break}}this.inbuf_=rt,this.total_+=ye}digest(){const he=[];let ye=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&ye,ye/=256;this.compress_(this.buf_);let it=0;for(let ue=0;ue<5;ue++)for(let Re=24;Re>=0;Re-=8)he[it]=this.chain_[ue]>>Re&255,++it;return he}}function Zn(ie,he){const ye=new Zt(ie,he);return ye.subscribe.bind(ye)}class Zt{constructor(he,ye){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ye,this.task.then(()=>{he(this)}).catch(it=>{this.error(it)})}next(he){this.forEachObserver(ye=>{ye.next(he)})}error(he){this.forEachObserver(ye=>{ye.error(he)}),this.close(he)}complete(){this.forEachObserver(he=>{he.complete()}),this.close()}subscribe(he,ye,it){let ue;if(void 0===he&&void 0===ye&&void 0===it)throw new Error("Missing Observer.");ue=function Rn(ie,he){if("object"!=typeof ie||null===ie)return!1;for(const ye of he)if(ye in ie&&"function"==typeof ie[ye])return!0;return!1}(he,["next","error","complete"])?he:{next:he,error:ye,complete:it},void 0===ue.next&&(ue.next=Mn),void 0===ue.error&&(ue.error=Mn),void 0===ue.complete&&(ue.complete=Mn);const Re=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch(rt){}}),this.observers.push(ue),Re}unsubscribeOne(he){void 0===this.observers||void 0===this.observers[he]||(delete this.observers[he],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(he){if(!this.finalized)for(let ye=0;ye<this.observers.length;ye++)this.sendOne(ye,he)}sendOne(he,ye){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[he])try{ye(this.observers[he])}catch(it){"undefined"!=typeof console&&console.error&&console.error(it)}})}close(he){this.finalized||(this.finalized=!0,void 0!==he&&(this.finalError=he),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}const Wi=function(ie,he,ye,it){let ue;if(it<he?ue="at least "+he:it>ye&&(ue=0===ye?"none":"no more than "+ye),ue)throw new Error(ie+" failed: Was called with "+it+(1===it?" argument.":" arguments.")+" Expects "+ue+".")};function hi(ie,he){return`${ie} failed: ${he} argument `}function me(ie,he,ye,it){if((!it||ye)&&"function"!=typeof ye)throw new Error(hi(ie,he)+"must be a valid function.")}function Ce(ie,he,ye,it){if((!it||ye)&&("object"!=typeof ye||null===ye))throw new Error(hi(ie,he)+"must be a valid context object.")}const dt=function(ie){const he=[];let ye=0;for(let it=0;it<ie.length;it++){let ue=ie.charCodeAt(it);if(ue>=55296&&ue<=56319){const Re=ue-55296;it++,Y(it<ie.length,"Surrogate pair missing trail surrogate."),ue=65536+(Re<<10)+(ie.charCodeAt(it)-56320)}ue<128?he[ye++]=ue:ue<2048?(he[ye++]=ue>>6|192,he[ye++]=63&ue|128):ue<65536?(he[ye++]=ue>>12|224,he[ye++]=ue>>6&63|128,he[ye++]=63&ue|128):(he[ye++]=ue>>18|240,he[ye++]=ue>>12&63|128,he[ye++]=ue>>6&63|128,he[ye++]=63&ue|128)}return he},Le=function(ie){let he=0;for(let ye=0;ye<ie.length;ye++){const it=ie.charCodeAt(ye);it<128?he++:it<2048?he+=2:it>=55296&&it<=56319?(he+=4,ye++):he+=3}return he};function Jt(ie,he=1e3,ye=2){const it=he*Math.pow(ye,ie),ue=Math.round(.5*it*(Math.random()-.5)*2);return Math.min(144e5,it+ue)}function Nn(ie){return ie&&ie._delegate?ie._delegate:ie}},8753:(Mt,Ve,V)=>{var T=V(9808),Y=V(5e3);class Q extends T.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ve extends Q{static makeCurrent(){(0,T.HT)(new ve)}onAndCancel(u,a,f){return u.addEventListener(a,f,!1),()=>{u.removeEventListener(a,f,!1)}}dispatchEvent(u,a){u.dispatchEvent(a)}remove(u){u.parentNode&&u.parentNode.removeChild(u)}createElement(u,a){return(a=a||this.getDefaultDocument()).createElement(u)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(u){return u.nodeType===Node.ELEMENT_NODE}isShadowRoot(u){return u instanceof DocumentFragment}getGlobalEventTarget(u,a){return"window"===a?window:"document"===a?u:"body"===a?u.body:null}getBaseHref(u){const a=function be(){return Ee=Ee||document.querySelector("base"),Ee?Ee.getAttribute("href"):null}();return null==a?null:function Me(d){Pe=Pe||document.createElement("a"),Pe.setAttribute("href",d);const u=Pe.pathname;return"/"===u.charAt(0)?u:`/${u}`}(a)}resetBaseElement(){Ee=null}getUserAgent(){return window.navigator.userAgent}getCookie(u){return(0,T.Mx)(document.cookie,u)}}let Pe,Ee=null;const Oe=new Y.OlP("TRANSITION_ID"),ae=[{provide:Y.ip1,useFactory:function le(d,u,a){return()=>{a.get(Y.CZH).donePromise.then(()=>{const f=(0,T.q)(),_=u.querySelectorAll(`style[ng-transition="${d}"]`);for(let A=0;A<_.length;A++)f.remove(_[A])})}},deps:[Oe,T.K0,Y.zs3],multi:!0}];class Ae{static init(){(0,Y.VLi)(new Ae)}addToWindow(u){Y.dqk.getAngularTestability=(f,_=!0)=>{const A=u.findTestabilityInTree(f,_);if(null==A)throw new Error("Could not find testability for element.");return A},Y.dqk.getAllAngularTestabilities=()=>u.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>u.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(f=>{const _=Y.dqk.getAllAngularTestabilities();let A=_.length,k=!1;const W=function(X){k=k||X,A--,0==A&&f(k)};_.forEach(function(X){X.whenStable(W)})})}findTestabilityInTree(u,a,f){if(null==a)return null;const _=u.getTestability(a);return null!=_?_:f?(0,T.q)().isShadowRoot(a)?this.findTestabilityInTree(u,a.host,!0):this.findTestabilityInTree(u,a.parentElement,!0):null}}let Ct=(()=>{class d{build(){return new XMLHttpRequest}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();const nt=new Y.OlP("EventManagerPlugins");let st=(()=>{class d{constructor(a,f){this._zone=f,this._eventNameToPlugin=new Map,a.forEach(_=>_.manager=this),this._plugins=a.slice().reverse()}addEventListener(a,f,_){return this._findPluginFor(f).addEventListener(a,f,_)}addGlobalEventListener(a,f,_){return this._findPluginFor(f).addGlobalEventListener(a,f,_)}getZone(){return this._zone}_findPluginFor(a){const f=this._eventNameToPlugin.get(a);if(f)return f;const _=this._plugins;for(let A=0;A<_.length;A++){const k=_[A];if(k.supports(a))return this._eventNameToPlugin.set(a,k),k}throw new Error(`No event manager plugin found for event ${a}`)}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(nt),Y.LFG(Y.R0b))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();class Dt{constructor(u){this._doc=u}addGlobalEventListener(u,a,f){const _=(0,T.q)().getGlobalEventTarget(this._doc,u);if(!_)throw new Error(`Unsupported event target ${_} for event ${a}`);return this.addEventListener(_,a,f)}}let Ge=(()=>{class d{constructor(){this._stylesSet=new Set}addStyles(a){const f=new Set;a.forEach(_=>{this._stylesSet.has(_)||(this._stylesSet.add(_),f.add(_))}),this.onStylesAdded(f)}onStylesAdded(a){}getAllStyles(){return Array.from(this._stylesSet)}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})(),et=(()=>{class d extends Ge{constructor(a){super(),this._doc=a,this._hostNodes=new Map,this._hostNodes.set(a.head,[])}_addStylesToHost(a,f,_){a.forEach(A=>{const k=this._doc.createElement("style");k.textContent=A,_.push(f.appendChild(k))})}addHost(a){const f=[];this._addStylesToHost(this._stylesSet,a,f),this._hostNodes.set(a,f)}removeHost(a){const f=this._hostNodes.get(a);f&&f.forEach(Ie),this._hostNodes.delete(a)}onStylesAdded(a){this._hostNodes.forEach((f,_)=>{this._addStylesToHost(a,_,f)})}ngOnDestroy(){this._hostNodes.forEach(a=>a.forEach(Ie))}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(T.K0))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();function Ie(d){(0,T.q)().remove(d)}const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tt=/%COMP%/g;function oe(d,u,a){for(let f=0;f<u.length;f++){let _=u[f];Array.isArray(_)?oe(d,_,a):(_=_.replace(tt,d),a.push(_))}return a}function Se(d){return u=>{if("__ngUnwrap__"===u)return d;!1===d(u)&&(u.preventDefault(),u.returnValue=!1)}}let We=(()=>{class d{constructor(a,f,_){this.eventManager=a,this.sharedStylesHost=f,this.appId=_,this.rendererByCompId=new Map,this.defaultRenderer=new He(a)}createRenderer(a,f){if(!a||!f)return this.defaultRenderer;switch(f.encapsulation){case Y.ifc.Emulated:{let _=this.rendererByCompId.get(f.id);return _||(_=new xt(this.eventManager,this.sharedStylesHost,f,this.appId),this.rendererByCompId.set(f.id,_)),_.applyToHost(a),_}case 1:case Y.ifc.ShadowDom:return new Ut(this.eventManager,this.sharedStylesHost,a,f);default:if(!this.rendererByCompId.has(f.id)){const _=oe(f.id,f.styles,[]);this.sharedStylesHost.addStyles(_),this.rendererByCompId.set(f.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(st),Y.LFG(et),Y.LFG(Y.AFp))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();class He{constructor(u){this.eventManager=u,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(u,a){return a?document.createElementNS(At[a]||a,u):document.createElement(u)}createComment(u){return document.createComment(u)}createText(u){return document.createTextNode(u)}appendChild(u,a){u.appendChild(a)}insertBefore(u,a,f){u&&u.insertBefore(a,f)}removeChild(u,a){u&&u.removeChild(a)}selectRootElement(u,a){let f="string"==typeof u?document.querySelector(u):u;if(!f)throw new Error(`The selector "${u}" did not match any elements`);return a||(f.textContent=""),f}parentNode(u){return u.parentNode}nextSibling(u){return u.nextSibling}setAttribute(u,a,f,_){if(_){a=_+":"+a;const A=At[_];A?u.setAttributeNS(A,a,f):u.setAttribute(a,f)}else u.setAttribute(a,f)}removeAttribute(u,a,f){if(f){const _=At[f];_?u.removeAttributeNS(_,a):u.removeAttribute(`${f}:${a}`)}else u.removeAttribute(a)}addClass(u,a){u.classList.add(a)}removeClass(u,a){u.classList.remove(a)}setStyle(u,a,f,_){_&(Y.JOm.DashCase|Y.JOm.Important)?u.style.setProperty(a,f,_&Y.JOm.Important?"important":""):u.style[a]=f}removeStyle(u,a,f){f&Y.JOm.DashCase?u.style.removeProperty(a):u.style[a]=""}setProperty(u,a,f){u[a]=f}setValue(u,a){u.nodeValue=a}listen(u,a,f){return"string"==typeof u?this.eventManager.addGlobalEventListener(u,a,Se(f)):this.eventManager.addEventListener(u,a,Se(f))}}class xt extends He{constructor(u,a,f,_){super(u),this.component=f;const A=oe(_+"-"+f.id,f.styles,[]);a.addStyles(A),this.contentAttr=function J(d){return"_ngcontent-%COMP%".replace(tt,d)}(_+"-"+f.id),this.hostAttr=function Ze(d){return"_nghost-%COMP%".replace(tt,d)}(_+"-"+f.id)}applyToHost(u){super.setAttribute(u,this.hostAttr,"")}createElement(u,a){const f=super.createElement(u,a);return super.setAttribute(f,this.contentAttr,""),f}}class Ut extends He{constructor(u,a,f,_){super(u),this.sharedStylesHost=a,this.hostEl=f,this.shadowRoot=f.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const A=oe(_.id,_.styles,[]);for(let k=0;k<A.length;k++){const W=document.createElement("style");W.textContent=A[k],this.shadowRoot.appendChild(W)}}nodeOrShadowRoot(u){return u===this.hostEl?this.shadowRoot:u}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(u,a){return super.appendChild(this.nodeOrShadowRoot(u),a)}insertBefore(u,a,f){return super.insertBefore(this.nodeOrShadowRoot(u),a,f)}removeChild(u,a){return super.removeChild(this.nodeOrShadowRoot(u),a)}parentNode(u){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(u)))}}let lt=(()=>{class d extends Dt{constructor(a){super(a)}supports(a){return!0}addEventListener(a,f,_){return a.addEventListener(f,_,!1),()=>this.removeEventListener(a,f,_)}removeEventListener(a,f,_){return a.removeEventListener(f,_)}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(T.K0))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();const cn=["alt","control","meta","shift"],Wt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pn={alt:d=>d.altKey,control:d=>d.ctrlKey,meta:d=>d.metaKey,shift:d=>d.shiftKey};let sn=(()=>{class d extends Dt{constructor(a){super(a)}supports(a){return null!=d.parseEventName(a)}addEventListener(a,f,_){const A=d.parseEventName(f),k=d.eventCallback(A.fullKey,_,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,T.q)().onAndCancel(a,A.domEventName,k))}static parseEventName(a){const f=a.toLowerCase().split("."),_=f.shift();if(0===f.length||"keydown"!==_&&"keyup"!==_)return null;const A=d._normalizeKey(f.pop());let k="";if(cn.forEach(X=>{const ce=f.indexOf(X);ce>-1&&(f.splice(ce,1),k+=X+".")}),k+=A,0!=f.length||0===A.length)return null;const W={};return W.domEventName=_,W.fullKey=k,W}static getEventFullKey(a){let f="",_=function yn(d){let u=d.key;if(null==u){if(u=d.keyIdentifier,null==u)return"Unidentified";u.startsWith("U+")&&(u=String.fromCharCode(parseInt(u.substring(2),16)),3===d.location&&jt.hasOwnProperty(u)&&(u=jt[u]))}return Wt[u]||u}(a);return _=_.toLowerCase()," "===_?_="space":"."===_&&(_="dot"),cn.forEach(A=>{A!=_&&pn[A](a)&&(f+=A+".")}),f+=_,f}static eventCallback(a,f,_){return A=>{d.getEventFullKey(A)===a&&_.runGuarded(()=>f(A))}}static _normalizeKey(a){return"esc"===a?"escape":a}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(T.K0))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac}),d})();const Tr=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:T.bD},{provide:Y.g9A,useValue:function ur(){ve.makeCurrent(),Ae.init()},multi:!0},{provide:T.K0,useFactory:function or(){return(0,Y.RDi)(document),document},deps:[]}]),qn=[{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function Xn(){return new Y.qLn},deps:[]},{provide:nt,useClass:lt,multi:!0,deps:[T.K0,Y.R0b,Y.Lbi]},{provide:nt,useClass:sn,multi:!0,deps:[T.K0]},{provide:We,useClass:We,deps:[st,et,Y.AFp]},{provide:Y.FYo,useExisting:We},{provide:Ge,useExisting:et},{provide:et,useClass:et,deps:[T.K0]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b]},{provide:st,useClass:st,deps:[nt,Y.R0b]},{provide:T.JF,useClass:Ct,deps:[]}];let hr=(()=>{class d{constructor(a){if(a)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(a){return{ngModule:d,providers:[{provide:Y.AFp,useValue:a.appId},{provide:Oe,useExisting:Y.AFp},ae]}}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(d,12))},d.\u0275mod=Y.oAB({type:d}),d.\u0275inj=Y.cJS({providers:qn,imports:[T.ez,Y.hGG]}),d})();"undefined"!=typeof window&&window;var Ai=V(4410);const En=[{path:"",pathMatch:"full",redirectTo:"main"},{path:"auth",loadChildren:()=>Promise.all([V.e(382),V.e(389)]).then(V.bind(V,5389)).then(d=>d.AuthModule)},{path:"main",loadChildren:()=>Promise.all([V.e(382),V.e(611)]).then(V.bind(V,611)).then(d=>d.MainModule),canLoad:[(()=>{class d{constructor(a){this.router=a}canLoad(a,f){return!!localStorage.getItem("user")||(this.router.navigate(["auth"]),!1)}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(Ai.F0))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()]}];let mr=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=Y.oAB({type:d}),d.\u0275inj=Y.cJS({imports:[[Ai.Bz.forRoot(En)],Ai.Bz]}),d})(),fi=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275cmp=Y.Xpm({type:d,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"container"]],template:function(a,f){1&a&&(Y.TgZ(0,"div",0),Y._UZ(1,"router-outlet"),Y.qZA())},directives:[Ai.lC],styles:["header[_ngcontent-%COMP%]{padding:1rem 2rem}"]}),d})();var pi=V(520),yr=V(2011);const ui_firebase={apiKey:"AIzaSyCUwAQO0pvMOellin07kJYfqyYzkvWJcNw",authDomain:"angular-organizer-id26091994.firebaseapp.com",databaseURL:"https://angular-organizer-id26091994-default-rtdb.europe-west1.firebasedatabase.app",projectId:"angular-organizer-id26091994",storageBucket:"angular-organizer-id26091994.appspot.com",messagingSenderId:"654335749525",appId:"1:654335749525:web:0f238f3eb475696d115a9c"};var Oo=V(4986),Os=V(8306),Ji=V(9646),li=V(6451),cr=V(4004),xi=V(3099),Yn=V(3900),bt=V(5026),Ht=V(1884),$n=V(4482),ni=V(5403),Xi=V(8421),Sr=V(4671),es=V(5032),ar=V(7669),hn=V(5813),Ls=(V(9916),V(3942)),Is=V(4859),Ii=V(5861),pr=V(9681),te=V(2090),zr=V(1877);const Vr="@firebase/database";let Cs="";function ts(d){Cs=d}class gi{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,a){null==a?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,te.Pz)(a))}get(u){const a=this.domStorage_.getItem(this.prefixedName_(u));return null==a?null:(0,te.cI)(a)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class zi{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,a){null==a?delete this.cache_[u]:this.cache_[u]=a}get(u){return(0,te.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Fs=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new gi(u)}}catch(u){}return new zi},Ds=Fs("localStorage"),Kr=Fs("sessionStorage"),mi=new zr.Yd("@firebase/database"),mo=function(){let d=1;return function(){return d++}}(),Us=function(d){const u=(0,te.dS)(d),a=new te.gQ;a.update(u);const f=a.digest();return te.US.encodeByteArray(f)},yo=function(...d){let u="";for(let a=0;a<d.length;a++){const f=d[a];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?u+=yo.apply(null,f):u+="object"==typeof f?(0,te.Pz)(f):f,u+=" "}return u};let nr=null,bs=!0;const _o=function(d,u){(0,te.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(mi.logLevel=zr.in.VERBOSE,nr=mi.log.bind(mi),u&&Kr.set("logging_enabled",!0)):"function"==typeof d?nr=d:(nr=null,Kr.remove("logging_enabled"))},we=function(...d){if(!0===bs&&(bs=!1,null===nr&&!0===Kr.get("logging_enabled")&&_o(!0)),nr){const u=yo.apply(null,d);nr(u)}},fe=function(d){return function(...u){we(d,...u)}},je=function(...d){const u="FIREBASE INTERNAL ERROR: "+yo(...d);mi.error(u)},Xe=function(...d){const u=`FIREBASE FATAL ERROR: ${yo(...d)}`;throw mi.error(u),new Error(u)},mt=function(...d){const u="FIREBASE WARNING: "+yo(...d);mi.warn(u)},rr=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},bn="[MIN_NAME]",Ir="[MAX_NAME]",Mi=function(d,u){if(d===u)return 0;if(d===bn||u===Ir)return-1;if(u===bn||d===Ir)return 1;{const a=va(d),f=va(u);return null!==a?null!==f?a-f==0?d.length-u.length:a-f:-1:null!==f?1:d<u?-1:1}},Ts=function(d,u){return d===u?0:d<u?-1:1},ns=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,te.Pz)(u))},yi=function(d){if("object"!=typeof d||null===d)return(0,te.Pz)(d);const u=[];for(const f in d)u.push(f);u.sort();let a="{";for(let f=0;f<u.length;f++)0!==f&&(a+=","),a+=(0,te.Pz)(u[f]),a+=":",a+=yi(d[u[f]]);return a+="}",a},Ss=function(d,u){const a=d.length;if(a<=u)return[d];const f=[];for(let _=0;_<a;_+=u)f.push(d.substring(_,_+u>a?a:_+u));return f};function Zr(d,u){for(const a in d)d.hasOwnProperty(a)&&u(a,d[a])}const Fa=function(d){(0,te.hu)(!rr(d),"Invalid JSON number");const f=1023;let _,A,k,W,X;0===d?(A=0,k=0,_=1/d==-1/0?1:0):(_=d<0,(d=Math.abs(d))>=Math.pow(2,1-f)?(W=Math.min(Math.floor(Math.log(d)/Math.LN2),f),A=W+f,k=Math.round(d*Math.pow(2,52-W)-Math.pow(2,52))):(A=0,k=Math.round(d/Math.pow(2,-1074))));const ce=[];for(X=52;X;X-=1)ce.push(k%2?1:0),k=Math.floor(k/2);for(X=11;X;X-=1)ce.push(A%2?1:0),A=Math.floor(A/2);ce.push(_?1:0),ce.reverse();const qe=ce.join("");let $e="";for(X=0;X<64;X+=8){let ot=parseInt(qe.substr(X,8),2).toString(16);1===ot.length&&(ot="0"+ot),$e+=ot}return $e.toLowerCase()},ko=new RegExp("^-?(0*)\\d{1,10}$"),ea=-2147483648,As=2147483647,va=function(d){if(ko.test(d)){const u=Number(d);if(u>=ea&&u<=As)return u}return null},Nr=function(d){try{d()}catch(u){setTimeout(()=>{throw mt("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},Br=function(d,u){const a=setTimeout(d,u);return"object"==typeof a&&a.unref&&a.unref(),a};class ta{constructor(u,a){this.appName_=u,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(f=>this.appCheck=f)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((a,f)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(a,f):a(null)},0)})}addTokenChangeListener(u){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(f=>f.addTokenListener(u))}notifyForInvalidToken(){mt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Yr{constructor(u,a,f){this.appName_=u,this.firebaseOptions_=a,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(_=>this.auth_=_)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(a=>a&&"auth/token-not-initialized"===a.code?(we("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,f)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(a,f):a(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(a=>a.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(a=>a.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',mt(u)}}let Ni=(()=>{class d{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const ra=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,L="websocket",G="long_polling";class O{constructor(u,a,f,_,A=!1,k="",W=!1){this.secure=a,this.namespace=f,this.webSocketOnly=_,this.nodeAdmin=A,this.persistenceKey=k,this.includeNamespaceInQueryParams=W,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ds.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Ds.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function de(d,u,a){let f;if((0,te.hu)("string"==typeof u,"typeof type must == string"),(0,te.hu)("object"==typeof a,"typeof params must == object"),u===L)f=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==G)throw new Error("Unknown connection type: "+u);f=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function Z(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(a.ns=d.namespace);const _=[];return Zr(a,(A,k)=>{_.push(A+"="+k)}),f+_.join("&")}class Ke{constructor(){this.counters_={}}incrementCounter(u,a=1){(0,te.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=a}get(){return(0,te.p$)(this.counters_)}}const ct={},$t={};function an(d){const u=d.toString();return ct[u]||(ct[u]=new Ke),ct[u]}class Cn{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,a){this.closeAfterResponse=u,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,a){for(this.pendingResponses[u]=a;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let _=0;_<f.length;++_)f[_]&&Nr(()=>{this.onMessage_(f[_])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class er{constructor(u,a,f,_,A,k,W){this.connId=u,this.repoInfo=a,this.applicationId=f,this.appCheckToken=_,this.authToken=A,this.transportSessionId=k,this.lastSessionId=W,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fe(u),this.stats_=an(a),this.urlFn=X=>(this.appCheckToken&&(X.ac=this.appCheckToken),de(a,G,X))}open(u,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new Cn(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,te.Yr)()||"complete"===document.readyState)d();else{let u=!1;const a=function(){document.body?u||(u=!0,d()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ia((...A)=>{const[k,W,X,ce,qe]=A;if(this.incrementIncomingBytes_(A),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===k)this.id=W,this.password=X;else{if("close"!==k)throw new Error("Unrecognized command received: "+k);W?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(W,()=>{this.onClosed_()})):this.onClosed_()}},(...A)=>{const[k,W]=A;this.incrementIncomingBytes_(A),this.myPacketOrderer.handleResponse(k,W)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ra.test(location.hostname)&&(f.r="f");const _=this.urlFn(f);this.log_("Connecting via long-poll to "+_),this.scriptTagHolder.addTag(_,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){er.forceAllow_=!0}static forceDisallow(){er.forceDisallow_=!0}static isAvailable(){return!((0,te.Yr)()||!er.forceAllow_&&(er.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const a=(0,te.Pz)(u);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const f=(0,te.h$)(a),_=Ss(f,1840);for(let A=0;A<_.length;A++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,_.length,_[A]),this.curSegmentNum++}addDisconnectPingFrame(u,a){if((0,te.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=u,f.pw=a,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const a=(0,te.Pz)(u).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class ia{constructor(u,a,f,_){if(this.onDisconnect=f,this.urlFn=_,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,te.Yr)())this.commandCB=u,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=mo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=ia.createIFrame_();let A="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(A='<script>document.domain="'+document.domain+'";<\/script>');const k="<html><body>"+A+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(k),this.myIFrame.doc.close()}catch(W){we("frame writing exception"),W.stack&&we(W.stack),we(W)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||we("No IE domain setting required")}catch(a){const f=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,a){for(this.myID=u,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let a=this.urlFn(u),f="",_=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const k=this.pendingSegs.shift();f=f+"&seg"+_+"="+k.seg+"&ts"+_+"="+k.ts+"&d"+_+"="+k.d,_++}return a+=f,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(u,a,f){this.pendingSegs.push({seg:u,ts:a,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(u,a){this.outstandingRequests.add(a);const f=()=>{this.outstandingRequests.delete(a),this.newRequest_()},_=setTimeout(f,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(_),f()})}addTag(u,a){(0,te.Yr)()?this.doNodeLongPoll(u,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=u,f.onload=f.onreadystatechange=function(){const _=f.readyState;(!_||"loaded"===_||"complete"===_)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),a())},f.onerror=()=>{we("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch(f){}},Math.floor(1))}}let wo=null;"undefined"!=typeof MozWebSocket?wo=MozWebSocket:"undefined"!=typeof WebSocket&&(wo=WebSocket);let $s=(()=>{class d{constructor(a,f,_,A,k,W,X){this.connId=a,this.applicationId=_,this.appCheckToken=A,this.authToken=k,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fe(this.connId),this.stats_=an(f),this.connURL=d.connectionURL_(f,W,X,A,_),this.nodeAdmin=f.nodeAdmin}static connectionURL_(a,f,_,A,k){const W={v:"5"};return!(0,te.Yr)()&&"undefined"!=typeof location&&location.hostname&&ra.test(location.hostname)&&(W.r="f"),f&&(W.s=f),_&&(W.ls=_),A&&(W.ac=A),k&&(W.p=k),de(a,L,W)}open(a,f){this.onDisconnect=f,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ds.set("previous_websocket_failure",!0);try{let _;if((0,te.Yr)()){const k={headers:{"User-Agent":`Firebase/5/${Cs}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(k.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(k.headers["X-Firebase-AppCheck"]=this.appCheckToken);const W=process.env,X=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;X&&(k.proxy={origin:X})}this.mySock=new wo(this.connURL,[],_)}catch(_){this.log_("Error instantiating WebSocket.");const A=_.message||_.data;return A&&this.log_(A),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=_=>{this.handleIncomingFrame(_)},this.mySock.onerror=_=>{this.log_("WebSocket error.  Closing connection.");const A=_.message||_.data;A&&this.log_(A),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const _=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);_&&_.length>1&&parseFloat(_[1])<4.4&&(a=!0)}return!a&&null!==wo&&!d.forceDisallow_}static previouslyFailed(){return Ds.isInMemoryStorage||!0===Ds.get("previous_websocket_failure")}markConnectionHealthy(){Ds.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const _=(0,te.cI)(f);this.onMessage(_)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,te.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const f=Number(a);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const f=a.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const _=this.extractFrameCount_(f);null!==_&&this.appendFrame_(_)}}send(a){this.resetKeepAlive();const f=(0,te.Pz)(a);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const _=Ss(f,16384);_.length>1&&this.sendString_(String(_.length));for(let A=0;A<_.length;A++)this.sendString_(_[A])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),jl=(()=>{class d{constructor(a){this.initTransports_(a)}static get ALL_TRANSPORTS(){return[er,$s]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(a){const f=$s&&$s.isAvailable();let _=f&&!$s.previouslyFailed();if(a.webSocketOnly&&(f||mt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[$s];else{const A=this.transports_=[];for(const k of d.ALL_TRANSPORTS)k&&k.isAvailable()&&A.push(k);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class ja{constructor(u,a,f,_,A,k,W,X,ce,qe){this.id=u,this.repoInfo_=a,this.applicationId_=f,this.appCheckToken_=_,this.authToken_=A,this.onMessage_=k,this.onReady_=W,this.onDisconnect_=X,this.onKill_=ce,this.lastSessionId=qe,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fe("c:"+this.id+":"),this.transportManager_=new jl(a),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,f)},Math.floor(0));const _=u.healthyTimeout||0;_>0&&(this.healthyTimeout_=Br(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(_)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return a=>{u===this.conn_?this.onConnectionLost_(a):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return a=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(a):u===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const a=u.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const a=ns("t",u),f=ns("d",u);if("c"===a)this.onSecondaryControl_(f);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const a=ns("t",u),f=ns("d",u);"c"===a?this.onControl_(f):"d"===a&&this.onDataMessage_(f)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const a=ns("t",u);if("d"in u){const f=u.d;if("h"===a)this.onHandshake_(f);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let _=0;_<this.pendingDataMessages.length;++_)this.onDataMessage_(this.pendingDataMessages[_]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(f):"r"===a?this.onReset_(f):"e"===a?je("Server Error: "+f):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):je("Unknown control packet command: "+a)}}onHandshake_(u){const a=u.ts,f=u.v,_=u.h;this.sessionId=u.s,this.repoInfo_.host=_,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==f&&mt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,f),Br(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,a){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Br(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ds.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ha{put(u,a,f,_){}merge(u,a,f,_){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,a,f){}onDisconnectMerge(u,a,f){}onDisconnectCancel(u,a){}reportStats(u){}}class Au{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,te.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...a){if(Array.isArray(this.listeners_[u])){const f=[...this.listeners_[u]];for(let _=0;_<f.length;_++)f[_].callback.apply(f[_].context,a)}}on(u,a,f){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:a,context:f});const _=this.getInitialEvent(u);_&&a.apply(f,_)}off(u,a,f){this.validateEventType_(u);const _=this.listeners_[u]||[];for(let A=0;A<_.length;A++)if(_[A].callback===a&&(!f||f===_[A].context))return void _.splice(A,1)}validateEventType_(u){(0,te.hu)(this.allowedEvents_.find(a=>a===u),"Unknown event: "+u)}}class Uo extends Au{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,te.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Uo}getInitialEvent(u){return(0,te.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(u,a){if(void 0===a){this.pieces_=u.split("/");let f=0;for(let _=0;_<this.pieces_.length;_++)this.pieces_[_].length>0&&(this.pieces_[f]=this.pieces_[_],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=a}toString(){let u="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(u+="/"+this.pieces_[a]);return u||"/"}}function On(){return new Pn("")}function Tn(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function hs(d){return d.pieces_.length-d.pieceNum_}function Qn(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new Pn(d.pieces_,u)}function xu(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function is(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function Jr(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let a=d.pieceNum_;a<d.pieces_.length-1;a++)u.push(d.pieces_[a]);return new Pn(u,0)}function kr(d,u){const a=[];for(let f=d.pieceNum_;f<d.pieces_.length;f++)a.push(d.pieces_[f]);if(u instanceof Pn)for(let f=u.pieceNum_;f<u.pieces_.length;f++)a.push(u.pieces_[f]);else{const f=u.split("/");for(let _=0;_<f.length;_++)f[_].length>0&&a.push(f[_])}return new Pn(a,0)}function wn(d){return d.pieceNum_>=d.pieces_.length}function fs(d,u){const a=Tn(d),f=Tn(u);if(null===a)return u;if(a===f)return fs(Qn(d),Qn(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function pc(d,u){const a=is(d,0),f=is(u,0);for(let _=0;_<a.length&&_<f.length;_++){const A=Mi(a[_],f[_]);if(0!==A)return A}return a.length===f.length?0:a.length<f.length?-1:1}function Vo(d,u){if(hs(d)!==hs(u))return!1;for(let a=d.pieceNum_,f=u.pieceNum_;a<=d.pieces_.length;a++,f++)if(d.pieces_[a]!==u.pieces_[f])return!1;return!0}function Ws(d,u){let a=d.pieceNum_,f=u.pieceNum_;if(hs(d)>hs(u))return!1;for(;a<d.pieces_.length;){if(d.pieces_[a]!==u.pieces_[f])return!1;++a,++f}return!0}class Ru{constructor(u,a){this.errorPrefix_=a,this.parts_=is(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,te.ug)(this.parts_[f]);ua(this)}}function ua(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+xn(d))}function xn(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class ou extends Au{constructor(){let u,a;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",u="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const f=!document[u];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new ou}getInitialEvent(u){return(0,te.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const ps=1e3;let Ca,la=(()=>{class d extends Ha{constructor(a,f,_,A,k,W,X,ce){if(super(),this.repoInfo_=a,this.applicationId_=f,this.onDataUpdate_=_,this.onConnectStatus_=A,this.onServerInfoUpdate_=k,this.authTokenProvider_=W,this.appCheckTokenProvider_=X,this.authOverride_=ce,this.id=d.nextPersistentConnectionId_++,this.log_=fe("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ps,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ce&&!(0,te.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ou.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&Uo.getInstance().on("online",this.onOnline_,this)}sendRequest(a,f,_){const A=++this.requestNumber_,k={r:A,a,b:f};this.log_((0,te.Pz)(k)),(0,te.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(k),_&&(this.requestCBHash_[A]=_)}get(a){this.initConnection_();const f=new te.BH,_={p:a._path.toString(),q:a._queryObject},A={action:"g",request:_,onComplete:W=>{const X=W.d;"ok"===W.s?(this.onDataUpdate_(_.p,X,!1,null),f.resolve(X)):f.reject(X)}};this.outstandingGets_.push(A),this.outstandingGetCount_++;const k=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const W=this.outstandingGets_[k];void 0===W||A!==W||(delete this.outstandingGets_[k],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+k+" timed out on connection"),f.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(k),f.promise}listen(a,f,_,A){this.initConnection_();const k=a._queryIdentifier,W=a._path.toString();this.log_("Listen called for "+W+" "+k),this.listens.has(W)||this.listens.set(W,new Map),(0,te.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,te.hu)(!this.listens.get(W).has(k),"listen() called twice for same path/queryId.");const X={onComplete:A,hashFn:f,query:a,tag:_};this.listens.get(W).set(k,X),this.connected_&&this.sendListen_(X)}sendGet_(a){const f=this.outstandingGets_[a];this.sendRequest("g",f.request,_=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(_)})}sendListen_(a){const f=a.query,_=f._path.toString(),A=f._queryIdentifier;this.log_("Listen on "+_+" for "+A);const k={p:_};a.tag&&(k.q=f._queryObject,k.t=a.tag),k.h=a.hashFn(),this.sendRequest("q",k,X=>{const ce=X.d,qe=X.s;d.warnOnListenWarnings_(ce,f),(this.listens.get(_)&&this.listens.get(_).get(A))===a&&(this.log_("listen response",X),"ok"!==qe&&this.removeListen_(_,A),a.onComplete&&a.onComplete(qe,ce))})}static warnOnListenWarnings_(a,f){if(a&&"object"==typeof a&&(0,te.r3)(a,"w")){const _=(0,te.DV)(a,"w");if(Array.isArray(_)&&~_.indexOf("no_index")){const A='".indexOn": "'+f._queryParams.getIndex().toString()+'"',k=f._path.toString();mt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${A} at ${k} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,te.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,f=(0,te.w9)(a)?"auth":"gauth",_={cred:a};null===this.authOverride_?_.noauth=!0:"object"==typeof this.authOverride_&&(_.authvar=this.authOverride_),this.sendRequest(f,_,A=>{const k=A.s,W=A.d||"error";this.authToken_===a&&("ok"===k?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(k,W))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const f=a.s,_=a.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,_)})}unlisten(a,f){const _=a._path.toString(),A=a._queryIdentifier;this.log_("Unlisten called for "+_+" "+A),(0,te.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(_,A)&&this.connected_&&this.sendUnlisten_(_,A,a._queryObject,f)}sendUnlisten_(a,f,_,A){this.log_("Unlisten on "+a+" for "+f);const k={p:a};A&&(k.q=_,k.t=A),this.sendRequest("n",k)}onDisconnectPut(a,f,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,f,_):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:f,onComplete:_})}onDisconnectMerge(a,f,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,f,_):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:f,onComplete:_})}onDisconnectCancel(a,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,f):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(a,f,_,A){const k={p:f,d:_};this.log_("onDisconnect "+a,k),this.sendRequest(a,k,W=>{A&&setTimeout(()=>{A(W.s,W.d)},Math.floor(0))})}put(a,f,_,A){this.putInternal("p",a,f,_,A)}merge(a,f,_,A){this.putInternal("m",a,f,_,A)}putInternal(a,f,_,A,k){this.initConnection_();const W={p:f,d:_};void 0!==k&&(W.h=k),this.outstandingPuts_.push({action:a,request:W,onComplete:A}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(a){const f=this.outstandingPuts_[a].action,_=this.outstandingPuts_[a].request,A=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(f,_,k=>{this.log_(f+" response",k),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),A&&A(k.s,k.d)})}reportStats(a){if(this.connected_){const f={c:a};this.log_("reportStats",f),this.sendRequest("s",f,_=>{"ok"!==_.s&&this.log_("reportStats","Error sending stats: "+_.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,te.Pz)(a));const f=a.r,_=this.requestCBHash_[f];_&&(delete this.requestCBHash_[f],_(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,f){this.log_("handleServerMessage",a,f),"d"===a?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===a?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===a?this.onListenRevoked_(f.p,f.q):"ac"===a?this.onAuthRevoked_(f.s,f.d):"apc"===a?this.onAppCheckRevoked_(f.s,f.d):"sd"===a?this.onSecurityDebugPacket_(f):je("Unrecognized action received from server: "+(0,te.Pz)(a)+"\nAre you using the latest client?")}onReady_(a,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,te.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ps,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=ps,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ps),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-a);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,Ii.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const f=a.onDataMessage_.bind(a),_=a.onReady_.bind(a),A=a.onRealtimeDisconnect_.bind(a),k=a.id+":"+d.nextConnectionId_++,W=a.lastSessionId;let X=!1,ce=null;const qe=function(){ce?ce.close():(X=!0,A())};a.realtime_={close:qe,sendRequest:function(Gt){(0,te.hu)(ce,"sendRequest call when we're not connected not allowed."),ce.sendRequest(Gt)}};const ot=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[Gt,gn]=yield Promise.all([a.authTokenProvider_.getToken(ot),a.appCheckTokenProvider_.getToken(ot)]);X?we("getToken() completed but was canceled"):(we("getToken() completed. Creating connection."),a.authToken_=Gt&&Gt.accessToken,a.appCheckToken_=gn&&gn.token,ce=new ja(k,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,f,_,A,br=>{mt(br+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},W))}catch(Gt){a.log_("Failed to get token: "+Gt),X||(a.repoInfo_.nodeAdmin&&mt(Gt),qe())}}})()}interrupt(a){we("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){we("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,te.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ps,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const f=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const f=this.outstandingPuts_[a];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,f){let _;_=f?f.map(k=>yi(k)).join("$"):"default";const A=this.removeListen_(a,_);A&&A.onComplete&&A.onComplete("permission_denied")}removeListen_(a,f){const _=new Pn(a).toString();let A;if(this.listens.has(_)){const k=this.listens.get(_);A=k.get(f),k.delete(f),0===k.size&&this.listens.delete(_)}else A=void 0;return A}onAuthRevoked_(a,f){we("Auth token revoked: "+a+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,f){we("App check token revoked: "+a+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const f of a.values())this.sendListen_(f);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let f="js";(0,te.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+f+"."+Cs.replace(/\./g,"-")]=1,(0,te.uI)()?a["framework.cordova"]=1:(0,te.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=Uo.getInstance().currentlyOnline();return(0,te.xb)(this.interruptReasons_)&&a}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class kn{constructor(u,a){this.name=u,this.node=a}static Wrap(u,a){return new kn(u,a)}}class xr{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,a){const f=new kn(bn,u),_=new kn(bn,a);return 0!==this.compare(f,_)}minPost(){return kn.MIN}}class Ho extends xr{static get __EMPTY_NODE(){return Ca}static set __EMPTY_NODE(u){Ca=u}compare(u,a){return Mi(u.name,a.name)}isDefinedOn(u){throw(0,te.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,a){return!1}minPost(){return kn.MIN}maxPost(){return new kn(Ir,Ca)}makePost(u,a){return(0,te.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new kn(u,Ca)}toString(){return".key"}}const jr=new Ho;class za{constructor(u,a,f,_,A=null){this.isReverse_=_,this.resultGenerator_=A,this.nodeStack_=[];let k=1;for(;!u.isEmpty();)if(u=u,k=a?f(u.key,a):1,_&&(k*=-1),k<0)u=this.isReverse_?u.left:u.right;else{if(0===k){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,u=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let ao,qs=(()=>{class d{constructor(a,f,_,A,k){this.key=a,this.value=f,this.color=null!=_?_:d.RED,this.left=null!=A?A:qi.EMPTY_NODE,this.right=null!=k?k:qi.EMPTY_NODE}copy(a,f,_,A,k){return new d(null!=a?a:this.key,null!=f?f:this.value,null!=_?_:this.color,null!=A?A:this.left,null!=k?k:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,f,_){let A=this;const k=_(a,A.key);return A=k<0?A.copy(null,null,null,A.left.insert(a,f,_),null):0===k?A.copy(null,f,null,null,null):A.copy(null,null,null,null,A.right.insert(a,f,_)),A.fixUp_()}removeMin_(){if(this.left.isEmpty())return qi.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,f){let _,A;if(_=this,f(a,_.key)<0)!_.left.isEmpty()&&!_.left.isRed_()&&!_.left.left.isRed_()&&(_=_.moveRedLeft_()),_=_.copy(null,null,null,_.left.remove(a,f),null);else{if(_.left.isRed_()&&(_=_.rotateRight_()),!_.right.isEmpty()&&!_.right.isRed_()&&!_.right.left.isRed_()&&(_=_.moveRedRight_()),0===f(a,_.key)){if(_.right.isEmpty())return qi.EMPTY_NODE;A=_.right.min_(),_=_.copy(A.key,A.value,null,null,_.right.removeMin_())}_=_.copy(null,null,null,null,_.right.remove(a,f))}return _.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,f)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class qi{constructor(u,a=qi.EMPTY_NODE){this.comparator_=u,this.root_=a}insert(u,a){return new qi(this.comparator_,this.root_.insert(u,a,this.comparator_).copy(null,null,qs.BLACK,null,null))}remove(u){return new qi(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,qs.BLACK,null,null))}get(u){let a,f=this.root_;for(;!f.isEmpty();){if(a=this.comparator_(u,f.key),0===a)return f.value;a<0?f=f.left:a>0&&(f=f.right)}return null}getPredecessorKey(u){let a,f=this.root_,_=null;for(;!f.isEmpty();){if(a=this.comparator_(u,f.key),0===a){if(f.left.isEmpty())return _?_.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}a<0?f=f.left:a>0&&(_=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new za(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,a){return new za(this.root_,u,this.comparator_,!1,a)}getReverseIteratorFrom(u,a){return new za(this.root_,u,this.comparator_,!0,a)}getReverseIterator(u){return new za(this.root_,null,this.comparator_,!0,u)}}function vr(d,u){return Mi(d.name,u.name)}function Da(d,u){return Mi(d,u)}qi.EMPTY_NODE=new class oo{copy(u,a,f,_,A){return this}insert(u,a,f){return new qs(u,a,null)}remove(u,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Io=function(d){return"number"==typeof d?"number:"+Fa(d):"string:"+d},Co=function(d){if(d.isLeafNode()){const u=d.val();(0,te.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,te.r3)(u,".sv"),"Priority must be a string or number.")}else(0,te.hu)(d===ao||d.isEmpty(),"priority of unexpected type.");(0,te.hu)(d===ao||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ka,_t,Er,ba=(()=>{class d{constructor(a,f=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=f,this.lazyHash_=null,(0,te.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Co(this.priorityNode_)}static set __childrenNodeConstructor(a){Ka=a}static get __childrenNodeConstructor(){return Ka}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new d(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return wn(a)?this:".priority"===Tn(a)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,f){return null}updateImmediateChild(a,f){return".priority"===a?this.updatePriority(f):f.isEmpty()&&".priority"!==a?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,f).updatePriority(this.priorityNode_)}updateChild(a,f){const _=Tn(a);return null===_?f:f.isEmpty()&&".priority"!==_?this:((0,te.hu)(".priority"!==_||1===hs(a),".priority must be the last token in a path"),this.updateImmediateChild(_,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qn(a),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,f){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+Io(this.priorityNode_.val())+":");const f=typeof this.value_;a+=f+":",a+="number"===f?Fa(this.value_):this.value_,this.lazyHash_=Us(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===d.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof d.__childrenNodeConstructor?-1:((0,te.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const f=typeof a.value_,_=typeof this.value_,A=d.VALUE_TYPE_ORDER.indexOf(f),k=d.VALUE_TYPE_ORDER.indexOf(_);return(0,te.hu)(A>=0,"Unknown leaf type: "+f),(0,te.hu)(k>=0,"Unknown leaf type: "+_),A===k?"object"===_?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:k-A}withIndex(){return this}isIndexed(){return!0}equals(a){if(a===this)return!0;if(a.isLeafNode()){const f=a;return this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const I=new class b extends xr{compare(u,a){const f=u.node.getPriority(),_=a.node.getPriority(),A=f.compareTo(_);return 0===A?Mi(u.name,a.name):A}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,a){return!u.getPriority().equals(a.getPriority())}minPost(){return kn.MIN}maxPost(){return new kn(Ir,new ba("[PRIORITY-POST]",Er))}makePost(u,a){const f=_t(u);return new kn(a,new ba("[PRIORITY-POST]",f))}toString(){return".priority"}},C=Math.log(2);class R{constructor(u){this.count=parseInt(Math.log(u+1)/C,10),this.current_=this.count-1;const _=(A=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&_}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const M=function(d,u,a,f){d.sort(u);const _=function(X,ce){const qe=ce-X;let $e,ot;if(0===qe)return null;if(1===qe)return $e=d[X],ot=a?a($e):$e,new qs(ot,$e.node,qs.BLACK,null,null);{const Gt=parseInt(qe/2,10)+X,gn=_(X,Gt),br=_(Gt+1,ce);return $e=d[Gt],ot=a?a($e):$e,new qs(ot,$e.node,qs.BLACK,gn,br)}},W=function(X){let ce=null,qe=null,$e=d.length;const ot=function(gn,br){const Yi=$e-gn,Pa=$e;$e-=gn;const Ju=_(Yi+1,Pa),uc=d[Yi],Mh=a?a(uc):uc;Gt(new qs(Mh,uc.node,br,null,Ju))},Gt=function(gn){ce?(ce.left=gn,ce=gn):(qe=gn,ce=gn)};for(let gn=0;gn<X.count;++gn){const br=X.nextBitIsOne(),Yi=Math.pow(2,X.count-(gn+1));br?ot(Yi,qs.BLACK):(ot(Yi,qs.BLACK),ot(Yi,qs.RED))}return qe}(new R(d.length));return new qi(f||u,W)};let B;const ne={};class pe{constructor(u,a){this.indexes_=u,this.indexSet_=a}static get Default(){return(0,te.hu)(ne&&I,"ChildrenNode.ts has not been loaded"),B=B||new pe({".priority":ne},{".priority":I}),B}get(u){const a=(0,te.DV)(this.indexes_,u);if(!a)throw new Error("No index defined for "+u);return a instanceof qi?a:null}hasIndex(u){return(0,te.r3)(this.indexSet_,u.toString())}addIndex(u,a){(0,te.hu)(u!==jr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let _=!1;const A=a.getIterator(kn.Wrap);let W,k=A.getNext();for(;k;)_=_||u.isDefinedOn(k.node),f.push(k),k=A.getNext();W=_?M(f,u.getCompare()):ne;const X=u.toString(),ce=Object.assign({},this.indexSet_);ce[X]=u;const qe=Object.assign({},this.indexes_);return qe[X]=W,new pe(qe,ce)}addToIndexes(u,a){const f=(0,te.UI)(this.indexes_,(_,A)=>{const k=(0,te.DV)(this.indexSet_,A);if((0,te.hu)(k,"Missing index implementation for "+A),_===ne){if(k.isDefinedOn(u.node)){const W=[],X=a.getIterator(kn.Wrap);let ce=X.getNext();for(;ce;)ce.name!==u.name&&W.push(ce),ce=X.getNext();return W.push(u),M(W,k.getCompare())}return ne}{const W=a.get(u.name);let X=_;return W&&(X=X.remove(new kn(u.name,W))),X.insert(u,u.node)}});return new pe(f,this.indexSet_)}removeFromIndexes(u,a){const f=(0,te.UI)(this.indexes_,_=>{if(_===ne)return _;{const A=a.get(u.name);return A?_.remove(new kn(u.name,A)):_}});return new pe(f,this.indexSet_)}}let Ye,ht=(()=>{class d{constructor(a,f,_){this.children_=a,this.priorityNode_=f,this.indexMap_=_,this.lazyHash_=null,this.priorityNode_&&Co(this.priorityNode_),this.children_.isEmpty()&&(0,te.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ye||(Ye=new d(new qi(Da),null,pe.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ye}updatePriority(a){return this.children_.isEmpty()?this:new d(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const f=this.children_.get(a);return null===f?Ye:f}}getChild(a){const f=Tn(a);return null===f?this:this.getImmediateChild(f).getChild(Qn(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,f){if((0,te.hu)(f,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(f);{const _=new kn(a,f);let A,k;f.isEmpty()?(A=this.children_.remove(a),k=this.indexMap_.removeFromIndexes(_,this.children_)):(A=this.children_.insert(a,f),k=this.indexMap_.addToIndexes(_,this.children_));const W=A.isEmpty()?Ye:this.priorityNode_;return new d(A,W,k)}}updateChild(a,f){const _=Tn(a);if(null===_)return f;{(0,te.hu)(".priority"!==Tn(a)||1===hs(a),".priority must be the last token in a path");const A=this.getImmediateChild(_).updateChild(Qn(a),f);return this.updateImmediateChild(_,A)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const f={};let _=0,A=0,k=!0;if(this.forEachChild(I,(W,X)=>{f[W]=X.val(a),_++,k&&d.INTEGER_REGEXP_.test(W)?A=Math.max(A,Number(W)):k=!1}),!a&&k&&A<2*_){const W=[];for(const X in f)W[X]=f[X];return W}return a&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+Io(this.getPriority().val())+":"),this.forEachChild(I,(f,_)=>{const A=_.hash();""!==A&&(a+=":"+f+":"+A)}),this.lazyHash_=""===a?"":Us(a)}return this.lazyHash_}getPredecessorChildName(a,f,_){const A=this.resolveIndex_(_);if(A){const k=A.getPredecessorKey(new kn(a,f));return k?k.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const f=this.resolveIndex_(a);if(f){const _=f.minKey();return _&&_.name}return this.children_.minKey()}getFirstChild(a){const f=this.getFirstChildName(a);return f?new kn(f,this.children_.get(f)):null}getLastChildName(a){const f=this.resolveIndex_(a);if(f){const _=f.maxKey();return _&&_.name}return this.children_.maxKey()}getLastChild(a){const f=this.getLastChildName(a);return f?new kn(f,this.children_.get(f)):null}forEachChild(a,f){const _=this.resolveIndex_(a);return _?_.inorderTraversal(A=>f(A.name,A.node)):this.children_.inorderTraversal(f)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,f){const _=this.resolveIndex_(f);if(_)return _.getIteratorFrom(a,A=>A);{const A=this.children_.getIteratorFrom(a.name,kn.Wrap);let k=A.peek();for(;null!=k&&f.compare(k,a)<0;)A.getNext(),k=A.peek();return A}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,f){const _=this.resolveIndex_(f);if(_)return _.getReverseIteratorFrom(a,A=>A);{const A=this.children_.getReverseIteratorFrom(a.name,kn.Wrap);let k=A.peek();for(;null!=k&&f.compare(k,a)>0;)A.getNext(),k=A.peek();return A}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===Bt?-1:0}withIndex(a){if(a===jr||this.indexMap_.hasIndex(a))return this;{const f=this.indexMap_.addIndex(a,this.children_);return new d(this.children_,this.priorityNode_,f)}}isIndexed(a){return a===jr||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const f=a;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const _=this.getIterator(I),A=f.getIterator(I);let k=_.getNext(),W=A.getNext();for(;k&&W;){if(k.name!==W.name||!k.node.equals(W.node))return!1;k=_.getNext(),W=A.getNext()}return null===k&&null===W}return!1}return!1}}resolveIndex_(a){return a===jr?null:this.indexMap_.get(a.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const Bt=new class Bn extends ht{constructor(){super(new qi(Da),ht.EMPTY_NODE,pe.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return ht.EMPTY_NODE}isEmpty(){return!1}};function Qt(d,u=null){if(null===d)return ht.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,te.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new ba(d,Qt(u));if(d instanceof Array){let a=ht.EMPTY_NODE;return Zr(d,(f,_)=>{if((0,te.r3)(d,f)&&"."!==f.substring(0,1)){const A=Qt(_);(A.isLeafNode()||!A.isEmpty())&&(a=a.updateImmediateChild(f,A))}}),a.updatePriority(Qt(u))}{const a=[];let f=!1;if(Zr(d,(k,W)=>{if("."!==k.substring(0,1)){const X=Qt(W);X.isEmpty()||(f=f||!X.getPriority().isEmpty(),a.push(new kn(k,X)))}}),0===a.length)return ht.EMPTY_NODE;const A=M(a,vr,k=>k.name,Da);if(f){const k=M(a,I.getCompare());return new ht(A,Qt(u),new pe({".priority":k},{".priority":I}))}return new ht(A,Qt(u),pe.Default)}}Object.defineProperties(kn,{MIN:{value:new kn(bn,ht.EMPTY_NODE)},MAX:{value:new kn(Ir,Bt)}}),Ho.__EMPTY_NODE=ht.EMPTY_NODE,ba.__childrenNodeConstructor=ht,function vi(d){ao=d}(Bt),function $o(d){Er=d}(Bt),function Do(d){_t=d}(Qt);class ss extends xr{constructor(u){super(),this.indexPath_=u,(0,te.hu)(!wn(u)&&".priority"!==Tn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,a){const f=this.extractChild(u.node),_=this.extractChild(a.node),A=f.compareTo(_);return 0===A?Mi(u.name,a.name):A}makePost(u,a){const f=Qt(u),_=ht.EMPTY_NODE.updateChild(this.indexPath_,f);return new kn(a,_)}maxPost(){const u=ht.EMPTY_NODE.updateChild(this.indexPath_,Bt);return new kn(Ir,u)}toString(){return is(this.indexPath_,0).join("/")}}const Go=new class bo extends xr{compare(u,a){const f=u.node.compareTo(a.node);return 0===f?Mi(u.name,a.name):f}isDefinedOn(u){return!0}indexedValueChanged(u,a){return!u.equals(a)}minPost(){return kn.MIN}maxPost(){return kn.MAX}makePost(u,a){const f=Qt(u);return new kn(a,f)}toString(){return".value"}},ms="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Cr=function(){let d=0;const u=[];return function(a){const f=a===d;let _;d=a;const A=new Array(8);for(_=7;_>=0;_--)A[_]=ms.charAt(a%64),a=Math.floor(a/64);(0,te.hu)(0===a,"Cannot push at time == 0");let k=A.join("");if(f){for(_=11;_>=0&&63===u[_];_--)u[_]=0;u[_]++}else for(_=0;_<12;_++)u[_]=Math.floor(64*Math.random());for(_=0;_<12;_++)k+=ms.charAt(u[_]);return(0,te.hu)(20===k.length,"nextPushId: Length should be 20."),k}}(),un=function(d){if(d===""+As)return"-";const u=va(d);if(null!=u)return""+(u+1);const a=new Array(d.length);for(let k=0;k<a.length;k++)a[k]=d.charAt(k);if(a.length<786)return a.push("-"),a.join("");let f=a.length-1;for(;f>=0&&"z"===a[f];)f--;if(-1===f)return Ir;const A=ms.charAt(ms.indexOf(a[f])+1);return a[f]=A,a.slice(0,f+1).join("")},rl=function(d){if(d===""+ea)return bn;const u=va(d);if(null!=u)return""+(u-1);const a=new Array(d.length);for(let f=0;f<a.length;f++)a[f]=d.charAt(f);return"-"===a[a.length-1]?1===a.length?""+As:(delete a[a.length-1],a.join("")):(a[a.length-1]=ms.charAt(ms.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function zn(d){return{type:"value",snapshotNode:d}}function Dr(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function Xr(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function Lt(d,u,a){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:a}}class Dl{constructor(u){this.index_=u}updateChild(u,a,f,_,A,k){(0,te.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const W=u.getImmediateChild(a);return W.getChild(_).equals(f.getChild(_))&&W.isEmpty()===f.isEmpty()||(null!=k&&(f.isEmpty()?u.hasChild(a)?k.trackChildChange(Xr(a,W)):(0,te.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):W.isEmpty()?k.trackChildChange(Dr(a,f)):k.trackChildChange(Lt(a,f,W))),u.isLeafNode()&&f.isEmpty())?u:u.updateImmediateChild(a,f).withIndex(this.index_)}updateFullNode(u,a,f){return null!=f&&(u.isLeafNode()||u.forEachChild(I,(_,A)=>{a.hasChild(_)||f.trackChildChange(Xr(_,A))}),a.isLeafNode()||a.forEachChild(I,(_,A)=>{if(u.hasChild(_)){const k=u.getImmediateChild(_);k.equals(A)||f.trackChildChange(Lt(_,A,k))}else f.trackChildChange(Dr(_,A))})),a.withIndex(this.index_)}updatePriority(u,a){return u.isEmpty()?ht.EMPTY_NODE:u.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Wo{constructor(u){this.indexedFilter_=new Dl(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Wo.getStartPost_(u),this.endPost_=Wo.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,a,f,_,A,k){return this.matches(new kn(a,f))||(f=ht.EMPTY_NODE),this.indexedFilter_.updateChild(u,a,f,_,A,k)}updateFullNode(u,a,f){a.isLeafNode()&&(a=ht.EMPTY_NODE);let _=a.withIndex(this.index_);_=_.updatePriority(ht.EMPTY_NODE);const A=this;return a.forEachChild(I,(k,W)=>{A.matches(new kn(k,W))||(_=_.updateImmediateChild(k,ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,_,f)}updatePriority(u,a){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const a=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),a)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const a=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),a)}return u.getIndex().maxPost()}}class il{constructor(u){this.rangedFilter_=new Wo(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,a,f,_,A,k){return this.rangedFilter_.matches(new kn(a,f))||(f=ht.EMPTY_NODE),u.getImmediateChild(a).equals(f)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,a,f,_,A,k):this.fullLimitUpdateChild_(u,a,f,A,k)}updateFullNode(u,a,f){let _;if(a.isLeafNode()||a.isEmpty())_=ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let A;_=ht.EMPTY_NODE.withIndex(this.index_),A=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let k=0;for(;A.hasNext()&&k<this.limit_;){const W=A.getNext();let X;if(X=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),W)<=0:this.index_.compare(W,this.rangedFilter_.getEndPost())<=0,!X)break;_=_.updateImmediateChild(W.name,W.node),k++}}else{let A,k,W,X;if(_=a.withIndex(this.index_),_=_.updatePriority(ht.EMPTY_NODE),this.reverse_){X=_.getReverseIterator(this.index_),A=this.rangedFilter_.getEndPost(),k=this.rangedFilter_.getStartPost();const $e=this.index_.getCompare();W=(ot,Gt)=>$e(Gt,ot)}else X=_.getIterator(this.index_),A=this.rangedFilter_.getStartPost(),k=this.rangedFilter_.getEndPost(),W=this.index_.getCompare();let ce=0,qe=!1;for(;X.hasNext();){const $e=X.getNext();!qe&&W(A,$e)<=0&&(qe=!0),qe&&ce<this.limit_&&W($e,k)<=0?ce++:_=_.updateImmediateChild($e.name,ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,_,f)}updatePriority(u,a){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,a,f,_,A){let k;if(this.reverse_){const $e=this.index_.getCompare();k=(ot,Gt)=>$e(Gt,ot)}else k=this.index_.getCompare();const W=u;(0,te.hu)(W.numChildren()===this.limit_,"");const X=new kn(a,f),ce=this.reverse_?W.getFirstChild(this.index_):W.getLastChild(this.index_),qe=this.rangedFilter_.matches(X);if(W.hasChild(a)){const $e=W.getImmediateChild(a);let ot=_.getChildAfterChild(this.index_,ce,this.reverse_);for(;null!=ot&&(ot.name===a||W.hasChild(ot.name));)ot=_.getChildAfterChild(this.index_,ot,this.reverse_);const Gt=null==ot?1:k(ot,X);if(qe&&!f.isEmpty()&&Gt>=0)return null!=A&&A.trackChildChange(Lt(a,f,$e)),W.updateImmediateChild(a,f);{null!=A&&A.trackChildChange(Xr(a,$e));const br=W.updateImmediateChild(a,ht.EMPTY_NODE);return null!=ot&&this.rangedFilter_.matches(ot)?(null!=A&&A.trackChildChange(Dr(ot.name,ot.node)),br.updateImmediateChild(ot.name,ot.node)):br}}return f.isEmpty()?u:qe&&k(ce,X)>=0?(null!=A&&(A.trackChildChange(Xr(ce.name,ce.node)),A.trackChildChange(Dr(a,f))),W.updateImmediateChild(a,f).updateImmediateChild(ce.name,ht.EMPTY_NODE)):u}}class au{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=I}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,te.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,te.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ir}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,te.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===I}copy(){const u=new au;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function uu(d,u,a){const f=d.copy();return f.startSet_=!0,void 0===u&&(u=null),f.indexStartValue_=u,null!=a?(f.startNameSet_=!0,f.indexStartName_=a):(f.startNameSet_=!1,f.indexStartName_=""),f}function mc(d,u,a){const f=d.copy();return f.endSet_=!0,void 0===u&&(u=null),f.indexEndValue_=u,void 0!==a?(f.endNameSet_=!0,f.indexEndName_=a):(f.endNameSet_=!1,f.indexEndName_=""),f}function os(d,u){const a=d.copy();return a.index_=u,a}function Be(d){const u={};if(d.isDefault())return u;let a;return d.index_===I?a="$priority":d.index_===Go?a="$value":d.index_===jr?a="$key":((0,te.hu)(d.index_ instanceof ss,"Unrecognized index type!"),a=d.index_.toString()),u.orderBy=(0,te.Pz)(a),d.startSet_&&(u.startAt=(0,te.Pz)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,te.Pz)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,te.Pz)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,te.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function Ta(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let a=d.viewFrom_;""===a&&(a=d.isViewFromLeft()?"l":"r"),u.vf=a}return d.index_!==I&&(u.i=d.index_.toString()),u}class Oi extends Ha{constructor(u,a,f,_){super(),this.repoInfo_=u,this.onDataUpdate_=a,this.authTokenProvider_=f,this.appCheckTokenProvider_=_,this.log_=fe("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,a){return void 0!==a?"tag$"+a:((0,te.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,a,f,_){const A=u._path.toString();this.log_("Listen called for "+A+" "+u._queryIdentifier);const k=Oi.getListenId_(u,f),W={};this.listens_[k]=W;const X=Be(u._queryParams);this.restRequest_(A+".json",X,(ce,qe)=>{let $e=qe;if(404===ce&&($e=null,ce=null),null===ce&&this.onDataUpdate_(A,$e,!1,f),(0,te.DV)(this.listens_,k)===W){let ot;ot=ce?401===ce?"permission_denied":"rest_error:"+ce:"ok",_(ot,null)}})}unlisten(u,a){const f=Oi.getListenId_(u,a);delete this.listens_[f]}get(u){const a=Be(u._queryParams),f=u._path.toString(),_=new te.BH;return this.restRequest_(f+".json",a,(A,k)=>{let W=k;404===A&&(W=null,A=null),null===A?(this.onDataUpdate_(f,W,!1,null),_.resolve(W)):_.reject(new Error(W))}),_.promise}refreshAuthToken(u){}restRequest_(u,a={},f){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([_,A])=>{_&&_.accessToken&&(a.auth=_.accessToken),A&&A.token&&(a.ac=A.token);const k=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,te.xO)(a);this.log_("Sending REST request for "+k);const W=new XMLHttpRequest;W.onreadystatechange=()=>{if(f&&4===W.readyState){this.log_("REST Response for "+k+" received. status:",W.status,"response:",W.responseText);let X=null;if(W.status>=200&&W.status<300){try{X=(0,te.cI)(W.responseText)}catch(ce){mt("Failed to parse JSON response for "+k+": "+W.responseText)}f(null,X)}else 401!==W.status&&404!==W.status&&mt("Got unsuccessful REST response for "+k+" Status: "+W.status),f(W.status);f=null}},W.open("GET",k,!0),W.send()})}}class lu{constructor(){this.rootNode_=ht.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,a){this.rootNode_=this.rootNode_.updateChild(u,a)}}function uo(){return{value:null,children:new Map}}function ki(d,u,a){if(wn(u))d.value=a,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,a);else{const f=Tn(u);d.children.has(f)||d.children.set(f,uo()),ki(d.children.get(f),u=Qn(u),a)}}function zo(d,u){if(wn(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const a=d.value;return d.value=null,a.forEachChild(I,(f,_)=>{ki(d,new Pn(f),_)}),zo(d,u)}}if(d.children.size>0){const a=Tn(u);return u=Qn(u),d.children.has(a)&&zo(d.children.get(a),u)&&d.children.delete(a),0===d.children.size}return!0}function To(d,u,a){null!==d.value?a(u,d.value):function Hl(d,u){d.children.forEach((a,f)=>{u(f,a)})}(d,(f,_)=>{To(_,new Pn(u.toString()+"/"+f),a)})}class Pu{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),a=Object.assign({},u);return this.last_&&Zr(this.last_,(f,_)=>{a[f]=a[f]-_}),this.last_=u,a}}class rd{constructor(u,a){this.server_=a,this.statsToReport_={},this.statsListener_=new Pu(u);const f=1e4+2e4*Math.random();Br(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const u=this.statsListener_.get(),a={};let f=!1;Zr(u,(_,A)=>{A>0&&(0,te.r3)(this.statsToReport_,_)&&(a[_]=A,f=!0)}),f&&this.server_.reportStats(a),Br(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fi=(()=>{return(d=Fi||(Fi={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Fi;var d})();function Za(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class Ci{constructor(u,a,f){this.path=u,this.affectedTree=a,this.revert=f,this.type=Fi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(wn(this.path)){if(null!=this.affectedTree.value)return(0,te.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new Pn(u));return new Ci(On(),a,this.revert)}}return(0,te.hu)(Tn(this.path)===u,"operationForChild called for unrelated child."),new Ci(Qn(this.path),this.affectedTree,this.revert)}}class jn{constructor(u,a){this.source=u,this.path=a,this.type=Fi.LISTEN_COMPLETE}operationForChild(u){return wn(this.path)?new jn(this.source,On()):new jn(this.source,Qn(this.path))}}class qo{constructor(u,a,f){this.source=u,this.path=a,this.snap=f,this.type=Fi.OVERWRITE}operationForChild(u){return wn(this.path)?new qo(this.source,On(),this.snap.getImmediateChild(u)):new qo(this.source,Qn(this.path),this.snap)}}class Ui{constructor(u,a,f){this.source=u,this.path=a,this.children=f,this.type=Fi.MERGE}operationForChild(u){if(wn(this.path)){const a=this.children.subtree(new Pn(u));return a.isEmpty()?null:a.value?new qo(this.source,On(),a.value):new Ui(this.source,On(),a)}return(0,te.hu)(Tn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Ui(this.source,Qn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Lr{constructor(u,a,f){this.node_=u,this.fullyInitialized_=a,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(wn(u))return this.isFullyInitialized()&&!this.filtered_;const a=Tn(u);return this.isCompleteForChild(a)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Qh{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function Sa(d,u,a,f,_,A){const k=f.filter(W=>W.type===a);k.sort((W,X)=>function si(d,u,a){if(null==u.childName||null==a.childName)throw(0,te.g5)("Should only compare child_ events.");const f=new kn(u.childName,u.snapshotNode),_=new kn(a.childName,a.snapshotNode);return d.index_.compare(f,_)}(d,W,X)),k.forEach(W=>{const X=function co(d,u,a){return"value"===u.type||"child_removed"===u.type||(u.prevName=a.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,W,A);_.forEach(ce=>{ce.respondsTo(W.type)&&u.push(ce.createEvent(X,d.query_))})})}function P(d,u){return{eventCache:d,serverCache:u}}function F(d,u,a,f){return P(new Lr(u,a,f),d.serverCache)}function K(d,u,a,f){return P(d.eventCache,new Lr(u,a,f))}function se(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function Te(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let Ue;class ft{constructor(u,a=(()=>(Ue||(Ue=new qi(Ts)),Ue))()){this.value=u,this.children=a}static fromObject(u){let a=new ft(null);return Zr(u,(f,_)=>{a=a.set(new Pn(f),_)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,a){if(null!=this.value&&a(this.value))return{path:On(),value:this.value};if(wn(u))return null;{const f=Tn(u),_=this.children.get(f);if(null!==_){const A=_.findRootMostMatchingPathAndValue(Qn(u),a);return null!=A?{path:kr(new Pn(f),A.path),value:A.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(wn(u))return this;{const a=Tn(u),f=this.children.get(a);return null!==f?f.subtree(Qn(u)):new ft(null)}}set(u,a){if(wn(u))return new ft(a,this.children);{const f=Tn(u),A=(this.children.get(f)||new ft(null)).set(Qn(u),a),k=this.children.insert(f,A);return new ft(this.value,k)}}remove(u){if(wn(u))return this.children.isEmpty()?new ft(null):new ft(null,this.children);{const a=Tn(u),f=this.children.get(a);if(f){const _=f.remove(Qn(u));let A;return A=_.isEmpty()?this.children.remove(a):this.children.insert(a,_),null===this.value&&A.isEmpty()?new ft(null):new ft(this.value,A)}return this}}get(u){if(wn(u))return this.value;{const a=Tn(u),f=this.children.get(a);return f?f.get(Qn(u)):null}}setTree(u,a){if(wn(u))return a;{const f=Tn(u),A=(this.children.get(f)||new ft(null)).setTree(Qn(u),a);let k;return k=A.isEmpty()?this.children.remove(f):this.children.insert(f,A),new ft(this.value,k)}}fold(u){return this.fold_(On(),u)}fold_(u,a){const f={};return this.children.inorderTraversal((_,A)=>{f[_]=A.fold_(kr(u,_),a)}),a(u,this.value,f)}findOnPath(u,a){return this.findOnPath_(u,On(),a)}findOnPath_(u,a,f){const _=!!this.value&&f(a,this.value);if(_)return _;if(wn(u))return null;{const A=Tn(u),k=this.children.get(A);return k?k.findOnPath_(Qn(u),kr(a,A),f):null}}foreachOnPath(u,a){return this.foreachOnPath_(u,On(),a)}foreachOnPath_(u,a,f){if(wn(u))return this;{this.value&&f(a,this.value);const _=Tn(u),A=this.children.get(_);return A?A.foreachOnPath_(Qn(u),kr(a,_),f):new ft(null)}}foreach(u){this.foreach_(On(),u)}foreach_(u,a){this.children.inorderTraversal((f,_)=>{_.foreach_(kr(u,f),a)}),this.value&&a(u,this.value)}foreachChild(u){this.children.inorderTraversal((a,f)=>{f.value&&u(a,f.value)})}}class nn{constructor(u){this.writeTree_=u}static empty(){return new nn(new ft(null))}}function vn(d,u,a){if(wn(u))return new nn(new ft(a));{const f=d.writeTree_.findRootMostValueAndPath(u);if(null!=f){const _=f.path;let A=f.value;const k=fs(_,u);return A=A.updateChild(k,a),new nn(d.writeTree_.set(_,A))}{const _=new ft(a),A=d.writeTree_.setTree(u,_);return new nn(A)}}}function Gn(d,u,a){let f=d;return Zr(a,(_,A)=>{f=vn(f,kr(u,_),A)}),f}function en(d,u){if(wn(u))return nn.empty();{const a=d.writeTree_.setTree(u,new ft(null));return new nn(a)}}function Fr(d,u){return null!=oi(d,u)}function oi(d,u){const a=d.writeTree_.findRootMostValueAndPath(u);return null!=a?d.writeTree_.get(a.path).getChild(fs(a.path,u)):null}function Ys(d){const u=[],a=d.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(I,(f,_)=>{u.push(new kn(f,_))}):d.writeTree_.children.inorderTraversal((f,_)=>{null!=_.value&&u.push(new kn(f,_.value))}),u}function Vi(d,u){if(wn(u))return d;{const a=oi(d,u);return new nn(null!=a?new ft(a):d.writeTree_.subtree(u))}}function Bi(d){return d.writeTree_.isEmpty()}function da(d,u){return ys(On(),d.writeTree_,u)}function ys(d,u,a){if(null!=u.value)return a.updateChild(d,u.value);{let f=null;return u.children.inorderTraversal((_,A)=>{".priority"===_?((0,te.hu)(null!==A.value,"Priority writes must always be leaf nodes"),f=A.value):a=ys(kr(d,_),A,a)}),!a.getChild(d).isEmpty()&&null!==f&&(a=a.updateChild(kr(d,".priority"),f)),a}}function ha(d,u){return ji(u,d)}function Tl(d,u){if(d.snap)return Ws(d.path,u);for(const a in d.children)if(d.children.hasOwnProperty(a)&&Ws(kr(d.path,a),u))return!0;return!1}function Sl(d){return d.visible}function Al(d,u,a){let f=nn.empty();for(let _=0;_<d.length;++_){const A=d[_];if(u(A)){const k=A.path;let W;if(A.snap)Ws(a,k)?(W=fs(a,k),f=vn(f,W,A.snap)):Ws(k,a)&&(W=fs(k,a),f=vn(f,On(),A.snap.getChild(W)));else{if(!A.children)throw(0,te.g5)("WriteRecord should have .snap or .children");if(Ws(a,k))W=fs(a,k),f=Gn(f,W,A.children);else if(Ws(k,a))if(W=fs(k,a),wn(W))f=Gn(f,On(),A.children);else{const X=(0,te.DV)(A.children,Tn(W));if(X){const ce=X.getChild(Qn(W));f=vn(f,On(),ce)}}}}}return f}function id(d,u,a,f,_){if(f||_){const A=Vi(d.visibleWrites,u);return!_&&Bi(A)?a:_||null!=a||Fr(A,On())?da(Al(d.allWrites,function(ce){return(ce.visible||_)&&(!f||!~f.indexOf(ce.writeId))&&(Ws(ce.path,u)||Ws(u,ce.path))},u),a||ht.EMPTY_NODE):null}{const A=oi(d.visibleWrites,u);if(null!=A)return A;{const k=Vi(d.visibleWrites,u);return Bi(k)?a:null!=a||Fr(k,On())?da(k,a||ht.EMPTY_NODE):null}}}function Ya(d,u,a,f){return id(d.writeTree,d.treePath,u,a,f)}function xl(d,u){return function sd(d,u,a){let f=ht.EMPTY_NODE;const _=oi(d.visibleWrites,u);if(_)return _.isLeafNode()||_.forEachChild(I,(A,k)=>{f=f.updateImmediateChild(A,k)}),f;if(a){const A=Vi(d.visibleWrites,u);return a.forEachChild(I,(k,W)=>{const X=da(Vi(A,new Pn(k)),W);f=f.updateImmediateChild(k,X)}),Ys(A).forEach(k=>{f=f.updateImmediateChild(k.name,k.node)}),f}return Ys(Vi(d.visibleWrites,u)).forEach(k=>{f=f.updateImmediateChild(k.name,k.node)}),f}(d.writeTree,d.treePath,u)}function Ou(d,u,a,f){return function _s(d,u,a,f,_){(0,te.hu)(f||_,"Either existingEventSnap or existingServerSnap must exist");const A=kr(u,a);if(Fr(d.visibleWrites,A))return null;{const k=Vi(d.visibleWrites,A);return Bi(k)?_.getChild(a):da(k,_.getChild(a))}}(d.writeTree,d.treePath,u,a,f)}function pa(d,u){return function ti(d,u){return oi(d.visibleWrites,u)}(d.writeTree,kr(d.treePath,u))}function vc(d,u,a){return function Kd(d,u,a,f){const _=kr(u,a),A=oi(d.visibleWrites,_);return null!=A?A:f.isCompleteForChild(a)?da(Vi(d.visibleWrites,_),f.getNode().getImmediateChild(a)):null}(d.writeTree,d.treePath,u,a)}function qd(d,u){return ji(kr(d.treePath,u),d.writeTree)}function ji(d,u){return{treePath:d,writeTree:u}}class Wl{constructor(){this.changeMap=new Map}trackChildChange(u){const a=u.type,f=u.childName;(0,te.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,te.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const _=this.changeMap.get(f);if(_){const A=_.type;if("child_added"===a&&"child_removed"===A)this.changeMap.set(f,Lt(f,u.snapshotNode,_.snapshotNode));else if("child_removed"===a&&"child_added"===A)this.changeMap.delete(f);else if("child_removed"===a&&"child_changed"===A)this.changeMap.set(f,Xr(f,_.oldSnap));else if("child_changed"===a&&"child_added"===A)this.changeMap.set(f,Dr(f,u.snapshotNode));else{if("child_changed"!==a||"child_changed"!==A)throw(0,te.g5)("Illegal combination of changes: "+u+" occurred after "+_);this.changeMap.set(f,Lt(f,u.snapshotNode,_.oldSnap))}}else this.changeMap.set(f,u)}getChanges(){return Array.from(this.changeMap.values())}}const od=new class Zd{getCompleteChild(u){return null}getChildAfterChild(u,a,f){return null}};class zl{constructor(u,a,f=null){this.writes_=u,this.viewCache_=a,this.optCompleteServerCache_=f}getCompleteChild(u){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(u))return a.getNode().getImmediateChild(u);{const f=null!=this.optCompleteServerCache_?new Lr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vc(this.writes_,u,f)}}getChildAfterChild(u,a,f){const _=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Te(this.viewCache_),A=function _c(d,u,a,f,_,A){return function Jh(d,u,a,f,_,A,k){let W;const X=Vi(d.visibleWrites,u),ce=oi(X,On());if(null!=ce)W=ce;else{if(null==a)return[];W=da(X,a)}if(W=W.withIndex(k),W.isEmpty()||W.isLeafNode())return[];{const qe=[],$e=k.getCompare(),ot=A?W.getReverseIteratorFrom(f,k):W.getIteratorFrom(f,k);let Gt=ot.getNext();for(;Gt&&qe.length<_;)0!==$e(Gt,f)&&qe.push(Gt),Gt=ot.getNext();return qe}}(d.writeTree,d.treePath,u,a,f,_,A)}(this.writes_,_,a,1,f,u);return 0===A.length?null:A[0]}}function du(d,u,a,f,_,A){const k=u.eventCache;if(null!=pa(f,a))return u;{let W,X;if(wn(a))if((0,te.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const ce=Te(u),$e=xl(f,ce instanceof ht?ce:ht.EMPTY_NODE);W=d.filter.updateFullNode(u.eventCache.getNode(),$e,A)}else{const ce=Ya(f,Te(u));W=d.filter.updateFullNode(u.eventCache.getNode(),ce,A)}else{const ce=Tn(a);if(".priority"===ce){(0,te.hu)(1===hs(a),"Can't have a priority with additional path components");const qe=k.getNode();X=u.serverCache.getNode();const $e=Ou(f,a,qe,X);W=null!=$e?d.filter.updatePriority(qe,$e):k.getNode()}else{const qe=Qn(a);let $e;if(k.isCompleteForChild(ce)){X=u.serverCache.getNode();const ot=Ou(f,a,k.getNode(),X);$e=null!=ot?k.getNode().getImmediateChild(ce).updateChild(qe,ot):k.getNode().getImmediateChild(ce)}else $e=vc(f,ce,u.serverCache);W=null!=$e?d.filter.updateChild(k.getNode(),ce,$e,qe,_,A):k.getNode()}}return F(u,W,k.isFullyInitialized()||wn(a),d.filter.filtersNodes())}}function hu(d,u,a,f,_,A,k,W){const X=u.serverCache;let ce;const qe=k?d.filter:d.filter.getIndexedFilter();if(wn(a))ce=qe.updateFullNode(X.getNode(),f,null);else if(qe.filtersNodes()&&!X.isFiltered()){const Gt=X.getNode().updateChild(a,f);ce=qe.updateFullNode(X.getNode(),Gt,null)}else{const Gt=Tn(a);if(!X.isCompleteForPath(a)&&hs(a)>1)return u;const gn=Qn(a),Yi=X.getNode().getImmediateChild(Gt).updateChild(gn,f);ce=".priority"===Gt?qe.updatePriority(X.getNode(),Yi):qe.updateChild(X.getNode(),Gt,Yi,gn,od,null)}const $e=K(u,ce,X.isFullyInitialized()||wn(a),qe.filtersNodes());return du(d,$e,a,_,new zl(_,$e,A),W)}function Qa(d,u,a,f,_,A,k){const W=u.eventCache;let X,ce;const qe=new zl(_,u,A);if(wn(a))ce=d.filter.updateFullNode(u.eventCache.getNode(),f,k),X=F(u,ce,!0,d.filter.filtersNodes());else{const $e=Tn(a);if(".priority"===$e)ce=d.filter.updatePriority(u.eventCache.getNode(),f),X=F(u,ce,W.isFullyInitialized(),W.isFiltered());else{const ot=Qn(a),Gt=W.getNode().getImmediateChild($e);let gn;if(wn(ot))gn=f;else{const br=qe.getCompleteChild($e);gn=null!=br?".priority"===xu(ot)&&br.getChild(Jr(ot)).isEmpty()?br:br.updateChild(ot,f):ht.EMPTY_NODE}X=Gt.equals(gn)?u:F(u,d.filter.updateChild(W.getNode(),$e,gn,ot,qe,k),W.isFullyInitialized(),d.filter.filtersNodes())}}return X}function fu(d,u){return d.eventCache.isCompleteForChild(u)}function Aa(d,u,a){return a.foreach((f,_)=>{u=u.updateChild(f,_)}),u}function ad(d,u,a,f,_,A,k,W){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let ce,X=u;ce=wn(a)?f:new ft(null).setTree(a,f);const qe=u.serverCache.getNode();return ce.children.inorderTraversal(($e,ot)=>{if(qe.hasChild($e)){const gn=Aa(0,u.serverCache.getNode().getImmediateChild($e),ot);X=hu(d,X,new Pn($e),gn,_,A,k,W)}}),ce.children.inorderTraversal(($e,ot)=>{const Gt=!u.serverCache.isCompleteForChild($e)&&void 0===ot.value;if(!qe.hasChild($e)&&!Gt){const br=Aa(0,u.serverCache.getNode().getImmediateChild($e),ot);X=hu(d,X,new Pn($e),br,_,A,k,W)}}),X}class wc{constructor(u,a){this.query_=u,this.eventRegistrations_=[];const f=this.query_._queryParams,_=new Dl(f.getIndex()),A=function Nu(d){return d.loadsAllData()?new Dl(d.getIndex()):d.hasLimit()?new il(d):new Wo(d)}(f);this.processor_=function Yd(d){return{filter:d}}(A);const k=a.serverCache,W=a.eventCache,X=_.updateFullNode(ht.EMPTY_NODE,k.getNode(),null),ce=A.updateFullNode(ht.EMPTY_NODE,W.getNode(),null),qe=new Lr(X,k.isFullyInitialized(),_.filtersNodes()),$e=new Lr(ce,W.isFullyInitialized(),A.filtersNodes());this.viewCache_=P($e,qe),this.eventGenerator_=new Qh(this.query_)}get query(){return this.query_}}function ga(d,u){const a=Te(d.viewCache_);return a&&(d.query._queryParams.loadsAllData()||!wn(u)&&!a.getImmediateChild(Tn(u)).isEmpty())?a.getChild(u):null}function ud(d){return 0===d.eventRegistrations_.length}function Xd(d,u,a){const f=[];if(a){(0,te.hu)(null==u,"A cancel should cancel all event registrations.");const _=d.query._path;d.eventRegistrations_.forEach(A=>{const k=A.createCancelEvent(a,_);k&&f.push(k)})}if(u){let _=[];for(let A=0;A<d.eventRegistrations_.length;++A){const k=d.eventRegistrations_[A];if(k.matches(u)){if(u.hasAnyCallback()){_=_.concat(d.eventRegistrations_.slice(A+1));break}}else _.push(k)}d.eventRegistrations_=_}else d.eventRegistrations_=[];return f}function Zo(d,u,a,f){u.type===Fi.MERGE&&null!==u.source.queryId&&((0,te.hu)(Te(d.viewCache_),"We should always have a full cache before handling merges"),(0,te.hu)(se(d.viewCache_),"Missing event cache, even though we have a server cache"));const _=d.viewCache_,A=function Qd(d,u,a,f,_){const A=new Wl;let k,W;if(a.type===Fi.OVERWRITE){const ce=a;ce.source.fromUser?k=Qa(d,u,ce.path,ce.snap,f,_,A):((0,te.hu)(ce.source.fromServer,"Unknown source."),W=ce.source.tagged||u.serverCache.isFiltered()&&!wn(ce.path),k=hu(d,u,ce.path,ce.snap,f,_,W,A))}else if(a.type===Fi.MERGE){const ce=a;ce.source.fromUser?k=function Jd(d,u,a,f,_,A,k){let W=u;return f.foreach((X,ce)=>{const qe=kr(a,X);fu(u,Tn(qe))&&(W=Qa(d,W,qe,ce,_,A,k))}),f.foreach((X,ce)=>{const qe=kr(a,X);fu(u,Tn(qe))||(W=Qa(d,W,qe,ce,_,A,k))}),W}(d,u,ce.path,ce.children,f,_,A):((0,te.hu)(ce.source.fromServer,"Unknown source."),W=ce.source.tagged||u.serverCache.isFiltered(),k=ad(d,u,ce.path,ce.children,f,_,W,A))}else if(a.type===Fi.ACK_USER_WRITE){const ce=a;k=ce.revert?function Ec(d,u,a,f,_,A){let k;if(null!=pa(f,a))return u;{const W=new zl(f,u,_),X=u.eventCache.getNode();let ce;if(wn(a)||".priority"===Tn(a)){let qe;if(u.serverCache.isFullyInitialized())qe=Ya(f,Te(u));else{const $e=u.serverCache.getNode();(0,te.hu)($e instanceof ht,"serverChildren would be complete if leaf node"),qe=xl(f,$e)}qe=qe,ce=d.filter.updateFullNode(X,qe,A)}else{const qe=Tn(a);let $e=vc(f,qe,u.serverCache);null==$e&&u.serverCache.isCompleteForChild(qe)&&($e=X.getImmediateChild(qe)),ce=null!=$e?d.filter.updateChild(X,qe,$e,Qn(a),W,A):u.eventCache.getNode().hasChild(qe)?d.filter.updateChild(X,qe,ht.EMPTY_NODE,Qn(a),W,A):X,ce.isEmpty()&&u.serverCache.isFullyInitialized()&&(k=Ya(f,Te(u)),k.isLeafNode()&&(ce=d.filter.updateFullNode(ce,k,A)))}return k=u.serverCache.isFullyInitialized()||null!=pa(f,On()),F(u,ce,k,d.filter.filtersNodes())}}(d,u,ce.path,f,_,A):function Rl(d,u,a,f,_,A,k){if(null!=pa(_,a))return u;const W=u.serverCache.isFiltered(),X=u.serverCache;if(null!=f.value){if(wn(a)&&X.isFullyInitialized()||X.isCompleteForPath(a))return hu(d,u,a,X.getNode().getChild(a),_,A,W,k);if(wn(a)){let ce=new ft(null);return X.getNode().forEachChild(jr,(qe,$e)=>{ce=ce.set(new Pn(qe),$e)}),ad(d,u,a,ce,_,A,W,k)}return u}{let ce=new ft(null);return f.foreach((qe,$e)=>{const ot=kr(a,qe);X.isCompleteForPath(ot)&&(ce=ce.set(qe,X.getNode().getChild(ot)))}),ad(d,u,a,ce,_,A,W,k)}}(d,u,ce.path,ce.affectedTree,f,_,A)}else{if(a.type!==Fi.LISTEN_COMPLETE)throw(0,te.g5)("Unknown operation type: "+a.type);k=function np(d,u,a,f,_){const A=u.serverCache;return du(d,K(u,A.getNode(),A.isFullyInitialized()||wn(a),A.isFiltered()),a,f,od,_)}(d,u,a.path,f,A)}const X=A.getChanges();return function ef(d,u,a){const f=u.eventCache;if(f.isFullyInitialized()){const _=f.getNode().isLeafNode()||f.getNode().isEmpty(),A=se(d);(a.length>0||!d.eventCache.isFullyInitialized()||_&&!f.getNode().equals(A)||!f.getNode().getPriority().equals(A.getPriority()))&&a.push(zn(se(u)))}}(u,k,X),{viewCache:k,changes:X}}(d.processor_,_,u,a,f);return function Xh(d,u){(0,te.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,te.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,A.viewCache),(0,te.hu)(A.viewCache.serverCache.isFullyInitialized()||!_.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=A.viewCache,ma(d,A.changes,A.viewCache.eventCache.getNode(),null)}function ma(d,u,a,f){return function ei(d,u,a,f){const _=[],A=[];return u.forEach(k=>{"child_changed"===k.type&&d.index_.indexedValueChanged(k.oldSnap,k.snapshotNode)&&A.push(function gc(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}(k.childName,k.snapshotNode))}),Sa(d,_,"child_removed",u,f,a),Sa(d,_,"child_added",u,f,a),Sa(d,_,"child_moved",A,f,a),Sa(d,_,"child_changed",u,f,a),Sa(d,_,"value",u,f,a),_}(d.eventGenerator_,u,a,f?[f]:d.eventRegistrations_)}let xa,al;class ld{constructor(){this.views=new Map}}function ol(d,u,a,f){const _=u.source.queryId;if(null!==_){const A=d.views.get(_);return(0,te.hu)(null!=A,"SyncTree gave us an op for an invalid query."),Zo(A,u,a,f)}{let A=[];for(const k of d.views.values())A=A.concat(Zo(k,u,a,f));return A}}function nf(d,u,a,f,_){const k=d.views.get(u._queryIdentifier);if(!k){let W=Ya(a,_?f:null),X=!1;W?X=!0:f instanceof ht?(W=xl(a,f),X=!1):(W=ht.EMPTY_NODE,X=!1);const ce=P(new Lr(W,X,!1),new Lr(f,_,!1));return new wc(u,ce)}return k}function pu(d){const u=[];for(const a of d.views.values())a.query._queryParams.loadsAllData()||u.push(a);return u}function Yo(d,u){let a=null;for(const f of d.views.values())a=a||ga(f,u);return a}function eh(d,u){return u._queryParams.loadsAllData()?Ja(d):d.views.get(u._queryIdentifier)}function gu(d,u){return null!=eh(d,u)}function mu(d){return null!=Ja(d)}function Ja(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Pl=1;class bc{constructor(u){this.listenProvider_=u,this.syncPointTree_=new ft(null),this.pendingWriteTree_=function Gl(){return{visibleWrites:nn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $r(d,u,a,f,_){return function ho(d,u,a,f,_){(0,te.hu)(f>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===_&&(_=!0),d.allWrites.push({path:u,snap:a,writeId:f,visible:_}),_&&(d.visibleWrites=vn(d.visibleWrites,u,a)),d.lastWriteId=f}(d.pendingWriteTree_,u,a,f,_),_?Ra(d,new qo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,a)):[]}function dr(d,u,a=!1){const f=function cu(d,u){for(let a=0;a<d.allWrites.length;a++){const f=d.allWrites[a];if(f.writeId===u)return f}return null}(d.pendingWriteTree_,u);if(function $l(d,u){const a=d.allWrites.findIndex(W=>W.writeId===u);(0,te.hu)(a>=0,"removeWrite called with nonexistent writeId.");const f=d.allWrites[a];d.allWrites.splice(a,1);let _=f.visible,A=!1,k=d.allWrites.length-1;for(;_&&k>=0;){const W=d.allWrites[k];W.visible&&(k>=a&&Tl(W,f.path)?_=!1:Ws(f.path,W.path)&&(A=!0)),k--}return!!_&&(A?(function yc(d){d.visibleWrites=Al(d.allWrites,Sl,On()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(f.snap?d.visibleWrites=en(d.visibleWrites,f.path):Zr(f.children,X=>{d.visibleWrites=en(d.visibleWrites,kr(f.path,X))}),!0))}(d.pendingWriteTree_,u)){let A=new ft(null);return null!=f.snap?A=A.set(On(),!0):Zr(f.children,k=>{A=A.set(new Pn(k),!0)}),Ra(d,new Ci(f.path,A,a))}return[]}function Ol(d,u,a){return Ra(d,new qo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,a))}function Sc(d,u,a,f){const _=u._path,A=d.syncPointTree_.get(_);let k=[];if(A&&("default"===u._queryIdentifier||gu(A,u))){const W=function Ml(d,u,a,f){const _=u._queryIdentifier,A=[];let k=[];const W=mu(d);if("default"===_)for(const[X,ce]of d.views.entries())k=k.concat(Xd(ce,a,f)),ud(ce)&&(d.views.delete(X),ce.query._queryParams.loadsAllData()||A.push(ce.query));else{const X=d.views.get(_);X&&(k=k.concat(Xd(X,a,f)),ud(X)&&(d.views.delete(_),X.query._queryParams.loadsAllData()||A.push(X.query)))}return W&&!mu(d)&&A.push(new(function cd(){return(0,te.hu)(xa,"Reference.ts has not been loaded"),xa}())(u._repo,u._path)),{removed:A,events:k}}(A,u,a,f);(function tf(d){return 0===d.views.size})(A)&&(d.syncPointTree_=d.syncPointTree_.remove(_));const X=W.removed;k=W.events;const ce=-1!==X.findIndex($e=>$e._queryParams.loadsAllData()),qe=d.syncPointTree_.findOnPath(_,($e,ot)=>mu(ot));if(ce&&!qe){const $e=d.syncPointTree_.subtree(_);if(!$e.isEmpty()){const ot=function So(d){return d.fold((u,a,f)=>{if(a&&mu(a))return[Ja(a)];{let _=[];return a&&(_=pu(a)),Zr(f,(A,k)=>{_=_.concat(k)}),_}})}($e);for(let Gt=0;Gt<ot.length;++Gt){const gn=ot[Gt],br=gn.query,Yi=Ei(d,gn);d.listenProvider_.startListening(Lu(br),Jn(d,br),Yi.hashFn,Yi.onComplete)}}}!qe&&X.length>0&&!f&&(ce?d.listenProvider_.stopListening(Lu(u),null):X.forEach($e=>{const ot=d.queryToTagMap.get(ll($e));d.listenProvider_.stopListening(Lu($e),ot)})),function Fl(d,u){for(let a=0;a<u.length;++a){const f=u[a];if(!f._queryParams.loadsAllData()){const _=ll(f),A=d.queryToTagMap.get(_);d.queryToTagMap.delete(_),d.tagToQueryMap.delete(A)}}}(d,X)}return k}function fd(d,u,a){const f=u._path;let _=null,A=!1;d.syncPointTree_.foreachOnPath(f,($e,ot)=>{const Gt=fs($e,f);_=_||Yo(ot,Gt),A=A||mu(ot)});let W,k=d.syncPointTree_.get(f);k?(A=A||mu(k),_=_||Yo(k,On())):(k=new ld,d.syncPointTree_=d.syncPointTree_.set(f,k)),null!=_?W=!0:(W=!1,_=ht.EMPTY_NODE,d.syncPointTree_.subtree(f).foreachChild((ot,Gt)=>{const gn=Yo(Gt,On());gn&&(_=_.updateImmediateChild(ot,gn))}));const X=gu(k,u);if(!X&&!u._queryParams.loadsAllData()){const $e=ll(u);(0,te.hu)(!d.queryToTagMap.has($e),"View does not exist, but we have a tag");const ot=function Ao(){return Pl++}();d.queryToTagMap.set($e,ot),d.tagToQueryMap.set(ot,$e)}let qe=function dd(d,u,a,f,_,A){const k=nf(d,u,f,_,A);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,k),function Cc(d,u){d.eventRegistrations_.push(u)}(k,a),function Dc(d,u){const a=d.viewCache_.eventCache,f=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(I,(A,k)=>{f.push(Dr(A,k))}),a.isFullyInitialized()&&f.push(zn(a.getNode())),ma(d,f,a.getNode(),u)}(k,a)}(k,u,a,ha(d.pendingWriteTree_,f),_,W);if(!X&&!A){const $e=eh(k,u);qe=qe.concat(function fo(d,u,a){const f=u._path,_=Jn(d,u),A=Ei(d,a),k=d.listenProvider_.startListening(Lu(u),_,A.hashFn,A.onComplete),W=d.syncPointTree_.subtree(f);if(_)(0,te.hu)(!mu(W.value),"If we're adding a query, it shouldn't be shadowed");else{const X=W.fold((ce,qe,$e)=>{if(!wn(ce)&&qe&&mu(qe))return[Ja(qe).query];{let ot=[];return qe&&(ot=ot.concat(pu(qe).map(Gt=>Gt.query))),Zr($e,(Gt,gn)=>{ot=ot.concat(gn)}),ot}});for(let ce=0;ce<X.length;++ce){const qe=X[ce];d.listenProvider_.stopListening(Lu(qe),Jn(d,qe))}}return k}(d,u,$e))}return qe}function _u(d,u,a){const _=d.pendingWriteTree_,A=d.syncPointTree_.findOnPath(u,(k,W)=>{const ce=Yo(W,fs(k,u));if(ce)return ce});return id(_,u,A,a,!0)}function Ra(d,u){return ku(u,d.syncPointTree_,null,ha(d.pendingWriteTree_,On()))}function ku(d,u,a,f){if(wn(d.path))return Qs(d,u,a,f);{const _=u.get(On());null==a&&null!=_&&(a=Yo(_,On()));let A=[];const k=Tn(d.path),W=d.operationForChild(k),X=u.children.get(k);if(X&&W){const ce=a?a.getImmediateChild(k):null,qe=qd(f,k);A=A.concat(ku(W,X,ce,qe))}return _&&(A=A.concat(ol(_,d,f,a))),A}}function Qs(d,u,a,f){const _=u.get(On());null==a&&null!=_&&(a=Yo(_,On()));let A=[];return u.children.inorderTraversal((k,W)=>{const X=a?a.getImmediateChild(k):null,ce=qd(f,k),qe=d.operationForChild(k);qe&&(A=A.concat(Qs(qe,W,X,ce)))}),_&&(A=A.concat(ol(_,d,f,a))),A}function Ei(d,u){const a=u.query,f=Jn(d,a);return{hashFn:()=>(function Ic(d){return d.viewCache_.serverCache.getNode()}(u)||ht.EMPTY_NODE).hash(),onComplete:_=>{if("ok"===_)return f?function hd(d,u,a){const f=Hi(d,a);if(f){const _=Js(f),A=_.path,k=_.queryId,W=fs(A,u);return Ll(d,A,new jn(Za(k),W))}return[]}(d,a._path,f):function ul(d,u){return Ra(d,new jn({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,a._path);{const A=function ls(d,u){let a="Unknown Error";"too_big"===d?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?a="Client doesn't have permission to access the desired data.":"unavailable"===d&&(a="The service is unavailable");const f=new Error(d+" at "+u._path.toString()+": "+a);return f.code=d.toUpperCase(),f}(_,a);return Sc(d,a,null,A)}}}}function Jn(d,u){const a=ll(u);return d.queryToTagMap.get(a)}function ll(d){return d._path.toString()+"$"+d._queryIdentifier}function Hi(d,u){return d.tagToQueryMap.get(u)}function Js(d){const u=d.indexOf("$");return(0,te.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new Pn(d.substr(0,u))}}function Ll(d,u,a){const f=d.syncPointTree_.get(u);return(0,te.hu)(f,"Missing sync point for query tag that we're tracking"),ol(f,a,ha(d.pendingWriteTree_,u),null)}function Lu(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function Nl(){return(0,te.hu)(al,"Reference.ts has not been loaded"),al}())(d._repo,d._path):d}class ql{constructor(u){this.node_=u}getImmediateChild(u){const a=this.node_.getImmediateChild(u);return new ql(a)}node(){return this.node_}}class Fu{constructor(u,a){this.syncTree_=u,this.path_=a}getImmediateChild(u){const a=kr(this.path_,u);return new Fu(this.syncTree_,a)}node(){return _u(this.syncTree_,this.path_)}}const Ac=function(d,u,a){return d&&"object"==typeof d?((0,te.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?Ln(d[".sv"],u,a):"object"==typeof d[".sv"]?nh(d[".sv"],u):void(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},Ln=function(d,u,a){if("timestamp"===d)return a.timestamp;(0,te.hu)(!1,"Unexpected server value: "+d)},nh=function(d,u,a){d.hasOwnProperty("increment")||(0,te.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const f=d.increment;"number"!=typeof f&&(0,te.hu)(!1,"Unexpected increment value: "+f);const _=u.node();if((0,te.hu)(null!=_,"Expected ChildrenNode.EMPTY_NODE for nulls"),!_.isLeafNode())return f;const k=_.getValue();return"number"!=typeof k?f:k+f},Zl=function(d,u,a,f){return Uu(u,new Fu(a,d),f)},Xs=function(d,u,a){return Uu(d,new ql(u),a)};function Uu(d,u,a){const f=d.getPriority().val(),_=Ac(f,u.getImmediateChild(".priority"),a);let A;if(d.isLeafNode()){const k=d,W=Ac(k.getValue(),u,a);return W!==k.getValue()||_!==k.getPriority().val()?new ba(W,Qt(_)):d}{const k=d;return A=k,_!==k.getPriority().val()&&(A=A.updatePriority(new ba(_))),k.forEachChild(I,(W,X)=>{const ce=Uu(X,u.getImmediateChild(W),a);ce!==X&&(A=A.updateImmediateChild(W,ce))}),A}}class Ul{constructor(u="",a=null,f={children:{},childCount:0}){this.name=u,this.parent=a,this.node=f}}function Vu(d,u){let a=u instanceof Pn?u:new Pn(u),f=d,_=Tn(a);for(;null!==_;){const A=(0,te.DV)(f.node.children,_)||{children:{},childCount:0};f=new Ul(_,f,A),a=Qn(a),_=Tn(a)}return f}function Bu(d){return d.node.value}function Yl(d,u){d.node.value=u,ju(d)}function po(d){return d.node.childCount>0}function cl(d,u){Zr(d.node.children,(a,f)=>{u(new Ul(a,d,f))})}function gd(d,u,a,f){a&&!f&&u(d),cl(d,_=>{gd(_,u,!0,f)}),a&&f&&u(d)}function Eu(d){return new Pn(null===d.parent?d.name:Eu(d.parent)+"/"+d.name)}function ju(d){null!==d.parent&&function md(d,u,a){const f=function xc(d){return void 0===Bu(d)&&!po(d)}(a),_=(0,te.r3)(d.node.children,u);f&&_?(delete d.node.children[u],d.node.childCount--,ju(d)):!f&&!_&&(d.node.children[u]=a.node,d.node.childCount++,ju(d))}(d.parent,d.name,d)}const of=/[\[\].#$\/\u0000-\u001F\u007F]/,Zi=/[\[\].#$\u0000-\u001F\u007F]/,Ql=10485760,Jl=function(d){return"string"==typeof d&&0!==d.length&&!of.test(d)},Ma=function(d){return"string"==typeof d&&0!==d.length&&!Zi.test(d)},E=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!rr(d)||d&&"object"==typeof d&&(0,te.r3)(d,".sv")},p=function(d,u,a,f){f&&void 0===u||m((0,te.gK)(d,"value"),u,a)},m=function(d,u,a){const f=a instanceof Pn?new Ru(a,d):a;if(void 0===u)throw new Error(d+"contains undefined "+xn(f));if("function"==typeof u)throw new Error(d+"contains a function "+xn(f)+" with contents = "+u.toString());if(rr(u))throw new Error(d+"contains "+u.toString()+" "+xn(f));if("string"==typeof u&&u.length>Ql/3&&(0,te.ug)(u)>Ql)throw new Error(d+"contains a string greater than "+Ql+" utf8 bytes "+xn(f)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let _=!1,A=!1;if(Zr(u,(k,W)=>{if(".value"===k)_=!0;else if(".priority"!==k&&".sv"!==k&&(A=!0,!Jl(k)))throw new Error(d+" contains an invalid key ("+k+") "+xn(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Bo(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,te.ug)(u),ua(d)})(f,k),m(d,W,f),function zs(d){const u=d.parts_.pop();d.byteLength_-=(0,te.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(f)}),_&&A)throw new Error(d+' contains ".value" child '+xn(f)+" in addition to actual children.")}},j=function(d,u,a,f){if(f&&void 0===u)return;const _=(0,te.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(_+" must be an object containing the children to replace.");const A=[];Zr(u,(k,W)=>{const X=new Pn(k);if(m(_,W,kr(a,X)),".priority"===xu(X)&&!E(W))throw new Error(_+"contains an invalid value for '"+X.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");A.push(X)}),function(d,u){let a,f;for(a=0;a<u.length;a++){f=u[a];const A=is(f);for(let k=0;k<A.length;k++)if((".priority"!==A[k]||k!==A.length-1)&&!Jl(A[k]))throw new Error(d+"contains an invalid key ("+A[k]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(pc);let _=null;for(a=0;a<u.length;a++){if(f=u[a],null!==_&&Ws(_,f))throw new Error(d+"contains a path "+_.toString()+" that is ancestor of another path "+f.toString());_=f}}(_,A)},q=function(d,u,a){if(!a||void 0!==u){if(rr(u))throw new Error((0,te.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!E(u))throw new Error((0,te.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},De=function(d,u,a,f){if(!(f&&void 0===a||Jl(a)))throw new Error((0,te.gK)(d,u)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Qe=function(d,u,a,f){if(!(f&&void 0===a||Ma(a)))throw new Error((0,te.gK)(d,u)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Pt=function(d,u){if(".info"===Tn(u))throw new Error(d+" failed = Can't modify data under /.info/")},_n=function(d,u){const a=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!Jl(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==a.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Ma(d)}(a))throw new Error((0,te.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class ln{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ai(d,u){let a=null;for(let f=0;f<u.length;f++){const _=u[f],A=_.getPath();null!==a&&!Vo(A,a.path)&&(d.eventLists_.push(a),a=null),null===a&&(a={events:[],path:A}),a.events.push(_)}a&&d.eventLists_.push(a)}function eo(d,u,a){ai(d,a),yd(d,f=>Vo(f,u))}function to(d,u,a){ai(d,a),yd(d,f=>Ws(f,u)||Ws(u,f))}function yd(d,u){d.recursionDepth_++;let a=!0;for(let f=0;f<d.eventLists_.length;f++){const _=d.eventLists_[f];_&&(u(_.path)?(Hu(d.eventLists_[f]),d.eventLists_[f]=null):a=!1)}a&&(d.eventLists_=[]),d.recursionDepth_--}function Hu(d){for(let u=0;u<d.events.length;u++){const a=d.events[u];if(null!==a){d.events[u]=null;const f=a.getEventRunner();nr&&we("event: "+a.toString()),Nr(f)}}}const Xl="repo_interrupt";class Gu{constructor(u,a,f,_){this.repoInfo_=u,this.forceRestClient_=a,this.authTokenProvider_=f,this.appCheckProvider_=_,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ln,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=uo(),this.transactionQueueTree_=new Ul,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function _d(d){const a=d.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function dl(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:_d(d)})}function Mc(d,u,a,f,_){d.dataUpdateCount++;const A=new Pn(u);a=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,a):a;let k=[];if(_)if(f){const X=(0,te.UI)(a,ce=>Qt(ce));k=function yu(d,u,a,f){const _=Hi(d,f);if(_){const A=Js(_),k=A.path,W=A.queryId,X=fs(k,u),ce=ft.fromObject(a);return Ll(d,k,new Ui(Za(W),X,ce))}return[]}(d.serverSyncTree_,A,X,_)}else{const X=Qt(a);k=function kl(d,u,a,f){const _=Hi(d,f);if(null!=_){const A=Js(_),k=A.path,W=A.queryId,X=fs(k,u);return Ll(d,k,new qo(Za(W),X,a))}return[]}(d.serverSyncTree_,A,X,_)}else if(f){const X=(0,te.UI)(a,ce=>Qt(ce));k=function rf(d,u,a){const f=ft.fromObject(a);return Ra(d,new Ui({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,f))}(d.serverSyncTree_,A,X)}else{const X=Qt(a);k=Ol(d.serverSyncTree_,A,X)}let W=A;k.length>0&&(W=Wu(d,A)),to(d.eventQueue_,W,k)}function no(d,u){Nc(d,"connected",u),!1===u&&function og(d){Pc(d,"onDisconnectEvents");const u=dl(d),a=uo();To(d.onDisconnect_,On(),(_,A)=>{const k=Zl(_,A,d.serverSyncTree_,u);ki(a,_,k)});let f=[];To(a,On(),(_,A)=>{f=f.concat(Ol(d.serverSyncTree_,_,A));const k=Di(d,_);Wu(d,k)}),d.onDisconnect_=uo(),to(d.eventQueue_,On(),f)}(d)}function Nc(d,u,a){const f=new Pn("/.info/"+u),_=Qt(a);d.infoData_.updateSnapshot(f,_);const A=Ol(d.infoSyncTree_,f,_);to(d.eventQueue_,f,A)}function ya(d){return d.nextWriteId_++}function ec(d,u,a,f,_){Pc(d,"set",{path:u.toString(),value:a,priority:f});const A=dl(d),k=Qt(a,f),W=_u(d.serverSyncTree_,u),X=Xs(k,W,A),ce=ya(d),qe=$r(d.serverSyncTree_,u,X,ce,!0);ai(d.eventQueue_,qe),d.server_.put(u.toString(),k.val(!0),(ot,Gt)=>{const gn="ok"===ot;gn||mt("set at "+u+" failed: "+ot);const br=dr(d.serverSyncTree_,ce,!gn);to(d.eventQueue_,u,br),hl(0,_,ot,Gt)});const $e=Di(d,u);Wu(d,$e),to(d.eventQueue_,$e,[])}function ag(d,u,a){d.server_.onDisconnectCancel(u.toString(),(f,_)=>{"ok"===f&&zo(d.onDisconnect_,u),hl(0,a,f,_)})}function af(d,u,a,f){const _=Qt(a);d.server_.onDisconnectPut(u.toString(),_.val(!0),(A,k)=>{"ok"===A&&ki(d.onDisconnect_,u,_),hl(0,f,A,k)})}function sh(d,u,a){let f;f=".info"===Tn(u._path)?Sc(d.infoSyncTree_,u,a):Sc(d.serverSyncTree_,u,a),eo(d.eventQueue_,u._path,f)}function sp(d){d.persistentConnection_&&d.persistentConnection_.interrupt(Xl)}function Pc(d,...u){let a="";d.persistentConnection_&&(a=d.persistentConnection_.id+":"),we(a,...u)}function hl(d,u,a,f){u&&Nr(()=>{if("ok"===a)u(null);else{const _=(a||"error").toUpperCase();let A=_;f&&(A+=": "+f);const k=new Error(A);k.code=_,u(k)}})}function ah(d,u,a){return _u(d.serverSyncTree_,u,a)||ht.EMPTY_NODE}function Oc(d,u=d.transactionQueueTree_){if(u||Vl(d,u),Bu(u)){const a=Ed(d,u);(0,te.hu)(a.length>0,"Sending zero length transaction queue"),a.every(_=>0===_.status)&&function ap(d,u,a){const f=a.map(ce=>ce.currentWriteId),_=ah(d,u,f);let A=_;const k=_.hash();for(let ce=0;ce<a.length;ce++){const qe=a[ce];(0,te.hu)(0===qe.status,"tryToSendTransactionQueue_: items in queue should all be run."),qe.status=1,qe.retryCount++;const $e=fs(u,qe.path);A=A.updateChild($e,qe.currentOutputSnapshotRaw)}const W=A.val(!0),X=u;d.server_.put(X.toString(),W,ce=>{Pc(d,"transaction put response",{path:X.toString(),status:ce});let qe=[];if("ok"===ce){const $e=[];for(let ot=0;ot<a.length;ot++)a[ot].status=2,qe=qe.concat(dr(d.serverSyncTree_,a[ot].currentWriteId)),a[ot].onComplete&&$e.push(()=>a[ot].onComplete(null,!0,a[ot].currentOutputSnapshotResolved)),a[ot].unwatcher();Vl(d,Vu(d.transactionQueueTree_,u)),Oc(d,d.transactionQueueTree_),to(d.eventQueue_,u,qe);for(let ot=0;ot<$e.length;ot++)Nr($e[ot])}else{if("datastale"===ce)for(let $e=0;$e<a.length;$e++)a[$e].status=3===a[$e].status?4:0;else{mt("transaction at "+X.toString()+" failed: "+ce);for(let $e=0;$e<a.length;$e++)a[$e].status=4,a[$e].abortReason=ce}Wu(d,u)}},k)}(d,Eu(u),a)}else po(u)&&cl(u,a=>{Oc(d,a)})}function Wu(d,u){const a=lh(d,u),f=Eu(a);return function uh(d,u,a){if(0===u.length)return;const f=[];let _=[];const k=u.filter(W=>0===W.status).map(W=>W.currentWriteId);for(let W=0;W<u.length;W++){const X=u[W],ce=fs(a,X.path);let $e,qe=!1;if((0,te.hu)(null!==ce,"rerunTransactionsUnderNode_: relativePath should not be null."),4===X.status)qe=!0,$e=X.abortReason,_=_.concat(dr(d.serverSyncTree_,X.currentWriteId,!0));else if(0===X.status)if(X.retryCount>=25)qe=!0,$e="maxretry",_=_.concat(dr(d.serverSyncTree_,X.currentWriteId,!0));else{const ot=ah(d,X.path,k);X.currentInputSnapshot=ot;const Gt=u[W].update(ot.val());if(void 0!==Gt){m("transaction failed: Data returned ",Gt,X.path);let gn=Qt(Gt);"object"==typeof Gt&&null!=Gt&&(0,te.r3)(Gt,".priority")||(gn=gn.updatePriority(ot.getPriority()));const Yi=X.currentWriteId,Pa=dl(d),Ju=Xs(gn,ot,Pa);X.currentOutputSnapshotRaw=gn,X.currentOutputSnapshotResolved=Ju,X.currentWriteId=ya(d),k.splice(k.indexOf(Yi),1),_=_.concat($r(d.serverSyncTree_,X.path,Ju,X.currentWriteId,X.applyLocally)),_=_.concat(dr(d.serverSyncTree_,Yi,!0))}else qe=!0,$e="nodata",_=_.concat(dr(d.serverSyncTree_,X.currentWriteId,!0))}to(d.eventQueue_,a,_),_=[],qe&&(u[W].status=2,setTimeout(u[W].unwatcher,Math.floor(0)),u[W].onComplete&&f.push("nodata"===$e?()=>u[W].onComplete(null,!1,u[W].currentInputSnapshot):()=>u[W].onComplete(new Error($e),!1,null)))}Vl(d,d.transactionQueueTree_);for(let W=0;W<f.length;W++)Nr(f[W]);Oc(d,d.transactionQueueTree_)}(d,Ed(d,a),f),f}function lh(d,u){let a,f=d.transactionQueueTree_;for(a=Tn(u);null!==a&&void 0===Bu(f);)f=Vu(f,a),a=Tn(u=Qn(u));return f}function Ed(d,u){const a=[];return uf(d,u,a),a.sort((f,_)=>f.order-_.order),a}function uf(d,u,a){const f=Bu(u);if(f)for(let _=0;_<f.length;_++)a.push(f[_]);cl(u,_=>{uf(d,_,a)})}function Vl(d,u){const a=Bu(u);if(a){let f=0;for(let _=0;_<a.length;_++)2!==a[_].status&&(a[f]=a[_],f++);a.length=f,Yl(u,a.length>0?a:void 0)}cl(u,f=>{Vl(d,f)})}function Di(d,u){const a=Eu(lh(d,u)),f=Vu(d.transactionQueueTree_,u);return function vu(d,u,a){let f=a?d:d.parent;for(;null!==f;){if(u(f))return!0;f=f.parent}}(f,_=>{wd(d,_)}),wd(d,f),gd(f,_=>{wd(d,_)}),a}function wd(d,u){const a=Bu(u);if(a){const f=[];let _=[],A=-1;for(let k=0;k<a.length;k++)3===a[k].status||(1===a[k].status?((0,te.hu)(A===k-1,"All SENT items should be at beginning of queue."),A=k,a[k].status=3,a[k].abortReason="set"):((0,te.hu)(0===a[k].status,"Unexpected transaction status in abort"),a[k].unwatcher(),_=_.concat(dr(d.serverSyncTree_,a[k].currentWriteId,!0)),a[k].onComplete&&f.push(a[k].onComplete.bind(null,new Error("set"),!1,null))));-1===A?Yl(u,void 0):a.length=A+1,to(d.eventQueue_,Eu(u),_);for(let k=0;k<f.length;k++)Nr(f[k])}}const zu=function(d,u){const a=cf(d),f=a.namespace;return"firebase.com"===a.domain&&Xe(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==a.domain&&Xe("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&mt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new O(a.host,a.secure,f,"ws"===a.scheme||"wss"===a.scheme,u,"",f!==a.subdomain),path:new Pn(a.pathString)}},cf=function(d){let u="",a="",f="",_="",A="",k=!0,W="https",X=443;if("string"==typeof d){let ce=d.indexOf("//");ce>=0&&(W=d.substring(0,ce-1),d=d.substring(ce+2));let qe=d.indexOf("/");-1===qe&&(qe=d.length);let $e=d.indexOf("?");-1===$e&&($e=d.length),u=d.substring(0,Math.min(qe,$e)),qe<$e&&(_=function ch(d){let u="";const a=d.split("/");for(let f=0;f<a.length;f++)if(a[f].length>0){let _=a[f];try{_=decodeURIComponent(_.replace(/\+/g," "))}catch(A){}u+="/"+_}return u}(d.substring(qe,$e)));const ot=function lf(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const a of d.split("&")){if(0===a.length)continue;const f=a.split("=");2===f.length?u[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):mt(`Invalid query segment '${a}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,$e)));ce=u.indexOf(":"),ce>=0?(k="https"===W||"wss"===W,X=parseInt(u.substring(ce+1),10)):ce=u.length;const Gt=u.slice(0,ce);if("localhost"===Gt.toLowerCase())a="localhost";else if(Gt.split(".").length<=2)a=Gt;else{const gn=u.indexOf(".");f=u.substring(0,gn).toLowerCase(),a=u.substring(gn+1),A=f}"ns"in ot&&(A=ot.ns)}return{host:u,port:X,domain:a,subdomain:f,secure:k,scheme:W,pathString:_,namespace:A}};class dh{constructor(u,a,f,_){this.eventType=u,this.eventRegistration=a,this.snapshot=f,this.prevName=_}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,te.Pz)(this.snapshot.exportVal())}}class hh{constructor(u,a,f){this.eventRegistration=u,this.error=a,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class fh{constructor(u,a){this.snapshotCallback=u,this.cancelCallback=a}onValue(u,a){this.snapshotCallback.call(null,u,a)}onCancel(u){return(0,te.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class fl{constructor(u,a){this._repo=u,this._path=a}cancel(){const u=new te.BH;return ag(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Pt("OnDisconnect.remove",this._path);const u=new te.BH;return af(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Pt("OnDisconnect.set",this._path),p("OnDisconnect.set",u,this._path,!1);const a=new te.BH;return af(this._repo,this._path,u,a.wrapCallback(()=>{})),a.promise}setWithPriority(u,a){Pt("OnDisconnect.setWithPriority",this._path),p("OnDisconnect.setWithPriority",u,this._path,!1),q("OnDisconnect.setWithPriority",a,!1);const f=new te.BH;return function rp(d,u,a,f,_){const A=Qt(a,f);d.server_.onDisconnectPut(u.toString(),A.val(!0),(k,W)=>{"ok"===k&&ki(d.onDisconnect_,u,A),hl(0,_,k,W)})}(this._repo,this._path,u,a,f.wrapCallback(()=>{})),f.promise}update(u){Pt("OnDisconnect.update",this._path),j("OnDisconnect.update",u,this._path,!1);const a=new te.BH;return function tc(d,u,a,f){if((0,te.xb)(a))return we("onDisconnect().update() called with empty data.  Don't do anything."),void hl(0,f,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),a,(_,A)=>{"ok"===_&&Zr(a,(k,W)=>{const X=Qt(W);ki(d.onDisconnect_,kr(u,k),X)}),hl(0,f,_,A)})}(this._repo,this._path,u,a.wrapCallback(()=>{})),a.promise}}class vs{constructor(u,a,f,_){this._repo=u,this._path=a,this._queryParams=f,this._orderByCalled=_}get key(){return wn(this._path)?null:xu(this._path)}get ref(){return new bi(this._repo,this._path)}get _queryIdentifier(){const u=Ta(this._queryParams),a=yi(u);return"{}"===a?"default":a}get _queryObject(){return Ta(this._queryParams)}isEqual(u){if(!((u=(0,te.m9)(u))instanceof vs))return!1;const a=this._repo===u._repo,f=Vo(this._path,u._path);return a&&f&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ii(d){let u="";for(let a=d.pieceNum_;a<d.pieces_.length;a++)""!==d.pieces_[a]&&(u+="/"+encodeURIComponent(String(d.pieces_[a])));return u||"/"}(this._path)}}function wu(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function Xa(d){let u=null,a=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(a=d.getIndexEndValue()),d.getIndex()===jr){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",_="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==bn)throw new Error(f);if("string"!=typeof u)throw new Error(_)}if(d.hasEnd()){if(d.getIndexEndName()!==Ir)throw new Error(f);if("string"!=typeof a)throw new Error(_)}}else if(d.getIndex()===I){if(null!=u&&!E(u)||null!=a&&!E(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,te.hu)(d.getIndex()instanceof ss||d.getIndex()===Go,"unknown index type."),null!=u&&"object"==typeof u||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Id(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class bi extends vs{constructor(u,a){super(u,a,new au,!1)}get parent(){const u=Jr(this._path);return null===u?null:new bi(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class pl{constructor(u,a,f){this._node=u,this.ref=a,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const a=new Pn(u),f=nc(this.ref,u);return new pl(this._node.getChild(a),f,I)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,_)=>u(new pl(_,nc(this.ref,f),I)))}hasChild(u){const a=new Pn(u);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ph(d,u){return(d=(0,te.m9)(d))._checkNotDeleted("ref"),void 0!==u?nc(d._root,u):d._root}function df(d,u){(d=(0,te.m9)(d))._checkNotDeleted("refFromURL");const a=zu(u,d._repo.repoInfo_.nodeAdmin);_n("refFromURL",a);const f=a.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&f.host!==d._repo.repoInfo_.host&&Xe("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+d._repo.repoInfo_.host+")"),ph(d,a.path.toString())}function nc(d,u){return null===Tn((d=(0,te.m9)(d))._path)?(a=u,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Qe("child","path",a,!1)):Qe("child","path",u,!1),new bi(d._repo,kr(d._path,u));var a}function rc(d,u){d=(0,te.m9)(d),Pt("set",d._path),p("set",u,d._path,!1);const a=new te.BH;return ec(d._repo,d._path,u,null,a.wrapCallback(()=>{})),a.promise}function Fn(d,u){j("update",u,d._path,!1);const a=new te.BH;return function ih(d,u,a,f){Pc(d,"update",{path:u.toString(),value:a});let _=!0;const A=dl(d),k={};if(Zr(a,(W,X)=>{_=!1,k[W]=Zl(kr(u,W),Qt(X),d.serverSyncTree_,A)}),_)we("update() called with empty data.  Don't do anything."),hl(0,f,"ok",void 0);else{const W=ya(d),X=function Tc(d,u,a,f){!function fa(d,u,a,f){(0,te.hu)(f>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:a,writeId:f,visible:!0}),d.visibleWrites=Gn(d.visibleWrites,u,a),d.lastWriteId=f}(d.pendingWriteTree_,u,a,f);const _=ft.fromObject(a);return Ra(d,new Ui({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,_))}(d.serverSyncTree_,u,k,W);ai(d.eventQueue_,X),d.server_.merge(u.toString(),a,(ce,qe)=>{const $e="ok"===ce;$e||mt("update at "+u+" failed: "+ce);const ot=dr(d.serverSyncTree_,W,!$e),Gt=ot.length>0?Wu(d,u):u;to(d.eventQueue_,Gt,ot),hl(0,f,ce,qe)}),Zr(a,ce=>{const qe=Di(d,kr(u,ce));Wu(d,qe)}),to(d.eventQueue_,u,[])}}(d._repo,d._path,u,a.wrapCallback(()=>{})),a.promise}function lp(d){return function rh(d,u){const a=function sf(d,u){const a=u._path;let f=null;d.syncPointTree_.foreachOnPath(a,(ce,qe)=>{const $e=fs(ce,a);f=f||Yo(qe,$e)});let _=d.syncPointTree_.get(a);_?f=f||Yo(_,On()):(_=new ld,d.syncPointTree_=d.syncPointTree_.set(a,_));const A=null!=f,k=A?new Lr(f,!0,!1):null;return function sl(d){return se(d.viewCache_)}(nf(_,u,ha(d.pendingWriteTree_,u._path),A?k.getNode():ht.EMPTY_NODE,A))}(d.serverSyncTree_,u);return null!=a?Promise.resolve(a):d.server_.get(u).then(f=>{const _=Qt(f).withIndex(u._queryParams.getIndex()),A=Ol(d.serverSyncTree_,u._path,_);return eo(d.eventQueue_,u._path,A),Promise.resolve(_)},f=>(Pc(d,"get for query "+(0,te.Pz)(u)+" failed: "+f),Promise.reject(new Error(f))))}((d=(0,te.m9)(d))._repo,d).then(u=>new pl(u,new bi(d._repo,d._path),d._queryParams.getIndex()))}class Dd{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,a){const f=a._queryParams.getIndex();return new dh("value",this,new pl(u.snapshotNode,new bi(a._repo,a._path),f))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,a){return this.callbackContext.hasCancelCallback?new hh(this,u,a):null}matches(u){return u instanceof Dd&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class bd{constructor(u,a){this.eventType=u,this.callbackContext=a}respondsTo(u){let a="children_added"===u?"child_added":u;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(u,a){return this.callbackContext.hasCancelCallback?new hh(this,u,a):null}createEvent(u,a){(0,te.hu)(null!=u.childName,"Child events should have a childName.");const f=nc(new bi(a._repo,a._path),u.childName),_=a._queryParams.getIndex();return new dh(u.type,this,new pl(u.snapshotNode,f,_),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof bd&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function eu(d,u,a,f,_){let A;if("object"==typeof f&&(A=void 0,_=f),"function"==typeof f&&(A=f),_&&_.onlyOnce){const X=a,ce=(qe,$e)=>{sh(d._repo,d,W),X(qe,$e)};ce.userCallback=a.userCallback,ce.context=a.context,a=ce}const k=new fh(a,A||void 0),W="value"===u?new Dd(k):new bd(u,k);return function ip(d,u,a){let f;f=".info"===Tn(u._path)?fd(d.infoSyncTree_,u,a):fd(d.serverSyncTree_,u,a),eo(d.eventQueue_,u._path,f)}(d._repo,d,W),()=>sh(d._repo,d,W)}function Ms(d,u,a,f){return eu(d,"value",u,a,f)}function gl(d,u,a,f){return eu(d,"child_added",u,a,f)}function hf(d,u,a,f){return eu(d,"child_changed",u,a,f)}function gh(d,u,a,f){return eu(d,"child_moved",u,a,f)}function Ku(d,u,a,f){return eu(d,"child_removed",u,a,f)}function kc(d,u,a){let f=null;const _=a?new fh(a):null;"value"===u?f=new Dd(_):u&&(f=new bd(u,_)),sh(d._repo,d,f)}class Qo{}class mh extends Qo{constructor(u,a){super(),this._value=u,this._key=a}_apply(u){p("endAt",this._value,u._path,!0);const a=mc(u._queryParams,this._value,this._key);if(Id(a),Xa(a),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(u._repo,u._path,a,u._orderByCalled)}}class Lc extends Qo{constructor(u,a){super(),this._value=u,this._key=a}_apply(u){p("endBefore",this._value,u._path,!1);const a=function ca(d,u,a){let f,_;return d.index_===jr?("string"==typeof u&&(u=rl(u)),_=mc(d,u,a)):(f=null==a?bn:rl(a),_=mc(d,u,f)),_.endBeforeSet_=!0,_}(u._queryParams,this._value,this._key);if(Id(a),Xa(a),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vs(u._repo,u._path,a,u._orderByCalled)}}class ml extends Qo{constructor(u,a){super(),this._value=u,this._key=a}_apply(u){p("startAt",this._value,u._path,!0);const a=uu(u._queryParams,this._value,this._key);if(Id(a),Xa(a),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vs(u._repo,u._path,a,u._orderByCalled)}}class yh extends Qo{constructor(u,a){super(),this._value=u,this._key=a}_apply(u){p("startAfter",this._value,u._path,!1);const a=function qa(d,u,a){let f;if(d.index_===jr)"string"==typeof u&&(u=un(u)),f=uu(d,u,a);else{let _;_=null==a?Ir:un(a),f=uu(d,u,_)}return f.startAfterSet_=!0,f}(u._queryParams,this._value,this._key);if(Id(a),Xa(a),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vs(u._repo,u._path,a,u._orderByCalled)}}class _h extends Qo{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(u._repo,u._path,function nd(d,u){const a=d.copy();return a.limitSet_=!0,a.limit_=u,a.viewFrom_="l",a}(u._queryParams,this._limit),u._orderByCalled)}}class vh extends Qo{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vs(u._repo,u._path,function sr(d,u){const a=d.copy();return a.limitSet_=!0,a.limit_=u,a.viewFrom_="r",a}(u._queryParams,this._limit),u._orderByCalled)}}class Bl extends Qo{constructor(u){super(),this._path=u}_apply(u){wu(u,"orderByChild");const a=new Pn(this._path);if(wn(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new ss(a),_=os(u._queryParams,f);return Xa(_),new vs(u._repo,u._path,_,!0)}}class gf extends Qo{_apply(u){wu(u,"orderByKey");const a=os(u._queryParams,jr);return Xa(a),new vs(u._repo,u._path,a,!0)}}class dg extends Qo{_apply(u){wu(u,"orderByPriority");const a=os(u._queryParams,I);return Xa(a),new vs(u._repo,u._path,a,!0)}}class mf extends Qo{_apply(u){wu(u,"orderByValue");const a=os(u._queryParams,Go);return Xa(a),new vs(u._repo,u._path,a,!0)}}class dp extends Qo{constructor(u,a){super(),this._value=u,this._key=a}_apply(u){if(p("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new mh(this._value,this._key)._apply(new ml(this._value,this._key)._apply(u))}}function qu(d,...u){let a=(0,te.m9)(d);for(const f of u)a=f._apply(a);return a}(function Kl(d){(0,te.hu)(!xa,"__referenceConstructor has already been defined"),xa=d})(bi),function th(d){(0,te.hu)(!al,"__referenceConstructor has already been defined"),al=d}(bi);const hp={};function fg(d,u,a,f,_){let A=f||d.options.databaseURL;void 0===A&&(d.options.projectId||Xe("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),we("Using default host for project ",d.options.projectId),A=`${d.options.projectId}-default-rtdb.firebaseio.com`);let X,ce,k=zu(A,_),W=k.repoInfo;"undefined"!=typeof process&&process.env&&(ce=process.env.FIREBASE_DATABASE_EMULATOR_HOST),ce?(X=!0,A=`http://${ce}?ns=${W.namespace}`,k=zu(A,_),W=k.repoInfo):X=!k.repoInfo.secure;const qe=_&&X?new Ni(Ni.OWNER):new Yr(d.name,d.options,u);_n("Invalid Firebase Database URL",k),wn(k.path)||Xe("Database URL must point to the root of a Firebase Database (not including a child path).");const $e=function Pm(d,u,a,f){let _=hp[u.name];_||(_={},hp[u.name]=_);let A=_[d.toURLString()];return A&&Xe("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),A=new Gu(d,false,a,f),_[d.toURLString()]=A,A}(W,d,qe,new ta(d.name,a));return new Vc($e,d)}class Vc{constructor(u,a){this._repoInternal=u,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Rc(d,u,a){if(d.stats_=an(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new Oi(d.repoInfo_,(f,_,A,k)=>{Mc(d,f,_,A,k)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>no(d,!0),0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,te.Pz)(a)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}d.persistentConnection_=new la(d.repoInfo_,u,(f,_,A,k)=>{Mc(d,f,_,A,k)},f=>{no(d,f)},f=>{!function vd(d,u){Zr(u,(a,f)=>{Nc(d,a,f)})}(d,f)},d.authTokenProvider_,d.appCheckProvider_,a),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(f=>{d.server_.refreshAuthToken(f)}),d.appCheckProvider_.addTokenChangeListener(f=>{d.server_.refreshAppCheckToken(f.token)}),d.statsReporter_=function Hn(d,u){const a=d.toString();return $t[a]||($t[a]=u()),$t[a]}(d.repoInfo_,()=>new rd(d.stats_,d.server_)),d.infoData_=new lu,d.infoSyncTree_=new bc({startListening:(f,_,A,k)=>{let W=[];const X=d.infoData_.getNode(f._path);return X.isEmpty()||(W=Ol(d.infoSyncTree_,f._path,X),setTimeout(()=>{k("ok")},0)),W},stopListening:()=>{}}),Nc(d,"connected",!1),d.serverSyncTree_=new bc({startListening:(f,_,A,k)=>(d.server_.listen(f,A,_,(W,X)=>{const ce=k(W,X);to(d.eventQueue_,f._path,ce)}),[]),stopListening:(f,_)=>{d.server_.unlisten(f,_)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new bi(this._repo,On())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function pg(d,u){const a=hp[u];(!a||a[d.key]!==d)&&Xe(`Database ${u}(${d.repoInfo_}) has already been deleted.`),sp(d),delete a[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Xe("Cannot call "+u+" on a deleted database.")}}function Na(){jl.IS_TRANSPORT_INITIALIZED&&mt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function wh(){Na(),er.forceDisallow()}function fp(){Na(),$s.forceDisallow(),er.forceAllow()}function vf(d,u){_o(d,u)}const gp={".sv":"timestamp"};class _g{constructor(u,a){this.committed=u,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}la.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},la.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},function wi(d){ts(pr.SDK_VERSION),(0,pr._registerComponent)(new Is.wA("database",(u,{instanceIdentifier:a})=>fg(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,pr.registerVersion)(Vr,"0.13.1",d),(0,pr.registerVersion)(Vr,"0.13.1","esm2017")}();const xd=new zr.Yd("@firebase/database-compat"),_l=function(d){xd.warn("FIREBASE WARNING: "+d)};class Cf{constructor(u){this._delegate=u}cancel(u){(0,te.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,te.Wj)("OnDisconnect.cancel","onComplete",u,!0);const a=this._delegate.cancel();return u&&a.then(()=>u(null),f=>u(f)),a}remove(u){(0,te.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,te.Wj)("OnDisconnect.remove","onComplete",u,!0);const a=this._delegate.remove();return u&&a.then(()=>u(null),f=>u(f)),a}set(u,a){(0,te.Dv)("OnDisconnect.set",1,2,arguments.length),(0,te.Wj)("OnDisconnect.set","onComplete",a,!0);const f=this._delegate.set(u);return a&&f.then(()=>a(null),_=>a(_)),f}setWithPriority(u,a,f){(0,te.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,te.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const _=this._delegate.setWithPriority(u,a);return f&&_.then(()=>f(null),A=>f(A)),_}update(u,a){if((0,te.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const _={};for(let A=0;A<u.length;++A)_[""+A]=u[A];u=_,_l("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,te.Wj)("OnDisconnect.update","onComplete",a,!0);const f=this._delegate.update(u);return a&&f.then(()=>a(null),_=>a(_)),f}}class Ch{constructor(u,a){this.committed=u,this.snapshot=a}toJSON(){return(0,te.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Zu{constructor(u,a){this._database=u,this._delegate=a}val(){return(0,te.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,te.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,te.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,te.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,te.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Qe("DataSnapshot.child","path",u,!1),new Zu(this._database,this._delegate.child(u))}hasChild(u){return(0,te.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Qe("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,te.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,te.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,te.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(a=>u(new Zu(this._database,a)))}hasChildren(){return(0,te.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,te.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,te.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ns{constructor(u,a){this.database=u,this._delegate=a}on(u,a,f,_){var A;(0,te.Dv)("Query.on",2,4,arguments.length),(0,te.Wj)("Query.on","callback",a,!1);const k=Ns.getCancelAndContextArgs_("Query.on",f,_),W=(ce,qe)=>{a.call(k.context,new Zu(this.database,ce),qe)};W.userCallback=a,W.context=k.context;const X=null===(A=k.cancel)||void 0===A?void 0:A.bind(k.context);switch(u){case"value":return Ms(this._delegate,W,X),a;case"child_added":return gl(this._delegate,W,X),a;case"child_removed":return Ku(this._delegate,W,X),a;case"child_changed":return hf(this._delegate,W,X),a;case"child_moved":return gh(this._delegate,W,X),a;default:throw new Error((0,te.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,a,f){if((0,te.Dv)("Query.off",0,3,arguments.length),function(d,u,a){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,te.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,te.Wj)("Query.off","callback",a,!0),(0,te.lb)("Query.off","context",f,!0),a){const _=()=>{};_.userCallback=a,_.context=f,kc(this._delegate,u,_)}else kc(this._delegate,u)}get(){return lp(this._delegate).then(u=>new Zu(this.database,u))}once(u,a,f,_){(0,te.Dv)("Query.once",1,4,arguments.length),(0,te.Wj)("Query.once","callback",a,!0);const A=Ns.getCancelAndContextArgs_("Query.once",f,_),k=new te.BH,W=(ce,qe)=>{const $e=new Zu(this.database,ce);a&&a.call(A.context,$e,qe),k.resolve($e)};W.userCallback=a,W.context=A.context;const X=ce=>{A.cancel&&A.cancel.call(A.context,ce),k.reject(ce)};switch(u){case"value":Ms(this._delegate,W,X,{onlyOnce:!0});break;case"child_added":gl(this._delegate,W,X,{onlyOnce:!0});break;case"child_removed":Ku(this._delegate,W,X,{onlyOnce:!0});break;case"child_changed":hf(this._delegate,W,X,{onlyOnce:!0});break;case"child_moved":gh(this._delegate,W,X,{onlyOnce:!0});break;default:throw new Error((0,te.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return k.promise}limitToFirst(u){return(0,te.Dv)("Query.limitToFirst",1,1,arguments.length),new Ns(this.database,qu(this._delegate,function pf(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new _h(d)}(u)))}limitToLast(u){return(0,te.Dv)("Query.limitToLast",1,1,arguments.length),new Ns(this.database,qu(this._delegate,function cp(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new vh(d)}(u)))}orderByChild(u){return(0,te.Dv)("Query.orderByChild",1,1,arguments.length),new Ns(this.database,qu(this._delegate,function Fc(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Qe("orderByChild","path",d,!1),new Bl(d)}(u)))}orderByKey(){return(0,te.Dv)("Query.orderByKey",0,0,arguments.length),new Ns(this.database,qu(this._delegate,function Uc(){return new gf}()))}orderByPriority(){return(0,te.Dv)("Query.orderByPriority",0,0,arguments.length),new Ns(this.database,qu(this._delegate,function Sd(){return new dg}()))}orderByValue(){return(0,te.Dv)("Query.orderByValue",0,0,arguments.length),new Ns(this.database,qu(this._delegate,function yl(){return new mf}()))}startAt(u=null,a){return(0,te.Dv)("Query.startAt",0,2,arguments.length),new Ns(this.database,qu(this._delegate,function Td(d=null,u){return De("startAt","key",u,!0),new ml(d,u)}(u,a)))}startAfter(u=null,a){return(0,te.Dv)("Query.startAfter",0,2,arguments.length),new Ns(this.database,qu(this._delegate,function xo(d,u){return De("startAfter","key",u,!0),new yh(d,u)}(u,a)))}endAt(u=null,a){return(0,te.Dv)("Query.endAt",0,2,arguments.length),new Ns(this.database,qu(this._delegate,function cg(d,u){return De("endAt","key",u,!0),new mh(d,u)}(u,a)))}endBefore(u=null,a){return(0,te.Dv)("Query.endBefore",0,2,arguments.length),new Ns(this.database,qu(this._delegate,function ff(d,u){return De("endBefore","key",u,!0),new Lc(d,u)}(u,a)))}equalTo(u,a){return(0,te.Dv)("Query.equalTo",1,2,arguments.length),new Ns(this.database,qu(this._delegate,function yf(d,u){return De("equalTo","key",u,!0),new dp(d,u)}(u,a)))}toString(){return(0,te.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,te.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,te.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,a,f){const _={cancel:void 0,context:void 0};if(a&&f)_.cancel=a,(0,te.Wj)(u,"cancel",_.cancel,!0),_.context=f,(0,te.lb)(u,"context",_.context,!0);else if(a)if("object"==typeof a&&null!==a)_.context=a;else{if("function"!=typeof a)throw new Error((0,te.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");_.cancel=a}return _}get ref(){return new Ro(this.database,new bi(this._delegate._repo,this._delegate._path))}}class Ro extends Ns{constructor(u,a){super(u,new vs(a._repo,a._path,new au,!1)),this.database=u,this._delegate=a}getKey(){return(0,te.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,te.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new Ro(this.database,nc(this._delegate,u))}getParent(){(0,te.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new Ro(this.database,u):null}getRoot(){return(0,te.Dv)("Reference.root",0,0,arguments.length),new Ro(this.database,this._delegate.root)}set(u,a){(0,te.Dv)("Reference.set",1,2,arguments.length),(0,te.Wj)("Reference.set","onComplete",a,!0);const f=rc(this._delegate,u);return a&&f.then(()=>a(null),_=>a(_)),f}update(u,a){if((0,te.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const _={};for(let A=0;A<u.length;++A)_[""+A]=u[A];u=_,_l("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pt("Reference.update",this._delegate._path),(0,te.Wj)("Reference.update","onComplete",a,!0);const f=Fn(this._delegate,u);return a&&f.then(()=>a(null),_=>a(_)),f}setWithPriority(u,a,f){(0,te.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,te.Wj)("Reference.setWithPriority","onComplete",f,!0);const _=function lg(d,u,a){if(Pt("setWithPriority",d._path),p("setWithPriority",u,d._path,!1),q("setWithPriority",a,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const f=new te.BH;return ec(d._repo,d._path,u,a,f.wrapCallback(()=>{})),f.promise}(this._delegate,u,a);return f&&_.then(()=>f(null),A=>f(A)),_}remove(u){(0,te.Dv)("Reference.remove",0,1,arguments.length),(0,te.Wj)("Reference.remove","onComplete",u,!0);const a=function Cd(d){return Pt("remove",d._path),rc(d,null)}(this._delegate);return u&&a.then(()=>u(null),f=>u(f)),a}transaction(u,a,f){(0,te.Dv)("Reference.transaction",1,3,arguments.length),(0,te.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,te.Wj)("Reference.transaction","onComplete",a,!0),function(d,u,a,f){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,te.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const _=function wf(d,u,a){var f;if(d=(0,te.m9)(d),Pt("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const _=null===(f=null==a?void 0:a.applyLocally)||void 0===f||f,A=new te.BH,W=Ms(d,()=>{});return function op(d,u,a,f,_,A){Pc(d,"transaction on "+u);const k={path:u,update:a,onComplete:f,status:null,order:mo(),applyLocally:A,retryCount:0,unwatcher:_,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},W=ah(d,u,void 0);k.currentInputSnapshot=W;const X=k.update(W.val());if(void 0===X)k.unwatcher(),k.currentOutputSnapshotRaw=null,k.currentOutputSnapshotResolved=null,k.onComplete&&k.onComplete(null,!1,k.currentInputSnapshot);else{m("transaction failed: Data returned ",X,k.path),k.status=0;const ce=Vu(d.transactionQueueTree_,u),qe=Bu(ce)||[];let $e;qe.push(k),Yl(ce,qe),"object"==typeof X&&null!==X&&(0,te.r3)(X,".priority")?($e=(0,te.DV)(X,".priority"),(0,te.hu)(E($e),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):$e=(_u(d.serverSyncTree_,u)||ht.EMPTY_NODE).getPriority().val();const ot=dl(d),Gt=Qt(X,$e),gn=Xs(Gt,W,ot);k.currentOutputSnapshotRaw=Gt,k.currentOutputSnapshotResolved=gn,k.currentWriteId=ya(d);const br=$r(d.serverSyncTree_,u,gn,k.currentWriteId,k.applyLocally);to(d.eventQueue_,u,br),Oc(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(X,ce,qe)=>{let $e=null;X?A.reject(X):($e=new pl(qe,new bi(d._repo,d._path),I),A.resolve(new _g(ce,$e)))},W,_),A.promise}(this._delegate,u,{applyLocally:f}).then(A=>new Ch(A.committed,new Zu(this.database,A.snapshot)));return a&&_.then(A=>a(null,A.committed,A.snapshot),A=>a(A,!1,null)),_}setPriority(u,a){(0,te.Dv)("Reference.setPriority",1,2,arguments.length),(0,te.Wj)("Reference.setPriority","onComplete",a,!0);const f=function ic(d,u){d=(0,te.m9)(d),Pt("setPriority",d._path),q("setPriority",u,!1);const a=new te.BH;return ec(d._repo,kr(d._path,".priority"),u,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,u);return a&&f.then(()=>a(null),_=>a(_)),f}push(u,a){(0,te.Dv)("Reference.push",0,2,arguments.length),(0,te.Wj)("Reference.push","onComplete",a,!0);const f=function up(d,u){d=(0,te.m9)(d),Pt("push",d._path),p("push",u,d._path,!0);const a=_d(d._repo),f=Cr(a),_=nc(d,f),A=nc(d,f);let k;return k=null!=u?rc(A,u).then(()=>A):Promise.resolve(A),_.then=k.then.bind(k),_.catch=k.then.bind(k,void 0),_}(this._delegate,u),_=f.then(k=>new Ro(this.database,k));a&&_.then(()=>a(null),k=>a(k));const A=new Ro(this.database,f);return A.then=_.then.bind(_),A.catch=_.catch.bind(_,void 0),A}onDisconnect(){return Pt("Reference.onDisconnect",this._delegate._path),new Cf(new fl(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class oc{constructor(u,a){this._delegate=u,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:wh,forceLongPolling:fp}}useEmulator(u,a,f={}){!function Ih(d,u,a,f={}){(d=(0,te.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Xe("Cannot call useEmulator() after instance has already been initialized.");const _=d._repoInternal;let A;if(_.repoInfo_.nodeAdmin)f.mockUserToken&&Xe('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),A=new Ni(Ni.OWNER);else if(f.mockUserToken){const k="string"==typeof f.mockUserToken?f.mockUserToken:(0,te.Sg)(f.mockUserToken,d.app.options.projectId);A=new Ni(k)}!function hg(d,u,a,f){d.repoInfo_=new O(`${u}:${a}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),f&&(d.authTokenProvider_=f)}(_,u,a,A)}(this._delegate,u,a,f)}ref(u){if((0,te.Dv)("database.ref",0,1,arguments.length),u instanceof Ro){const a=df(this._delegate,u.toString());return new Ro(this,a)}{const a=ph(this._delegate,u);return new Ro(this,a)}}refFromURL(u){(0,te.Dv)("database.refFromURL",1,1,arguments.length);const f=df(this._delegate,u);return new Ro(this,f)}goOffline(){return(0,te.Dv)("database.goOffline",0,0,arguments.length),function pp(d){(d=(0,te.m9)(d))._checkNotDeleted("goOffline"),sp(d._repo)}(this._delegate)}goOnline(){return(0,te.Dv)("database.goOnline",0,0,arguments.length),function _f(d){(d=(0,te.m9)(d))._checkNotDeleted("goOnline"),function oh(d){d.persistentConnection_&&d.persistentConnection_.resume(Xl)}(d._repo)}(this._delegate)}}oc.ServerValue={TIMESTAMP:function yg(){return gp}(),increment:d=>function Ef(d){return{".sv":{increment:d}}}(d)};var vg=Object.freeze({__proto__:null,initStandalone:function Bc({app:d,url:u,version:a,customAuthImpl:f,namespace:_,nodeAdmin:A=!1}){ts(a);const k=new Is.zt("auth-internal",new Is.H0("database-standalone"));return k.setComponent(new Is.wA("auth-internal",()=>f,"PRIVATE")),{instance:new oc(fg(d,k,void 0,u,A),d),namespace:_}}});const Df=oc.ServerValue;!function km(d){d.INTERNAL.registerComponent(new Is.wA("database-compat",(u,{instanceIdentifier:a})=>{const f=u.getProvider("app-compat").getImmediate(),_=u.getProvider("database").getImmediate({identifier:a});return new oc(_,f)},"PUBLIC").setServiceProps({Reference:Ro,Query:Ns,Database:oc,DataSnapshot:Zu,enableLogging:vf,INTERNAL:vg,ServerValue:Df}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.1")}(Ls.Z);var Yu=V(1205),mp=V(440),jc=V(127);function Rd(d){return null==d}function Jo(d){return"function"==typeof d.set}function Tf(d,u){return Jo(u)?u:d.ref(u)}function Sf(d,u){if(function ac(d){return"string"==typeof d}(d))return u.stringCase();if(Jo(d))return u.firebaseCase();if(function bf(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function Dh(d,u,a="on",f=Oo.z){return new Os.y(_=>{let A=null;return A=d[a](u,(k,W)=>{f.schedule(()=>{_.next({snapshot:k,prevKey:W})}),"once"===a&&f.schedule(()=>_.complete())},k=>{f.schedule(()=>_.error(k))}),"on"===a?{unsubscribe(){null!=A&&d.off(u,A)}}:{unsubscribe(){}}}).pipe((0,cr.U)(_=>{const{snapshot:A,prevKey:k}=_;let W=null;return A.exists()&&(W=A.key),{type:u,payload:A,prevKey:k,key:W}}),(0,xi.B)())}function Af(d,u){const a=d.length;for(let f=0;f<a;f++)if(d[f].payload.key===u)return f;return-1}function vp(d,u){const{payload:a,prevKey:f,key:_}=u,A=Af(d,_),k=function _p(d,u){if(Rd(u))return 0;{const a=Af(d,u);return-1===a?d.length:a+1}}(d,f);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let W=null;u.payload.forEach(X=>{const ce={payload:X,type:"value",prevKey:W,key:X.key};return W=X.key,d=[...d,ce],!1})}return d;case"child_added":if(A>-1){const W=d[A-1];(W&&W.key||null)!==f&&(d=d.filter(X=>X.payload.key!==a.key)).splice(k,0,u)}else{if(null==f)return[u,...d];(d=d.slice()).splice(k,0,u)}return d;case"child_removed":return d.filter(W=>W.payload.key!==a.key);case"child_changed":return d.map(W=>W.payload.key===_?u:W);case"child_moved":if(A>-1){const W=d.splice(A,1)[0];return(d=d.slice()).splice(k,0,W),d}return d;default:return d}}function Md(d){return(Rd(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Nd(d,u,a){return function yp(d,u,a){return Dh(d,"value","once",a).pipe((0,Yn.w)(f=>{const _=[(0,Ji.of)(f)];return u.forEach(A=>_.push(Dh(d,A,"on",a))),(0,li.T)(..._).pipe((0,bt.R)(vp,[]))}),(0,Ht.x)())}(d,u=Md(u),a)}function Pd(d,u,a){const f=(u=Md(u)).map(_=>Dh(d,_,"on",a));return(0,li.T)(...f)}function Sh(d,u){return function(f,_){return Sf(f,{stringCase:()=>d.child(f)[u](_),firebaseCase:()=>f[u](_),snapshotCase:()=>f.ref[u](_)})}}function Ah(d){return function(a){return a?Sf(a,{stringCase:()=>d.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):d.remove()}}function wp(d,u){return function(){return Dh(d,"value","on",u)}}const Ip=new Y.OlP("angularfire2.realtimeDatabaseURL"),Eg=new Y.OlP("angularfire2.database.use-emulator");let Qu=(()=>{class d{constructor(a,f,_,A,k,W,X,ce,qe,$e,ot,Gt,gn,br,Yi){this.schedulers=W;const Pa=X,Ju=(0,yr.on)(a,k,f);ce&&(0,Yu.nw)(Ju,k,qe,ot,Gt,gn,$e,br),this.database=(0,yr.cc)(`${Ju.name}.database.${_}`,"AngularFireDatabase",Ju.name,()=>{const uc=k.runOutsideAngular(()=>Ju.database(_||void 0));return Pa&&uc.useEmulator(...Pa),uc},[Pa])}list(a,f){const _=this.schedulers.ngZone.runOutsideAngular(()=>Tf(this.database,a));let A=_;return f&&(A=f(_)),function Ep(d,u){const a=u.schedulers.outsideAngular,f=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:Sh(f,"update"),set:Sh(f,"set"),push:_=>f.push(_),remove:Ah(f),snapshotChanges:_=>Nd(d,_,a).pipe(hn.iC),stateChanges:_=>Pd(d,_,a).pipe(hn.iC),auditTrail:_=>function Od(d,u,a){return function Th(d,u,a){return function bh(d,u){return Dh(d,"value","on",u).pipe((0,cr.U)(a=>{let f;return a.payload.forEach(_=>(f=_.key,!1)),{data:a,lastKeyToLoad:f}}))}(d,a).pipe(function Ri(...d){const u=(0,ar.jO)(d);return(0,$n.e)((a,f)=>{const _=d.length,A=new Array(_);let k=d.map(()=>!1),W=!1;for(let X=0;X<_;X++)(0,Xi.Xf)(d[X]).subscribe((0,ni.x)(f,ce=>{A[X]=ce,!W&&!k[X]&&(k[X]=!0,(W=k.every(Sr.y))&&(k=null))},es.Z));a.subscribe((0,ni.x)(f,X=>{if(W){const ce=[X,...A];f.next(u?u(...ce):ce)}}))})}(u),(0,cr.U)(([_,A])=>{const k=_.lastKeyToLoad,W=A.map(X=>X.key);return{actions:A,lastKeyToLoad:k,loadedKeys:W}}),function Ar(d){return(0,$n.e)((u,a)=>{let f=!1,_=0;u.subscribe((0,ni.x)(a,A=>(f||(f=!d(A,_++)))&&a.next(A)))})}(_=>-1===_.loadedKeys.indexOf(_.lastKeyToLoad)),(0,cr.U)(_=>_.actions))}(d,Pd(d,u).pipe((0,bt.R)((_,A)=>[..._,A],[])),a)}(d,_,a).pipe(hn.iC),valueChanges:(_,A)=>Nd(d,_,a).pipe((0,cr.U)(W=>W.map(X=>A&&A.idField?Object.assign(Object.assign({},X.payload.val()),{[A.idField]:X.key}):X.payload.val())),hn.iC)}}(A,this)}object(a){return function xf(d,u){return{query:d,snapshotChanges:()=>wp(d,u.schedulers.outsideAngular)().pipe(hn.iC),update:a=>d.ref.update(a),set:a=>d.ref.set(a),remove:()=>d.ref.remove(),valueChanges:()=>wp(d,u.schedulers.outsideAngular)().pipe(hn.iC,(0,cr.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Tf(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(a){return new(a||d)(Y.LFG(yr.Dh),Y.LFG(yr.xv,8),Y.LFG(Ip,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(hn.HU),Y.LFG(Eg,8),Y.LFG(Yu.zQ,8),Y.LFG(Yu.Qv,8),Y.LFG(Yu.L6,8),Y.LFG(Yu._Q,8),Y.LFG(Yu.rT,8),Y.LFG(Yu.lh,8),Y.LFG(Yu.f7,8),Y.LFG(mp.nm,8))},d.\u0275prov=Y.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),xh=(()=>{class d{constructor(){jc.Z.registerVersion("angularfire",hn.q4.full,"rtdb-compat")}}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=Y.oAB({type:d}),d.\u0275inj=Y.cJS({providers:[Qu]}),d})();var Rh=V(7407);let kd=(()=>{class d{}return d.\u0275fac=function(a){return new(a||d)},d.\u0275mod=Y.oAB({type:d,bootstrap:[fi]}),d.\u0275inj=Y.cJS({providers:[],imports:[[hr,mr,pi.JF,yr.hO.initializeApp(ui_firebase),xh,Rh.yb]]}),d})();(0,Y.G48)(),Tr().bootstrapModule(kd).catch(d=>console.error(d))},5867:(Mt,Ve,V)=>{V.d(Ve,{C6:()=>T.getApps,Mq:()=>T.getApp});var T=V(9681);(0,T.registerVersion)("firebase","9.8.3","app")},127:(Mt,Ve,V)=>{V.d(Ve,{Z:()=>T.Z});var T=V(3942);T.Z.registerVersion("firebase","9.8.3","app-compat")},9916:(Mt,Ve,V)=>{V.r(Ve);var T=V(5861),Y=V(3942),Q=V(2090),ve=V(9681),Ee=V(655),be=V(1877),Pe=V(4859);const st=function Ct(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Dt=function nt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new Q.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new be.Yd("@firebase/auth");function At(E,...p){Ie.logLevel<=be.in.ERROR&&Ie.error(`Auth (${ve.SDK_VERSION}): ${E}`,...p)}function tt(E,...p){throw wt(E,...p)}function Ne(E,...p){return wt(E,...p)}function ke(E,p,m){const D=Object.assign(Object.assign({},Dt()),{[p]:m});return new Q.LL("auth","Firebase",D).create(p,{appName:E.name})}function Tt(E,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&tt(E,"argument-error"),ke(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wt(E,...p){if("string"!=typeof E){const m=p[0],D=[...p.slice(1)];return D[0]&&(D[0].appName=E.name),E._errorFactory.create(m,...D)}return Ge.create(E,...p)}function J(E,p,...m){if(!E)throw wt(p,...m)}function Ze(E){const p="INTERNAL ASSERTION FAILED: "+E;throw At(p),new Error(p)}function oe(E,p){E||Ze(p)}const Se=new Map;function xe(E){oe(E instanceof Function,"Expected a class definition");let p=Se.get(E);return p?(oe(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,Se.set(E,p),p)}function vt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function Nt(){return"http:"===xt()||"https:"===xt()}function xt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class cn{constructor(p,m){this.shortDelay=p,this.longDelay=m,oe(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,Q.uI)()||(0,Q.b$)()}get(){return function Ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Nt()||(0,Q.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function qt(E,p){oe(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Wt{static initialize(p,m,D){this.fetchImpl=p,m&&(this.headersImpl=m),D&&(this.responseImpl=D)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pn=new cn(3e4,6e4);function sn(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function yn(E,p,m,D){return ur.apply(this,arguments)}function ur(){return(ur=(0,T.Z)(function*(E,p,m,D,j={}){return Xn(E,j,(0,T.Z)(function*(){let q={},De={};D&&("GET"===p?De=D:q={body:JSON.stringify(D)});const Qe=(0,Q.xO)(Object.assign({key:E.config.apiKey},De)).slice(1),Rt=yield E._getAdditionalHeaders();return Rt["Content-Type"]="application/json",E.languageCode&&(Rt["X-Firebase-Locale"]=E.languageCode),Wt.fetch()(qn(E,E.config.apiHost,m,Qe),Object.assign({method:p,headers:Rt,referrerPolicy:"no-referrer"},q))}))})).apply(this,arguments)}function Xn(E,p,m){return or.apply(this,arguments)}function or(){return(or=(0,T.Z)(function*(E,p,m){E._canInitEmulator=!1;const D=Object.assign(Object.assign({},jt),p);try{const j=new hr(E),q=yield Promise.race([m(),j.promise]);j.clearNetworkTimeout();const De=yield q.json();if("needConfirmation"in De)throw Zn(E,"account-exists-with-different-credential",De);if(q.ok&&!("errorMessage"in De))return De;{const Qe=q.ok?De.errorMessage:De.error.message,[Rt,Pt]=Qe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Rt)throw Zn(E,"credential-already-in-use",De);if("EMAIL_EXISTS"===Rt)throw Zn(E,"email-already-in-use",De);if("USER_DISABLED"===Rt)throw Zn(E,"user-disabled",De);const _n=D[Rt]||Rt.toLowerCase().replace(/[_\s]+/g,"-");if(Pt)throw ke(E,_n,Pt);tt(E,_n)}}catch(j){if(j instanceof Q.ZR)throw j;tt(E,"network-request-failed")}})).apply(this,arguments)}function Kn(E,p,m,D){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,T.Z)(function*(E,p,m,D,j={}){const q=yield yn(E,p,m,D,j);return"mfaPendingCredential"in q&&tt(E,"multi-factor-auth-required",{_serverResponse:q}),q})).apply(this,arguments)}function qn(E,p,m,D){const j=`${p}${m}?${D}`;return E.config.emulator?qt(E.config,j):`${E.config.apiScheme}://${j}`}class hr{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,D)=>{this.timer=setTimeout(()=>D(Ne(this.auth,"network-request-failed")),pn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(E,p,m){const D={appName:E.name};m.email&&(D.email=m.email),m.phoneNumber&&(D.phoneNumber=m.phoneNumber);const j=Ne(E,p,D);return j.customData._tokenResponse=m,j}function Sn(){return(Sn=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Rn(E,p){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wi(E,p){return hi.apply(this,arguments)}function hi(){return(hi=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Je(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function dt(){return(dt=(0,T.Z)(function*(E,p=!1){const m=(0,Q.m9)(E),D=yield m.getIdToken(p),j=pt(D);J(j&&j.exp&&j.auth_time&&j.iat,m.auth,"internal-error");const q="object"==typeof j.firebase?j.firebase:void 0,De=null==q?void 0:q.sign_in_provider;return{claims:j,token:D,authTime:Je(Le(j.auth_time)),issuedAtTime:Je(Le(j.iat)),expirationTime:Je(Le(j.exp)),signInProvider:De||null,signInSecondFactor:(null==q?void 0:q.sign_in_second_factor)||null}})).apply(this,arguments)}function Le(E){return 1e3*Number(E)}function pt(E){const[p,m,D]=E.split(".");if(void 0===p||void 0===m||void 0===D)return At("JWT malformed, contained fewer than 3 sections"),null;try{const j=(0,Q.tV)(m);return j?JSON.parse(j):(At("Failed to decode base64 JWT payload"),null)}catch(j){return At("Caught error parsing JWT payload as JSON",j),null}}function Dn(E,p){return on.apply(this,arguments)}function on(){return(on=(0,T.Z)(function*(E,p,m=!1){if(m)return p;try{return yield p}catch(D){throw D instanceof Q.ZR&&Jt(D)&&E.auth.currentUser===E&&(yield E.auth.signOut()),D}})).apply(this,arguments)}function Jt({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Wr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const D=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),D}{this.errorBackoff=3e4;const j=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,j)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const D=this.getInterval(p);this.timerId=setTimeout((0,T.Z)(function*(){yield m.iteration()}),D)}iteration(){var p=this;return(0,T.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&p.schedule(!0))}p.schedule()})()}}class fr{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Je(this.lastLoginAt),this.creationTime=Je(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Nn(E){return ie.apply(this,arguments)}function ie(){return(ie=(0,T.Z)(function*(E){var p;const m=E.auth,D=yield E.getIdToken(),j=yield Dn(E,Wi(m,{idToken:D}));J(null==j?void 0:j.users.length,m,"internal-error");const q=j.users[0];E._notifyReloadListener(q);const De=(null===(p=q.providerUserInfo)||void 0===p?void 0:p.length)?ue(q.providerUserInfo):[],Qe=it(E.providerData,De),_n=!!E.isAnonymous&&!(E.email&&q.passwordHash||(null==Qe?void 0:Qe.length)),ln={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:Qe,metadata:new fr(q.createdAt,q.lastLoginAt),isAnonymous:_n};Object.assign(E,ln)})).apply(this,arguments)}function ye(){return(ye=(0,T.Z)(function*(E){const p=(0,Q.m9)(E);yield Nn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function it(E,p){return[...E.filter(D=>!p.some(j=>j.providerId===D.providerId)),...p]}function ue(E){return E.map(p=>{var{providerId:m}=p,D=(0,Ee._T)(p,["providerId"]);return{providerId:m,uid:D.rawId||"",displayName:D.displayName||null,email:D.email||null,phoneNumber:D.phoneNumber||null,photoURL:D.photoUrl||null}})}function rt(){return(rt=(0,T.Z)(function*(E,p){const m=yield Xn(E,{},(0,T.Z)(function*(){const D=(0,Q.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:j,apiKey:q}=E.config,De=qn(E,j,"/v1/token",`key=${q}`),Qe=yield E._getAdditionalHeaders();return Qe["Content-Type"]="application/x-www-form-urlencoded",Wt.fetch()(De,{method:"POST",headers:Qe,body:D})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){J(p.idToken,"internal-error"),J(void 0!==p.idToken,"internal-error"),J(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function St(E){const p=pt(E);return J(p,"internal-error"),J(void 0!==p.exp,"internal-error"),J(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var D=this;return(0,T.Z)(function*(){return J(!D.accessToken||D.refreshToken,p,"user-token-expired"),m||!D.accessToken||D.isExpired?D.refreshToken?(yield D.refresh(p,D.refreshToken),D.accessToken):null:D.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var D=this;return(0,T.Z)(function*(){const{accessToken:j,refreshToken:q,expiresIn:De}=yield function Re(E,p){return rt.apply(this,arguments)}(p,m);D.updateTokensAndExpiration(j,q,Number(De))})()}updateTokensAndExpiration(p,m,D){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*D}static fromJSON(p,m){const{refreshToken:D,accessToken:j,expirationTime:q}=m,De=new kt;return D&&(J("string"==typeof D,"internal-error",{appName:p}),De.refreshToken=D),j&&(J("string"==typeof j,"internal-error",{appName:p}),De.accessToken=j),q&&(J("number"==typeof q,"internal-error",{appName:p}),De.expirationTime=q),De}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function Yt(E,p){J("string"==typeof E||void 0===E,"internal-error",{appName:p})}class Xt{constructor(p){var{uid:m,auth:D,stsTokenManager:j}=p,q=(0,Ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=D,this.stsTokenManager=j,this.accessToken=j.accessToken,this.displayName=q.displayName||null,this.email=q.email||null,this.emailVerified=q.emailVerified||!1,this.phoneNumber=q.phoneNumber||null,this.photoURL=q.photoURL||null,this.isAnonymous=q.isAnonymous||!1,this.tenantId=q.tenantId||null,this.providerData=q.providerData?[...q.providerData]:[],this.metadata=new fr(q.createdAt||void 0,q.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,T.Z)(function*(){const D=yield Dn(m,m.stsTokenManager.getToken(m.auth,p));return J(D,m.auth,"internal-error"),m.accessToken!==D&&(m.accessToken=D,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),D})()}getIdTokenResult(p){return function Ce(E){return dt.apply(this,arguments)}(this,p)}reload(){return function he(E){return ye.apply(this,arguments)}(this)}_assign(p){this!==p&&(J(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new Xt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var D=this;return(0,T.Z)(function*(){let j=!1;p.idToken&&p.idToken!==D.stsTokenManager.accessToken&&(D.stsTokenManager.updateFromServerResponse(p),j=!0),m&&(yield Nn(D)),yield D.auth._persistUserIfCurrent(D),j&&D.auth._notifyListenersIfCurrent(D)})()}delete(){var p=this;return(0,T.Z)(function*(){const m=yield p.getIdToken();return yield Dn(p,function Zt(E,p){return Sn.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var D,j,q,De,Qe,Rt,Pt,_n;const ln=null!==(D=m.displayName)&&void 0!==D?D:void 0,ai=null!==(j=m.email)&&void 0!==j?j:void 0,eo=null!==(q=m.phoneNumber)&&void 0!==q?q:void 0,to=null!==(De=m.photoURL)&&void 0!==De?De:void 0,yd=null!==(Qe=m.tenantId)&&void 0!==Qe?Qe:void 0,Hu=null!==(Rt=m._redirectEventId)&&void 0!==Rt?Rt:void 0,Xl=null!==(Pt=m.createdAt)&&void 0!==Pt?Pt:void 0,$u=null!==(_n=m.lastLoginAt)&&void 0!==_n?_n:void 0,{uid:Gu,emailVerified:Rc,isAnonymous:_d,providerData:dl,stsTokenManager:Mc}=m;J(Gu&&Mc,p,"internal-error");const no=kt.fromJSON(this.name,Mc);J("string"==typeof Gu,p,"internal-error"),Yt(ln,p.name),Yt(ai,p.name),J("boolean"==typeof Rc,p,"internal-error"),J("boolean"==typeof _d,p,"internal-error"),Yt(eo,p.name),Yt(to,p.name),Yt(yd,p.name),Yt(Hu,p.name),Yt(Xl,p.name),Yt($u,p.name);const vd=new Xt({uid:Gu,auth:p,email:ai,emailVerified:Rc,displayName:ln,isAnonymous:_d,photoURL:to,phoneNumber:eo,tenantId:yd,stsTokenManager:no,createdAt:Xl,lastLoginAt:$u});return dl&&Array.isArray(dl)&&(vd.providerData=dl.map(Nc=>Object.assign({},Nc))),Hu&&(vd._redirectEventId=Hu),vd}static _fromIdTokenResponse(p,m,D=!1){return(0,T.Z)(function*(){const j=new kt;j.updateFromServerResponse(m);const q=new Xt({uid:m.localId,auth:p,stsTokenManager:j,isAnonymous:D});return yield Nn(q),q})()}}const dn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,T.Z)(function*(){return!0})()}_set(m,D){var j=this;return(0,T.Z)(function*(){j.storage[m]=D})()}_get(m){var D=this;return(0,T.Z)(function*(){const j=D.storage[m];return void 0===j?null:j})()}_remove(m){var D=this;return(0,T.Z)(function*(){delete D.storage[m]})()}_addListener(m,D){}_removeListener(m,D){}}return E.type="NONE",E})();function Mr(E,p,m){return`firebase:${E}:${p}:${m}`}class Ur{constructor(p,m,D){this.persistence=p,this.auth=m,this.userKey=D;const{config:j,name:q}=this.auth;this.fullUserKey=Mr(this.userKey,j.apiKey,q),this.fullPersistenceKey=Mr("persistence",j.apiKey,q),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,T.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?Xt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,T.Z)(function*(){if(m.persistence===p)return;const D=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,D?m.setCurrentUser(D):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,D="authUser"){return(0,T.Z)(function*(){if(!m.length)return new Ur(xe(dn),p,D);const j=(yield Promise.all(m.map(function(){var Pt=(0,T.Z)(function*(_n){if(yield _n._isAvailable())return _n});return function(_n){return Pt.apply(this,arguments)}}()))).filter(Pt=>Pt);let q=j[0]||xe(dn);const De=Mr(D,p.config.apiKey,p.name);let Qe=null;for(const Pt of m)try{const _n=yield Pt._get(De);if(_n){const ln=Xt._fromJSON(p,_n);Pt!==q&&(Qe=ln),q=Pt;break}}catch(_n){}const Rt=j.filter(Pt=>Pt._shouldAllowMigration);return q._shouldAllowMigration&&Rt.length?(q=Rt[0],Qe&&(yield q._set(De,Qe.toJSON())),yield Promise.all(m.map(function(){var Pt=(0,T.Z)(function*(_n){if(_n!==q)try{yield _n._remove(De)}catch(ln){}});return function(_n){return Pt.apply(this,arguments)}}())),new Ur(q,p,D)):new Ur(q,p,D)})()}}function ws(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(mr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ai(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(pi(p))return"Blackberry";if(yr(p))return"Webos";if(Qi(p))return"Safari";if((p.includes("chrome/")||En(p))&&!p.includes("edge/"))return"Chrome";if(fi(p))return"Android";{const D=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==D?void 0:D.length))return D[1]}return"Other"}function Ai(E=(0,Q.z$)()){return/firefox\//i.test(E)}function Qi(E=(0,Q.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function En(E=(0,Q.z$)()){return/crios\//i.test(E)}function mr(E=(0,Q.z$)()){return/iemobile/i.test(E)}function fi(E=(0,Q.z$)()){return/android/i.test(E)}function pi(E=(0,Q.z$)()){return/blackberry/i.test(E)}function yr(E=(0,Q.z$)()){return/webos/i.test(E)}function ui(E=(0,Q.z$)()){return/iphone|ipad|ipod/i.test(E)}function li(E=(0,Q.z$)()){return ui(E)||fi(E)||yr(E)||pi(E)||/windows phone/i.test(E)||mr(E)}function xi(E,p=[]){let m;switch(E){case"Browser":m=ws((0,Q.z$)());break;case"Worker":m=`${ws((0,Q.z$)())}-${E}`;break;default:m=E}const D=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${ve.SDK_VERSION}/${D}`}class Yn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const D=q=>new Promise((De,Qe)=>{try{De(p(q))}catch(Rt){Qe(Rt)}});D.onAbort=m,this.queue.push(D);const j=this.queue.length-1;return()=>{this.queue[j]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,T.Z)(function*(){var D;if(m.auth.currentUser===p)return;const j=[];try{for(const q of m.queue)yield q(p),q.onAbort&&j.push(q.onAbort)}catch(q){j.reverse();for(const De of j)try{De()}catch(Qe){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(D=q)||void 0===D?void 0:D.message})}})()}}class bt{constructor(p,m,D){this.app=p,this.heartbeatServiceProvider=m,this.config=D,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $n(this),this.idTokenSubscription=new $n(this),this.beforeStateQueue=new Yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=D.sdkClientVersion}_initializeWithPersistence(p,m){var D=this;return m&&(this._popupRedirectResolver=xe(m)),this._initializationPromise=this.queue((0,T.Z)(function*(){var j,q;if(!D._deleted&&(D.persistenceManager=yield Ur.create(D,p),!D._deleted)){if(null===(j=D._popupRedirectResolver)||void 0===j?void 0:j._shouldInitProactively)try{yield D._popupRedirectResolver._initialize(D)}catch(De){}yield D.initializeCurrentUser(m),D.lastNotifiedUid=(null===(q=D.currentUser)||void 0===q?void 0:q.uid)||null,!D._deleted&&(D._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,T.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,T.Z)(function*(){var D;const j=yield m.assertedPersistence.getCurrentUser();let q=j,De=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Qe=null===(D=m.redirectUser)||void 0===D?void 0:D._redirectEventId,Rt=null==q?void 0:q._redirectEventId,Pt=yield m.tryRedirectSignIn(p);(!Qe||Qe===Rt)&&(null==Pt?void 0:Pt.user)&&(q=Pt.user,De=!0)}if(!q)return m.directlySetCurrentUser(null);if(!q._redirectEventId){if(De)try{yield m.beforeStateQueue.runMiddleware(q)}catch(Qe){q=j,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Qe))}return q?m.reloadAndSetCurrentUserOrClear(q):m.directlySetCurrentUser(null)}return J(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===q._redirectEventId?m.directlySetCurrentUser(q):m.reloadAndSetCurrentUserOrClear(q)})()}tryRedirectSignIn(p){var m=this;return(0,T.Z)(function*(){let D=null;try{D=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(j){yield m._setRedirectUser(null)}return D})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,T.Z)(function*(){try{yield Nn(p)}catch(D){if("auth/network-request-failed"!==D.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function lt(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,T.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,T.Z)(function*(){const D=p?(0,Q.m9)(p):null;return D&&J(D.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(D&&D._clone(m))})()}_updateCurrentUser(p,m=!1){var D=this;return(0,T.Z)(function*(){if(!D._deleted)return p&&J(D.tenantId===p.tenantId,D,"tenant-id-mismatch"),m||(yield D.beforeStateQueue.runMiddleware(p)),D.queue((0,T.Z)(function*(){yield D.directlySetCurrentUser(p),D.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,T.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,T.Z)(function*(){yield m.assertedPersistence.setPersistence(xe(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new Q.LL("auth","Firebase",p())}onAuthStateChanged(p,m,D){return this.registerStateListener(this.authStateSubscription,p,m,D)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,D){return this.registerStateListener(this.idTokenSubscription,p,m,D)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var D=this;return(0,T.Z)(function*(){const j=yield D.getOrInitRedirectPersistenceManager(m);return null===p?j.removeCurrentUser():j.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,T.Z)(function*(){if(!m.redirectPersistenceManager){const D=p&&xe(p)||m._popupRedirectResolver;J(D,m,"argument-error"),m.redirectPersistenceManager=yield Ur.create(m,[xe(D._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,T.Z)(function*(){var D,j;return m._isInitialized&&(yield m.queue((0,T.Z)(function*(){}))),(null===(D=m._currentUser)||void 0===D?void 0:D._redirectEventId)===p?m._currentUser:(null===(j=m.redirectUser)||void 0===j?void 0:j._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,T.Z)(function*(){if(p===m.currentUser)return m.queue((0,T.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const D=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==D&&(this.lastNotifiedUid=D,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,D,j){if(this._deleted)return()=>{};const q="function"==typeof m?m:m.next.bind(m),De=this._isInitialized?Promise.resolve():this._initializationPromise;return J(De,this,"internal-error"),De.then(()=>q(this.currentUser)),"function"==typeof m?p.addObserver(m,D,j):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,T.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=xi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,T.Z)(function*(){var m;const D={"X-Client-Version":p.clientVersion};p.app.options.appId&&(D["X-Firebase-gmpid"]=p.app.options.appId);const j=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return j&&(D["X-Firebase-Client"]=j),D})()}}function Ht(E){return(0,Q.m9)(E)}class $n{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Q.ne)(m=>this.observer=m)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xi(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function es(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class Ri{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return Ze("not implemented")}_getIdTokenResponse(p){return Ze("not implemented")}_linkToIdToken(p,m){return Ze("not implemented")}_getReauthenticationResolver(p){return Ze("not implemented")}}function Ar(E,p){return hn.apply(this,arguments)}function hn(){return(hn=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:resetPassword",sn(E,p))})).apply(this,arguments)}function ks(E,p){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Is(E,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:update",sn(E,p))})).apply(this,arguments)}function te(){return(te=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithPassword",sn(E,p))})).apply(this,arguments)}function zr(E,p){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:sendOobCode",sn(E,p))})).apply(this,arguments)}function Wn(E,p){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,T.Z)(function*(E,p){return zr(E,p)})).apply(this,arguments)}function ts(E,p){return gi.apply(this,arguments)}function gi(){return(gi=(0,T.Z)(function*(E,p){return zr(E,p)})).apply(this,arguments)}function zi(E,p){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,T.Z)(function*(E,p){return zr(E,p)})).apply(this,arguments)}function Ds(E,p){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,T.Z)(function*(E,p){return zr(E,p)})).apply(this,arguments)}function mo(){return(mo=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,p))})).apply(this,arguments)}function yo(){return(yo=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithEmailLink",sn(E,p))})).apply(this,arguments)}class nr extends Ri{constructor(p,m,D,j=null){super("password",D),this._email=p,this._password=m,this._tenantId=j}static _fromEmailAndPassword(p,m){return new nr(p,m,"password")}static _fromEmailAndCode(p,m,D=null){return new nr(p,m,"emailLink",D)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,T.Z)(function*(){switch(m.signInMethod){case"password":return function pr(E,p){return te.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function mi(E,p){return mo.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:tt(p,"internal-error")}})()}_linkToIdToken(p,m){var D=this;return(0,T.Z)(function*(){switch(D.signInMethod){case"password":return ks(p,{idToken:m,returnSecureToken:!0,email:D._email,password:D._password});case"emailLink":return function Us(E,p){return yo.apply(this,arguments)}(p,{idToken:m,email:D._email,oobCode:D._password});default:tt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function bs(E,p){return _o.apply(this,arguments)}function _o(){return(_o=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithIdp",sn(E,p))})).apply(this,arguments)}class fe extends Ri{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new fe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):tt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:j}=m,q=(0,Ee._T)(m,["providerId","signInMethod"]);if(!D||!j)return null;const De=new fe(D,j);return De.idToken=q.idToken||void 0,De.accessToken=q.accessToken||void 0,De.secret=q.secret,De.nonce=q.nonce,De.pendingToken=q.pendingToken||null,De}_getIdTokenResponse(p){return bs(p,this.buildRequest())}_linkToIdToken(p,m){const D=this.buildRequest();return D.idToken=m,bs(p,D)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,bs(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,Q.xO)(m)}return p}}function je(E,p){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:sendVerificationCode",sn(E,p))})).apply(this,arguments)}function Ft(){return(Ft=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,p))})).apply(this,arguments)}function qr(){return(qr=(0,T.Z)(function*(E,p){const m=yield Kn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,p));if(m.temporaryProof)throw Zn(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const bn={USER_NOT_FOUND:"user-not-found"};function Mi(){return(Mi=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithPhoneNumber",sn(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),bn)})).apply(this,arguments)}class Ts extends Ri{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new Ts({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new Ts({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function mt(E,p){return Ft.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function rr(E,p){return qr.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Ir(E,p){return Mi.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:D,verificationCode:j}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:D,code:j}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:D,phoneNumber:j,temporaryProof:q}=p;return D||m||j||q?new Ts({verificationId:m,verificationCode:D,phoneNumber:j,temporaryProof:q}):null}}class Ss{constructor(p){var m,D,j,q,De,Qe;const Rt=(0,Q.zd)((0,Q.pd)(p)),Pt=null!==(m=Rt.apiKey)&&void 0!==m?m:null,_n=null!==(D=Rt.oobCode)&&void 0!==D?D:null,ln=function ns(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(j=Rt.mode)&&void 0!==j?j:null);J(Pt&&_n&&ln,"argument-error"),this.apiKey=Pt,this.operation=ln,this.code=_n,this.continueUrl=null!==(q=Rt.continueUrl)&&void 0!==q?q:null,this.languageCode=null!==(De=Rt.languageCode)&&void 0!==De?De:null,this.tenantId=null!==(Qe=Rt.tenantId)&&void 0!==Qe?Qe:null}static parseLink(p){const m=function yi(E){const p=(0,Q.zd)((0,Q.pd)(E)).link,m=p?(0,Q.zd)((0,Q.pd)(p)).deep_link_id:null,D=(0,Q.zd)((0,Q.pd)(E)).deep_link_id;return(D?(0,Q.zd)((0,Q.pd)(D)).link:null)||D||m||p||E}(p);try{return new Ss(m)}catch(D){return null}}}let Fa=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,D){return nr._fromEmailAndPassword(m,D)}static credentialWithLink(m,D){const j=Ss.parseLink(D);return J(j,"argument-error"),nr._fromEmailAndCode(m,j.code,j.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class ci{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Vs extends ci{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class ls extends Vs{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return J("providerId"in m&&"signInMethod"in m,"argument-error"),fe._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return J(p.idToken||p.accessToken,"argument-error"),fe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return ls.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return ls.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:D,oauthTokenSecret:j,pendingToken:q,nonce:De,providerId:Qe}=p;if(!D&&!j&&!m&&!q||!Qe)return null;try{return new ls(Qe)._credential({idToken:m,accessToken:D,nonce:De,pendingToken:q})}catch(Rt){return null}}}let ko=(()=>{class E extends Vs{constructor(){super("facebook.com")}static credential(m){return fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(D){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),ea=(()=>{class E extends Vs{constructor(){super("google.com"),this.addScope("profile")}static credential(m,D){return fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:D})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:D,oauthAccessToken:j}=m;if(!D&&!j)return null;try{return E.credential(D,j)}catch(q){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),As=(()=>{class E extends Vs{constructor(){super("github.com")}static credential(m){return fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(D){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Nr extends Ri{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return bs(p,this.buildRequest())}_linkToIdToken(p,m){const D=this.buildRequest();return D.idToken=m,bs(p,D)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,bs(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:D,signInMethod:j,pendingToken:q}=m;return D&&j&&q&&D===j?new Nr(D,q):null}static _create(p,m){return new Nr(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Br extends ci{constructor(p){J(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Br.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Br.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Nr.fromJSON(p);return J(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:D}=p;if(!m||!D)return null;try{return Nr._create(D,m)}catch(j){return null}}}let ta=(()=>{class E extends Vs{constructor(){super("twitter.com")}static credential(m,D){return fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:D})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:D,oauthTokenSecret:j}=m;if(!D||!j)return null;try{return E.credential(D,j)}catch(q){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function Yr(E,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signUp",sn(E,p))})).apply(this,arguments)}class ri{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,D,j=!1){return(0,T.Z)(function*(){const q=yield Xt._fromIdTokenResponse(p,D,j),De=na(D);return new ri({user:q,providerId:De,_tokenResponse:D,operationType:m})})()}static _forOperation(p,m,D){return(0,T.Z)(function*(){yield p._updateTokensIfNecessary(D,!0);const j=na(D);return new ri({user:p,providerId:j,_tokenResponse:D,operationType:m})})()}}function na(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function vo(){return(vo=(0,T.Z)(function*(E){var p;const m=Ht(E);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new ri({user:m.currentUser,providerId:null,operationType:"signIn"});const D=yield Yr(m,{returnSecureToken:!0}),j=yield ri._fromIdTokenResponse(m,"signIn",D,!0);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class rs extends Q.ZR{constructor(p,m,D,j){var q;super(m.code,m.message),this.operationType=D,this.user=j,Object.setPrototypeOf(this,rs.prototype),this.customData={appName:p.name,tenantId:null!==(q=p.tenantId)&&void 0!==q?q:void 0,_serverResponse:m.customData._serverResponse,operationType:D}}static _fromErrorAndOperation(p,m,D,j){return new rs(p,m,D,j)}}function ra(E,p,m,D){return("reauthenticate"===p?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(q=>{throw"auth/multi-factor-auth-required"===q.code?rs._fromErrorAndOperation(E,q,p,D):q})}function ds(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function Un(){return(Un=(0,T.Z)(function*(E,p){const m=(0,Q.m9)(E);yield O(!0,m,p);const{providerUserInfo:D}=yield Rn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),j=ds(D||[]);return m.providerData=m.providerData.filter(q=>j.has(q.providerId)),j.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function L(E,p){return G.apply(this,arguments)}function G(){return(G=(0,T.Z)(function*(E,p,m=!1){const D=yield Dn(E,p._linkToIdToken(E.auth,yield E.getIdToken()),m);return ri._forOperation(E,"link",D)})).apply(this,arguments)}function O(E,p,m){return Z.apply(this,arguments)}function Z(){return(Z=(0,T.Z)(function*(E,p,m){yield Nn(p);const j=!1===E?"provider-already-linked":"no-such-provider";J(ds(p.providerData).has(m)===E,p.auth,j)})).apply(this,arguments)}function de(E,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,T.Z)(function*(E,p,m=!1){const{auth:D}=E,j="reauthenticate";try{const q=yield Dn(E,ra(D,j,p,E),m);J(q.idToken,D,"internal-error");const De=pt(q.idToken);J(De,D,"internal-error");const{sub:Qe}=De;return J(E.uid===Qe,D,"user-mismatch"),ri._forOperation(E,j,q)}catch(q){throw"auth/user-not-found"===(null==q?void 0:q.code)&&tt(D,"user-mismatch"),q}})).apply(this,arguments)}function ct(E,p){return $t.apply(this,arguments)}function $t(){return($t=(0,T.Z)(function*(E,p,m=!1){const D="signIn",j=yield ra(E,D,p),q=yield ri._fromIdTokenResponse(E,D,j);return m||(yield E._updateCurrentUser(q.user)),q})).apply(this,arguments)}function an(E,p){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,T.Z)(function*(E,p){return ct(Ht(E),p)})).apply(this,arguments)}function Cn(E,p){return An.apply(this,arguments)}function An(){return(An=(0,T.Z)(function*(E,p){const m=(0,Q.m9)(E);return yield O(!1,m,p.providerId),L(m,p)})).apply(this,arguments)}function Pr(E,p){return ir.apply(this,arguments)}function ir(){return(ir=(0,T.Z)(function*(E,p){return de((0,Q.m9)(E),p)})).apply(this,arguments)}function _r(E,p){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,T.Z)(function*(E,p){return Kn(E,"POST","/v1/accounts:signInWithCustomToken",sn(E,p))})).apply(this,arguments)}function zt(){return(zt=(0,T.Z)(function*(E,p){const m=Ht(E),D=yield _r(m,{token:p,returnSecureToken:!0}),j=yield ri._fromIdTokenResponse(m,"signIn",D);return yield m._updateCurrentUser(j.user),j})).apply(this,arguments)}class Bs{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Ea._fromServerResponse(p,m):tt(p,"internal-error")}}class Ea extends Bs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Ea(m)}}function Fo(E,p,m){var D;J((null===(D=m.url)||void 0===D?void 0:D.length)>0,E,"invalid-continue-uri"),J(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(J(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(J(m.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function wa(){return(wa=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E),j={requestType:"PASSWORD_RESET",email:p};m&&Fo(D,j,m),yield ts(D,j)})).apply(this,arguments)}function Ua(){return(Ua=(0,T.Z)(function*(E,p,m){yield Ar((0,Q.m9)(E),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Vn(){return(Vn=(0,T.Z)(function*(E,p){yield Is((0,Q.m9)(E),{oobCode:p})})).apply(this,arguments)}function Va(E,p){return er.apply(this,arguments)}function er(){return(er=(0,T.Z)(function*(E,p){const m=(0,Q.m9)(E),D=yield Ar(m,{oobCode:p}),j=D.requestType;switch(J(j,m,"internal-error"),j){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(D.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(D.mfaInfo,m,"internal-error");default:J(D.email,m,"internal-error")}let q=null;return D.mfaInfo&&(q=Bs._fromServerResponse(Ht(m),D.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.newEmail:D.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===D.requestType?D.email:D.newEmail)||null,multiFactorInfo:q},operation:j}})).apply(this,arguments)}function js(){return(js=(0,T.Z)(function*(E,p){const{data:m}=yield Va((0,Q.m9)(E),p);return m.email})).apply(this,arguments)}function wo(){return(wo=(0,T.Z)(function*(E,p,m){const D=Ht(E),j=yield Yr(D,{returnSecureToken:!0,email:p,password:m}),q=yield ri._fromIdTokenResponse(D,"signIn",j);return yield D._updateCurrentUser(q.user),q})).apply(this,arguments)}function nl(){return(nl=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E),j={requestType:"EMAIL_SIGNIN",email:p};J(m.handleCodeInApp,D,"argument-error"),m&&Fo(D,j,m),yield zi(D,j)})).apply(this,arguments)}function Qr(){return(Qr=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E),j=Fa.credentialWithLink(p,m||vt());return J(j._tenantId===(D.tenantId||null),D,"tenant-id-mismatch"),an(D,j)})).apply(this,arguments)}function xs(E,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:createAuthUri",sn(E,p))})).apply(this,arguments)}function Ki(){return(Ki=(0,T.Z)(function*(E,p){const D={identifier:p,continueUri:Nt()?vt():"http://localhost"},{signinMethods:j}=yield xs((0,Q.m9)(E),D);return j||[]})).apply(this,arguments)}function Or(){return(Or=(0,T.Z)(function*(E,p){const m=(0,Q.m9)(E),j={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&Fo(m.auth,j,p);const{email:q}=yield Wn(m.auth,j);q!==E.email&&(yield E.reload())})).apply(this,arguments)}function iu(){return(iu=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E),q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};m&&Fo(D.auth,q,m);const{email:De}=yield Ds(D.auth,q);De!==E.email&&(yield E.reload())})).apply(this,arguments)}function Ba(E,p){return su.apply(this,arguments)}function su(){return(su=(0,T.Z)(function*(E,p){return yn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ha(){return(Ha=(0,T.Z)(function*(E,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const D=(0,Q.m9)(E),q={idToken:yield D.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},De=yield Dn(D,Ba(D.auth,q));D.displayName=De.displayName||null,D.photoURL=De.photoUrl||null;const Qe=D.providerData.find(({providerId:Rt})=>"password"===Rt);Qe&&(Qe.displayName=D.displayName,Qe.photoURL=D.photoURL),yield D._updateTokensIfNecessary(De)})).apply(this,arguments)}function so(E,p,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,T.Z)(function*(E,p,m){const{auth:D}=E,q={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(q.email=p),m&&(q.password=m);const De=yield Dn(E,ks(D,q));yield E._updateTokensIfNecessary(De,!0)})).apply(this,arguments)}class On{constructor(p,m,D={}){this.isNewUser=p,this.providerId=m,this.profile=D}}class Tn extends On{constructor(p,m,D,j){super(p,m,D),this.username=j}}class hs extends On{constructor(p,m){super(p,"facebook.com",m)}}class Qn extends Tn{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class xu extends On{constructor(p,m){super(p,"google.com",m)}}class ii extends Tn{constructor(p,m,D){super(p,"twitter.com",m,D)}}function is(E){const{user:p,_tokenResponse:m}=E;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Pn(E){var p,m;if(!E)return null;const{providerId:D}=E,j=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},q=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!D&&(null==E?void 0:E.idToken)){const De=null===(m=null===(p=pt(E.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(De)return new On(q,"anonymous"!==De&&"custom"!==De?De:null)}if(!D)return null;switch(D){case"facebook.com":return new hs(q,j);case"github.com":return new Qn(q,j);case"google.com":return new xu(q,j);case"twitter.com":return new ii(q,j,E.screenName||null);case"custom":case"anonymous":return new On(q,null);default:return new On(q,D,j)}}(m)}class zs{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new zs("enroll",p)}static _fromMfaPendingCredential(p){return new zs("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,D;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return zs._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(D=p.multiFactorSession)||void 0===D?void 0:D.idToken)return zs._fromIdtoken(p.multiFactorSession.idToken)}return null}}class ua{constructor(p,m,D){this.session=p,this.hints=m,this.signInResolver=D}static _fromError(p,m){const D=Ht(p),j=m.customData._serverResponse,q=(j.mfaInfo||[]).map(Qe=>Bs._fromServerResponse(D,Qe));J(j.mfaPendingCredential,D,"internal-error");const De=zs._fromMfaPendingCredential(j.mfaPendingCredential);return new ua(De,q,function(){var Qe=(0,T.Z)(function*(Rt){const Pt=yield Rt._process(D,De);delete j.mfaInfo,delete j.mfaPendingCredential;const _n=Object.assign(Object.assign({},j),{idToken:Pt.idToken,refreshToken:Pt.refreshToken});switch(m.operationType){case"signIn":const ln=yield ri._fromIdTokenResponse(D,m.operationType,_n);return yield D._updateCurrentUser(ln.user),ln;case"reauthenticate":return J(m.user,D,"internal-error"),ri._forOperation(m.user,m.operationType,_n);default:tt(D,"internal-error")}});return function(Rt){return Qe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,T.Z)(function*(){return m.signInResolver(p)})()}}function ou(E,p){return yn(E,"POST","/v2/accounts/mfaEnrollment:start",sn(E,p))}class $a{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(D=>Bs._fromServerResponse(p.auth,D)))})}static _fromUser(p){return new $a(p)}getSession(){var p=this;return(0,T.Z)(function*(){return zs._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var D=this;return(0,T.Z)(function*(){const j=p,q=yield D.getSession(),De=yield Dn(D.user,j._process(D.user.auth,q,m));return yield D.user._updateTokensIfNecessary(De),D.user.reload()})()}unenroll(p){var m=this;return(0,T.Z)(function*(){const D="string"==typeof p?p:p.uid,j=yield m.user.getIdToken(),q=yield Dn(m.user,function Rs(E,p){return yn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(E,p))}(m.user.auth,{idToken:j,mfaEnrollmentId:D}));m.enrolledFactors=m.enrolledFactors.filter(({uid:De})=>De!==D),yield m.user._updateTokensIfNecessary(q);try{yield m.user.reload()}catch(De){if("auth/user-token-expired"!==De.code)throw De}})()}}const Ks=new WeakMap,jo="__sak";class Wa{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(jo,"1"),this.storage.removeItem(jo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ca=(()=>{class E extends Wa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,D)=>this.onStorageEvent(m,D),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function gs(){const E=(0,Q.z$)();return Qi(E)||ui(E)}()&&function cr(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=li(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const D of Object.keys(this.listeners)){const j=this.storage.getItem(D),q=this.localCache[D];j!==q&&m(D,q,j)}}onStorageEvent(m,D=!1){if(!m.key)return void this.forAllChangedKeys((Qe,Rt,Pt)=>{this.notifyListeners(Qe,Pt)});const j=m.key;if(D?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Qe=this.storage.getItem(j);if(m.newValue!==Qe)null!==m.newValue?this.storage.setItem(j,m.newValue):this.storage.removeItem(j);else if(this.localCache[j]===m.newValue&&!D)return}const q=()=>{const Qe=this.storage.getItem(j);!D&&this.localCache[j]===Qe||this.notifyListeners(j,Qe)},De=this.storage.getItem(j);!function Ji(){return(0,Q.w1)()&&10===document.documentMode}()||De===m.newValue||m.newValue===m.oldValue?q():setTimeout(q,10)}notifyListeners(m,D){this.localCache[m]=D;const j=this.listeners[m];if(j)for(const q of Array.from(j))q(D&&JSON.parse(D))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,D,j)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:D,newValue:j}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,D){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,D){var j=()=>super._set,q=this;return(0,T.Z)(function*(){yield j().call(q,m,D),q.localCache[m]=JSON.stringify(D)})()}_get(m){var D=()=>super._get,j=this;return(0,T.Z)(function*(){const q=yield D().call(j,m);return j.localCache[m]=JSON.stringify(q),q})()}_remove(m){var D=()=>super._remove,j=this;return(0,T.Z)(function*(){yield D().call(j,m),delete j.localCache[m]})()}}return E.type="LOCAL",E})(),jr=(()=>{class E extends Wa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,D){}_removeListener(m,D){}}return E.type="SESSION",E})();let qs=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const D=this.receivers.find(q=>q.isListeningto(m));if(D)return D;const j=new E(m);return this.receivers.push(j),j}isListeningto(m){return this.eventTarget===m}handleEvent(m){var D=this;return(0,T.Z)(function*(){const j=m,{eventId:q,eventType:De,data:Qe}=j.data,Rt=D.handlersMap[De];if(!(null==Rt?void 0:Rt.size))return;j.ports[0].postMessage({status:"ack",eventId:q,eventType:De});const Pt=Array.from(Rt).map(function(){var ln=(0,T.Z)(function*(ai){return ai(j.origin,Qe)});return function(ai){return ln.apply(this,arguments)}}()),_n=yield function za(E){return Promise.all(E.map(function(){var p=(0,T.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(D){return{fulfilled:!1,reason:D}}});return function(m){return p.apply(this,arguments)}}()))}(Pt);j.ports[0].postMessage({status:"done",eventId:q,eventType:De,response:_n})})()}_subscribe(m,D){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(D)}_unsubscribe(m,D){this.handlersMap[m]&&D&&this.handlersMap[m].delete(D),(!D||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function oo(E="",p=10){let m="";for(let D=0;D<p;D++)m+=Math.floor(10*Math.random());return E+m}class qi{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,D=50){var j=this;return(0,T.Z)(function*(){const q="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!q)throw new Error("connection_unavailable");let De,Qe;return new Promise((Rt,Pt)=>{const _n=oo("",20);q.port1.start();const ln=setTimeout(()=>{Pt(new Error("unsupported_event"))},D);Qe={messageChannel:q,onMessage(ai){const eo=ai;if(eo.data.eventId===_n)switch(eo.data.status){case"ack":clearTimeout(ln),De=setTimeout(()=>{Pt(new Error("timeout"))},3e3);break;case"done":clearTimeout(De),Rt(eo.data.response);break;default:clearTimeout(ln),clearTimeout(De),Pt(new Error("invalid_response"))}}},j.handlers.add(Qe),q.port1.addEventListener("message",Qe.onMessage),j.target.postMessage({eventType:p,eventId:_n,data:m},[q.port2])}).finally(()=>{Qe&&j.removeMessageHandler(Qe)})})()}}function vr(){return window}function ao(){return void 0!==vr().WorkerGlobalScope&&"function"==typeof vr().importScripts}function Io(){return(Io=(0,T.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const ba="firebaseLocalStorageDb",Er="firebaseLocalStorage",Do="fbase_key";class $o{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function b(E,p){return E.transaction([Er],p?"readwrite":"readonly").objectStore(Er)}function C(){const E=indexedDB.open(ba,1);return new Promise((p,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const D=E.result;try{D.createObjectStore(Er,{keyPath:Do})}catch(j){m(j)}}),E.addEventListener("success",(0,T.Z)(function*(){const D=E.result;D.objectStoreNames.contains(Er)?p(D):(D.close(),yield function I(){const E=indexedDB.deleteDatabase(ba);return new $o(E).toPromise()}(),p(yield C()))}))})}function R(E,p,m){return M.apply(this,arguments)}function M(){return(M=(0,T.Z)(function*(E,p,m){const D=b(E,!0).put({[Do]:p,value:m});return new $o(D).toPromise()})).apply(this,arguments)}function ne(){return(ne=(0,T.Z)(function*(E,p){const m=b(E,!1).get(p),D=yield new $o(m).toPromise();return void 0===D?null:D.value})).apply(this,arguments)}function pe(E,p){const m=b(E,!0).delete(p);return new $o(m).toPromise()}const Bt=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,T.Z)(function*(){return m.db||(m.db=yield C()),m.db})()}_withRetries(m){var D=this;return(0,T.Z)(function*(){let j=0;for(;;)try{const q=yield D._openDb();return yield m(q)}catch(q){if(j++>3)throw q;D.db&&(D.db.close(),D.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,T.Z)(function*(){return ao()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,T.Z)(function*(){m.receiver=qs._getInstance(function Ka(){return ao()?self:null}()),m.receiver._subscribe("keyChanged",function(){var D=(0,T.Z)(function*(j,q){return{keyProcessed:(yield m._poll()).includes(q.key)}});return function(j,q){return D.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var D=(0,T.Z)(function*(j,q){return["keyChanged"]});return function(j,q){return D.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,T.Z)(function*(){var D,j;if(m.activeServiceWorker=yield function vi(){return Io.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new qi(m.activeServiceWorker);const q=yield m.sender._send("ping",{},800);!q||(null===(D=q[0])||void 0===D?void 0:D.fulfilled)&&(null===(j=q[0])||void 0===j?void 0:j.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var D=this;return(0,T.Z)(function*(){if(D.sender&&D.activeServiceWorker&&function Co(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===D.activeServiceWorker)try{yield D.sender._send("keyChanged",{key:m},D.serviceWorkerReceiverAvailable?800:50)}catch(j){}})()}_isAvailable(){return(0,T.Z)(function*(){try{if(!indexedDB)return!1;const m=yield C();return yield R(m,jo,"1"),yield pe(m,jo),!0}catch(m){}return!1})()}_withPendingWrite(m){var D=this;return(0,T.Z)(function*(){D.pendingWrites++;try{yield m()}finally{D.pendingWrites--}})()}_set(m,D){var j=this;return(0,T.Z)(function*(){return j._withPendingWrite((0,T.Z)(function*(){return yield j._withRetries(q=>R(q,m,D)),j.localCache[m]=D,j.notifyServiceWorker(m)}))})()}_get(m){var D=this;return(0,T.Z)(function*(){const j=yield D._withRetries(q=>function B(E,p){return ne.apply(this,arguments)}(q,m));return D.localCache[m]=j,j})()}_remove(m){var D=this;return(0,T.Z)(function*(){return D._withPendingWrite((0,T.Z)(function*(){return yield D._withRetries(j=>pe(j,m)),delete D.localCache[m],D.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,T.Z)(function*(){const D=yield m._withRetries(De=>{const Qe=b(De,!1).getAll();return new $o(Qe).toPromise()});if(!D)return[];if(0!==m.pendingWrites)return[];const j=[],q=new Set;for(const{fbase_key:De,value:Qe}of D)q.add(De),JSON.stringify(m.localCache[De])!==JSON.stringify(Qe)&&(m.notifyListeners(De,Qe),j.push(De));for(const De of Object.keys(m.localCache))m.localCache[De]&&!q.has(De)&&(m.notifyListeners(De,null),j.push(De));return j})()}notifyListeners(m,D){this.localCache[m]=D;const j=this.listeners[m];if(j)for(const q of Array.from(j))q(D)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,T.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,D){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(D)}_removeListener(m,D){this.listeners[m]&&(this.listeners[m].delete(D),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function tr(E,p){return yn(E,"POST","/v2/accounts/mfaSignIn:start",sn(E,p))}function bo(){return(bo=(0,T.Z)(function*(E){return(yield yn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ms(E){return new Promise((p,m)=>{const D=document.createElement("script");D.setAttribute("src",E),D.onload=p,D.onerror=j=>{const q=Ne("internal-error");q.customData=j,m(q)},D.type="text/javascript",D.charset="UTF-8",function Go(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(D)})}function tn(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Cr=1e12;class un{constructor(p){this.auth=p,this.counter=Cr,this._widgets=new Map}render(p,m){const D=this.counter;return this._widgets.set(D,new rl(p,this.auth.name,m||{})),this.counter++,D}reset(p){var m;const D=p||Cr;null===(m=this._widgets.get(D))||void 0===m||m.delete(),this._widgets.delete(D)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Cr))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,T.Z)(function*(){var D;return null===(D=m._widgets.get(p||Cr))||void 0===D||D.execute(),""})()}}class rl{constructor(p,m,D){this.params=D,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const j="string"==typeof p?document.getElementById(p):p;J(j,"argument-error",{appName:m}),this.container=j,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function zn(E){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let D=0;D<E;D++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(D){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(D){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Dr=tn("rcb"),Xr=new cn(3e4,6e4);class gc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!vr().grecaptcha}load(p,m=""){return J(function Dl(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(vr().grecaptcha):new Promise((D,j)=>{const q=vr().setTimeout(()=>{j(Ne(p,"network-request-failed"))},Xr.get());vr()[Dr]=()=>{vr().clearTimeout(q),delete vr()[Dr];const Qe=vr().grecaptcha;if(!Qe)return void j(Ne(p,"internal-error"));const Rt=Qe.render;Qe.render=(Pt,_n)=>{const ln=Rt(Pt,_n);return this.counter++,ln},this.hostLanguage=m,D(Qe)},ms(`https://www.google.com/recaptcha/api.js??${(0,Q.xO)({onload:Dr,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(q),j(Ne(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!vr().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Wo{load(p){return(0,T.Z)(function*(){return new un(p)})()}clearedOneInstance(){}}const il="recaptcha",au={theme:"light",type:"image"};class Nu{constructor(p,m=Object.assign({},au),D){this.parameters=m,this.type=il,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(D),this.isInvisible="invisible"===this.parameters.size,J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const j="string"==typeof p?document.getElementById(p):p;J(j,this.auth,"argument-error"),this.container=j,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wo:new gc,this.validateStartingState()}verify(){var p=this;return(0,T.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),D=p.getAssertedRecaptcha();return D.getResponse(m)||new Promise(q=>{const De=Qe=>{!Qe||(p.tokenChangeListeners.delete(De),q(Qe))};p.tokenChangeListeners.add(De),p.isInvisible&&D.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(D=>D(m)),"function"==typeof p)p(m);else if("string"==typeof p){const D=vr()[p];"function"==typeof D&&D(m)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,T.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const D=document.createElement("div");m.appendChild(D),m=D}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,T.Z)(function*(){J(Nt()&&!ao(),p.auth,"internal-error"),yield function nd(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function ss(E){return bo.apply(this,arguments)}(p.auth);J(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class sr{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=Ts._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function qa(){return(qa=(0,T.Z)(function*(E,p,m){const D=Ht(E),j=yield Ta(D,p,(0,Q.m9)(m));return new sr(j,q=>an(D,q))})).apply(this,arguments)}function ca(){return(ca=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E);yield O(!1,D,"phone");const j=yield Ta(D.auth,p,(0,Q.m9)(m));return new sr(j,q=>Cn(D,q))})).apply(this,arguments)}function Be(){return(Be=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E),j=yield Ta(D.auth,p,(0,Q.m9)(m));return new sr(j,q=>Pr(D,q))})).apply(this,arguments)}function Ta(E,p,m){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,T.Z)(function*(E,p,m){var D;const j=yield m.verify();try{let q;if(J("string"==typeof j,E,"argument-error"),J(m.type===il,E,"argument-error"),q="string"==typeof p?{phoneNumber:p}:p,"session"in q){const De=q.session;if("phoneNumber"in q)return J("enroll"===De.type,E,"internal-error"),(yield ou(E,{idToken:De.credential,phoneEnrollmentInfo:{phoneNumber:q.phoneNumber,recaptchaToken:j}})).phoneSessionInfo.sessionInfo;{J("signin"===De.type,E,"internal-error");const Qe=(null===(D=q.multiFactorHint)||void 0===D?void 0:D.uid)||q.multiFactorUid;return J(Qe,E,"missing-multi-factor-info"),(yield tr(E,{mfaPendingCredential:De.credential,mfaEnrollmentId:Qe,phoneSignInInfo:{recaptchaToken:j}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:De}=yield je(E,{phoneNumber:q.phoneNumber,recaptchaToken:j});return De}}finally{m._reset()}})).apply(this,arguments)}function uo(){return(uo=(0,T.Z)(function*(E,p){yield L((0,Q.m9)(E),p)})).apply(this,arguments)}let ki=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=Ht(m)}verifyPhoneNumber(m,D){return Ta(this.auth,m,(0,Q.m9)(D))}static credential(m,D){return Ts._fromVerification(m,D)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:D,temporaryProof:j}=m;return D&&j?Ts._fromTokenResponse(D,j):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function zo(E,p){return p?xe(p):(J(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class To extends Ri{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return bs(p,this._buildIdpRequest())}_linkToIdToken(p,m){return bs(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return bs(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Hl(E){return ct(E.auth,new To(E),E.bypassAuthState)}function Pu(E){const{auth:p,user:m}=E;return J(m,p,"internal-error"),de(m,new To(E),E.bypassAuthState)}function lo(E){return bl.apply(this,arguments)}function bl(){return(bl=(0,T.Z)(function*(E){const{auth:p,user:m}=E;return J(m,p,"internal-error"),L(m,new To(E),E.bypassAuthState)})).apply(this,arguments)}class Li{constructor(p,m,D,j,q=!1){this.auth=p,this.resolver=D,this.user=j,this.bypassAuthState=q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,T.Z)(function*(D,j){p.pendingPromise={resolve:D,reject:j};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(q){p.reject(q)}});return function(D,j){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,T.Z)(function*(){const{urlResponse:D,sessionId:j,postBody:q,tenantId:De,error:Qe,type:Rt}=p;if(Qe)return void m.reject(Qe);const Pt={auth:m.auth,requestUri:D,sessionId:j,tenantId:De||void 0,postBody:q||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Rt)(Pt))}catch(_n){m.reject(_n)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Hl;case"linkViaPopup":case"linkViaRedirect":return lo;case"reauthViaPopup":case"reauthViaRedirect":return Pu;default:tt(this.auth,"internal-error")}}resolve(p){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rd=new cn(2e3,1e4);function Ko(){return(Ko=(0,T.Z)(function*(E,p,m){const D=Ht(E);Tt(E,p,ci);const j=zo(D,m);return new qo(D,"signInViaPopup",p,j).executeNotNull()})).apply(this,arguments)}function Za(){return(Za=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E);Tt(D.auth,p,ci);const j=zo(D.auth,m);return new qo(D.auth,"reauthViaPopup",p,j,D).executeNotNull()})).apply(this,arguments)}function jn(){return(jn=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E);Tt(D.auth,p,ci);const j=zo(D.auth,m);return new qo(D.auth,"linkViaPopup",p,j,D).executeNotNull()})).apply(this,arguments)}let qo=(()=>{class E extends Li{constructor(m,D,j,q,De){super(m,D,q,De),this.provider=j,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,T.Z)(function*(){const D=yield m.execute();return J(D,m.auth,"internal-error"),D})()}onExecution(){var m=this;return(0,T.Z)(function*(){oe(1===m.filter.length,"Popup operations only handle one event");const D=oo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],D),m.authWindow.associatedEvent=D,m.resolver._originValidation(m.auth).catch(j=>{m.reject(j)}),m.resolver._isIframeWebStorageSupported(m.auth,j=>{j||m.reject(Ne(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var D,j;this.pollId=(null===(j=null===(D=this.authWindow)||void 0===D?void 0:D.window)||void 0===j?void 0:j.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,rd.get())};m()}}return E.currentPopupAction=null,E})();const Lr=new Map;class Qh extends Li{constructor(p,m,D=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,D),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,T.Z)(function*(){let D=Lr.get(m.auth._key());if(!D){try{const q=(yield function ei(E,p){return Sa.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;D=()=>Promise.resolve(q)}catch(j){D=()=>Promise.reject(j)}Lr.set(m.auth._key(),D)}return m.bypassAuthState||Lr.set(m.auth._key(),()=>Promise.resolve(null)),D()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,D=this;return(0,T.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(D,p);if("unknown"!==p.type){if(p.eventId){const j=yield D.auth._redirectUserForId(p.eventId);if(j)return D.user=j,m().call(D,p);D.resolve(null)}}else D.resolve(null)})()}onExecution(){return(0,T.Z)(function*(){})()}cleanUp(){}}function Sa(){return(Sa=(0,T.Z)(function*(E,p){const m=se(p),D=K(E);if(!(yield D._isAvailable()))return!1;const j="true"===(yield D._get(m));return yield D._remove(m),j})).apply(this,arguments)}function co(E,p){return si.apply(this,arguments)}function si(){return(si=(0,T.Z)(function*(E,p){return K(E)._set(se(p),"true")})).apply(this,arguments)}function F(E,p){Lr.set(E._key(),p)}function K(E){return xe(E._redirectPersistence)}function se(E){return Mr("pendingRedirect",E.config.apiKey,E.name)}function yt(){return(yt=(0,T.Z)(function*(E,p,m){const D=Ht(E);Tt(E,p,ci);const j=zo(D,m);return yield co(j,D),j._openRedirect(D,p,"signInViaRedirect")})).apply(this,arguments)}function vn(){return(vn=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E);Tt(D.auth,p,ci);const j=zo(D.auth,m);yield co(j,D.auth);const q=yield da(D);return j._openRedirect(D.auth,p,"reauthViaRedirect",q)})).apply(this,arguments)}function Fr(){return(Fr=(0,T.Z)(function*(E,p,m){const D=(0,Q.m9)(E);Tt(D.auth,p,ci);const j=zo(D.auth,m);yield O(!1,D,p.providerId),yield co(j,D.auth);const q=yield da(D);return j._openRedirect(D.auth,p,"linkViaRedirect",q)})).apply(this,arguments)}function Ys(){return(Ys=(0,T.Z)(function*(E,p){return yield Ht(E)._initializationPromise,Vi(E,p,!1)})).apply(this,arguments)}function Vi(E,p){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,T.Z)(function*(E,p,m=!1){const D=Ht(E),j=zo(D,p),De=yield new Qh(D,j,m).execute();return De&&!m&&(delete De.user._redirectEventId,yield D._persistUserIfCurrent(De.user),yield D._setRedirectUser(null,p)),De})).apply(this,arguments)}function da(E){return ys.apply(this,arguments)}function ys(){return(ys=(0,T.Z)(function*(E){const p=oo(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class ho{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(D=>{this.isEventForConsumer(p,D)&&(m=!0,this.sendToConsumer(p,D),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function $l(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cu(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var D;if(p.error&&!cu(p)){const j=(null===(D=p.error.code)||void 0===D?void 0:D.split("auth/")[1])||"internal-error";m.onError(Ne(this.auth,j))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const D=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&D}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(fa(p))}saveEventToCache(p){this.cachedEventUids.add(fa(p)),this.lastProcessedEventTime=Date.now()}}function fa(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function cu({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Tl(E){return yc.apply(this,arguments)}function yc(){return(yc=(0,T.Z)(function*(E,p={}){return yn(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Sl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Al=/^https?/;function sd(){return(sd=(0,T.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield Tl(E);for(const m of p)try{if(_s(m))return}catch(D){}tt(E,"unauthorized-domain")})).apply(this,arguments)}function _s(E){const p=vt(),{protocol:m,hostname:D}=new URL(p);if(E.startsWith("chrome-extension://")){const De=new URL(E);return""===De.hostname&&""===D?"chrome-extension:"===m&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&De.hostname===D}if(!Al.test(m))return!1;if(Sl.test(E))return D===E;const j=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+j+"|"+j+")$","i").test(D)}const Kd=new cn(3e4,6e4);function ti(){const E=vr().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let Gl=null;function Ya(E){return Gl=Gl||function Jh(E){return new Promise((p,m)=>{var D,j,q;function De(){ti(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ti(),m(Ne(E,"network-request-failed"))},timeout:Kd.get()})}if(null===(j=null===(D=vr().gapi)||void 0===D?void 0:D.iframes)||void 0===j?void 0:j.Iframe)p(gapi.iframes.getContext());else{if(!(null===(q=vr().gapi)||void 0===q?void 0:q.load)){const Qe=tn("iframefcb");return vr()[Qe]=()=>{gapi.load?De():m(Ne(E,"network-request-failed"))},ms(`https://apis.google.com/js/api.js?onload=${Qe}`).catch(Rt=>m(Rt))}De()}}).catch(p=>{throw Gl=null,p})}(E),Gl}const xl=new cn(5e3,15e3),_c={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qd(E){const p=E.config;J(p.authDomain,E,"auth-domain-config-required");const m=p.emulator?qt(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,D={apiKey:p.apiKey,appName:E.name,v:ve.SDK_VERSION},j=vc.get(E.config.apiHost);j&&(D.eid=j);const q=E._getFrameworks();return q.length&&(D.fw=q.join(",")),`${m}?${(0,Q.xO)(D).slice(1)}`}function Wl(){return Wl=(0,T.Z)(function*(E){const p=yield Ya(E),m=vr().gapi;return J(m,E,"internal-error"),p.open({where:document.body,url:qd(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_c,dontclear:!0},D=>new Promise(function(){var j=(0,T.Z)(function*(q,De){yield D.restyle({setHideOnLeave:!1});const Qe=Ne(E,"network-request-failed"),Rt=vr().setTimeout(()=>{De(Qe)},xl.get());function Pt(){vr().clearTimeout(Rt),q(D)}D.ping(Pt).then(Pt,()=>{De(Qe)})});return function(q,De){return j.apply(this,arguments)}}()))}),Wl.apply(this,arguments)}const Zd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Qd{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function fu(E,p,m,D,j,q){J(E.config.authDomain,E,"auth-domain-config-required"),J(E.config.apiKey,E,"invalid-api-key");const De={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:D,v:ve.SDK_VERSION,eventId:j};if(p instanceof ci){p.setDefaultLanguage(E.languageCode),De.providerId=p.providerId||"",(0,Q.xb)(p.getCustomParameters())||(De.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Rt,Pt]of Object.entries(q||{}))De[Rt]=Pt}if(p instanceof Vs){const Rt=p.getScopes().filter(Pt=>""!==Pt);Rt.length>0&&(De.scopes=Rt.join(","))}E.tenantId&&(De.tid=E.tenantId);const Qe=De;for(const Rt of Object.keys(Qe))void 0===Qe[Rt]&&delete Qe[Rt];return`${function Jd({config:E}){return E.emulator?qt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,Q.xO)(Qe).slice(1)}`}const Aa="webStorageSupport";class Ec extends class np{constructor(p){this.factorId=p}_process(p,m,D){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,D);case"signin":return this._finalizeSignIn(p,m.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ec(p)}_finalizeEnroll(p,m,D){return function ps(E,p){return yn(E,"POST","/v2/accounts/mfaEnrollment:finalize",sn(E,p))}(p,{idToken:m,displayName:D,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Qt(E,p){return yn(E,"POST","/v2/accounts/mfaSignIn:finalize",sn(E,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wc=(()=>{class E{constructor(){}static assertion(m){return Ec._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var Ic="@firebase/auth";class ga{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,T.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(D=>{var j;p((null===(j=D)||void 0===j?void 0:j.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Zo(){return window}function xa(){return(xa=(0,T.Z)(function*(E,p,m){var D;const{BuildInfo:j}=Zo();oe(p.sessionId,"AuthEvent did not contain a session ID");const q=yield dd(p.sessionId),De={};return ui()?De.ibi=j.packageName:fi()?De.apn=j.packageName:tt(E,"operation-not-supported-in-this-environment"),j.displayName&&(De.appDisplayName=j.displayName),De.sessionId=q,fu(E,m,p.type,void 0,null!==(D=p.eventId)&&void 0!==D?D:void 0,De)})).apply(this,arguments)}function Kl(){return(Kl=(0,T.Z)(function*(E){const{BuildInfo:p}=Zo(),m={};ui()?m.iosBundleId=p.packageName:fi()?m.androidPackageName=p.packageName:tt(E,"operation-not-supported-in-this-environment"),yield Tl(E,m)})).apply(this,arguments)}function ol(){return(ol=(0,T.Z)(function*(E,p,m){const{cordova:D}=Zo();let j=()=>{};try{yield new Promise((q,De)=>{let Qe=null;function Rt(){var ln;q();const ai=null===(ln=D.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof ai&&ai(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Pt(){Qe||(Qe=window.setTimeout(()=>{De(Ne(E,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===(null==document?void 0:document.visibilityState)&&Pt()}p.addPassiveListener(Rt),document.addEventListener("resume",Pt,!1),fi()&&document.addEventListener("visibilitychange",_n,!1),j=()=>{p.removePassiveListener(Rt),document.removeEventListener("resume",Pt,!1),document.removeEventListener("visibilitychange",_n,!1),Qe&&window.clearTimeout(Qe)}})}finally{j()}})).apply(this,arguments)}function dd(E){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,T.Z)(function*(E){const p=pu(E),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(j=>j.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function pu(E){if(oe(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const p=new ArrayBuffer(E.length),m=new Uint8Array(p);for(let D=0;D<E.length;D++)m[D]=E.charCodeAt(D);return m}!function Cc(E){(0,ve._registerComponent)(new Pe.wA("auth",(p,{options:m})=>{const D=p.getProvider("app").getImmediate(),j=p.getProvider("heartbeat"),{apiKey:q,authDomain:De}=D.options;return((Qe,Rt)=>{J(q&&!q.includes(":"),"invalid-api-key",{appName:Qe.name}),J(!(null==De?void 0:De.includes(":")),"argument-error",{appName:Qe.name});const Pt={apiKey:q,authDomain:De,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xi(E)},_n=new bt(Qe,Rt,Pt);return function He(E,p){const m=(null==p?void 0:p.persistence)||[],D=(Array.isArray(m)?m:[m]).map(xe);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(D,null==p?void 0:p.popupRedirectResolver)}(_n,m),_n})(D,j)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,D)=>{p.getProvider("auth-internal").initialize()})),(0,ve._registerComponent)(new Pe.wA("auth-internal",p=>{const m=Ht(p.getProvider("auth").getImmediate());return new ga(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ve.registerVersion)(Ic,"0.20.3",function ud(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,ve.registerVersion)(Ic,"0.20.3","esm2017")}("Browser");class eh extends ho{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,T.Z)(function*(){yield p.initPromise})()}}function Ja(E){return al.apply(this,arguments)}function al(){return(al=(0,T.Z)(function*(E){const p=yield Pl()._get(bc(E));return p&&(yield Pl()._remove(bc(E))),p})).apply(this,arguments)}function Nl(){const E=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const D=Math.floor(Math.random()*p.length);E.push(p.charAt(D))}return E.join("")}function Pl(){return xe(Ca)}function bc(E){return Mr("authEvent",E.config.apiKey,E.name)}function dr(E){if(!(null==E?void 0:E.includes("?")))return{};const[p,...m]=E.split("?");return(0,Q.zd)(m.join("?"))}function hd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ne("no-auth-event")}}function _u(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function Ra(E=(0,Q.z$)()){return!("file:"!==_u()&&"ionic:"!==_u()&&"capacitor:"!==_u()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function ll(){try{const E=self.localStorage,p=oo();if(E)return E.setItem(p,"1"),E.removeItem(p),!function Jn(E=(0,Q.z$)()){return function Qs(){return(0,Q.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ei(E=(0,Q.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,Q.hl)()}catch(E){return Hi()&&(0,Q.hl)()}return!1}function Hi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Js(){return(function sf(){return"http:"===_u()||"https:"===_u()}()||(0,Q.ru)()||Ra())&&!function ku(){return(0,Q.b$)()||(0,Q.UG)()}()&&ll()&&!Hi()}function Ll(){return Ra()&&"undefined"!=typeof document}function Lu(){return(Lu=(0,T.Z)(function*(){return!!Ll()&&new Promise(E=>{const p=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),E(!0)})})})).apply(this,arguments)}const Ao={LOCAL:"local",NONE:"none",SESSION:"session"},fo=J,ql="persistence";function pd(E){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,T.Z)(function*(E){yield E._initializationPromise;const p=nh(),m=Mr(ql,E.config.apiKey,E.name);p&&p.setItem(m,E._getPersistence())})).apply(this,arguments)}function nh(){var E;try{return(null===(E=function Fl(){return"undefined"!=typeof window?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch(p){return null}}const Zl=J;class Xs{constructor(){this.browserResolver=xe(class ad{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jr,this._completeRedirectFn=Vi,this._overrideRedirectResult=F}_openPopup(p,m,D,j){var q=this;return(0,T.Z)(function*(){var De;oe(null===(De=q.eventManagers[p._key()])||void 0===De?void 0:De.manager,"_initialize() not called before _openPopup()");const Qe=fu(p,m,D,vt(),j);return function ef(E,p,m,D=500,j=600){const q=Math.max((window.screen.availHeight-j)/2,0).toString(),De=Math.max((window.screen.availWidth-D)/2,0).toString();let Qe="";const Rt=Object.assign(Object.assign({},Zd),{width:D.toString(),height:j.toString(),top:q,left:De}),Pt=(0,Q.z$)().toLowerCase();m&&(Qe=En(Pt)?"_blank":m),Ai(Pt)&&(p=p||"http://localhost",Rt.scrollbars="yes");const _n=Object.entries(Rt).reduce((ai,[eo,to])=>`${ai}${eo}=${to},`,"");if(function Os(E=(0,Q.z$)()){var p;return ui(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Pt)&&"_self"!==Qe)return function du(E,p){const m=document.createElement("a");m.href=E,m.target=p;const D=document.createEvent("MouseEvent");D.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(D)}(p||"",Qe),new Qd(null);const ln=window.open(p||"",Qe,_n);J(ln,E,"popup-blocked");try{ln.focus()}catch(ai){}return new Qd(ln)}(p,Qe,oo())})()}_openRedirect(p,m,D,j){var q=this;return(0,T.Z)(function*(){return yield q._originValidation(p),function Da(E){vr().location.href=E}(fu(p,m,D,vt(),j)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:j,promise:q}=this.eventManagers[m];return j?Promise.resolve(j):(oe(q,"If manager is not set, promise should be"),q)}const D=this.initAndGetManager(p);return this.eventManagers[m]={promise:D},D.catch(()=>{delete this.eventManagers[m]}),D}initAndGetManager(p){var m=this;return(0,T.Z)(function*(){const D=yield function ji(E){return Wl.apply(this,arguments)}(p),j=new ho(p);return D.register("authEvent",q=>(J(null==q?void 0:q.authEvent,p,"invalid-auth-event"),{status:j.onEvent(q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:j},m.iframes[p._key()]=D,j})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Aa,{type:Aa},j=>{var q;const De=null===(q=null==j?void 0:j[0])||void 0===q?void 0:q[Aa];void 0!==De&&m(!!De),tt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function id(E){return sd.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return li()||Qi()||ui()}}),this.cordovaResolver=xe(class rf{constructor(){this._redirectPersistence=jr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Vi,this._overrideRedirectResult=F}_initialize(p){var m=this;return(0,T.Z)(function*(){const D=p._key();let j=m.eventManagers.get(D);return j||(j=new eh(p),m.eventManagers.set(D,j),m.attachCallbackListeners(p,j)),j})()}_openPopup(p){tt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,D,j){var q=this;return(0,T.Z)(function*(){!function nf(E){var p,m,D,j,q,De,Qe,Rt,Pt,_n;const ln=Zo();J("function"==typeof(null===(p=null==ln?void 0:ln.universalLinks)||void 0===p?void 0:p.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),J(void 0!==(null===(m=null==ln?void 0:ln.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),J("function"==typeof(null===(q=null===(j=null===(D=null==ln?void 0:ln.cordova)||void 0===D?void 0:D.plugins)||void 0===j?void 0:j.browsertab)||void 0===q?void 0:q.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(Rt=null===(Qe=null===(De=null==ln?void 0:ln.cordova)||void 0===De?void 0:De.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===Rt?void 0:Rt.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),J("function"==typeof(null===(_n=null===(Pt=null==ln?void 0:ln.cordova)||void 0===Pt?void 0:Pt.InAppBrowser)||void 0===_n?void 0:_n.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const De=yield q._initialize(p);yield De.initialized(),De.resetRedirect(),function P(){Lr.clear()}(),yield q._originValidation(p);const Qe=function gu(E,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Nl(),postBody:null,tenantId:E.tenantId,error:Ne(E,"no-auth-event")}}(p,D,j);yield function mu(E,p){return Pl()._set(bc(E),p)}(p,Qe);const Rt=yield function ma(E,p,m){return xa.apply(this,arguments)}(p,Qe,m),Pt=yield function cd(E){const{cordova:p}=Zo();return new Promise(m=>{p.plugins.browsertab.isAvailable(D=>{let j=null;D?p.plugins.browsertab.openUrl(E):j=p.InAppBrowser.open(E,function Oo(E=(0,Q.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(j)})})}(Rt);return function tf(E,p,m){return ol.apply(this,arguments)}(p,De,Pt)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function ld(E){return Kl.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:D,handleOpenURL:j,BuildInfo:q}=Zo(),De=setTimeout((0,T.Z)(function*(){yield Ja(p),m.onEvent(hd())}),500),Qe=function(){var _n=(0,T.Z)(function*(ln){clearTimeout(De);const ai=yield Ja(p);let eo=null;ai&&(null==ln?void 0:ln.url)&&(eo=function th(E,p){var m,D;const j=function Tc(E){const p=dr(E),m=p.link?decodeURIComponent(p.link):void 0,D=dr(m).link,j=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return dr(j).link||j||D||m||E}(p);if(j.includes("/__/auth/callback")){const q=dr(j),De=q.firebaseError?function $r(E){try{return JSON.parse(E)}catch(p){return null}}(decodeURIComponent(q.firebaseError)):null,Qe=null===(D=null===(m=null==De?void 0:De.code)||void 0===m?void 0:m.split("auth/"))||void 0===D?void 0:D[1],Rt=Qe?Ne(Qe):null;return Rt?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:Rt,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:j,postBody:null}}return null}(ai,ln.url)),m.onEvent(eo||hd())});return function(ai){return _n.apply(this,arguments)}}();void 0!==D&&"function"==typeof D.subscribe&&D.subscribe(null,Qe);const Rt=j,Pt=`${q.packageName.toLowerCase()}://`;Zo().handleOpenURL=function(){var _n=(0,T.Z)(function*(ln){if(ln.toLowerCase().startsWith(Pt)&&Qe({url:ln}),"function"==typeof Rt)try{Rt(ln)}catch(ai){console.error(ai)}});return function(ln){return _n.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=jr,this._completeRedirectFn=Vi,this._overrideRedirectResult=F}_initialize(p){var m=this;return(0,T.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,D,j){var q=this;return(0,T.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openPopup(p,m,D,j)})()}_openRedirect(p,m,D,j){var q=this;return(0,T.Z)(function*(){return yield q.selectUnderlyingResolver(),q.assertedUnderlyingResolver._openRedirect(p,m,D,j)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Ll()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Zl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,T.Z)(function*(){if(p.underlyingResolver)return;const m=yield function So(){return Lu.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function Uu(E){return E.unwrap()}function Vu(E){return Yl(E)}function Yl(E){const{_tokenResponse:p}=E instanceof Q.ZR?E.customData:E;if(!p)return null;if(!(E instanceof Q.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ki.credentialFromResult(E);const m=p.providerId;if(!m||"password"===m)return null;let D;switch(m){case"google.com":D=ea;break;case"facebook.com":D=ko;break;case"github.com":D=As;break;case"twitter.com":D=ta;break;default:const{oauthIdToken:j,oauthAccessToken:q,oauthTokenSecret:De,pendingToken:Qe,nonce:Rt}=p;return q||De||j||Qe?Qe?m.startsWith("saml.")?Nr._create(m,Qe):fe._fromParams({providerId:m,signInMethod:m,pendingToken:Qe,idToken:j,accessToken:q}):new ls(m).credential({idToken:j,accessToken:q,rawNonce:Rt}):null}return E instanceof Q.ZR?D.credentialFromError(E):D.credentialFromResult(E)}function po(E,p){return p.catch(m=>{throw m instanceof Q.ZR&&function Bu(E,p){var m;const D=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===p.code)p.resolver=new gd(E,function xn(E,p){var m;const D=(0,Q.m9)(E),j=p;return J(p.customData.operationType,D,"argument-error"),J(null===(m=j.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,D,"argument-error"),ua._fromError(D,j)}(E,p));else if(D){const j=Yl(p),q=p;j&&(q.credential=j,q.tenantId=D.tenantId||void 0,q.email=D.email||void 0,q.phoneNumber=D.phoneNumber||void 0)}}(E,m),m}).then(m=>{const j=m.user;return{operationType:m.operationType,credential:Vu(m),additionalUserInfo:is(m),user:vu.getOrCreate(j)}})}function xc(E,p){return cl.apply(this,arguments)}function cl(){return(cl=(0,T.Z)(function*(E,p){const m=yield p;return{verificationId:m.verificationId,confirm:D=>po(E,m.confirm(D))}})).apply(this,arguments)}class gd{constructor(p,m){this.resolver=m,this.auth=function Ul(E){return E.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return po(Uu(this.auth),this.resolver.resolveSignIn(p))}}class vu{constructor(p){this._delegate=p,this.multiFactor=function Ga(E){const p=(0,Q.m9)(E);return Ks.has(p)||Ks.set(p,$a._fromUser(p)),Ks.get(p)}(p)}static getOrCreate(p){return vu.USER_MAP.has(p)||vu.USER_MAP.set(p,new vu(p)),vu.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,T.Z)(function*(){return po(m.auth,Cn(m._delegate,p))})()}linkWithPhoneNumber(p,m){var D=this;return(0,T.Z)(function*(){return xc(D.auth,function mc(E,p,m){return ca.apply(this,arguments)}(D._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,T.Z)(function*(){return po(m.auth,function Ci(E,p,m){return jn.apply(this,arguments)}(m._delegate,p,Xs))})()}linkWithRedirect(p){var m=this;return(0,T.Z)(function*(){return yield pd(Ht(m.auth)),function Gn(E,p,m){return function en(E,p,m){return Fr.apply(this,arguments)}(E,p,m)}(m._delegate,p,Xs)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,T.Z)(function*(){return po(m.auth,Pr(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return xc(this.auth,function os(E,p,m){return Be.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return po(this.auth,function Hr(E,p,m){return Za.apply(this,arguments)}(this._delegate,p,Xs))}reauthenticateWithRedirect(p){var m=this;return(0,T.Z)(function*(){return yield pd(Ht(m.auth)),function ft(E,p,m){return function nn(E,p,m){return vn.apply(this,arguments)}(E,p,m)}(m._delegate,p,Xs)})()}sendEmailVerification(p){return function Su(E,p){return Or.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,T.Z)(function*(){return yield function Eo(E,p){return Un.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function Au(E,p){return so((0,Q.m9)(E),p,null)}(this._delegate,p)}updatePassword(p){return function Uo(E,p){return so((0,Q.m9)(E),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function lu(E,p){return uo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function ja(E,p){return Ha.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function ru(E,p,m){return iu.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}vu.USER_MAP=new WeakMap;const Eu=J;let ju=(()=>{class E{constructor(m,D){if(this.app=m,D.isInitialized())return this._delegate=D.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:j}=m.options;Eu(j,"invalid-api-key",{appName:m.name}),Eu(j,"invalid-api-key",{appName:m.name});const q="undefined"!=typeof window?Xs:void 0;this._delegate=D.initialize({options:{persistence:of(j,m.name),popupRedirectResolver:q}}),this._delegate._updateErrorMap(st),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?vu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,D){!function ni(E,p,m){const D=Ht(E);J(D._canInitEmulator,D,"emulator-config-failed"),J(/^https?:\/\//.test(p),D,"invalid-emulator-scheme");const j=!!(null==m?void 0:m.disableWarnings),q=Xi(p),{host:De,port:Qe}=function Sr(E){const p=Xi(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!m)return{host:"",port:null};const D=m[2].split("@").pop()||"",j=/^(\[[^\]]+\])(:|$)/.exec(D);if(j){const q=j[1];return{host:q,port:es(D.substr(q.length+1))}}{const[q,De]=D.split(":");return{host:q,port:es(De)}}}(p);D.config.emulator={url:`${q}//${De}${null===Qe?"":`:${Qe}`}/`},D.settings.appVerificationDisabledForTesting=!0,D.emulatorConfig=Object.freeze({host:De,port:Qe,protocol:q.replace(":",""),options:Object.freeze({disableWarnings:j})}),j||function ar(){function E(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,m,D)}applyActionCode(m){return function gt(E,p){return Vn.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Va(this._delegate,m)}confirmPasswordReset(m,D){return function Tu(E,p,m){return Ua.apply(this,arguments)}(this._delegate,m,D)}createUserWithEmailAndPassword(m,D){var j=this;return(0,T.Z)(function*(){return po(j._delegate,function Hs(E,p,m){return wo.apply(this,arguments)}(j._delegate,m,D))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Gs(E,p){return Ki.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function sa(E,p){const m=Ss.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,T.Z)(function*(){Eu(Js(),m._delegate,"operation-not-supported-in-this-environment");const D=yield function oi(E,p){return Ys.apply(this,arguments)}(m._delegate,Xs);return D?po(m._delegate,Promise.resolve(D)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Sc(E,p){Ht(E)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,D,j){const{next:q,error:De,complete:Qe}=md(m,D,j);return this._delegate.onAuthStateChanged(q,De,Qe)}onIdTokenChanged(m,D,j){const{next:q,error:De,complete:Qe}=md(m,D,j);return this._delegate.onIdTokenChanged(q,De,Qe)}sendSignInLinkToEmail(m,D){return function jl(E,p,m){return nl.apply(this,arguments)}(this._delegate,m,D)}sendPasswordResetEmail(m,D){return function io(E,p,m){return wa.apply(this,arguments)}(this._delegate,m,D||void 0)}setPersistence(m){var D=this;return(0,T.Z)(function*(){let j;switch(function Fu(E,p){fo(Object.values(Ao).includes(p),E,"invalid-persistence-type"),(0,Q.b$)()?fo(p!==Ao.SESSION,E,"unsupported-persistence-type"):(0,Q.UG)()?fo(p===Ao.NONE,E,"unsupported-persistence-type"):Hi()?fo(p===Ao.NONE||p===Ao.LOCAL&&(0,Q.hl)(),E,"unsupported-persistence-type"):fo(p===Ao.NONE||ll(),E,"unsupported-persistence-type")}(D._delegate,m),m){case Ao.SESSION:j=jr;break;case Ao.LOCAL:j=(yield xe(Bt)._isAvailable())?Bt:Ca;break;case Ao.NONE:j=dn;break;default:return tt("argument-error",{appName:D._delegate.name})}return D._delegate.setPersistence(j)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return po(this._delegate,function cs(E){return vo.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return po(this._delegate,an(this._delegate,m))}signInWithCustomToken(m){return po(this._delegate,function _i(E,p){return zt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,D){return po(this._delegate,function $s(E,p,m){return an((0,Q.m9)(E),Fa.credential(p,m))}(this._delegate,m,D))}signInWithEmailLink(m,D){return po(this._delegate,function oa(E,p,m){return Qr.apply(this,arguments)}(this._delegate,m,D))}signInWithPhoneNumber(m,D){return xc(this._delegate,function uu(E,p,m){return qa.apply(this,arguments)}(this._delegate,m,D))}signInWithPopup(m){var D=this;return(0,T.Z)(function*(){return Eu(Js(),D._delegate,"operation-not-supported-in-this-environment"),po(D._delegate,function Fi(E,p,m){return Ko.apply(this,arguments)}(D._delegate,m,Xs))})()}signInWithRedirect(m){var D=this;return(0,T.Z)(function*(){return Eu(Js(),D._delegate,"operation-not-supported-in-this-environment"),yield pd(D._delegate),function Te(E,p,m){return function Ue(E,p,m){return yt.apply(this,arguments)}(E,p,m)}(D._delegate,m,Xs)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function ia(E,p){return js.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=Ao,E})();function md(E,p,m){let D=E;"function"!=typeof E&&({next:D,error:p,complete:m}=E);const j=D;return{next:De=>j(De&&vu.getOrCreate(De)),error:p,complete:m}}function of(E,p){const m=function Ln(E,p){const m=nh();if(!m)return[];const D=Mr(ql,E,p);switch(m.getItem(D)){case Ao.NONE:return[dn];case Ao.LOCAL:return[Bt,jr];case Ao.SESSION:return[jr];default:return[]}}(E,p);if("undefined"!=typeof self&&!m.includes(Bt)&&m.push(Bt),"undefined"!=typeof window)for(const D of[Ca,jr])m.includes(D)||m.push(D);return m.includes(dn)||m.push(dn),m}class Zi{constructor(){this.providerId="phone",this._delegate=new ki(Uu(Y.Z.auth()))}static credential(p,m){return ki.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Zi.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,Zi.PROVIDER_ID=ki.PROVIDER_ID;const Ql=J;class Jl{constructor(p,m,D=Y.Z.app()){var j;Ql(null===(j=D.options)||void 0===j?void 0:j.apiKey,"invalid-api-key",{appName:D.name}),this._delegate=new Nu(p,m,D.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function as(E){E.INTERNAL.registerComponent(new Pe.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),D=p.getProvider("auth");return new ju(m,D)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fa,FacebookAuthProvider:ko,GithubAuthProvider:As,GoogleAuthProvider:ea,OAuthProvider:ls,SAMLAuthProvider:Br,PhoneAuthProvider:Zi,PhoneMultiFactorGenerator:wc,RecaptchaVerifier:Jl,TwitterAuthProvider:ta,Auth:ju,AuthCredential:Ri,Error:Q.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.2.16")}(Y.Z)},1135:(Mt,Ve,V)=>{V.d(Ve,{X:()=>Y});var T=V(7579);class Y extends T.x{constructor(ve){super(),this._value=ve}get value(){return this.getValue()}_subscribe(ve){const Ee=super._subscribe(ve);return!Ee.closed&&ve.next(this._value),Ee}getValue(){const{hasError:ve,thrownError:Ee,_value:be}=this;if(ve)throw Ee;return this._throwIfClosed(),be}next(ve){super.next(this._value=ve)}}},8306:(Mt,Ve,V)=>{V.d(Ve,{y:()=>le});var T=V(930),Y=V(727),Q=V(8822),ve=V(4671);var Pe=V(2416),Me=V(576),Oe=V(2806);let le=(()=>{class nt{constructor(Dt){Dt&&(this._subscribe=Dt)}lift(Dt){const Ge=new nt;return Ge.source=this,Ge.operator=Dt,Ge}subscribe(Dt,Ge,et){const Ie=function Ct(nt){return nt&&nt instanceof T.Lv||function Ae(nt){return nt&&(0,Me.m)(nt.next)&&(0,Me.m)(nt.error)&&(0,Me.m)(nt.complete)}(nt)&&(0,Y.Nn)(nt)}(Dt)?Dt:new T.Hp(Dt,Ge,et);return(0,Oe.x)(()=>{const{operator:At,source:tt}=this;Ie.add(At?At.call(Ie,tt):tt?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(Dt){try{return this._subscribe(Dt)}catch(Ge){Dt.error(Ge)}}forEach(Dt,Ge){return new(Ge=ae(Ge))((et,Ie)=>{const At=new T.Hp({next:tt=>{try{Dt(tt)}catch(Ne){Ie(Ne),At.unsubscribe()}},error:Ie,complete:et});this.subscribe(At)})}_subscribe(Dt){var Ge;return null===(Ge=this.source)||void 0===Ge?void 0:Ge.subscribe(Dt)}[Q.L](){return this}pipe(...Dt){return function be(nt){return 0===nt.length?ve.y:1===nt.length?nt[0]:function(Dt){return nt.reduce((Ge,et)=>et(Ge),Dt)}}(Dt)(this)}toPromise(Dt){return new(Dt=ae(Dt))((Ge,et)=>{let Ie;this.subscribe(At=>Ie=At,At=>et(At),()=>Ge(Ie))})}}return nt.create=st=>new nt(st),nt})();function ae(nt){var st;return null!==(st=null!=nt?nt:Pe.v.Promise)&&void 0!==st?st:Promise}},7579:(Mt,Ve,V)=>{V.d(Ve,{x:()=>Pe});var T=V(8306),Y=V(727);const ve=(0,V(3888).d)(Oe=>function(){Oe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=V(8737),be=V(2806);let Pe=(()=>{class Oe extends T.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ae){const Ae=new Me(this,this);return Ae.operator=ae,Ae}_throwIfClosed(){if(this.closed)throw new ve}next(ae){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ae of this.currentObservers)Ae.next(ae)}})}error(ae){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ae;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().error(ae)}})}complete(){(0,be.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ae}=this;for(;ae.length;)ae.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ae;return(null===(ae=this.observers)||void 0===ae?void 0:ae.length)>0}_trySubscribe(ae){return this._throwIfClosed(),super._trySubscribe(ae)}_subscribe(ae){return this._throwIfClosed(),this._checkFinalizedStatuses(ae),this._innerSubscribe(ae)}_innerSubscribe(ae){const{hasError:Ae,isStopped:Ct,observers:nt}=this;return Ae||Ct?Y.Lc:(this.currentObservers=null,nt.push(ae),new Y.w0(()=>{this.currentObservers=null,(0,Ee.P)(nt,ae)}))}_checkFinalizedStatuses(ae){const{hasError:Ae,thrownError:Ct,isStopped:nt}=this;Ae?ae.error(Ct):nt&&ae.complete()}asObservable(){const ae=new T.y;return ae.source=this,ae}}return Oe.create=(le,ae)=>new Me(le,ae),Oe})();class Me extends Pe{constructor(le,ae){super(),this.destination=le,this.source=ae}next(le){var ae,Ae;null===(Ae=null===(ae=this.destination)||void 0===ae?void 0:ae.next)||void 0===Ae||Ae.call(ae,le)}error(le){var ae,Ae;null===(Ae=null===(ae=this.destination)||void 0===ae?void 0:ae.error)||void 0===Ae||Ae.call(ae,le)}complete(){var le,ae;null===(ae=null===(le=this.destination)||void 0===le?void 0:le.complete)||void 0===ae||ae.call(le)}_subscribe(le){var ae,Ae;return null!==(Ae=null===(ae=this.source)||void 0===ae?void 0:ae.subscribe(le))&&void 0!==Ae?Ae:Y.Lc}}},930:(Mt,Ve,V)=>{V.d(Ve,{Hp:()=>Dt,Lv:()=>Ae});var T=V(576),Y=V(727),Q=V(2416),ve=V(7849),Ee=V(5032);const be=Oe("C",void 0,void 0);function Oe(tt,Ne,ke){return{kind:tt,value:Ne,error:ke}}var le=V(3410),ae=V(2806);class Ae extends Y.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,Y.Nn)(Ne)&&Ne.add(this)):this.destination=At}static create(Ne,ke,Tt){return new Dt(Ne,ke,Tt)}next(Ne){this.isStopped?Ie(function Me(tt){return Oe("N",tt,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Ie(function Pe(tt){return Oe("E",void 0,tt)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Ie(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ct=Function.prototype.bind;function nt(tt,Ne){return Ct.call(tt,Ne)}class st{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:ke}=this;if(ke.next)try{ke.next(Ne)}catch(Tt){Ge(Tt)}}error(Ne){const{partialObserver:ke}=this;if(ke.error)try{ke.error(Ne)}catch(Tt){Ge(Tt)}else Ge(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(ke){Ge(ke)}}}class Dt extends Ae{constructor(Ne,ke,Tt){let wt;if(super(),(0,T.m)(Ne)||!Ne)wt={next:null!=Ne?Ne:void 0,error:null!=ke?ke:void 0,complete:null!=Tt?Tt:void 0};else{let J;this&&Q.v.useDeprecatedNextContext?(J=Object.create(Ne),J.unsubscribe=()=>this.unsubscribe(),wt={next:Ne.next&&nt(Ne.next,J),error:Ne.error&&nt(Ne.error,J),complete:Ne.complete&&nt(Ne.complete,J)}):wt=Ne}this.destination=new st(wt)}}function Ge(tt){Q.v.useDeprecatedSynchronousErrorHandling?(0,ae.O)(tt):(0,ve.h)(tt)}function Ie(tt,Ne){const{onStoppedNotification:ke}=Q.v;ke&&le.z.setTimeout(()=>ke(tt,Ne))}const At={closed:!0,next:Ee.Z,error:function et(tt){throw tt},complete:Ee.Z}},727:(Mt,Ve,V)=>{V.d(Ve,{Lc:()=>be,w0:()=>Ee,Nn:()=>Pe});var T=V(576);const Q=(0,V(3888).d)(Oe=>function(ae){Oe(this),this.message=ae?`${ae.length} errors occurred during unsubscription:\n${ae.map((Ae,Ct)=>`${Ct+1}) ${Ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ae});var ve=V(8737);class Ee{constructor(le){this.initialTeardown=le,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let le;if(!this.closed){this.closed=!0;const{_parentage:ae}=this;if(ae)if(this._parentage=null,Array.isArray(ae))for(const nt of ae)nt.remove(this);else ae.remove(this);const{initialTeardown:Ae}=this;if((0,T.m)(Ae))try{Ae()}catch(nt){le=nt instanceof Q?nt.errors:[nt]}const{_finalizers:Ct}=this;if(Ct){this._finalizers=null;for(const nt of Ct)try{Me(nt)}catch(st){le=null!=le?le:[],st instanceof Q?le=[...le,...st.errors]:le.push(st)}}if(le)throw new Q(le)}}add(le){var ae;if(le&&le!==this)if(this.closed)Me(le);else{if(le instanceof Ee){if(le.closed||le._hasParent(this))return;le._addParent(this)}(this._finalizers=null!==(ae=this._finalizers)&&void 0!==ae?ae:[]).push(le)}}_hasParent(le){const{_parentage:ae}=this;return ae===le||Array.isArray(ae)&&ae.includes(le)}_addParent(le){const{_parentage:ae}=this;this._parentage=Array.isArray(ae)?(ae.push(le),ae):ae?[ae,le]:le}_removeParent(le){const{_parentage:ae}=this;ae===le?this._parentage=null:Array.isArray(ae)&&(0,ve.P)(ae,le)}remove(le){const{_finalizers:ae}=this;ae&&(0,ve.P)(ae,le),le instanceof Ee&&le._removeParent(this)}}Ee.EMPTY=(()=>{const Oe=new Ee;return Oe.closed=!0,Oe})();const be=Ee.EMPTY;function Pe(Oe){return Oe instanceof Ee||Oe&&"closed"in Oe&&(0,T.m)(Oe.remove)&&(0,T.m)(Oe.add)&&(0,T.m)(Oe.unsubscribe)}function Me(Oe){(0,T.m)(Oe)?Oe():Oe.unsubscribe()}},2416:(Mt,Ve,V)=>{V.d(Ve,{v:()=>T});const T={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Mt,Ve,V)=>{V.d(Ve,{z:()=>Ee});var T=V(8189),Q=V(7669),ve=V(8996);function Ee(...be){return function Y(){return(0,T.J)(1)}()((0,ve.D)(be,(0,Q.yG)(be)))}},515:(Mt,Ve,V)=>{V.d(Ve,{E:()=>Y});const Y=new(V(8306).y)(Ee=>Ee.complete())},8996:(Mt,Ve,V)=>{V.d(Ve,{D:()=>Ne});var T=V(8421),Y=V(5363),Q=V(9468),be=V(8306),Me=V(2202),Oe=V(576),le=V(9672);function Ae(ke,Tt){if(!ke)throw new Error("Iterable cannot be null");return new be.y(wt=>{(0,le.f)(wt,Tt,()=>{const J=ke[Symbol.asyncIterator]();(0,le.f)(wt,Tt,()=>{J.next().then(Ze=>{Ze.done?wt.complete():wt.next(Ze.value)})},0,!0)})})}var Ct=V(3670),nt=V(8239),st=V(1144),Dt=V(6495),Ge=V(2206),et=V(4532),Ie=V(3260);function Ne(ke,Tt){return Tt?function tt(ke,Tt){if(null!=ke){if((0,Ct.c)(ke))return function ve(ke,Tt){return(0,T.Xf)(ke).pipe((0,Q.R)(Tt),(0,Y.Q)(Tt))}(ke,Tt);if((0,st.z)(ke))return function Pe(ke,Tt){return new be.y(wt=>{let J=0;return Tt.schedule(function(){J===ke.length?wt.complete():(wt.next(ke[J++]),wt.closed||this.schedule())})})}(ke,Tt);if((0,nt.t)(ke))return function Ee(ke,Tt){return(0,T.Xf)(ke).pipe((0,Q.R)(Tt),(0,Y.Q)(Tt))}(ke,Tt);if((0,Ge.D)(ke))return Ae(ke,Tt);if((0,Dt.T)(ke))return function ae(ke,Tt){return new be.y(wt=>{let J;return(0,le.f)(wt,Tt,()=>{J=ke[Me.h](),(0,le.f)(wt,Tt,()=>{let Ze,oe;try{({value:Ze,done:oe}=J.next())}catch(Se){return void wt.error(Se)}oe?wt.complete():wt.next(Ze)},0,!0)}),()=>(0,Oe.m)(null==J?void 0:J.return)&&J.return()})}(ke,Tt);if((0,Ie.L)(ke))return function At(ke,Tt){return Ae((0,Ie.Q)(ke),Tt)}(ke,Tt)}throw(0,et.z)(ke)}(ke,Tt):(0,T.Xf)(ke)}},8421:(Mt,Ve,V)=>{V.d(Ve,{Xf:()=>Ct});var T=V(655),Y=V(1144),Q=V(8239),ve=V(8306),Ee=V(3670),be=V(2206),Pe=V(4532),Me=V(6495),Oe=V(3260),le=V(576),ae=V(7849),Ae=V(8822);function Ct(tt){if(tt instanceof ve.y)return tt;if(null!=tt){if((0,Ee.c)(tt))return function nt(tt){return new ve.y(Ne=>{const ke=tt[Ae.L]();if((0,le.m)(ke.subscribe))return ke.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(tt);if((0,Y.z)(tt))return function st(tt){return new ve.y(Ne=>{for(let ke=0;ke<tt.length&&!Ne.closed;ke++)Ne.next(tt[ke]);Ne.complete()})}(tt);if((0,Q.t)(tt))return function Dt(tt){return new ve.y(Ne=>{tt.then(ke=>{Ne.closed||(Ne.next(ke),Ne.complete())},ke=>Ne.error(ke)).then(null,ae.h)})}(tt);if((0,be.D)(tt))return et(tt);if((0,Me.T)(tt))return function Ge(tt){return new ve.y(Ne=>{for(const ke of tt)if(Ne.next(ke),Ne.closed)return;Ne.complete()})}(tt);if((0,Oe.L)(tt))return function Ie(tt){return et((0,Oe.Q)(tt))}(tt)}throw(0,Pe.z)(tt)}function et(tt){return new ve.y(Ne=>{(function At(tt,Ne){var ke,Tt,wt,J;return(0,T.mG)(this,void 0,void 0,function*(){try{for(ke=(0,T.KL)(tt);!(Tt=yield ke.next()).done;)if(Ne.next(Tt.value),Ne.closed)return}catch(Ze){wt={error:Ze}}finally{try{Tt&&!Tt.done&&(J=ke.return)&&(yield J.call(ke))}finally{if(wt)throw wt.error}}Ne.complete()})})(tt,Ne).catch(ke=>Ne.error(ke))})}},6451:(Mt,Ve,V)=>{V.d(Ve,{T:()=>be});var T=V(8189),Y=V(8421),Q=V(515),ve=V(7669),Ee=V(8996);function be(...Pe){const Me=(0,ve.yG)(Pe),Oe=(0,ve._6)(Pe,1/0),le=Pe;return le.length?1===le.length?(0,Y.Xf)(le[0]):(0,T.J)(Oe)((0,Ee.D)(le,Me)):Q.E}},9646:(Mt,Ve,V)=>{V.d(Ve,{of:()=>Q});var T=V(7669),Y=V(8996);function Q(...ve){const Ee=(0,T.yG)(ve);return(0,Y.D)(ve,Ee)}},5403:(Mt,Ve,V)=>{V.d(Ve,{x:()=>Y});var T=V(930);function Y(ve,Ee,be,Pe,Me){return new Q(ve,Ee,be,Pe,Me)}class Q extends T.Lv{constructor(Ee,be,Pe,Me,Oe,le){super(Ee),this.onFinalize=Oe,this.shouldUnsubscribe=le,this._next=be?function(ae){try{be(ae)}catch(Ae){Ee.error(Ae)}}:super._next,this._error=Me?function(ae){try{Me(ae)}catch(Ae){Ee.error(Ae)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(ae){Ee.error(ae)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:be}=this;super.unsubscribe(),!be&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},4351:(Mt,Ve,V)=>{V.d(Ve,{b:()=>Q});var T=V(5577),Y=V(576);function Q(ve,Ee){return(0,Y.m)(Ee)?(0,T.z)(ve,Ee,1):(0,T.z)(ve,1)}},6590:(Mt,Ve,V)=>{V.d(Ve,{d:()=>Q});var T=V(4482),Y=V(5403);function Q(ve){return(0,T.e)((Ee,be)=>{let Pe=!1;Ee.subscribe((0,Y.x)(be,Me=>{Pe=!0,be.next(Me)},()=>{Pe||be.next(ve),be.complete()}))})}},1884:(Mt,Ve,V)=>{V.d(Ve,{x:()=>ve});var T=V(4671),Y=V(4482),Q=V(5403);function ve(be,Pe=T.y){return be=null!=be?be:Ee,(0,Y.e)((Me,Oe)=>{let le,ae=!0;Me.subscribe((0,Q.x)(Oe,Ae=>{const Ct=Pe(Ae);(ae||!be(le,Ct))&&(ae=!1,le=Ct,Oe.next(Ae))}))})}function Ee(be,Pe){return be===Pe}},9300:(Mt,Ve,V)=>{V.d(Ve,{h:()=>Q});var T=V(4482),Y=V(5403);function Q(ve,Ee){return(0,T.e)((be,Pe)=>{let Me=0;be.subscribe((0,Y.x)(Pe,Oe=>ve.call(Ee,Oe,Me++)&&Pe.next(Oe)))})}},590:(Mt,Ve,V)=>{V.d(Ve,{P:()=>Pe});var T=V(6805),Y=V(9300),Q=V(5698),ve=V(6590),Ee=V(8068),be=V(4671);function Pe(Me,Oe){const le=arguments.length>=2;return ae=>ae.pipe(Me?(0,Y.h)((Ae,Ct)=>Me(Ae,Ct,ae)):be.y,(0,Q.q)(1),le?(0,ve.d)(Oe):(0,Ee.T)(()=>new T.K))}},4004:(Mt,Ve,V)=>{V.d(Ve,{U:()=>Q});var T=V(4482),Y=V(5403);function Q(ve,Ee){return(0,T.e)((be,Pe)=>{let Me=0;be.subscribe((0,Y.x)(Pe,Oe=>{Pe.next(ve.call(Ee,Oe,Me++))}))})}},8189:(Mt,Ve,V)=>{V.d(Ve,{J:()=>Q});var T=V(5577),Y=V(4671);function Q(ve=1/0){return(0,T.z)(Y.y,ve)}},5577:(Mt,Ve,V)=>{V.d(Ve,{z:()=>Me});var T=V(4004),Y=V(8421),Q=V(4482),ve=V(9672),Ee=V(5403),Pe=V(576);function Me(Oe,le,ae=1/0){return(0,Pe.m)(le)?Me((Ae,Ct)=>(0,T.U)((nt,st)=>le(Ae,nt,Ct,st))((0,Y.Xf)(Oe(Ae,Ct))),ae):("number"==typeof le&&(ae=le),(0,Q.e)((Ae,Ct)=>function be(Oe,le,ae,Ae,Ct,nt,st,Dt){const Ge=[];let et=0,Ie=0,At=!1;const tt=()=>{At&&!Ge.length&&!et&&le.complete()},Ne=Tt=>et<Ae?ke(Tt):Ge.push(Tt),ke=Tt=>{nt&&le.next(Tt),et++;let wt=!1;(0,Y.Xf)(ae(Tt,Ie++)).subscribe((0,Ee.x)(le,J=>{null==Ct||Ct(J),nt?Ne(J):le.next(J)},()=>{wt=!0},void 0,()=>{if(wt)try{for(et--;Ge.length&&et<Ae;){const J=Ge.shift();st?(0,ve.f)(le,st,()=>ke(J)):ke(J)}tt()}catch(J){le.error(J)}}))};return Oe.subscribe((0,Ee.x)(le,Ne,()=>{At=!0,tt()})),()=>{null==Dt||Dt()}}(Ae,Ct,Oe,ae)))}},5363:(Mt,Ve,V)=>{V.d(Ve,{Q:()=>ve});var T=V(9672),Y=V(4482),Q=V(5403);function ve(Ee,be=0){return(0,Y.e)((Pe,Me)=>{Pe.subscribe((0,Q.x)(Me,Oe=>(0,T.f)(Me,Ee,()=>Me.next(Oe),be),()=>(0,T.f)(Me,Ee,()=>Me.complete(),be),Oe=>(0,T.f)(Me,Ee,()=>Me.error(Oe),be)))})}},5026:(Mt,Ve,V)=>{V.d(Ve,{R:()=>ve});var T=V(4482),Y=V(5403);function Q(Ee,be,Pe,Me,Oe){return(le,ae)=>{let Ae=Pe,Ct=be,nt=0;le.subscribe((0,Y.x)(ae,st=>{const Dt=nt++;Ct=Ae?Ee(Ct,st,Dt):(Ae=!0,st),Me&&ae.next(Ct)},Oe&&(()=>{Ae&&ae.next(Ct),ae.complete()})))}}function ve(Ee,be){return(0,T.e)(Q(Ee,be,arguments.length>=2,!0))}},3099:(Mt,Ve,V)=>{V.d(Ve,{B:()=>be});var T=V(8996),Y=V(5698),Q=V(7579),ve=V(930),Ee=V(4482);function be(Me={}){const{connector:Oe=(()=>new Q.x),resetOnError:le=!0,resetOnComplete:ae=!0,resetOnRefCountZero:Ae=!0}=Me;return Ct=>{let nt=null,st=null,Dt=null,Ge=0,et=!1,Ie=!1;const At=()=>{null==st||st.unsubscribe(),st=null},tt=()=>{At(),nt=Dt=null,et=Ie=!1},Ne=()=>{const ke=nt;tt(),null==ke||ke.unsubscribe()};return(0,Ee.e)((ke,Tt)=>{Ge++,!Ie&&!et&&At();const wt=Dt=null!=Dt?Dt:Oe();Tt.add(()=>{Ge--,0===Ge&&!Ie&&!et&&(st=Pe(Ne,Ae))}),wt.subscribe(Tt),nt||(nt=new ve.Hp({next:J=>wt.next(J),error:J=>{Ie=!0,At(),st=Pe(tt,le,J),wt.error(J)},complete:()=>{et=!0,At(),st=Pe(tt,ae),wt.complete()}}),(0,T.D)(ke).subscribe(nt))})(Ct)}}function Pe(Me,Oe,...le){return!0===Oe?(Me(),null):!1===Oe?null:Oe(...le).pipe((0,Y.q)(1)).subscribe(()=>Me())}},8675:(Mt,Ve,V)=>{V.d(Ve,{O:()=>ve});var T=V(7272),Y=V(7669),Q=V(4482);function ve(...Ee){const be=(0,Y.yG)(Ee);return(0,Q.e)((Pe,Me)=>{(be?(0,T.z)(Ee,Pe,be):(0,T.z)(Ee,Pe)).subscribe(Me)})}},9468:(Mt,Ve,V)=>{V.d(Ve,{R:()=>Y});var T=V(4482);function Y(Q,ve=0){return(0,T.e)((Ee,be)=>{be.add(Q.schedule(()=>Ee.subscribe(be),ve))})}},3900:(Mt,Ve,V)=>{V.d(Ve,{w:()=>ve});var T=V(8421),Y=V(4482),Q=V(5403);function ve(Ee,be){return(0,Y.e)((Pe,Me)=>{let Oe=null,le=0,ae=!1;const Ae=()=>ae&&!Oe&&Me.complete();Pe.subscribe((0,Q.x)(Me,Ct=>{null==Oe||Oe.unsubscribe();let nt=0;const st=le++;(0,T.Xf)(Ee(Ct,st)).subscribe(Oe=(0,Q.x)(Me,Dt=>Me.next(be?be(Ct,Dt,st,nt++):Dt),()=>{Oe=null,Ae()}))},()=>{ae=!0,Ae()}))})}},5698:(Mt,Ve,V)=>{V.d(Ve,{q:()=>ve});var T=V(515),Y=V(4482),Q=V(5403);function ve(Ee){return Ee<=0?()=>T.E:(0,Y.e)((be,Pe)=>{let Me=0;be.subscribe((0,Q.x)(Pe,Oe=>{++Me<=Ee&&(Pe.next(Oe),Ee<=Me&&Pe.complete())}))})}},8505:(Mt,Ve,V)=>{V.d(Ve,{b:()=>Ee});var T=V(576),Y=V(4482),Q=V(5403),ve=V(4671);function Ee(be,Pe,Me){const Oe=(0,T.m)(be)||Pe||Me?{next:be,error:Pe,complete:Me}:be;return Oe?(0,Y.e)((le,ae)=>{var Ae;null===(Ae=Oe.subscribe)||void 0===Ae||Ae.call(Oe);let Ct=!0;le.subscribe((0,Q.x)(ae,nt=>{var st;null===(st=Oe.next)||void 0===st||st.call(Oe,nt),ae.next(nt)},()=>{var nt;Ct=!1,null===(nt=Oe.complete)||void 0===nt||nt.call(Oe),ae.complete()},nt=>{var st;Ct=!1,null===(st=Oe.error)||void 0===st||st.call(Oe,nt),ae.error(nt)},()=>{var nt,st;Ct&&(null===(nt=Oe.unsubscribe)||void 0===nt||nt.call(Oe)),null===(st=Oe.finalize)||void 0===st||st.call(Oe)}))}):ve.y}},8068:(Mt,Ve,V)=>{V.d(Ve,{T:()=>ve});var T=V(6805),Y=V(4482),Q=V(5403);function ve(be=Ee){return(0,Y.e)((Pe,Me)=>{let Oe=!1;Pe.subscribe((0,Q.x)(Me,le=>{Oe=!0,Me.next(le)},()=>Oe?Me.complete():Me.error(be())))})}function Ee(){return new T.K}},4408:(Mt,Ve,V)=>{V.d(Ve,{o:()=>Ee});var T=V(727);class Y extends T.w0{constructor(Pe,Me){super()}schedule(Pe,Me=0){return this}}const Q={setInterval(be,Pe,...Me){const{delegate:Oe}=Q;return(null==Oe?void 0:Oe.setInterval)?Oe.setInterval(be,Pe,...Me):setInterval(be,Pe,...Me)},clearInterval(be){const{delegate:Pe}=Q;return((null==Pe?void 0:Pe.clearInterval)||clearInterval)(be)},delegate:void 0};var ve=V(8737);class Ee extends Y{constructor(Pe,Me){super(Pe,Me),this.scheduler=Pe,this.work=Me,this.pending=!1}schedule(Pe,Me=0){if(this.closed)return this;this.state=Pe;const Oe=this.id,le=this.scheduler;return null!=Oe&&(this.id=this.recycleAsyncId(le,Oe,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(le,this.id,Me),this}requestAsyncId(Pe,Me,Oe=0){return Q.setInterval(Pe.flush.bind(Pe,this),Oe)}recycleAsyncId(Pe,Me,Oe=0){if(null!=Oe&&this.delay===Oe&&!1===this.pending)return Me;Q.clearInterval(Me)}execute(Pe,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Oe=this._execute(Pe,Me);if(Oe)return Oe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,Me){let le,Oe=!1;try{this.work(Pe)}catch(ae){Oe=!0,le=ae||new Error("Scheduled action threw falsy error")}if(Oe)return this.unsubscribe(),le}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:Me}=this,{actions:Oe}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ve.P)(Oe,this),null!=Pe&&(this.id=this.recycleAsyncId(Me,Pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Mt,Ve,V)=>{V.d(Ve,{v:()=>Q});var T=V(6063);class Y{constructor(Ee,be=Y.now){this.schedulerActionCtor=Ee,this.now=be}schedule(Ee,be=0,Pe){return new this.schedulerActionCtor(this,Ee).schedule(Pe,be)}}Y.now=T.l.now;class Q extends Y{constructor(Ee,be=Y.now){super(Ee,be),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ee){const{actions:be}=this;if(this._active)return void be.push(Ee);let Pe;this._active=!0;do{if(Pe=Ee.execute(Ee.state,Ee.delay))break}while(Ee=be.shift());if(this._active=!1,Pe){for(;Ee=be.shift();)Ee.unsubscribe();throw Pe}}}},4986:(Mt,Ve,V)=>{V.d(Ve,{z:()=>Q});var T=V(4408);const Q=new(V(7565).v)(T.o)},6063:(Mt,Ve,V)=>{V.d(Ve,{l:()=>T});const T={now:()=>(T.delegate||Date).now(),delegate:void 0}},3410:(Mt,Ve,V)=>{V.d(Ve,{z:()=>T});const T={setTimeout(Y,Q,...ve){const{delegate:Ee}=T;return(null==Ee?void 0:Ee.setTimeout)?Ee.setTimeout(Y,Q,...ve):setTimeout(Y,Q,...ve)},clearTimeout(Y){const{delegate:Q}=T;return((null==Q?void 0:Q.clearTimeout)||clearTimeout)(Y)},delegate:void 0}},2202:(Mt,Ve,V)=>{V.d(Ve,{h:()=>Y});const Y=function T(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Mt,Ve,V)=>{V.d(Ve,{L:()=>T});const T="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Mt,Ve,V)=>{V.d(Ve,{K:()=>Y});const Y=(0,V(3888).d)(Q=>function(){Q(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Mt,Ve,V)=>{V.d(Ve,{_6:()=>be,jO:()=>ve,yG:()=>Ee});var T=V(576);function Q(Pe){return Pe[Pe.length-1]}function ve(Pe){return(0,T.m)(Q(Pe))?Pe.pop():void 0}function Ee(Pe){return function Y(Pe){return Pe&&(0,T.m)(Pe.schedule)}(Q(Pe))?Pe.pop():void 0}function be(Pe,Me){return"number"==typeof Q(Pe)?Pe.pop():Me}},4742:(Mt,Ve,V)=>{V.d(Ve,{D:()=>Ee});const{isArray:T}=Array,{getPrototypeOf:Y,prototype:Q,keys:ve}=Object;function Ee(Pe){if(1===Pe.length){const Me=Pe[0];if(T(Me))return{args:Me,keys:null};if(function be(Pe){return Pe&&"object"==typeof Pe&&Y(Pe)===Q}(Me)){const Oe=ve(Me);return{args:Oe.map(le=>Me[le]),keys:Oe}}}return{args:Pe,keys:null}}},8737:(Mt,Ve,V)=>{function T(Y,Q){if(Y){const ve=Y.indexOf(Q);0<=ve&&Y.splice(ve,1)}}V.d(Ve,{P:()=>T})},3888:(Mt,Ve,V)=>{function T(Y){const ve=Y(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return ve.prototype=Object.create(Error.prototype),ve.prototype.constructor=ve,ve}V.d(Ve,{d:()=>T})},1810:(Mt,Ve,V)=>{function T(Y,Q){return Y.reduce((ve,Ee,be)=>(ve[Ee]=Q[be],ve),{})}V.d(Ve,{n:()=>T})},2806:(Mt,Ve,V)=>{V.d(Ve,{O:()=>ve,x:()=>Q});var T=V(2416);let Y=null;function Q(Ee){if(T.v.useDeprecatedSynchronousErrorHandling){const be=!Y;if(be&&(Y={errorThrown:!1,error:null}),Ee(),be){const{errorThrown:Pe,error:Me}=Y;if(Y=null,Pe)throw Me}}else Ee()}function ve(Ee){T.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Ee)}},9672:(Mt,Ve,V)=>{function T(Y,Q,ve,Ee=0,be=!1){const Pe=Q.schedule(function(){ve(),be?Y.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if(Y.add(Pe),!be)return Pe}V.d(Ve,{f:()=>T})},4671:(Mt,Ve,V)=>{function T(Y){return Y}V.d(Ve,{y:()=>T})},1144:(Mt,Ve,V)=>{V.d(Ve,{z:()=>T});const T=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(Mt,Ve,V)=>{V.d(Ve,{D:()=>Y});var T=V(576);function Y(Q){return Symbol.asyncIterator&&(0,T.m)(null==Q?void 0:Q[Symbol.asyncIterator])}},576:(Mt,Ve,V)=>{function T(Y){return"function"==typeof Y}V.d(Ve,{m:()=>T})},3670:(Mt,Ve,V)=>{V.d(Ve,{c:()=>Q});var T=V(8822),Y=V(576);function Q(ve){return(0,Y.m)(ve[T.L])}},6495:(Mt,Ve,V)=>{V.d(Ve,{T:()=>Q});var T=V(2202),Y=V(576);function Q(ve){return(0,Y.m)(null==ve?void 0:ve[T.h])}},8239:(Mt,Ve,V)=>{V.d(Ve,{t:()=>Y});var T=V(576);function Y(Q){return(0,T.m)(null==Q?void 0:Q.then)}},3260:(Mt,Ve,V)=>{V.d(Ve,{L:()=>ve,Q:()=>Q});var T=V(655),Y=V(576);function Q(Ee){return(0,T.FC)(this,arguments,function*(){const Pe=Ee.getReader();try{for(;;){const{value:Me,done:Oe}=yield(0,T.qq)(Pe.read());if(Oe)return yield(0,T.qq)(void 0);yield yield(0,T.qq)(Me)}}finally{Pe.releaseLock()}})}function ve(Ee){return(0,Y.m)(null==Ee?void 0:Ee.getReader)}},4482:(Mt,Ve,V)=>{V.d(Ve,{A:()=>Y,e:()=>Q});var T=V(576);function Y(ve){return(0,T.m)(null==ve?void 0:ve.lift)}function Q(ve){return Ee=>{if(Y(Ee))return Ee.lift(function(be){try{return ve(be,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Mt,Ve,V)=>{V.d(Ve,{Z:()=>ve});var T=V(4004);const{isArray:Y}=Array;function ve(Ee){return(0,T.U)(be=>function Q(Ee,be){return Y(be)?Ee(...be):Ee(be)}(Ee,be))}},5032:(Mt,Ve,V)=>{function T(){}V.d(Ve,{Z:()=>T})},7849:(Mt,Ve,V)=>{V.d(Ve,{h:()=>Q});var T=V(2416),Y=V(3410);function Q(ve){Y.z.setTimeout(()=>{const{onUnhandledError:Ee}=T.v;if(!Ee)throw ve;Ee(ve)})}},4532:(Mt,Ve,V)=>{function T(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Ve,{z:()=>T})},655:(Mt,Ve,V)=>{function ve(oe,Se){var xe={};for(var We in oe)Object.prototype.hasOwnProperty.call(oe,We)&&Se.indexOf(We)<0&&(xe[We]=oe[We]);if(null!=oe&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(We=Object.getOwnPropertySymbols(oe);He<We.length;He++)Se.indexOf(We[He])<0&&Object.prototype.propertyIsEnumerable.call(oe,We[He])&&(xe[We[He]]=oe[We[He]])}return xe}function Me(oe,Se,xe,We){return new(xe||(xe=Promise))(function(vt,Nt){function xt(cn){try{lt(We.next(cn))}catch(qt){Nt(qt)}}function Ut(cn){try{lt(We.throw(cn))}catch(qt){Nt(qt)}}function lt(cn){cn.done?vt(cn.value):function He(vt){return vt instanceof xe?vt:new xe(function(Nt){Nt(vt)})}(cn.value).then(xt,Ut)}lt((We=We.apply(oe,Se||[])).next())})}function Ge(oe){return this instanceof Ge?(this.v=oe,this):new Ge(oe)}function et(oe,Se,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,We=xe.apply(oe,Se||[]),vt=[];return He={},Nt("next"),Nt("throw"),Nt("return"),He[Symbol.asyncIterator]=function(){return this},He;function Nt(Wt){We[Wt]&&(He[Wt]=function(jt){return new Promise(function(pn,sn){vt.push([Wt,jt,pn,sn])>1||xt(Wt,jt)})})}function xt(Wt,jt){try{!function Ut(Wt){Wt.value instanceof Ge?Promise.resolve(Wt.value.v).then(lt,cn):qt(vt[0][2],Wt)}(We[Wt](jt))}catch(pn){qt(vt[0][3],pn)}}function lt(Wt){xt("next",Wt)}function cn(Wt){xt("throw",Wt)}function qt(Wt,jt){Wt(jt),vt.shift(),vt.length&&xt(vt[0][0],vt[0][1])}}function At(oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,Se=oe[Symbol.asyncIterator];return Se?Se.call(oe):(oe=function Ae(oe){var Se="function"==typeof Symbol&&Symbol.iterator,xe=Se&&oe[Se],We=0;if(xe)return xe.call(oe);if(oe&&"number"==typeof oe.length)return{next:function(){return oe&&We>=oe.length&&(oe=void 0),{value:oe&&oe[We++],done:!oe}}};throw new TypeError(Se?"Object is not iterable.":"Symbol.iterator is not defined.")}(oe),xe={},We("next"),We("throw"),We("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function We(vt){xe[vt]=oe[vt]&&function(Nt){return new Promise(function(xt,Ut){!function He(vt,Nt,xt,Ut){Promise.resolve(Ut).then(function(lt){vt({value:lt,done:xt})},Nt)}(xt,Ut,(Nt=oe[vt](Nt)).done,Nt.value)})}}}V.d(Ve,{FC:()=>et,KL:()=>At,_T:()=>ve,mG:()=>Me,qq:()=>Ge})},9808:(Mt,Ve,V)=>{V.d(Ve,{Do:()=>tt,EM:()=>vo,HT:()=>Ee,JF:()=>Un,K0:()=>Pe,Mx:()=>ks,O5:()=>Vr,PM:()=>Ni,S$:()=>Ge,V_:()=>le,Ye:()=>Ne,b0:()=>At,bD:()=>Nr,ez:()=>va,lw:()=>Me,mr:()=>Ie,q:()=>Q,sg:()=>pr,w_:()=>be});var T=V(5e3);let Y=null;function Q(){return Y}function Ee(L){Y||(Y=L)}class be{}const Pe=new T.OlP("DocumentToken");let Me=(()=>{class L{historyGo(O){throw new Error("Not implemented")}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275prov=T.Yz7({token:L,factory:function(){return function Oe(){return(0,T.LFG)(ae)}()},providedIn:"platform"}),L})();const le=new T.OlP("Location Initialized");let ae=(()=>{class L extends Me{constructor(O){super(),this._doc=O,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Q().getBaseHref(this._doc)}onPopState(O){const Z=Q().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("popstate",O,!1),()=>Z.removeEventListener("popstate",O)}onHashChange(O){const Z=Q().getGlobalEventTarget(this._doc,"window");return Z.addEventListener("hashchange",O,!1),()=>Z.removeEventListener("hashchange",O)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(O){this.location.pathname=O}pushState(O,Z,de){Ae()?this._history.pushState(O,Z,de):this.location.hash=de}replaceState(O,Z,de){Ae()?this._history.replaceState(O,Z,de):this.location.hash=de}forward(){this._history.forward()}back(){this._history.back()}historyGo(O=0){this._history.go(O)}getState(){return this._history.state}}return L.\u0275fac=function(O){return new(O||L)(T.LFG(Pe))},L.\u0275prov=T.Yz7({token:L,factory:function(){return function Ct(){return new ae((0,T.LFG)(Pe))}()},providedIn:"platform"}),L})();function Ae(){return!!window.history.pushState}function nt(L,G){if(0==L.length)return G;if(0==G.length)return L;let O=0;return L.endsWith("/")&&O++,G.startsWith("/")&&O++,2==O?L+G.substring(1):1==O?L+G:L+"/"+G}function st(L){const G=L.match(/#|\?|$/),O=G&&G.index||L.length;return L.slice(0,O-("/"===L[O-1]?1:0))+L.slice(O)}function Dt(L){return L&&"?"!==L[0]?"?"+L:L}let Ge=(()=>{class L{historyGo(O){throw new Error("Not implemented")}}return L.\u0275fac=function(O){return new(O||L)},L.\u0275prov=T.Yz7({token:L,factory:function(){return function et(L){const G=(0,T.LFG)(Pe).location;return new At((0,T.LFG)(Me),G&&G.origin||"")}()},providedIn:"root"}),L})();const Ie=new T.OlP("appBaseHref");let At=(()=>{class L extends Ge{constructor(O,Z){if(super(),this._platformLocation=O,this._removeListenerFns=[],null==Z&&(Z=this._platformLocation.getBaseHrefFromDOM()),null==Z)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=Z}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}prepareExternalUrl(O){return nt(this._baseHref,O)}path(O=!1){const Z=this._platformLocation.pathname+Dt(this._platformLocation.search),de=this._platformLocation.hash;return de&&O?`${Z}${de}`:Z}pushState(O,Z,de,Ke){const ct=this.prepareExternalUrl(de+Dt(Ke));this._platformLocation.pushState(O,Z,ct)}replaceState(O,Z,de,Ke){const ct=this.prepareExternalUrl(de+Dt(Ke));this._platformLocation.replaceState(O,Z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(O=0){var Z,de;null===(de=(Z=this._platformLocation).historyGo)||void 0===de||de.call(Z,O)}}return L.\u0275fac=function(O){return new(O||L)(T.LFG(Me),T.LFG(Ie,8))},L.\u0275prov=T.Yz7({token:L,factory:L.\u0275fac}),L})(),tt=(()=>{class L extends Ge{constructor(O,Z){super(),this._platformLocation=O,this._baseHref="",this._removeListenerFns=[],null!=Z&&(this._baseHref=Z)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(O){this._removeListenerFns.push(this._platformLocation.onPopState(O),this._platformLocation.onHashChange(O))}getBaseHref(){return this._baseHref}path(O=!1){let Z=this._platformLocation.hash;return null==Z&&(Z="#"),Z.length>0?Z.substring(1):Z}prepareExternalUrl(O){const Z=nt(this._baseHref,O);return Z.length>0?"#"+Z:Z}pushState(O,Z,de,Ke){let ct=this.prepareExternalUrl(de+Dt(Ke));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.pushState(O,Z,ct)}replaceState(O,Z,de,Ke){let ct=this.prepareExternalUrl(de+Dt(Ke));0==ct.length&&(ct=this._platformLocation.pathname),this._platformLocation.replaceState(O,Z,ct)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(O=0){var Z,de;null===(de=(Z=this._platformLocation).historyGo)||void 0===de||de.call(Z,O)}}return L.\u0275fac=function(O){return new(O||L)(T.LFG(Me),T.LFG(Ie,8))},L.\u0275prov=T.Yz7({token:L,factory:L.\u0275fac}),L})(),Ne=(()=>{class L{constructor(O,Z){this._subject=new T.vpe,this._urlChangeListeners=[],this._platformStrategy=O;const de=this._platformStrategy.getBaseHref();this._platformLocation=Z,this._baseHref=st(wt(de)),this._platformStrategy.onPopState(Ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ke.state,type:Ke.type})})}path(O=!1){return this.normalize(this._platformStrategy.path(O))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(O,Z=""){return this.path()==this.normalize(O+Dt(Z))}normalize(O){return L.stripTrailingSlash(function Tt(L,G){return L&&G.startsWith(L)?G.substring(L.length):G}(this._baseHref,wt(O)))}prepareExternalUrl(O){return O&&"/"!==O[0]&&(O="/"+O),this._platformStrategy.prepareExternalUrl(O)}go(O,Z="",de=null){this._platformStrategy.pushState(de,"",O,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Dt(Z)),de)}replaceState(O,Z="",de=null){this._platformStrategy.replaceState(de,"",O,Z),this._notifyUrlChangeListeners(this.prepareExternalUrl(O+Dt(Z)),de)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(O=0){var Z,de;null===(de=(Z=this._platformStrategy).historyGo)||void 0===de||de.call(Z,O)}onUrlChange(O){this._urlChangeListeners.push(O),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(Z=>{this._notifyUrlChangeListeners(Z.url,Z.state)}))}_notifyUrlChangeListeners(O="",Z){this._urlChangeListeners.forEach(de=>de(O,Z))}subscribe(O,Z,de){return this._subject.subscribe({next:O,error:Z,complete:de})}}return L.normalizeQueryParams=Dt,L.joinWithSlash=nt,L.stripTrailingSlash=st,L.\u0275fac=function(O){return new(O||L)(T.LFG(Ge),T.LFG(Me))},L.\u0275prov=T.Yz7({token:L,factory:function(){return function ke(){return new Ne((0,T.LFG)(Ge),(0,T.LFG)(Me))}()},providedIn:"root"}),L})();function wt(L){return L.replace(/\/index.html$/,"")}function ks(L,G){G=encodeURIComponent(G);for(const O of L.split(";")){const Z=O.indexOf("="),[de,Ke]=-1==Z?[O,""]:[O.slice(0,Z),O.slice(Z+1)];if(de.trim()===G)return decodeURIComponent(Ke)}return null}class Ii{constructor(G,O,Z,de){this.$implicit=G,this.ngForOf=O,this.index=Z,this.count=de}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pr=(()=>{class L{constructor(O,Z,de){this._viewContainer=O,this._template=Z,this._differs=de,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(O){this._ngForOf=O,this._ngForOfDirty=!0}set ngForTrackBy(O){this._trackByFn=O}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(O){O&&(this._template=O)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const O=this._ngForOf;!this._differ&&O&&(this._differ=this._differs.find(O).create(this.ngForTrackBy))}if(this._differ){const O=this._differ.diff(this._ngForOf);O&&this._applyChanges(O)}}_applyChanges(O){const Z=this._viewContainer;O.forEachOperation((de,Ke,ct)=>{if(null==de.previousIndex)Z.createEmbeddedView(this._template,new Ii(de.item,this._ngForOf,-1,-1),null===ct?void 0:ct);else if(null==ct)Z.remove(null===Ke?void 0:Ke);else if(null!==Ke){const $t=Z.get(Ke);Z.move($t,ct),te($t,de)}});for(let de=0,Ke=Z.length;de<Ke;de++){const $t=Z.get(de).context;$t.index=de,$t.count=Ke,$t.ngForOf=this._ngForOf}O.forEachIdentityChange(de=>{te(Z.get(de.currentIndex),de)})}static ngTemplateContextGuard(O,Z){return!0}}return L.\u0275fac=function(O){return new(O||L)(T.Y36(T.s_b),T.Y36(T.Rgc),T.Y36(T.ZZ4))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),L})();function te(L,G){L.context.$implicit=G.item}let Vr=(()=>{class L{constructor(O,Z){this._viewContainer=O,this._context=new Wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Z}set ngIf(O){this._context.$implicit=this._context.ngIf=O,this._updateView()}set ngIfThen(O){Cs("ngIfThen",O),this._thenTemplateRef=O,this._thenViewRef=null,this._updateView()}set ngIfElse(O){Cs("ngIfElse",O),this._elseTemplateRef=O,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(O,Z){return!0}}return L.\u0275fac=function(O){return new(O||L)(T.Y36(T.s_b),T.Y36(T.Rgc))},L.\u0275dir=T.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class Wn{constructor(){this.$implicit=null,this.ngIf=null}}function Cs(L,G){if(G&&!G.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,T.AaK)(G)}'.`)}let va=(()=>{class L{}return L.\u0275fac=function(O){return new(O||L)},L.\u0275mod=T.oAB({type:L}),L.\u0275inj=T.cJS({}),L})();const Nr="browser";function Ni(L){return"server"===L}let vo=(()=>{class L{}return L.\u0275prov=(0,T.Yz7)({token:L,providedIn:"root",factory:()=>new rs((0,T.LFG)(Pe),window)}),L})();class rs{constructor(G,O){this.document=G,this.window=O,this.offset=()=>[0,0]}setOffset(G){this.offset=Array.isArray(G)?()=>G:G}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(G){this.supportsScrolling()&&this.window.scrollTo(G[0],G[1])}scrollToAnchor(G){if(!this.supportsScrolling())return;const O=function ds(L,G){const O=L.getElementById(G)||L.getElementsByName(G)[0];if(O)return O;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const Z=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let de=Z.currentNode;for(;de;){const Ke=de.shadowRoot;if(Ke){const ct=Ke.getElementById(G)||Ke.querySelector(`[name="${G}"]`);if(ct)return ct}de=Z.nextNode()}}return null}(this.document,G);O&&(this.scrollToElement(O),O.focus())}setHistoryScrollRestoration(G){if(this.supportScrollRestoration()){const O=this.window.history;O&&O.scrollRestoration&&(O.scrollRestoration=G)}}scrollToElement(G){const O=G.getBoundingClientRect(),Z=O.left+this.window.pageXOffset,de=O.top+this.window.pageYOffset,Ke=this.offset();this.window.scrollTo(Z-Ke[0],de-Ke[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const G=ra(this.window.history)||ra(Object.getPrototypeOf(this.window.history));return!(!G||!G.writable&&!G.set)}catch(G){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(G){return!1}}}function ra(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Un{}},520:(Mt,Ve,V)=>{V.d(Ve,{JF:()=>Mn,eN:()=>He});var T=V(9808),Y=V(5e3),Q=V(9646),ve=V(8306),Ee=V(4351),be=V(9300),Pe=V(4004);class Me{}class Oe{}class le{constructor(me){this.normalizedNames=new Map,this.lazyUpdate=null,me?this.lazyInit="string"==typeof me?()=>{this.headers=new Map,me.split("\n").forEach(Ce=>{const dt=Ce.indexOf(":");if(dt>0){const Le=Ce.slice(0,dt),pt=Le.toLowerCase(),St=Ce.slice(dt+1).trim();this.maybeSetNormalizedName(Le,pt),this.headers.has(pt)?this.headers.get(pt).push(St):this.headers.set(pt,[St])}})}:()=>{this.headers=new Map,Object.keys(me).forEach(Ce=>{let dt=me[Ce];const Le=Ce.toLowerCase();"string"==typeof dt&&(dt=[dt]),dt.length>0&&(this.headers.set(Le,dt),this.maybeSetNormalizedName(Ce,Le))})}:this.headers=new Map}has(me){return this.init(),this.headers.has(me.toLowerCase())}get(me){this.init();const Ce=this.headers.get(me.toLowerCase());return Ce&&Ce.length>0?Ce[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(me){return this.init(),this.headers.get(me.toLowerCase())||null}append(me,Ce){return this.clone({name:me,value:Ce,op:"a"})}set(me,Ce){return this.clone({name:me,value:Ce,op:"s"})}delete(me,Ce){return this.clone({name:me,value:Ce,op:"d"})}maybeSetNormalizedName(me,Ce){this.normalizedNames.has(Ce)||this.normalizedNames.set(Ce,me)}init(){this.lazyInit&&(this.lazyInit instanceof le?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(me=>this.applyUpdate(me)),this.lazyUpdate=null))}copyFrom(me){me.init(),Array.from(me.headers.keys()).forEach(Ce=>{this.headers.set(Ce,me.headers.get(Ce)),this.normalizedNames.set(Ce,me.normalizedNames.get(Ce))})}clone(me){const Ce=new le;return Ce.lazyInit=this.lazyInit&&this.lazyInit instanceof le?this.lazyInit:this,Ce.lazyUpdate=(this.lazyUpdate||[]).concat([me]),Ce}applyUpdate(me){const Ce=me.name.toLowerCase();switch(me.op){case"a":case"s":let dt=me.value;if("string"==typeof dt&&(dt=[dt]),0===dt.length)return;this.maybeSetNormalizedName(me.name,Ce);const Le=("a"===me.op?this.headers.get(Ce):void 0)||[];Le.push(...dt),this.headers.set(Ce,Le);break;case"d":const pt=me.value;if(pt){let St=this.headers.get(Ce);if(!St)return;St=St.filter(Dn=>-1===pt.indexOf(Dn)),0===St.length?(this.headers.delete(Ce),this.normalizedNames.delete(Ce)):this.headers.set(Ce,St)}else this.headers.delete(Ce),this.normalizedNames.delete(Ce)}}forEach(me){this.init(),Array.from(this.normalizedNames.keys()).forEach(Ce=>me(this.normalizedNames.get(Ce),this.headers.get(Ce)))}}class ae{encodeKey(me){return st(me)}encodeValue(me){return st(me)}decodeKey(me){return decodeURIComponent(me)}decodeValue(me){return decodeURIComponent(me)}}const Ct=/%(\d[a-f0-9])/gi,nt={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function st(Je){return encodeURIComponent(Je).replace(Ct,(me,Ce)=>{var dt;return null!==(dt=nt[Ce])&&void 0!==dt?dt:me})}function Dt(Je){return`${Je}`}class Ge{constructor(me={}){if(this.updates=null,this.cloneFrom=null,this.encoder=me.encoder||new ae,me.fromString){if(me.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Ae(Je,me){const Ce=new Map;return Je.length>0&&Je.replace(/^\?/,"").split("&").forEach(Le=>{const pt=Le.indexOf("="),[St,Dn]=-1==pt?[me.decodeKey(Le),""]:[me.decodeKey(Le.slice(0,pt)),me.decodeValue(Le.slice(pt+1))],on=Ce.get(St)||[];on.push(Dn),Ce.set(St,on)}),Ce}(me.fromString,this.encoder)}else me.fromObject?(this.map=new Map,Object.keys(me.fromObject).forEach(Ce=>{const dt=me.fromObject[Ce];this.map.set(Ce,Array.isArray(dt)?dt:[dt])})):this.map=null}has(me){return this.init(),this.map.has(me)}get(me){this.init();const Ce=this.map.get(me);return Ce?Ce[0]:null}getAll(me){return this.init(),this.map.get(me)||null}keys(){return this.init(),Array.from(this.map.keys())}append(me,Ce){return this.clone({param:me,value:Ce,op:"a"})}appendAll(me){const Ce=[];return Object.keys(me).forEach(dt=>{const Le=me[dt];Array.isArray(Le)?Le.forEach(pt=>{Ce.push({param:dt,value:pt,op:"a"})}):Ce.push({param:dt,value:Le,op:"a"})}),this.clone(Ce)}set(me,Ce){return this.clone({param:me,value:Ce,op:"s"})}delete(me,Ce){return this.clone({param:me,value:Ce,op:"d"})}toString(){return this.init(),this.keys().map(me=>{const Ce=this.encoder.encodeKey(me);return this.map.get(me).map(dt=>Ce+"="+this.encoder.encodeValue(dt)).join("&")}).filter(me=>""!==me).join("&")}clone(me){const Ce=new Ge({encoder:this.encoder});return Ce.cloneFrom=this.cloneFrom||this,Ce.updates=(this.updates||[]).concat(me),Ce}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(me=>this.map.set(me,this.cloneFrom.map.get(me))),this.updates.forEach(me=>{switch(me.op){case"a":case"s":const Ce=("a"===me.op?this.map.get(me.param):void 0)||[];Ce.push(Dt(me.value)),this.map.set(me.param,Ce);break;case"d":if(void 0===me.value){this.map.delete(me.param);break}{let dt=this.map.get(me.param)||[];const Le=dt.indexOf(Dt(me.value));-1!==Le&&dt.splice(Le,1),dt.length>0?this.map.set(me.param,dt):this.map.delete(me.param)}}}),this.cloneFrom=this.updates=null)}}class Ie{constructor(){this.map=new Map}set(me,Ce){return this.map.set(me,Ce),this}get(me){return this.map.has(me)||this.map.set(me,me.defaultValue()),this.map.get(me)}delete(me){return this.map.delete(me),this}has(me){return this.map.has(me)}keys(){return this.map.keys()}}function tt(Je){return"undefined"!=typeof ArrayBuffer&&Je instanceof ArrayBuffer}function Ne(Je){return"undefined"!=typeof Blob&&Je instanceof Blob}function ke(Je){return"undefined"!=typeof FormData&&Je instanceof FormData}class wt{constructor(me,Ce,dt,Le){let pt;if(this.url=Ce,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=me.toUpperCase(),function At(Je){switch(Je){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Le?(this.body=void 0!==dt?dt:null,pt=Le):pt=dt,pt&&(this.reportProgress=!!pt.reportProgress,this.withCredentials=!!pt.withCredentials,pt.responseType&&(this.responseType=pt.responseType),pt.headers&&(this.headers=pt.headers),pt.context&&(this.context=pt.context),pt.params&&(this.params=pt.params)),this.headers||(this.headers=new le),this.context||(this.context=new Ie),this.params){const St=this.params.toString();if(0===St.length)this.urlWithParams=Ce;else{const Dn=Ce.indexOf("?");this.urlWithParams=Ce+(-1===Dn?"?":Dn<Ce.length-1?"&":"")+St}}else this.params=new Ge,this.urlWithParams=Ce}serializeBody(){return null===this.body?null:tt(this.body)||Ne(this.body)||ke(this.body)||function Tt(Je){return"undefined"!=typeof URLSearchParams&&Je instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ge?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||ke(this.body)?null:Ne(this.body)?this.body.type||null:tt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ge?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(me={}){var Ce;const dt=me.method||this.method,Le=me.url||this.url,pt=me.responseType||this.responseType,St=void 0!==me.body?me.body:this.body,Dn=void 0!==me.withCredentials?me.withCredentials:this.withCredentials,on=void 0!==me.reportProgress?me.reportProgress:this.reportProgress;let Jt=me.headers||this.headers,Wr=me.params||this.params;const fr=null!==(Ce=me.context)&&void 0!==Ce?Ce:this.context;return void 0!==me.setHeaders&&(Jt=Object.keys(me.setHeaders).reduce((Nn,ie)=>Nn.set(ie,me.setHeaders[ie]),Jt)),me.setParams&&(Wr=Object.keys(me.setParams).reduce((Nn,ie)=>Nn.set(ie,me.setParams[ie]),Wr)),new wt(dt,Le,St,{params:Wr,headers:Jt,context:fr,reportProgress:on,responseType:pt,withCredentials:Dn})}}var J=(()=>((J=J||{})[J.Sent=0]="Sent",J[J.UploadProgress=1]="UploadProgress",J[J.ResponseHeader=2]="ResponseHeader",J[J.DownloadProgress=3]="DownloadProgress",J[J.Response=4]="Response",J[J.User=5]="User",J))();class Ze{constructor(me,Ce=200,dt="OK"){this.headers=me.headers||new le,this.status=void 0!==me.status?me.status:Ce,this.statusText=me.statusText||dt,this.url=me.url||null,this.ok=this.status>=200&&this.status<300}}class oe extends Ze{constructor(me={}){super(me),this.type=J.ResponseHeader}clone(me={}){return new oe({headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class Se extends Ze{constructor(me={}){super(me),this.type=J.Response,this.body=void 0!==me.body?me.body:null}clone(me={}){return new Se({body:void 0!==me.body?me.body:this.body,headers:me.headers||this.headers,status:void 0!==me.status?me.status:this.status,statusText:me.statusText||this.statusText,url:me.url||this.url||void 0})}}class xe extends Ze{constructor(me){super(me,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${me.url||"(unknown url)"}`:`Http failure response for ${me.url||"(unknown url)"}: ${me.status} ${me.statusText}`,this.error=me.error||null}}function We(Je,me){return{body:me,headers:Je.headers,context:Je.context,observe:Je.observe,params:Je.params,reportProgress:Je.reportProgress,responseType:Je.responseType,withCredentials:Je.withCredentials}}let He=(()=>{class Je{constructor(Ce){this.handler=Ce}request(Ce,dt,Le={}){let pt;if(Ce instanceof wt)pt=Ce;else{let on,Jt;on=Le.headers instanceof le?Le.headers:new le(Le.headers),Le.params&&(Jt=Le.params instanceof Ge?Le.params:new Ge({fromObject:Le.params})),pt=new wt(Ce,dt,void 0!==Le.body?Le.body:null,{headers:on,context:Le.context,params:Jt,reportProgress:Le.reportProgress,responseType:Le.responseType||"json",withCredentials:Le.withCredentials})}const St=(0,Q.of)(pt).pipe((0,Ee.b)(on=>this.handler.handle(on)));if(Ce instanceof wt||"events"===Le.observe)return St;const Dn=St.pipe((0,be.h)(on=>on instanceof Se));switch(Le.observe||"body"){case"body":switch(pt.responseType){case"arraybuffer":return Dn.pipe((0,Pe.U)(on=>{if(null!==on.body&&!(on.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return on.body}));case"blob":return Dn.pipe((0,Pe.U)(on=>{if(null!==on.body&&!(on.body instanceof Blob))throw new Error("Response is not a Blob.");return on.body}));case"text":return Dn.pipe((0,Pe.U)(on=>{if(null!==on.body&&"string"!=typeof on.body)throw new Error("Response is not a string.");return on.body}));default:return Dn.pipe((0,Pe.U)(on=>on.body))}case"response":return Dn;default:throw new Error(`Unreachable: unhandled observe type ${Le.observe}}`)}}delete(Ce,dt={}){return this.request("DELETE",Ce,dt)}get(Ce,dt={}){return this.request("GET",Ce,dt)}head(Ce,dt={}){return this.request("HEAD",Ce,dt)}jsonp(Ce,dt){return this.request("JSONP",Ce,{params:(new Ge).append(dt,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(Ce,dt={}){return this.request("OPTIONS",Ce,dt)}patch(Ce,dt,Le={}){return this.request("PATCH",Ce,We(Le,dt))}post(Ce,dt,Le={}){return this.request("POST",Ce,We(Le,dt))}put(Ce,dt,Le={}){return this.request("PUT",Ce,We(Le,dt))}}return Je.\u0275fac=function(Ce){return new(Ce||Je)(Y.LFG(Me))},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})();class vt{constructor(me,Ce){this.next=me,this.interceptor=Ce}handle(me){return this.interceptor.intercept(me,this.next)}}const Nt=new Y.OlP("HTTP_INTERCEPTORS");let xt=(()=>{class Je{intercept(Ce,dt){return dt.handle(Ce)}}return Je.\u0275fac=function(Ce){return new(Ce||Je)},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const yn=/^\)\]\}',?\n/;let Xn=(()=>{class Je{constructor(Ce){this.xhrFactory=Ce}handle(Ce){if("JSONP"===Ce.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ve.y(dt=>{const Le=this.xhrFactory.build();if(Le.open(Ce.method,Ce.urlWithParams),Ce.withCredentials&&(Le.withCredentials=!0),Ce.headers.forEach((ie,he)=>Le.setRequestHeader(ie,he.join(","))),Ce.headers.has("Accept")||Le.setRequestHeader("Accept","application/json, text/plain, */*"),!Ce.headers.has("Content-Type")){const ie=Ce.detectContentTypeHeader();null!==ie&&Le.setRequestHeader("Content-Type",ie)}if(Ce.responseType){const ie=Ce.responseType.toLowerCase();Le.responseType="json"!==ie?ie:"text"}const pt=Ce.serializeBody();let St=null;const Dn=()=>{if(null!==St)return St;const ie=Le.statusText||"OK",he=new le(Le.getAllResponseHeaders()),ye=function ur(Je){return"responseURL"in Je&&Je.responseURL?Je.responseURL:/^X-Request-URL:/m.test(Je.getAllResponseHeaders())?Je.getResponseHeader("X-Request-URL"):null}(Le)||Ce.url;return St=new oe({headers:he,status:Le.status,statusText:ie,url:ye}),St},on=()=>{let{headers:ie,status:he,statusText:ye,url:it}=Dn(),ue=null;204!==he&&(ue=void 0===Le.response?Le.responseText:Le.response),0===he&&(he=ue?200:0);let Re=he>=200&&he<300;if("json"===Ce.responseType&&"string"==typeof ue){const rt=ue;ue=ue.replace(yn,"");try{ue=""!==ue?JSON.parse(ue):null}catch(kt){ue=rt,Re&&(Re=!1,ue={error:kt,text:ue})}}Re?(dt.next(new Se({body:ue,headers:ie,status:he,statusText:ye,url:it||void 0})),dt.complete()):dt.error(new xe({error:ue,headers:ie,status:he,statusText:ye,url:it||void 0}))},Jt=ie=>{const{url:he}=Dn(),ye=new xe({error:ie,status:Le.status||0,statusText:Le.statusText||"Unknown Error",url:he||void 0});dt.error(ye)};let Wr=!1;const fr=ie=>{Wr||(dt.next(Dn()),Wr=!0);let he={type:J.DownloadProgress,loaded:ie.loaded};ie.lengthComputable&&(he.total=ie.total),"text"===Ce.responseType&&!!Le.responseText&&(he.partialText=Le.responseText),dt.next(he)},Nn=ie=>{let he={type:J.UploadProgress,loaded:ie.loaded};ie.lengthComputable&&(he.total=ie.total),dt.next(he)};return Le.addEventListener("load",on),Le.addEventListener("error",Jt),Le.addEventListener("timeout",Jt),Le.addEventListener("abort",Jt),Ce.reportProgress&&(Le.addEventListener("progress",fr),null!==pt&&Le.upload&&Le.upload.addEventListener("progress",Nn)),Le.send(pt),dt.next({type:J.Sent}),()=>{Le.removeEventListener("error",Jt),Le.removeEventListener("abort",Jt),Le.removeEventListener("load",on),Le.removeEventListener("timeout",Jt),Ce.reportProgress&&(Le.removeEventListener("progress",fr),null!==pt&&Le.upload&&Le.upload.removeEventListener("progress",Nn)),Le.readyState!==Le.DONE&&Le.abort()}})}}return Je.\u0275fac=function(Ce){return new(Ce||Je)(Y.LFG(T.JF))},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})();const or=new Y.OlP("XSRF_COOKIE_NAME"),Kn=new Y.OlP("XSRF_HEADER_NAME");class Tr{}let qn=(()=>{class Je{constructor(Ce,dt,Le){this.doc=Ce,this.platform=dt,this.cookieName=Le,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const Ce=this.doc.cookie||"";return Ce!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,T.Mx)(Ce,this.cookieName),this.lastCookieString=Ce),this.lastToken}}return Je.\u0275fac=function(Ce){return new(Ce||Je)(Y.LFG(T.K0),Y.LFG(Y.Lbi),Y.LFG(or))},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),hr=(()=>{class Je{constructor(Ce,dt){this.tokenService=Ce,this.headerName=dt}intercept(Ce,dt){const Le=Ce.url.toLowerCase();if("GET"===Ce.method||"HEAD"===Ce.method||Le.startsWith("http://")||Le.startsWith("https://"))return dt.handle(Ce);const pt=this.tokenService.getToken();return null!==pt&&!Ce.headers.has(this.headerName)&&(Ce=Ce.clone({headers:Ce.headers.set(this.headerName,pt)})),dt.handle(Ce)}}return Je.\u0275fac=function(Ce){return new(Ce||Je)(Y.LFG(Tr),Y.LFG(Kn))},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),Zn=(()=>{class Je{constructor(Ce,dt){this.backend=Ce,this.injector=dt,this.chain=null}handle(Ce){if(null===this.chain){const dt=this.injector.get(Nt,[]);this.chain=dt.reduceRight((Le,pt)=>new vt(Le,pt),this.backend)}return this.chain.handle(Ce)}}return Je.\u0275fac=function(Ce){return new(Ce||Je)(Y.LFG(Oe),Y.LFG(Y.zs3))},Je.\u0275prov=Y.Yz7({token:Je,factory:Je.\u0275fac}),Je})(),Rn=(()=>{class Je{static disable(){return{ngModule:Je,providers:[{provide:hr,useClass:xt}]}}static withOptions(Ce={}){return{ngModule:Je,providers:[Ce.cookieName?{provide:or,useValue:Ce.cookieName}:[],Ce.headerName?{provide:Kn,useValue:Ce.headerName}:[]]}}}return Je.\u0275fac=function(Ce){return new(Ce||Je)},Je.\u0275mod=Y.oAB({type:Je}),Je.\u0275inj=Y.cJS({providers:[hr,{provide:Nt,useExisting:hr,multi:!0},{provide:Tr,useClass:qn},{provide:or,useValue:"XSRF-TOKEN"},{provide:Kn,useValue:"X-XSRF-TOKEN"}]}),Je})(),Mn=(()=>{class Je{}return Je.\u0275fac=function(Ce){return new(Ce||Je)},Je.\u0275mod=Y.oAB({type:Je}),Je.\u0275inj=Y.cJS({providers:[He,{provide:Me,useClass:Zn},Xn,{provide:Oe,useExisting:Xn}],imports:[[Rn.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Je})()},5e3:(Mt,Ve,V)=>{V.d(Ve,{$8M:()=>Go,$Z:()=>Qg,AFp:()=>mE,ALo:()=>F0,AaK:()=>Me,CHM:()=>Va,CRH:()=>q0,CZH:()=>Lv,CqO:()=>gy,EJc:()=>II,EpF:()=>Ps,F4k:()=>py,FYo:()=>C0,FiY:()=>Bi,G48:()=>WI,Gf:()=>z0,GfV:()=>D0,Gpc:()=>ae,JOm:()=>j,LFG:()=>ft,LSH:()=>ul,Lbi:()=>vI,MAs:()=>Vg,NdJ:()=>zp,OlP:()=>Dr,Oqu:()=>Qp,PXZ:()=>FI,Q6J:()=>Jg,QGY:()=>Wp,Qsj:()=>yw,R0b:()=>fc,RDi:()=>ra,Rgc:()=>Rm,SBq:()=>Tm,Sil:()=>DI,Suo:()=>K0,TTD:()=>ls,TgZ:()=>Uf,VLi:()=>OI,W1O:()=>J0,X6Q:()=>GI,XFs:()=>Zt,Xpm:()=>Yt,Y36:()=>tu,YKP:()=>A0,YNc:()=>ny,Yjl:()=>En,Yz7:()=>jt,ZZ4:()=>Yv,_Bn:()=>E0,_UZ:()=>Vf,_Vd:()=>i_,_c5:()=>aC,_uU:()=>Py,aQg:()=>Qv,c2e:()=>EI,cJS:()=>sn,cg1:()=>eg,dDg:()=>IE,deG:()=>Xr,dqk:()=>Jt,eFA:()=>bE,ekj:()=>am,g9A:()=>_E,h0i:()=>rg,hGG:()=>uC,hij:()=>zf,iGM:()=>W0,ifc:()=>Le,ip1:()=>gE,kL8:()=>Wy,lG2:()=>Qi,lcZ:()=>U0,n5z:()=>ss,oAB:()=>Ur,oxw:()=>Ey,q4F:()=>b0,qLn:()=>Vu,qOj:()=>Op,qZA:()=>Gp,sBO:()=>zI,sIi:()=>Uh,s_b:()=>a_,soG:()=>Uv,tBr:()=>Vi,tb:()=>vE,tp0:()=>ys,uIk:()=>kf,vHH:()=>st,vpe:()=>td,wAp:()=>mn,xi3:()=>V0,xp6:()=>lp,z2F:()=>Gv,zSh:()=>Ig,zs3:()=>Oa});var T=V(7579),Y=V(727),Q=V(8306),ve=V(6451),Ee=V(3099);function be(n){for(let r in n)if(n[r]===be)return r;throw Error("Could not find renamed property on target object.")}function Pe(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Oe(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const le=be({__forward_ref__:be});function ae(n){return n.__forward_ref__=ae,n.toString=function(){return Me(this())},n}function Ae(n){return Ct(n)?n():n}function Ct(n){return"function"==typeof n&&n.hasOwnProperty(le)&&n.__forward_ref__===ae}class st extends Error{constructor(r,o){super(function Dt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function Ge(n){return"string"==typeof n?n:null==n?"":String(n)}function et(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ge(n)}function Ne(n,r){const o=r?` in ${r}`:"";throw new st(-201,`No provider for ${et(n)} found${o}`)}function Ut(n,r){null==n&&function lt(n,r,o,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${o} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function jt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function sn(n){return{providers:n.providers||[],imports:n.imports||[]}}function yn(n){return ur(n,Tr)||ur(n,hr)}function ur(n,r){return n.hasOwnProperty(r)?n[r]:null}function Kn(n){return n&&(n.hasOwnProperty(qn)||n.hasOwnProperty(Zn))?n[qn]:null}const Tr=be({\u0275prov:be}),qn=be({\u0275inj:be}),hr=be({ngInjectableDef:be}),Zn=be({ngInjectorDef:be});var Zt=(()=>((Zt=Zt||{})[Zt.Default=0]="Default",Zt[Zt.Host=1]="Host",Zt[Zt.Self=2]="Self",Zt[Zt.SkipSelf=4]="SkipSelf",Zt[Zt.Optional=8]="Optional",Zt))();let Sn;function Mn(n){const r=Sn;return Sn=n,r}function Wi(n,r,o){const l=yn(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:o&Zt.Optional?null:void 0!==r?r:void Ne(Me(n),"Injector")}function Je(n){return{toString:n}.toString()}var me=(()=>((me=me||{})[me.OnPush=0]="OnPush",me[me.Default=1]="Default",me))(),Le=(()=>{return(n=Le||(Le={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Le;var n})();const pt="undefined"!=typeof globalThis&&globalThis,St="undefined"!=typeof window&&window,Dn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Jt=pt||"undefined"!=typeof global&&global||St||Dn,Nn={},ie=[],he=be({\u0275cmp:be}),ye=be({\u0275dir:be}),it=be({\u0275pipe:be}),ue=be({\u0275mod:be}),Re=be({\u0275fac:be}),rt=be({__NG_ELEMENT_ID__:be});let kt=0;function Yt(n){return Je(()=>{const o={},l={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===me.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||ie,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Le.Emulated,id:"c",styles:n.styles||ie,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,y=n.features,w=n.pipes;return l.id+=kt++,l.inputs=Ai(n.inputs,o),l.outputs=Ai(n.outputs),y&&y.forEach(S=>S(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(lr):null,l.pipeDefs=w?()=>("function"==typeof w?w():w).map(dn):null,l})}function lr(n){return mr(n)||function fi(n){return n[ye]||null}(n)}function dn(n){return function pi(n){return n[it]||null}(n)}const Mr={};function Ur(n){return Je(()=>{const r={type:n.type,bootstrap:n.bootstrap||ie,declarations:n.declarations||ie,imports:n.imports||ie,exports:n.exports||ie,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Mr[n.id]=n.type),r})}function Ai(n,r){if(null==n)return Nn;const o={};for(const l in n)if(n.hasOwnProperty(l)){let h=n[l],y=h;Array.isArray(h)&&(y=h[1],h=h[0]),o[h]=l,r&&(r[h]=y)}return o}const Qi=Yt;function En(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function mr(n){return n[he]||null}function yr(n,r){const o=n[ue]||null;if(!o&&!0===r)throw new Error(`Type ${Me(n)} does not have '\u0275mod' property.`);return o}function gi(n){return Array.isArray(n)&&"object"==typeof n[1]}function zi(n){return Array.isArray(n)&&!0===n[1]}function Fs(n){return 0!=(8&n.flags)}function Ds(n){return 2==(2&n.flags)}function Kr(n){return 1==(1&n.flags)}function mi(n){return null!==n.template}function mo(n){return 0!=(512&n[2])}function ci(n,r){return n.hasOwnProperty(Re)?n[Re]:null}class Vs{constructor(r,o,l){this.previousValue=r,this.currentValue=o,this.firstChange=l}isFirstChange(){return this.firstChange}}function ls(){return ko}function ko(n){return n.type.prototype.ngOnChanges&&(n.setInput=As),ea}function ea(){const n=Nr(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===Nn)n.previous=r;else for(let l in r)o[l]=r[l];n.current=null,this.ngOnChanges(r)}}function As(n,r,o,l){const h=Nr(n)||function Lo(n,r){return n[va]=r}(n,{previous:Nn,current:null}),y=h.current||(h.current={}),w=h.previous,S=this.declaredInputs[o],N=w[S];y[S]=new Vs(N&&N.currentValue,r,w===Nn),n[l]=r}ls.ngInherit=!0;const va="__ngSimpleChanges__";function Nr(n){return n[va]||null}let rs;function ra(n){rs=n}function Un(n){return!!n.listen}const L={createRenderer:(n,r)=>function ds(){return void 0!==rs?rs:"undefined"!=typeof document?document:void 0}()};function O(n){for(;Array.isArray(n);)n=n[0];return n}function Ke(n,r){return O(r[n])}function ct(n,r){return O(r[n.index])}function an(n,r){return n.data[r]}function Hn(n,r){return n[r]}function Cn(n,r){const o=r[n];return gi(o)?o:o[0]}function An(n){return 4==(4&n[2])}function Pr(n){return 128==(128&n[2])}function _r(n,r){return null==r?null:n[r]}function Pi(n){n[18]=0}function _i(n,r){n[5]+=r;let o=n,l=n[3];for(;null!==l&&(1===r&&1===o[5]||-1===r&&0===o[5]);)l[5]+=r,o=l,l=l[3]}const zt={lFrame:Pn(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wa(){return zt.bindingsEnabled}function gt(){return zt.lFrame.lView}function Vn(){return zt.lFrame.tView}function Va(n){return zt.lFrame.contextLView=n,n[8]}function er(){let n=ia();for(;null!==n&&64===n.type;)n=n.parent;return n}function ia(){return zt.lFrame.currentTNode}function Hs(n,r){const o=zt.lFrame;o.currentTNode=n,o.isParent=r}function wo(){return zt.lFrame.isParent}function sa(){return zt.isInCheckNoChangesMode}function oa(n){zt.isInCheckNoChangesMode=n}function Qr(){const n=zt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Gs(){return zt.lFrame.bindingIndex++}function ru(n,r){const o=zt.lFrame;o.bindingIndex=o.bindingRootIndex=n,Ba(r)}function Ba(n){zt.lFrame.currentDirectiveIndex=n}function ja(){return zt.lFrame.currentQueryIndex}function Ha(n){zt.lFrame.currentQueryIndex=n}function Au(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Uo(n,r,o){if(o&Zt.SkipSelf){let h=r,y=n;for(;!(h=h.parent,null!==h||o&Zt.Host||(h=Au(y),null===h||(y=y[15],10&h.type))););if(null===h)return!1;r=h,n=y}const l=zt.lFrame=aa();return l.currentTNode=r,l.lView=n,!0}function so(n){const r=aa(),o=n[1];zt.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function aa(){const n=zt.lFrame,r=null===n?null:n.child;return null===r?Pn(n):r}function Pn(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function On(){const n=zt.lFrame;return zt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Tn=On;function hs(){const n=On();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ii(){return zt.lFrame.selectedIndex}function is(n){zt.lFrame.selectedIndex=n}function Jr(){const n=zt.lFrame;return an(n.tView,n.selectedIndex)}function Ru(n,r){for(let o=r.directiveStart,l=r.directiveEnd;o<l;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:S,ngAfterViewInit:N,ngAfterViewChecked:H,ngOnDestroy:z}=y;w&&(n.contentHooks||(n.contentHooks=[])).push(-o,w),S&&((n.contentHooks||(n.contentHooks=[])).push(o,S),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,S)),N&&(n.viewHooks||(n.viewHooks=[])).push(-o,N),H&&((n.viewHooks||(n.viewHooks=[])).push(o,H),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,H)),null!=z&&(n.destroyHooks||(n.destroyHooks=[])).push(o,z)}}function Bo(n,r,o){xn(n,r,3,o)}function zs(n,r,o,l){(3&n[2])===o&&xn(n,r,o,l)}function ua(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function xn(n,r,o,l){const y=null!=l?l:-1,w=r.length-1;let S=0;for(let N=void 0!==l?65535&n[18]:0;N<w;N++)if("number"==typeof r[N+1]){if(S=r[N],null!=l&&S>=l)break}else r[N]<0&&(n[18]+=65536),(S<y||-1==y)&&(ou(n,o,r,N),n[18]=(4294901760&n[18])+N+2),N++}function ou(n,r,o,l){const h=o[l]<0,y=o[l+1],S=n[h?-o[l]:o[l]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(S)}finally{}}}else try{y.call(S)}finally{}}class Rs{constructor(r,o,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=l}}function xr(n,r,o){const l=Un(n);let h=0;for(;h<o.length;){const y=o[h];if("number"==typeof y){if(0!==y)break;h++;const w=o[h++],S=o[h++],N=o[h++];l?n.setAttribute(r,S,N,w):r.setAttributeNS(w,S,N)}else{const w=y,S=o[++h];Ho(w)?l&&n.setProperty(r,w,S):l?n.setAttribute(r,w,S):r.setAttribute(w,S),h++}}return h}function Ca(n){return 3===n||4===n||6===n}function Ho(n){return 64===n.charCodeAt(0)}function jr(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let l=0;l<r.length;l++){const h=r[l];"number"==typeof h?o=h:0===o||za(n,o,h,null,-1===o||2===o?r[++l]:null)}}return n}function za(n,r,o,l,h){let y=0,w=n.length;if(-1===r)w=-1;else for(;y<n.length;){const S=n[y++];if("number"==typeof S){if(S===r){w=-1;break}if(S>r){w=y-1;break}}}for(;y<n.length;){const S=n[y];if("number"==typeof S)break;if(S===o){if(null===l)return void(null!==h&&(n[y+1]=h));if(l===n[y+1])return void(n[y+2]=h)}y++,null!==l&&y++,null!==h&&y++}-1!==w&&(n.splice(w,0,r),y=w+1),n.splice(y++,0,o),null!==l&&n.splice(y++,0,l),null!==h&&n.splice(y++,0,h)}function qs(n){return-1!==n}function oo(n){return 32767&n}function vr(n,r){let o=function qi(n){return n>>16}(n),l=r;for(;o>0;)l=l[15],o--;return l}let Da=!0;function ao(n){const r=Da;return Da=n,r}let Ka=0;function _t(n,r){const o=Do(n,r);if(-1!==o)return o;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,Er(l.data,n),Er(r,null),Er(l.blueprint,null));const h=$o(n,r),y=n.injectorIndex;if(qs(h)){const w=oo(h),S=vr(h,r),N=S[1].data;for(let H=0;H<8;H++)r[y+H]=S[w+H]|N[w+H]}return r[y+8]=h,y}function Er(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Do(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function $o(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,l=null,h=r;for(;null!==h;){const y=h[1],w=y.type;if(l=2===w?y.declTNode:1===w?h[6]:null,null===l)return-1;if(o++,h=h[15],-1!==l.injectorIndex)return l.injectorIndex|o<<16}return-1}function b(n,r,o){!function ba(n,r,o){let l;"string"==typeof o?l=o.charCodeAt(0)||0:o.hasOwnProperty(rt)&&(l=o[rt]),null==l&&(l=o[rt]=Ka++);const h=255&l;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function C(n,r,o){if(o&Zt.Optional)return n;Ne(r,"NodeInjector")}function R(n,r,o,l){if(o&Zt.Optional&&void 0===l&&(l=null),0==(o&(Zt.Self|Zt.Host))){const h=n[9],y=Mn(void 0);try{return h?h.get(r,l,o&Zt.Optional):Wi(r,l,o&Zt.Optional)}finally{Mn(y)}}return C(l,r,o)}function M(n,r,o,l=Zt.Default,h){if(null!==n){const y=function Bn(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(rt)?n[rt]:void 0;return"number"==typeof r?r>=0?255&r:ne:r}(o);if("function"==typeof y){if(!Uo(r,n,l))return l&Zt.Host?C(h,o,l):R(r,o,l,h);try{const w=y(l);if(null!=w||l&Zt.Optional)return w;Ne(o)}finally{Tn()}}else if("number"==typeof y){let w=null,S=Do(n,r),N=-1,H=l&Zt.Host?r[16][6]:null;for((-1===S||l&Zt.SkipSelf)&&(N=-1===S?$o(n,r):r[S+8],-1!==N&&tr(l,!1)?(w=r[1],S=oo(N),r=vr(N,r)):S=-1);-1!==S;){const z=r[1];if(Bt(y,S,z.data)){const re=pe(S,r,o,w,l,H);if(re!==B)return re}N=r[S+8],-1!==N&&tr(l,r[1].data[S+8]===H)&&Bt(y,S,r)?(w=z,S=oo(N),r=vr(N,r)):S=-1}}}return R(r,o,l,h)}const B={};function ne(){return new Qt(er(),gt())}function pe(n,r,o,l,h,y){const w=r[1],S=w.data[n+8],z=Ye(S,w,o,null==l?Ds(S)&&Da:l!=w&&0!=(3&S.type),h&Zt.Host&&y===S);return null!==z?ht(r,w,z,S):B}function Ye(n,r,o,l,h){const y=n.providerIndexes,w=r.data,S=1048575&y,N=n.directiveStart,z=y>>20,_e=h?S+z:n.directiveEnd;for(let Fe=l?S:S+z;Fe<_e;Fe++){const at=w[Fe];if(Fe<N&&o===at||Fe>=N&&at.type===o)return Fe}if(h){const Fe=w[N];if(Fe&&mi(Fe)&&Fe.type===o)return N}return null}function ht(n,r,o,l){let h=n[o];const y=r.data;if(function $a(n){return n instanceof Rs}(h)){const w=h;w.resolving&&function Ie(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new st(-200,`Circular dependency in DI detected for ${n}${o}`)}(et(y[o]));const S=ao(w.canSeeViewProviders);w.resolving=!0;const N=w.injectImpl?Mn(w.injectImpl):null;Uo(n,l,Zt.Default);try{h=n[o]=w.factory(void 0,y,n,l),r.firstCreatePass&&o>=l.directiveStart&&function Ws(n,r,o){const{ngOnChanges:l,ngOnInit:h,ngDoCheck:y}=r.type.prototype;if(l){const w=ko(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,w),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,w)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),y&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],r)}finally{null!==N&&Mn(N),ao(S),w.resolving=!1,Tn()}}return h}function Bt(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function tr(n,r){return!(n&Zt.Self||n&Zt.Host&&r)}class Qt{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,l){return M(this._tNode,this._lView,r,l,o)}}function ss(n){return Je(()=>{const r=n.prototype.constructor,o=r[Re]||bo(r),l=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==l;){const y=h[Re]||bo(h);if(y&&y!==o)return y;h=Object.getPrototypeOf(h)}return y=>new y})}function bo(n){return Ct(n)?()=>{const r=bo(Ae(n));return r&&r()}:ci(n)}function Go(n){return function I(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const l=o.length;let h=0;for(;h<l;){const y=o[h];if(Ca(y))break;if(0===y)h+=2;else if("number"==typeof y)for(h++;h<l&&"string"==typeof o[h];)h++;else{if(y===r)return o[h+1];h+=2}}}return null}(er(),n)}const tn="__parameters__";function un(n,r,o){return Je(()=>{const l=function Cr(n){return function(...o){if(n){const l=n(...o);for(const h in l)this[h]=l[h]}}}(r);function h(...y){if(this instanceof h)return l.apply(this,y),this;const w=new h(...y);return S.annotation=w,S;function S(N,H,z){const re=N.hasOwnProperty(tn)?N[tn]:Object.defineProperty(N,tn,{value:[]})[tn];for(;re.length<=z;)re.push(null);return(re[z]=re[z]||[]).push(w),N}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Dr{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=jt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xr=new Dr("AnalyzeForEntryComponents");function os(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let l=n[o];Array.isArray(l)?(r===n&&(r=n.slice(0,o)),os(l,r)):r!==n&&r.push(l)}return r}function Be(n,r){n.forEach(o=>Array.isArray(o)?Be(o,r):r(o))}function Ta(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Oi(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function lo(n,r,o){let l=Li(n,r);return l>=0?n[1|l]=o:(l=~l,function zo(n,r,o,l){let h=n.length;if(h==r)n.push(o,l);else if(1===h)n.push(l,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=l}}(n,l,r,o)),l}function bl(n,r){const o=Li(n,r);if(o>=0)return n[1|o]}function Li(n,r){return function Fi(n,r,o){let l=0,h=n.length>>o;for(;h!==l;){const y=l+(h-l>>1),w=n[y<<o];if(r===w)return y<<o;w>r?h=y:l=y+1}return~(h<<o)}(n,r,1)}const ei={},Sa="__NG_DI_FLAG__",co="ngTempTokenPath",P=/\n/gm,K="__source",se=be({provide:String,useValue:be});let Te;function Ue(n){const r=Te;return Te=n,r}function yt(n,r=Zt.Default){if(void 0===Te)throw new st(203,"");return null===Te?Wi(n,void 0,r):Te.get(n,r&Zt.Optional?null:void 0,r)}function ft(n,r=Zt.Default){return(function Rn(){return Sn}()||yt)(Ae(n),r)}const vn=ft;function Gn(n){const r=[];for(let o=0;o<n.length;o++){const l=Ae(n[o]);if(Array.isArray(l)){if(0===l.length)throw new st(900,"");let h,y=Zt.Default;for(let w=0;w<l.length;w++){const S=l[w],N=Fr(S);"number"==typeof N?-1===N?h=S.token:y|=N:h=S}r.push(ft(h,y))}else r.push(ft(l))}return r}function en(n,r){return n[Sa]=r,n.prototype[Sa]=r,n}function Fr(n){return n[Sa]}const Vi=en(un("Inject",n=>({token:n})),-1),Bi=en(un("Optional"),8),ys=en(un("SkipSelf"),4);class Yd{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Qa(n){return n instanceof Yd?n.changingThisBreaksApplicationSecurity:n}const ud=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xd=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function ul(n){const r=function ku(){const n=gt();return n&&n[12]}();return r?r.sanitize(dr.URL,n)||"":function fu(n,r){const o=function Jd(n){return n instanceof Yd&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?Qa(n):function Zo(n){return(n=String(n)).match(ud)||n.match(Xd)?n:"unsafe:"+n}(Ge(n))}const ll="__ngContext__";function Hi(n,r){n[ll]=r}function Ll(n){const r=function Js(n){return n[ll]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function Xs(n){return n.ngOriginalError}function Ul(n,...r){n.error(...r)}class Vu{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),l=function Uu(n){return n&&n.ngErrorLogger||Ul}(r);l(this._console,"ERROR",r),o&&l(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&Xs(r);for(;o&&Xs(o);)o=Xs(o);return o||null}}const of=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Jt))();function as(n){return n instanceof Function?n():n}var j=(()=>((j=j||{})[j.Important=1]="Important",j[j.DashCase=2]="DashCase",j))();function De(n,r){return undefined(n,r)}function Pt(n){const r=n[3];return zi(r)?r[3]:r}function ai(n){return to(n[13])}function eo(n){return to(n[4])}function to(n){for(;null!==n&&!zi(n);)n=n[4];return n}function Hu(n,r,o,l,h){if(null!=l){let y,w=!1;zi(l)?y=l:gi(l)&&(w=!0,l=l[0]);const S=O(l);0===n&&null!==o?null==h?ip(r,o,S):tc(r,o,S,h||null,!0):1===n&&null!==o?tc(r,o,S,h||null,!0):2===n?function uf(n,r,o){const l=oh(n,r);l&&function sp(n,r,o,l){Un(n)?n.removeChild(r,o,l):r.removeChild(o)}(n,l,r,o)}(r,S,w):3===n&&r.destroyNode(S),null!=y&&function lf(n,r,o,l,h){const y=o[7];y!==O(o)&&Hu(r,n,l,y,h);for(let S=10;S<o.length;S++){const N=o[S];Di(N[1],N,n,r,l,y)}}(r,n,y,o,h)}}function Rc(n,r,o){if(Un(n))return n.createElement(r,o);{const l=null!==o?function vo(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===l?n.createElement(r):n.createElementNS(l,r)}}function ya(n,r){const o=n[9],l=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,_i(h,-1)),o.splice(l,1)}function rh(n,r){if(n.length<=10)return;const o=10+r,l=n[o];if(l){const h=l[17];null!==h&&h!==n&&ya(h,l),r>0&&(n[o-1][4]=l[4]);const y=Oi(n,10+r);!function _d(n,r){Di(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const w=y[19];null!==w&&w.detachView(y[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function ec(n,r){if(!(256&r[2])){const o=r[11];Un(o)&&o.destroyNode&&Di(n,r,o,3,null,null),function no(n){let r=n[13];if(!r)return ih(n[1],n);for(;r;){let o=null;if(gi(r))o=r[13];else{const l=r[10];l&&(o=l)}if(!o){for(;r&&!r[4]&&r!==n;)gi(r)&&ih(r[1],r),r=r[3];null===r&&(r=n),gi(r)&&ih(r[1],r),o=r&&r[4]}r=o}}(r)}}function ih(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function ag(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let l=0;l<o.length;l+=2){const h=r[o[l]];if(!(h instanceof Rs)){const y=o[l+1];if(Array.isArray(y))for(let w=0;w<y.length;w+=2){const S=h[y[w]],N=y[w+1];try{N.call(S)}finally{}}else try{y.call(h)}finally{}}}}(n,r),function og(n,r){const o=n.cleanup,l=r[7];let h=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const w=o[y+1],S="function"==typeof w?w(r):O(r[w]),N=l[h=o[y+2]],H=o[y+3];"boolean"==typeof H?S.removeEventListener(o[y],N,H):H>=0?l[h=H]():l[h=-H].unsubscribe(),y+=2}else{const w=l[h=o[y+1]];o[y].call(w)}if(null!==l){for(let y=h+1;y<l.length;y++)l[y]();r[7]=null}}(n,r),1===r[1].type&&Un(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&zi(r[3])){o!==r[3]&&ya(o,r);const l=r[19];null!==l&&l.detachView(n)}}}function af(n,r,o){return function rp(n,r,o){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return o[0];if(2&l.flags){const h=n.data[l.directiveStart].encapsulation;if(h===Le.None||h===Le.Emulated)return null}return ct(l,o)}(n,r.parent,o)}function tc(n,r,o,l,h){Un(n)?n.insertBefore(r,o,l,h):r.insertBefore(o,l,h)}function ip(n,r,o){Un(n)?n.appendChild(r,o):r.appendChild(o)}function sh(n,r,o,l,h){null!==l?tc(n,r,o,l,h):ip(n,r,o)}function oh(n,r){return Un(n)?n.parentNode(r):r.parentNode}let ah=function op(n,r,o){return 40&n.type?ct(n,o):null};function Wu(n,r,o,l){const h=af(n,l,r),y=r[11],S=function hl(n,r,o){return ah(n,r,o)}(l.parent||r[6],l,r);if(null!=h)if(Array.isArray(o))for(let N=0;N<o.length;N++)sh(y,h,o[N],S,!1);else sh(y,h,o,S,!1)}function uh(n,r){if(null!==r){const o=r.type;if(3&o)return ct(r,n);if(4&o)return Ed(-1,n[r.index]);if(8&o){const l=r.child;if(null!==l)return uh(n,l);{const h=n[r.index];return zi(h)?Ed(-1,h):O(h)}}if(32&o)return De(r,n)()||O(n[r.index]);{const l=lh(n,r);return null!==l?Array.isArray(l)?l[0]:uh(Pt(n[16]),l):uh(n,r.next)}}return null}function lh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Ed(n,r){const o=10+n+1;if(o<r.length){const l=r[o],h=l[1].firstChild;if(null!==h)return uh(l,h)}return r[7]}function Vl(n,r,o,l,h,y,w){for(;null!=o;){const S=l[o.index],N=o.type;if(w&&0===r&&(S&&Hi(O(S),l),o.flags|=4),64!=(64&o.flags))if(8&N)Vl(n,r,o.child,l,h,y,!1),Hu(r,n,h,S,y);else if(32&N){const H=De(o,l);let z;for(;z=H();)Hu(r,n,h,z,y);Hu(r,n,h,S,y)}else 16&N?ch(n,r,l,o,h,y):Hu(r,n,h,S,y);o=w?o.projectionNext:o.next}}function Di(n,r,o,l,h,y){Vl(o,l,n.firstChild,r,h,y,!1)}function ch(n,r,o,l,h,y){const w=o[16],N=w[6].projection[l.projection];if(Array.isArray(N))for(let H=0;H<N.length;H++)Hu(r,n,h,N[H],y);else Vl(n,r,N,w[3],h,y,!0)}function cf(n,r,o){Un(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function dh(n,r,o){Un(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function hh(n,r,o){let l=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const y=r.length;if(h+y===l||n.charCodeAt(h+y)<=32)return h}o=h+1}}const fl="ng-template";function vs(n,r,o){let l=0;for(;l<n.length;){let h=n[l++];if(o&&"class"===h){if(h=n[l],-1!==hh(h.toLowerCase(),r,0))return!0}else if(1===h){for(;l<n.length&&"string"==typeof(h=n[l++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function wu(n){return 4===n.type&&n.value!==fl}function Xa(n,r,o){return r===(4!==n.type||o?n.value:fl)}function Id(n,r,o){let l=4;const h=n.attrs||[],y=function nc(n){for(let r=0;r<n.length;r++)if(Ca(n[r]))return r;return n.length}(h);let w=!1;for(let S=0;S<r.length;S++){const N=r[S];if("number"!=typeof N){if(!w)if(4&l){if(l=2|1&l,""!==N&&!Xa(n,N,o)||""===N&&1===r.length){if(bi(l))return!1;w=!0}}else{const H=8&l?N:r[++S];if(8&l&&null!==n.attrs){if(!vs(n.attrs,H,o)){if(bi(l))return!1;w=!0}continue}const re=pl(8&l?"class":N,h,wu(n),o);if(-1===re){if(bi(l))return!1;w=!0;continue}if(""!==H){let _e;_e=re>y?"":h[re+1].toLowerCase();const Fe=8&l?_e:null;if(Fe&&-1!==hh(Fe,H,0)||2&l&&H!==_e){if(bi(l))return!1;w=!0}}}}else{if(!w&&!bi(l)&&!bi(N))return!1;if(w&&bi(N))continue;w=!1,l=N|1&l}}return bi(l)||w}function bi(n){return 0==(1&n)}function pl(n,r,o,l){if(null===r)return-1;let h=0;if(l||!o){let y=!1;for(;h<r.length;){const w=r[h];if(w===n)return h;if(3===w||6===w)y=!0;else{if(1===w||2===w){let S=r[++h];for(;"string"==typeof S;)S=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=y?1:2}return-1}return function ug(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const l=n[o];if("number"==typeof l)return-1;if(l===r)return o;o++}return-1}(r,n)}function ph(n,r,o=!1){for(let l=0;l<r.length;l++)if(Id(n,r[l],o))return!0;return!1}function Cd(n,r){return n?":not("+r.trim()+")":r}function rc(n){let r=n[0],o=1,l=2,h="",y=!1;for(;o<n.length;){let w=n[o];if("string"==typeof w)if(2&l){const S=n[++o];h+="["+w+(S.length>0?'="'+S+'"':"")+"]"}else 8&l?h+="."+w:4&l&&(h+=" "+w);else""!==h&&!bi(w)&&(r+=Cd(y,h),h=""),l=w,y=y||!bi(l);o++}return""!==h&&(r+=Cd(y,h)),r}const Fn={};function lp(n){Dd(Vn(),gt(),ii()+n,sa())}function Dd(n,r,o,l){if(!l)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Bo(r,y,o)}else{const y=n.preOrderHooks;null!==y&&zs(r,y,0,o)}is(o)}function eu(n,r){return n<<17|r<<2}function Ms(n){return n>>17&32767}function gh(n){return 2|n}function Ku(n){return(131068&n)>>2}function kc(n,r){return-131069&n|r<<2}function mh(n){return 1|n}function wf(n,r){const o=n.contentQueries;if(null!==o)for(let l=0;l<o.length;l+=2){const h=o[l],y=o[l+1];if(-1!==y){const w=n.data[y];Ha(h),w.contentQueries(2,r[y],y)}}}function Ad(n,r,o,l,h,y,w,S,N,H){const z=r.blueprint.slice();return z[0]=h,z[2]=140|l,Pi(z),z[3]=z[15]=n,z[8]=o,z[10]=w||n&&n[10],z[11]=S||n&&n[11],z[12]=N||n&&n[12]||null,z[9]=H||n&&n[9]||null,z[6]=y,z[16]=2==r.type?n[16]:z,z}function sc(n,r,o,l,h){let y=n.data[r];if(null===y)y=function xd(n,r,o,l,h){const y=ia(),w=wo(),N=n.data[r]=function jc(n,r,o,l,h,y){return{type:o,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?y:y&&y.parent,o,r,l,h);return null===n.firstChild&&(n.firstChild=N),null!==y&&(w?null==y.child&&null!==N.parent&&(y.child=N):null===y.next&&(y.next=N)),N}(n,r,o,l,h),function Su(){return zt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=o,y.value=l,y.attrs=h;const w=function js(){const n=zt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===w?-1:w.injectorIndex}return Hs(y,!0),y}function _l(n,r,o,l){if(0===o)return-1;const h=r.length;for(let y=0;y<o;y++)r.push(l),n.blueprint.push(l),n.data.push(null);return h}function vl(n,r,o){so(r);try{const l=n.viewQuery;null!==l&&Yi(1,l,o);const h=n.template;null!==h&&Ch(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&wf(n,r),n.staticViewQueries&&Yi(2,n.viewQuery,o);const y=n.components;null!==y&&function If(n,r){for(let o=0;o<r.length;o++)k(n,r[o])}(r,y)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,hs()}}function El(n,r,o,l){const h=r[2];if(256==(256&h))return;so(r);const y=sa();try{Pi(r),function Ia(n){return zt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Ch(n,r,o,2,l);const w=3==(3&h);if(!y)if(w){const H=n.preOrderCheckHooks;null!==H&&Bo(r,H,null)}else{const H=n.preOrderHooks;null!==H&&zs(r,H,0,null),ua(r,0)}if(function f(n){for(let r=ai(n);null!==r;r=eo(r)){if(!r[2])continue;const o=r[9];for(let l=0;l<o.length;l++){const h=o[l],y=h[3];0==(1024&h[2])&&_i(y,1),h[2]|=1024}}}(r),function a(n){for(let r=ai(n);null!==r;r=eo(r))for(let o=10;o<r.length;o++){const l=r[o],h=l[1];Pr(l)&&El(h,l,h.template,l[8])}}(r),null!==n.contentQueries&&wf(n,r),!y)if(w){const H=n.contentCheckHooks;null!==H&&Bo(r,H)}else{const H=n.contentHooks;null!==H&&zs(r,H,1),ua(r,1)}!function _g(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let l=0;l<o.length;l++){const h=o[l];if(h<0)is(~h);else{const y=h,w=o[++l],S=o[++l];ru(w,y),S(2,r[y])}}}finally{is(-1)}}(n,r);const S=n.components;null!==S&&function Om(n,r){for(let o=0;o<r.length;o++)_(n,r[o])}(r,S);const N=n.viewQuery;if(null!==N&&Yi(2,N,l),!y)if(w){const H=n.viewCheckHooks;null!==H&&Bo(r,H)}else{const H=n.viewHooks;null!==H&&zs(r,H,2),ua(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,_i(r[3],-1))}finally{hs()}}function Cf(n,r,o,l){const h=r[10],y=!sa(),w=An(r);try{y&&!w&&h.begin&&h.begin(),w&&vl(n,r,l),El(n,r,o,l)}finally{y&&!w&&h.end&&h.end()}}function Ch(n,r,o,l,h){const y=ii(),w=2&l;try{is(-1),w&&r.length>20&&Dd(n,r,20,sa()),o(l,h)}finally{is(y)}}function Ns(n,r,o){!wa()||(function Od(n,r,o,l){const h=o.directiveStart,y=o.directiveEnd;n.firstCreatePass||_t(o,r),Hi(l,r);const w=o.initialInputs;for(let S=h;S<y;S++){const N=n.data[S],H=mi(N);H&&Eg(r,o,N);const z=ht(r,n,S,o);Hi(z,r),null!==w&&Rh(0,S-h,z,N,0,w),H&&(Cn(o.index,r)[8]=z)}}(n,r,o,ct(o,r)),128==(128&o.flags)&&function bh(n,r,o){const l=o.directiveStart,h=o.directiveEnd,w=o.index,S=function iu(){return zt.lFrame.currentDirectiveIndex}();try{is(w);for(let N=l;N<h;N++){const H=n.data[N],z=r[N];Ba(N),(null!==H.hostBindings||0!==H.hostVars||null!==H.hostAttrs)&&Th(H,z)}}finally{is(-1),Ba(S)}}(n,r,o))}function Ro(n,r,o=ct){const l=r.localNames;if(null!==l){let h=r.index+1;for(let y=0;y<l.length;y+=2){const w=l[y+1],S=-1===w?o(r,n):n[w];n[h++]=S}}}function oc(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Bc(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Bc(n,r,o,l,h,y,w,S,N,H){const z=20+l,re=z+h,_e=function vg(n,r){const o=[];for(let l=0;l<r;l++)o.push(l<n?null:Fn);return o}(z,re),Fe="function"==typeof H?H():H;return _e[1]={type:n,blueprint:_e,template:o,queries:null,viewQuery:S,declTNode:r,data:_e.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:re,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:N,consts:Fe,incompleteFirstPass:!1}}function mp(n,r,o,l){const h=uc(r);null===o?h.push(l):(h.push(o),n.firstCreatePass&&Mh(n).push(l,h.length-1))}function ac(n,r,o){for(let l in n)if(n.hasOwnProperty(l)){const h=n[l];(o=null===o?{}:o).hasOwnProperty(l)?o[l].push(r,h):o[l]=[r,h]}return o}function Md(n,r,o,l){let h=!1;if(wa()){const y=function Sh(n,r,o){const l=n.directiveRegistry;let h=null;if(l)for(let y=0;y<l.length;y++){const w=l[y];ph(o,w.selectors,!1)&&(h||(h=[]),b(_t(o,r),n,w.type),mi(w)?(Ah(n,o),h.unshift(w)):h.push(w))}return h}(n,r,o),w=null===l?null:{"":-1};if(null!==y){h=!0,xf(o,n.data.length,y.length);for(let z=0;z<y.length;z++){const re=y[z];re.providersResolver&&re.providersResolver(re)}let S=!1,N=!1,H=_l(n,r,y.length,null);for(let z=0;z<y.length;z++){const re=y[z];o.mergedAttrs=jr(o.mergedAttrs,re.hostAttrs),Ip(n,o,r,H,re),wp(H,re,w),null!==re.contentQueries&&(o.flags|=8),(null!==re.hostBindings||null!==re.hostAttrs||0!==re.hostVars)&&(o.flags|=128);const _e=re.type.prototype;!S&&(_e.ngOnChanges||_e.ngOnInit||_e.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),S=!0),!N&&(_e.ngOnChanges||_e.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),N=!0),H++}!function bf(n,r){const l=r.directiveEnd,h=n.data,y=r.attrs,w=[];let S=null,N=null;for(let H=r.directiveStart;H<l;H++){const z=h[H],re=z.inputs,_e=null===y||wu(r)?null:kd(re,y);w.push(_e),S=ac(re,H,S),N=ac(z.outputs,H,N)}null!==S&&(S.hasOwnProperty("class")&&(r.flags|=16),S.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=S,r.outputs=N}(n,o)}w&&function Ep(n,r,o){if(r){const l=n.localNames=[];for(let h=0;h<r.length;h+=2){const y=o[r[h+1]];if(null==y)throw new st(-301,!1);l.push(r[h],y)}}}(o,l,w)}return o.mergedAttrs=jr(o.mergedAttrs,o.attrs),h}function Nd(n,r,o,l,h,y){const w=y.hostBindings;if(w){let S=n.hostBindingOpCodes;null===S&&(S=n.hostBindingOpCodes=[]);const N=~r.index;(function Pd(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(S)!=N&&S.push(N),S.push(l,h,w)}}function Th(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Ah(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function wp(n,r,o){if(o){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)o[r.exportAs[l]]=n;mi(r)&&(o[""]=n)}}function xf(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function Ip(n,r,o,l,h){n.data[l]=h;const y=h.factory||(h.factory=ci(h.type)),w=new Rs(y,mi(h),null);n.blueprint[l]=w,o[l]=w,Nd(n,r,0,l,_l(n,o,h.hostVars,Fn),h)}function Eg(n,r,o){const l=ct(r,n),h=oc(o),y=n[10],w=X(n,Ad(n,h,null,o.onPush?64:16,l,r,y,y.createRenderer(l,o),null,null));n[r.index]=w}function Qu(n,r,o,l,h,y){const w=ct(n,r);!function xh(n,r,o,l,h,y,w){if(null==y)Un(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const S=null==w?Ge(y):w(y,l||"",h);Un(n)?n.setAttribute(r,h,S,o):o?r.setAttributeNS(o,h,S):r.setAttribute(h,S)}}(r[11],w,y,n.value,o,l,h)}function Rh(n,r,o,l,h,y){const w=y[r];if(null!==w){const S=l.setInput;for(let N=0;N<w.length;){const H=w[N++],z=w[N++],re=w[N++];null!==S?l.setInput(o,re,H,z):o[z]=re}}}function kd(n,r){let o=null,l=0;for(;l<r.length;){const h=r[l];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[l+1])),l+=2}else l+=2;else l+=4}return o}function u(n,r,o,l){return new Array(n,!0,!1,r,null,0,l,o,null,null)}function _(n,r){const o=Cn(r,n);if(Pr(o)){const l=o[1];80&o[2]?El(l,o,l.template,o[8]):o[5]>0&&A(o)}}function A(n){for(let l=ai(n);null!==l;l=eo(l))for(let h=10;h<l.length;h++){const y=l[h];if(1024&y[2]){const w=y[1];El(w,y,w.template,y[8])}else y[5]>0&&A(y)}const o=n[1].components;if(null!==o)for(let l=0;l<o.length;l++){const h=Cn(o[l],n);Pr(h)&&h[5]>0&&A(h)}}function k(n,r){const o=Cn(r,n),l=o[1];(function W(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(l,o),vl(l,o,o[8])}function X(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function ce(n){for(;n;){n[2]|=64;const r=Pt(n);if(mo(n)&&!r)return n;n=r}return null}function ot(n,r,o){const l=r[10];l.begin&&l.begin();try{El(n,r,n.template,o)}catch(h){throw Cp(r,h),h}finally{l.end&&l.end()}}function Gt(n){!function $e(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],l=Ll(o),h=l[1];Cf(h,l,h.template,o)}}(n[8])}function Yi(n,r,o){Ha(0),r(n,o)}const Ju=(()=>Promise.resolve(null))();function uc(n){return n[7]||(n[7]=[])}function Mh(n){return n.cleanup||(n.cleanup=[])}function Cp(n,r){const o=n[9],l=o?o.get(Vu,null):null;l&&l.handleError(r)}function Fm(n,r,o,l,h){for(let y=0;y<o.length;){const w=o[y++],S=o[y++],N=r[w],H=n.data[w];null!==H.setInput?H.setInput(N,h,l,S):N[S]=h}}function wl(n,r,o){const l=Ke(r,n);!function $u(n,r,o){Un(n)?n.setValue(r,o):r.textContent=o}(n[11],l,o)}function Ld(n,r,o){let l=o?n.styles:null,h=o?n.classes:null,y=0;if(null!==r)for(let w=0;w<r.length;w++){const S=r[w];"number"==typeof S?y=S:1==y?h=Oe(h,S):2==y&&(l=Oe(l,S+": "+r[++w]+";"))}o?n.styles=l:n.stylesWithoutHost=l,o?n.classes=h:n.classesWithoutHost=h}const Mf=new Dr("INJECTOR",-1);class Vm{get(r,o=ei){if(o===ei){const l=new Error(`NullInjectorError: No provider for ${Me(r)}!`);throw l.name="NullInjectorError",l}return o}}const Ig=new Dr("Set Injector scope."),Nh={},Bm={};let Cg;function Dp(){return void 0===Cg&&(Cg=new Vm),Cg}function jm(n,r=null,o=null,l){const h=bp(n,r,o,l);return h._resolveInjectorDefTypes(),h}function bp(n,r=null,o=null,l){return new f_(n,o,r||Dp(),l)}class f_{constructor(r,o,l,h=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];o&&Be(o,S=>this.processProvider(S,r,o)),Be([r],S=>this.processInjectorType(S,[],y)),this.records.set(Mf,Hc(void 0,this));const w=this.records.get(Ig);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:Me(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=ei,l=Zt.Default){this.assertNotDestroyed();const h=Ue(this),y=Mn(void 0);try{if(!(l&Zt.SkipSelf)){let S=this.records.get(r);if(void 0===S){const N=function Hm(n){return"function"==typeof n||"object"==typeof n&&n instanceof Dr}(r)&&yn(r);S=N&&this.injectableDefInScope(N)?Hc(Nf(r),Nh):null,this.records.set(r,S)}if(null!=S)return this.hydrate(r,S)}return(l&Zt.Self?Dp():this.parent).get(r,o=l&Zt.Optional&&o===ei?null:o)}catch(w){if("NullInjectorError"===w.name){if((w[co]=w[co]||[]).unshift(Me(r)),h)throw w;return function oi(n,r,o,l){const h=n[co];throw r[K]&&h.unshift(r[K]),n.message=function Ys(n,r,o,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Me(r);if(Array.isArray(r))h=r.map(Me).join(" -> ");else if("object"==typeof r){let y=[];for(let w in r)if(r.hasOwnProperty(w)){let S=r[w];y.push(w+":"+("string"==typeof S?JSON.stringify(S):Me(S)))}h=`{${y.join(", ")}}`}return`${o}${l?"("+l+")":""}[${h}]: ${n.replace(P,"\n  ")}`}("\n"+n.message,h,o,l),n.ngTokenPath=h,n[co]=null,n}(w,r,"R3InjectorError",this.source)}throw w}finally{Mn(y),Ue(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((l,h)=>r.push(Me(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new st(205,!1)}processInjectorType(r,o,l){if(!(r=Ae(r)))return!1;let h=Kn(r);const y=null==h&&r.ngModule||void 0,w=void 0===y?r:y,S=-1!==l.indexOf(w);if(void 0!==y&&(h=Kn(y)),null==h)return!1;if(null!=h.imports&&!S){let z;l.push(w);try{Be(h.imports,re=>{this.processInjectorType(re,o,l)&&(void 0===z&&(z=[]),z.push(re))})}finally{}if(void 0!==z)for(let re=0;re<z.length;re++){const{ngModule:_e,providers:Fe}=z[re];Be(Fe,at=>this.processProvider(at,_e,Fe||ie))}}this.injectorDefTypes.add(w);const N=ci(w)||(()=>new w);this.records.set(w,Hc(N,Nh));const H=h.providers;if(null!=H&&!S){const z=r;Be(H,re=>this.processProvider(re,z,H))}return void 0!==y&&void 0!==r.providers}processProvider(r,o,l){let h=Iu(r=Ae(r))?r:Ae(r&&r.provide);const y=function Dg(n,r,o){return Tp(n)?Hc(void 0,n.useValue):Hc(bg(n),Nh)}(r);if(Iu(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Hc(void 0,Nh,!0),w.factory=()=>Gn(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,y)}hydrate(r,o){return o.value===Nh&&(o.value=Bm,o.value=o.factory()),"object"==typeof o.value&&o.value&&function kh(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ae(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Nf(n){const r=yn(n),o=null!==r?r.factory:ci(n);if(null!==o)return o;if(n instanceof Dr)throw new st(204,!1);if(n instanceof Function)return function p_(n){const r=n.length;if(r>0)throw function lu(n,r){const o=[];for(let l=0;l<n;l++)o.push(r);return o}(r,"?"),new st(204,!1);const o=function Xn(n){const r=n&&(n[Tr]||n[hr]);if(r){const o=function or(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new st(204,!1)}function bg(n,r,o){let l;if(Iu(n)){const h=Ae(n);return ci(h)||Nf(h)}if(Tp(n))l=()=>Ae(n.useValue);else if(function Ph(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Gn(n.deps||[]));else if(function Tg(n){return!(!n||!n.useExisting)}(n))l=()=>ft(Ae(n.useExisting));else{const h=Ae(n&&(n.useClass||n.provide));if(!function Oh(n){return!!n.deps}(n))return ci(h)||Nf(h);l=()=>new h(...Gn(n.deps))}return l}function Hc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Tp(n){return null!==n&&"object"==typeof n&&se in n}function Iu(n){return"function"==typeof n}let Oa=(()=>{class n{static create(o,l){var h;if(Array.isArray(o))return jm({name:""},l,o,"");{const y=null!==(h=o.name)&&void 0!==h?h:"";return jm({name:y},o.parent,o.providers,y)}}}return n.THROW_IF_NOT_FOUND=ei,n.NULL=new Vm,n.\u0275prov=jt({token:n,providedIn:"any",factory:()=>ft(Mf)}),n.__NG_ELEMENT_ID__=-1,n})();function Ng(n,r){Ru(Ll(n)[1],er())}function Op(n){let r=function Pp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const l=[n];for(;r;){let h;if(mi(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new st(903,"");h=r.\u0275dir}if(h){if(o){l.push(h);const w=n;w.inputs=Pf(n.inputs),w.declaredInputs=Pf(n.declaredInputs),w.outputs=Pf(n.outputs);const S=h.hostBindings;S&&D_(n,S);const N=h.viewQuery,H=h.contentQueries;if(N&&C_(n,N),H&&Pg(n,H),Pe(n.inputs,h.inputs),Pe(n.declaredInputs,h.declaredInputs),Pe(n.outputs,h.outputs),mi(h)&&h.data.animation){const z=n.data;z.animation=(z.animation||[]).concat(h.data.animation)}}const y=h.features;if(y)for(let w=0;w<y.length;w++){const S=y[w];S&&S.ngInherit&&S(n),S===Op&&(o=!1)}}r=Object.getPrototypeOf(r)}!function I_(n){let r=0,o=null;for(let l=n.length-1;l>=0;l--){const h=n[l];h.hostVars=r+=h.hostVars,h.hostAttrs=jr(h.hostAttrs,o=jr(o,h.hostAttrs))}}(l)}function Pf(n){return n===Nn?{}:n===ie?[]:n}function C_(n,r){const o=n.viewQuery;n.viewQuery=o?(l,h)=>{r(l,h),o(l,h)}:r}function Pg(n,r){const o=n.contentQueries;n.contentQueries=o?(l,h,y)=>{r(l,h,y),o(l,h,y)}:r}function D_(n,r){const o=n.hostBindings;n.hostBindings=o?(l,h)=>{r(l,h),o(l,h)}:r}let Lh=null;function $c(){if(!Lh){const n=Jt.Symbol;if(n&&n.iterator)Lh=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const l=r[o];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Lh=l)}}}return Lh}function Uh(n){return!!Of(n)&&(Array.isArray(n)||!(n instanceof Map)&&$c()in n)}function Of(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Mo(n,r,o){return n[r]=o}function _a(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function kf(n,r,o,l){const h=gt();return _a(h,Gs(),r)&&(Vn(),Qu(Jr(),h,n,r,o,l)),kf}function ny(n,r,o,l,h,y,w,S){const N=gt(),H=Vn(),z=n+20,re=H.firstCreatePass?function ty(n,r,o,l,h,y,w,S,N){const H=r.consts,z=sc(r,n,4,w||null,_r(H,S));Md(r,o,z,_r(H,N)),Ru(r,z);const re=z.tViews=Bc(2,z,l,h,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,H);return null!==r.queries&&(r.queries.template(r,z),re.queries=r.queries.embeddedTView(z)),z}(z,H,N,r,o,l,h,y,w):H.data[z];Hs(re,!1);const _e=N[11].createComment("");Wu(H,N,_e,re),Hi(_e,N),X(N,N[z]=u(_e,N,_e,re)),Kr(re)&&Ns(H,N,re),null!=w&&Ro(N,re,S)}function Vg(n){return Hn(function nl(){return zt.lFrame.contextLView}(),20+n)}function tu(n,r=Zt.Default){const o=gt();return null===o?ft(n,r):M(er(),o,Ae(n),r)}function Qg(){throw new Error("invalid")}function Jg(n,r,o){const l=gt();return _a(l,Gs(),r)&&function Jo(n,r,o,l,h,y,w,S){const N=ct(r,o);let z,H=r.inputs;!S&&null!=H&&(z=H[l])?(Fm(n,o,z,l,h),Ds(r)&&function Tf(n,r){const o=Cn(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(l=function Rd(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),h=null!=w?w(h,r.value||"",l):h,Un(y)?y.setProperty(N,l,h):Ho(l)||(N.setProperty?N.setProperty(l,h):N[l]=h))}(Vn(),Jr(),l,n,r,l[11],o,!1),Jg}function Gh(n,r,o,l,h){const w=h?"class":"style";Fm(n,o,r.inputs[w],w,l)}function Uf(n,r,o,l){const h=gt(),y=Vn(),w=20+n,S=h[11],N=h[w]=Rc(S,r,function Vo(){return zt.lFrame.currentNamespace}()),H=y.firstCreatePass?function hy(n,r,o,l,h,y,w){const S=r.consts,H=sc(r,n,2,h,_r(S,y));return Md(r,o,H,_r(S,w)),null!==H.attrs&&Ld(H,H.attrs,!1),null!==H.mergedAttrs&&Ld(H,H.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,H),H}(w,y,h,0,r,o,l):y.data[w];Hs(H,!0);const z=H.mergedAttrs;null!==z&&xr(S,N,z);const re=H.classes;null!==re&&dh(S,N,re);const _e=H.styles;return null!==_e&&cf(S,N,_e),64!=(64&H.flags)&&Wu(y,h,N,H),0===function Ea(){return zt.lFrame.elementDepthCount}()&&Hi(N,h),function Fo(){zt.lFrame.elementDepthCount++}(),Kr(H)&&(Ns(y,h,H),function Zu(n,r,o){if(Fs(r)){const h=r.directiveEnd;for(let y=r.directiveStart;y<h;y++){const w=n.data[y];w.contentQueries&&w.contentQueries(1,o[y],y)}}}(y,H,h)),null!==l&&Ro(h,H),Uf}function Gp(){let n=er();wo()?function $s(){zt.lFrame.isParent=!1}():(n=n.parent,Hs(n,!1));const r=n;!function io(){zt.lFrame.elementDepthCount--}();const o=Vn();return o.firstCreatePass&&(Ru(o,n),Fs(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Wa(n){return 0!=(16&n.flags)}(r)&&Gh(o,r,gt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function gs(n){return 0!=(32&n.flags)}(r)&&Gh(o,r,gt(),r.stylesWithoutHost,!1),Gp}function Vf(n,r,o,l){return Uf(n,r,o,l),Gp(),Vf}function Ps(){return gt()}function Wp(n){return!!n&&"function"==typeof n.then}function py(n){return!!n&&"function"==typeof n.subscribe}const gy=py;function zp(n,r,o,l){const h=gt(),y=Vn(),w=er();return function yy(n,r,o,l,h,y,w,S){const N=Kr(l),z=n.firstCreatePass&&Mh(n),re=r[8],_e=uc(r);let Fe=!0;if(3&l.type||S){const Vt=ct(l,r),rn=S?S(Vt):Vt,Et=_e.length,In=S?wr=>S(O(wr[l.index])):l.index;if(Un(o)){let wr=null;if(!S&&N&&(wr=function V_(n,r,o,l){const h=n.cleanup;if(null!=h)for(let y=0;y<h.length-1;y+=2){const w=h[y];if(w===o&&h[y+1]===l){const S=r[7],N=h[y+2];return S.length>N?S[N]:null}"string"==typeof w&&(y+=2)}return null}(n,r,h,l.index)),null!==wr)(wr.__ngLastListenerFn__||wr).__ngNextListenerFn__=y,wr.__ngLastListenerFn__=y,Fe=!1;else{y=vy(l,r,re,y,!1);const di=o.listen(rn,h,y);_e.push(y,di),z&&z.push(h,In,Et,Et+1)}}else y=vy(l,r,re,y,!0),rn.addEventListener(h,y,w),_e.push(y),z&&z.push(h,In,Et,w)}else y=vy(l,r,re,y,!1);const at=l.outputs;let Ot;if(Fe&&null!==at&&(Ot=at[h])){const Vt=Ot.length;if(Vt)for(let rn=0;rn<Vt;rn+=2){const Cl=r[Ot[rn]][Ot[rn+1]].subscribe(y),tp=_e.length;_e.push(y,Cl),z&&z.push(h,l.index,tp,-(tp+1))}}}(y,h,h[11],w,n,r,!!o,l),zp}function _y(n,r,o,l){try{return!1!==o(l)}catch(h){return Cp(n,h),!1}}function vy(n,r,o,l,h){return function y(w){if(w===Function)return l;const S=2&n.flags?Cn(n.index,r):r;0==(32&r[2])&&ce(S);let N=_y(r,0,l,w),H=y.__ngNextListenerFn__;for(;H;)N=_y(r,0,H,w)&&N,H=H.__ngNextListenerFn__;return h&&!1===N&&(w.preventDefault(),w.returnValue=!1),N}}function Ey(n=1){return function Qn(n){return(zt.lFrame.contextLView=function xu(n,r){for(;n>0;)r=r[15],n--;return r}(n,zt.lFrame.contextLView))[8]}(n)}function tm(n,r,o,l,h){const y=n[o+1],w=null===r;let S=l?Ms(y):Ku(y),N=!1;for(;0!==S&&(!1===N||w);){const z=n[S+1];nm(n[S],r)&&(N=!0,n[S+1]=l?mh(z):gh(z)),S=l?Ms(z):Ku(z)}N&&(n[o+1]=l?gh(y):mh(y))}function nm(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Li(n,r)>=0}function am(n,r){return function No(n,r,o,l){const h=gt(),y=Vn(),w=function Ki(n){const r=zt.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}(2);y.firstUpdatePass&&function lm(n,r,o,l){const h=n.data;if(null===h[o+1]){const y=h[ii()],w=function um(n,r){return r>=n.expandoStartIndex}(n,o);(function Ny(n,r){return 0!=(n.flags&(r?16:32))})(y,l)&&null===r&&!w&&(r=!1),r=function Gf(n,r,o,l){const h=function su(n){const r=zt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=l?r.residualClasses:r.residualStyles;if(null===h)0===(l?r.classBindings:r.styleBindings)&&(o=Wf(o=cm(null,n,r,o,l),r.attrs,l),y=null);else{const w=r.directiveStylingLast;if(-1===w||n[w]!==h)if(o=cm(h,n,r,o,l),null===y){let N=function Yc(n,r,o){const l=o?r.classBindings:r.styleBindings;if(0!==Ku(l))return n[Ms(l)]}(n,r,l);void 0!==N&&Array.isArray(N)&&(N=cm(null,n,r,N[1],l),N=Wf(N,r.attrs,l),function G_(n,r,o,l){n[Ms(o?r.classBindings:r.styleBindings)]=l}(n,r,l,N))}else y=function W_(n,r,o){let l;const h=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<h;y++)l=Wf(l,n[y].hostAttrs,o);return Wf(l,r.attrs,o)}(n,r,l)}return void 0!==y&&(l?r.residualClasses=y:r.residualStyles=y),o}(h,y,r,l),function Kp(n,r,o,l,h,y){let w=y?r.classBindings:r.styleBindings,S=Ms(w),N=Ku(w);n[l]=o;let z,H=!1;if(Array.isArray(o)){const re=o;z=re[1],(null===z||Li(re,z)>0)&&(H=!0)}else z=o;if(h)if(0!==N){const _e=Ms(n[S+1]);n[l+1]=eu(_e,S),0!==_e&&(n[_e+1]=kc(n[_e+1],l)),n[S+1]=function hf(n,r){return 131071&n|r<<17}(n[S+1],l)}else n[l+1]=eu(S,0),0!==S&&(n[S+1]=kc(n[S+1],l)),S=l;else n[l+1]=eu(N,0),0===S?S=l:n[N+1]=kc(n[N+1],l),N=l;H&&(n[l+1]=gh(n[l+1])),tm(n,z,l,!0),tm(n,z,l,!1),function Hf(n,r,o,l,h){const y=h?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&Li(y,r)>=0&&(o[l+1]=mh(o[l+1]))}(r,z,n,l,y),w=eu(S,N),y?r.classBindings=w:r.styleBindings=w}(h,y,r,o,w,l)}}(y,n,w,l),r!==Fn&&_a(h,w,r)&&function dm(n,r,o,l,h,y,w,S){if(!(3&r.type))return;const N=n.data,H=N[S+1];Yp(function Qo(n){return 1==(1&n)}(H)?Ry(N,r,o,h,Ku(H),w):void 0)||(Yp(y)||function gl(n){return 2==(2&n)}(H)&&(y=Ry(N,null,o,h,S,w)),function zu(n,r,o,l,h){const y=Un(n);if(r)h?y?n.addClass(o,l):o.classList.add(l):y?n.removeClass(o,l):o.classList.remove(l);else{let w=-1===l.indexOf("-")?void 0:j.DashCase;if(null==h)y?n.removeStyle(o,l,w):o.style.removeProperty(l);else{const S="string"==typeof h&&h.endsWith("!important");S&&(h=h.slice(0,-10),w|=j.Important),y?n.setStyle(o,l,h,w):o.style.setProperty(l,h,S?"important":"")}}}(l,w,Ke(ii(),o),h,y))}(y,y.data[ii()],h,h[11],n,h[w+1]=function My(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Me(Qa(n)))),n}(r,o),l,w)}(n,r,null,!0),am}function cm(n,r,o,l,h){let y=null;const w=o.directiveEnd;let S=o.directiveStylingLast;for(-1===S?S=o.directiveStart:S++;S<w&&(y=r[S],l=Wf(l,y.hostAttrs,h),y!==n);)S++;return null!==n&&(o.directiveStylingLast=S),l}function Wf(n,r,o){const l=o?1:2;let h=-1;if(null!==r)for(let y=0;y<r.length;y++){const w=r[y];"number"==typeof w?h=w:h===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),lo(n,w,!!o||r[++y]))}return void 0===n?null:n}function Ry(n,r,o,l,h,y){const w=null===r;let S;for(;h>0;){const N=n[h],H=Array.isArray(N),z=H?N[1]:N,re=null===z;let _e=o[h+1];_e===Fn&&(_e=re?ie:void 0);let Fe=re?bl(_e,l):z===l?_e:void 0;if(H&&!Yp(Fe)&&(Fe=bl(N,l)),Yp(Fe)&&(S=Fe,w))return S;const at=n[h+1];h=w?Ms(at):Ku(at)}if(null!==r){let N=y?r.residualClasses:r.residualStyles;null!=N&&(S=bl(N,l))}return S}function Yp(n){return void 0!==n}function Py(n,r=""){const o=gt(),l=Vn(),h=n+20,y=l.firstCreatePass?sc(l,h,1,r,null):l.data[h],w=o[h]=function Xl(n,r){return Un(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Wu(l,o,w,y),Hs(y,!1)}function Qp(n){return zf("",n,""),Qp}function zf(n,r,o){const l=gt(),h=function Gc(n,r,o,l){return _a(n,Gs(),o)?r+Ge(o)+l:Fn}(l,n,r,o);return h!==Fn&&wl(l,ii(),h),zf}const Qc=void 0;var _m=["en",[["a","p"],["AM","PM"],Qc],[["AM","PM"],Qc,Qc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Qc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Qc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Qc,"{1} 'at' {0}",Qc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qf(n){const o=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===l?1:5}];let qh={};function eg(n){const r=function tl(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Em(r);if(o)return o;const l=r.split("-")[0];if(o=Em(l),o)return o;if("en"===l)return _m;throw new Error(`Missing locale data for the locale "${n}".`)}function Wy(n){return eg(n)[mn.PluralCase]}function Em(n){return n in qh||(qh[n]=Jt.ng&&Jt.ng.common&&Jt.ng.common.locales&&Jt.ng.common.locales[n]),qh[n]}var mn=(()=>((mn=mn||{})[mn.LocaleId=0]="LocaleId",mn[mn.DayPeriodsFormat=1]="DayPeriodsFormat",mn[mn.DayPeriodsStandalone=2]="DayPeriodsStandalone",mn[mn.DaysFormat=3]="DaysFormat",mn[mn.DaysStandalone=4]="DaysStandalone",mn[mn.MonthsFormat=5]="MonthsFormat",mn[mn.MonthsStandalone=6]="MonthsStandalone",mn[mn.Eras=7]="Eras",mn[mn.FirstDayOfWeek=8]="FirstDayOfWeek",mn[mn.WeekendRange=9]="WeekendRange",mn[mn.DateFormat=10]="DateFormat",mn[mn.TimeFormat=11]="TimeFormat",mn[mn.DateTimeFormat=12]="DateTimeFormat",mn[mn.NumberSymbols=13]="NumberSymbols",mn[mn.NumberFormats=14]="NumberFormats",mn[mn.CurrencyCode=15]="CurrencyCode",mn[mn.CurrencySymbol=16]="CurrencySymbol",mn[mn.CurrencyName=17]="CurrencyName",mn[mn.Currencies=18]="Currencies",mn[mn.Directionality=19]="Directionality",mn[mn.PluralCase=20]="PluralCase",mn[mn.ExtraData=21]="ExtraData",mn))();const Zf="en-US";let Gd=Zf;function mv(n,r,o,l,h){if(n=Ae(n),Array.isArray(n))for(let y=0;y<n.length;y++)mv(n[y],r,o,l,h);else{const y=Vn(),w=gt();let S=Iu(n)?n:Ae(n.provide),N=bg(n);const H=er(),z=1048575&H.providerIndexes,re=H.directiveStart,_e=H.providerIndexes>>20;if(Iu(n)||!n.multi){const Fe=new Rs(N,h,tu),at=_v(S,r,h?z:z+_e,re);-1===at?(b(_t(H,w),y,S),yv(y,n,r.length),r.push(S),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),o.push(Fe),w.push(Fe)):(o[at]=Fe,w[at]=Fe)}else{const Fe=_v(S,r,z+_e,re),at=_v(S,r,z,z+_e),Ot=Fe>=0&&o[Fe],Vt=at>=0&&o[at];if(h&&!Vt||!h&&!Ot){b(_t(H,w),y,S);const rn=function dw(n,r,o,l,h){const y=new Rs(n,o,tu);return y.multi=[],y.index=r,y.componentProviders=0,v0(y,h,l&&!o),y}(h?cw:lw,o.length,h,l,N);!h&&Vt&&(o[at].providerFactory=rn),yv(y,n,r.length,0),r.push(S),H.directiveStart++,H.directiveEnd++,h&&(H.providerIndexes+=1048576),o.push(rn),w.push(rn)}else yv(y,n,Fe>-1?Fe:at,v0(o[h?at:Fe],N,!h&&l));!h&&l&&Vt&&o[at].componentProviders++}}}function yv(n,r,o,l){const h=Iu(r),y=function Sg(n){return!!n.useClass}(r);if(h||y){const N=(y?Ae(r.useClass):r).prototype.ngOnDestroy;if(N){const H=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const z=H.indexOf(o);-1===z?H.push(o,[l,N]):H[z+1].push(l,N)}else H.push(o,N)}}}function v0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function _v(n,r,o,l){for(let h=o;h<l;h++)if(r[h]===n)return h;return-1}function lw(n,r,o,l){return vv(this.multi,[])}function cw(n,r,o,l){const h=this.multi;let y;if(this.providerFactory){const w=this.providerFactory.componentProviders,S=ht(o,o[1],this.providerFactory.index,l);y=S.slice(0,w),vv(h,y);for(let N=w;N<S.length;N++)y.push(S[N])}else y=[],vv(h,y);return y}function vv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function E0(n,r=[]){return o=>{o.providersResolver=(l,h)=>function uw(n,r,o){const l=Vn();if(l.firstCreatePass){const h=mi(n);mv(o,l.data,l.blueprint,h,!0),mv(r,l.data,l.blueprint,h,!1)}}(l,h?h(n):n,r)}}class w0{}class pw{resolveComponentFactory(r){throw function fw(n){const r=Error(`No component factory found for ${Me(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let i_=(()=>{class n{}return n.NULL=new pw,n})();function gw(){return ng(er(),gt())}function ng(n,r){return new Tm(ct(n,r))}let Tm=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=gw,n})();function mw(n){return n instanceof Tm?n.nativeElement:n}class C0{}let yw=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function vw(){const n=gt(),o=Cn(er().index,n);return function _w(n){return n[11]}(gi(o)?o:n)}(),n})(),Ew=(()=>{class n{}return n.\u0275prov=jt({token:n,providedIn:"root",factory:()=>null}),n})();class D0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const b0=new D0("13.3.6"),Ev={};function s_(n,r,o,l,h=!1){for(;null!==o;){const y=r[o.index];if(null!==y&&l.push(O(y)),zi(y))for(let S=10;S<y.length;S++){const N=y[S],H=N[1].firstChild;null!==H&&s_(N[1],N,H,l)}const w=o.type;if(8&w)s_(n,r,o.child,l);else if(32&w){const S=De(o,r);let N;for(;N=S();)l.push(N)}else if(16&w){const S=lh(r,o);if(Array.isArray(S))l.push(...S);else{const N=Pt(r[16]);s_(N[1],N,S,l,!0)}}o=h?o.projectionNext:o.next}return l}class Sm{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return s_(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(zi(r)){const o=r[8],l=o?o.indexOf(this):-1;l>-1&&(rh(r,l),Oi(o,l))}this._attachedToViewContainer=!1}ec(this._lView[1],this._lView)}onDestroy(r){mp(this._lView[1],this._lView,null,r)}markForCheck(){ce(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ot(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gn(n,r,o){oa(!0);try{ot(n,r,o)}finally{oa(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new st(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Mc(n,r){Di(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new st(902,"");this._appRef=r}}class ww extends Sm{constructor(r){super(r),this._view=r}detectChanges(){Gt(this._view)}checkNoChanges(){!function br(n){oa(!0);try{Gt(n)}finally{oa(!1)}}(this._view)}get context(){return null}}class T0 extends i_{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=mr(r);return new wv(o,this.ngModule)}}function S0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class wv extends w0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function ic(n){return n.map(rc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return S0(this.componentDef.inputs)}get outputs(){return S0(this.componentDef.outputs)}create(r,o,l,h){const y=(h=h||this.ngModule)?function Cw(n,r){return{get:(o,l,h)=>{const y=n.get(o,Ev,h);return y!==Ev||l===Ev?y:r.get(o,l,h)}}}(r,h.injector):r,w=y.get(C0,L),S=y.get(Ew,null),N=w.createRenderer(null,this.componentDef),H=this.componentDef.selectors[0][0]||"div",z=l?function Yu(n,r,o){if(Un(n))return n.selectRootElement(r,o===Le.ShadowDom);let l="string"==typeof r?n.querySelector(r):r;return l.textContent="",l}(N,l,this.componentDef.encapsulation):Rc(w.createRenderer(null,this.componentDef),H,function Iw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(H)),re=this.componentDef.onPush?576:528,_e=function Ym(n,r){return{components:[],scheduler:n||of,clean:Ju,playerHandler:r||null,flags:0}}(),Fe=Bc(0,null,null,1,0,null,null,null,null,null),at=Ad(null,Fe,_e,re,null,null,w,N,S,y);let Ot,Vt;so(at);try{const rn=function Zm(n,r,o,l,h,y){const w=o[1];o[20]=n;const N=sc(w,20,2,"#host",null),H=N.mergedAttrs=r.hostAttrs;null!==H&&(Ld(N,H,!0),null!==n&&(xr(h,n,H),null!==N.classes&&dh(h,n,N.classes),null!==N.styles&&cf(h,n,N.styles)));const z=l.createRenderer(n,r),re=Ad(o,oc(r),null,r.onPush?64:16,o[20],N,l,z,y||null,null);return w.firstCreatePass&&(b(_t(N,o),w,r.type),Ah(w,N),xf(N,o.length,1)),X(o,re),o[20]=re}(z,this.componentDef,at,w,N);if(z)if(l)xr(N,z,["ng-version",b0.full]);else{const{attrs:Et,classes:In}=function lg(n){const r=[],o=[];let l=1,h=2;for(;l<n.length;){let y=n[l];if("string"==typeof y)2===h?""!==y&&r.push(y,n[++l]):8===h&&o.push(y);else{if(!bi(h))break;h=y}l++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Et&&xr(N,z,Et),In&&In.length>0&&dh(N,z,In.join(" "))}if(Vt=an(Fe,20),void 0!==o){const Et=Vt.projection=[];for(let In=0;In<this.ngContentSelectors.length;In++){const wr=o[In];Et.push(null!=wr?Array.from(wr):null)}}Ot=function Np(n,r,o,l,h){const y=o[1],w=function vp(n,r,o){const l=er();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),Ip(n,l,r,_l(n,r,1,null),o));const h=ht(r,n,l.directiveStart,l);Hi(h,r);const y=ct(l,r);return y&&Hi(y,r),h}(y,o,r);if(l.components.push(w),n[8]=w,h&&h.forEach(N=>N(w,r)),r.contentQueries){const N=er();r.contentQueries(1,w,N.directiveStart)}const S=er();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(is(S.index),Nd(o[1],S,0,S.directiveStart,S.directiveEnd,r),Th(r,w)),w}(rn,this.componentDef,at,_e,[Ng]),vl(Fe,at,null)}finally{hs()}return new bw(this.componentType,Ot,ng(Vt,at),at,Vt)}}class bw extends class hw{}{constructor(r,o,l,h,y){super(),this.location=l,this._rootLView=h,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new ww(h),this.componentType=r}get injector(){return new Qt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class rg{}class A0{}const ig=new Map;class M0 extends rg{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new T0(this);const l=yr(r);this._bootstrapComponents=as(l.bootstrap),this._r3Injector=bp(r,o,[{provide:rg,useValue:this},{provide:i_,useValue:this.componentFactoryResolver}],Me(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Oa.THROW_IF_NOT_FOUND,l=Zt.Default){return r===Oa||r===rg||r===Mf?this:this._r3Injector.get(r,o,l)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Iv extends A0{constructor(r){super(),this.moduleType=r,null!==yr(r)&&function Sw(n){const r=new Set;!function o(l){const h=yr(l,!0),y=h.id;null!==y&&(function x0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${Me(r)} vs ${Me(r.name)}`)}(y,ig.get(y),l),ig.set(y,l));const w=as(h.imports);for(const S of w)r.has(S)||(r.add(S),o(S))}(n)}(r)}create(r){return new M0(this.moduleType,r)}}function Am(n,r){const o=n[r];return o===Fn?void 0:o}function P0(n,r,o,l,h,y,w){const S=r+o;return function lc(n,r,o,l){const h=_a(n,r,o);return _a(n,r+1,l)||h}(n,S,h,y)?Mo(n,S+2,w?l.call(w,h,y):l(h,y)):Am(n,S+2)}function F0(n,r){const o=Vn();let l;const h=n+20;o.firstCreatePass?(l=function Uw(n,r){if(r)for(let o=r.length-1;o>=0;o--){const l=r[o];if(n===l.name)return l}}(r,o.pipeRegistry),o.data[h]=l,l.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,l.onDestroy)):l=o.data[h];const y=l.factory||(l.factory=ci(l.type)),w=Mn(tu);try{const S=ao(!1),N=y();return ao(S),function Ug(n,r,o,l){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=l}(o,gt(),h,N),N}finally{Mn(w)}}function U0(n,r,o){const l=n+20,h=gt(),y=Hn(h,l);return xm(h,l)?function N0(n,r,o,l,h,y){const w=r+o;return _a(n,w,h)?Mo(n,w+1,y?l.call(y,h):l(h)):Am(n,w+1)}(h,Qr(),r,y.transform,o,y):y.transform(o)}function V0(n,r,o,l){const h=n+20,y=gt(),w=Hn(y,h);return xm(y,h)?P0(y,Qr(),r,w.transform,o,l,w):w.transform(o,l)}function xm(n,r){return n[1].data[r].pure}function Cv(n){return r=>{setTimeout(n,void 0,r)}}const td=class Hw extends T.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,l){var h,y,w;let S=r,N=o||(()=>null),H=l;if(r&&"object"==typeof r){const re=r;S=null===(h=re.next)||void 0===h?void 0:h.bind(re),N=null===(y=re.error)||void 0===y?void 0:y.bind(re),H=null===(w=re.complete)||void 0===w?void 0:w.bind(re)}this.__isAsync&&(N=Cv(N),S&&(S=Cv(S)),H&&(H=Cv(H)));const z=super.subscribe({next:S,error:N,complete:H});return r instanceof Y.w0&&r.add(z),z}};function $w(){return this._results[$c()]()}class Dv{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=$c(),l=Dv.prototype;l[o]||(l[o]=$w)}get changes(){return this._changes||(this._changes=new td)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const l=this;l.dirty=!1;const h=os(r);(this._changesDetected=!function ca(n,r,o){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let h=n[l],y=r[l];if(o&&(h=o(h),y=o(y)),y!==h)return!1}return!0}(l._results,h,o))&&(l._results=h,l.length=h.length,l.last=h[this.length-1],l.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Rm=(()=>{class n{}return n.__NG_ELEMENT_ID__=zw,n})();const Gw=Rm,Ww=class extends Gw{constructor(r,o,l){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=l}createEmbeddedView(r){const o=this._declarationTContainer.tViews,l=Ad(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(l[19]=y.createEmbeddedView(o)),vl(o,l,r),new Sm(l)}};function zw(){return o_(er(),gt())}function o_(n,r){return 4&n.type?new Ww(r,n,ng(n,r)):null}let a_=(()=>{class n{}return n.__NG_ELEMENT_ID__=Kw,n})();function Kw(){return H0(er(),gt())}const qw=a_,B0=class extends qw{constructor(r,o,l){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=l}get element(){return ng(this._hostTNode,this._hostLView)}get injector(){return new Qt(this._hostTNode,this._hostLView)}get parentInjector(){const r=$o(this._hostTNode,this._hostLView);if(qs(r)){const o=vr(r,this._hostLView),l=oo(r);return new Qt(o[1].data[l+8],o)}return new Qt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=j0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,l){const h=r.createEmbeddedView(o||{});return this.insert(h,l),h}createComponent(r,o,l,h,y){const w=r&&!function qa(n){return"function"==typeof n}(r);let S;if(w)S=o;else{const re=o||{};S=re.index,l=re.injector,h=re.projectableNodes,y=re.ngModuleRef}const N=w?r:new wv(mr(r)),H=l||this.parentInjector;if(!y&&null==N.ngModule){const _e=(w?H:this.parentInjector).get(rg,null);_e&&(y=_e)}const z=N.create(H,h,void 0,y);return this.insert(z.hostView,S),z}insert(r,o){const l=r._lView,h=l[1];if(function ir(n){return zi(n[3])}(l)){const z=this.indexOf(r);if(-1!==z)this.detach(z);else{const re=l[3],_e=new B0(re,re[6],re[3]);_e.detach(_e.indexOf(r))}}const y=this._adjustIndex(o),w=this._lContainer;!function vd(n,r,o,l){const h=10+l,y=o.length;l>0&&(o[h-1][4]=r),l<y-10?(r[4]=o[h],Ta(o,10+l,r)):(o.push(r),r[4]=null),r[3]=o;const w=r[17];null!==w&&o!==w&&function Nc(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(w,r);const S=r[19];null!==S&&S.insertView(n),r[2]|=128}(h,l,w,y);const S=Ed(y,w),N=l[11],H=oh(N,w[7]);return null!==H&&function dl(n,r,o,l,h,y){l[0]=h,l[6]=r,Di(n,l,o,1,h,y)}(h,w[6],N,l,H,S),r.attachToViewContainerRef(),Ta(bv(w),y,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=j0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),l=rh(this._lContainer,o);l&&(Oi(bv(this._lContainer),o),ec(l[1],l))}detach(r){const o=this._adjustIndex(r,-1),l=rh(this._lContainer,o);return l&&null!=Oi(bv(this._lContainer),o)?new Sm(l):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function j0(n){return n[8]}function bv(n){return n[8]||(n[8]=[])}function H0(n,r){let o;const l=r[n.index];if(zi(l))o=l;else{let h;if(8&n.type)h=O(l);else{const y=r[11];h=y.createComment("");const w=ct(n,r);tc(y,oh(y,w),h,function Pc(n,r){return Un(n)?n.nextSibling(r):r.nextSibling}(y,w),!1)}r[n.index]=o=u(l,r,h,n),X(r,o)}return new B0(o,n,r)}class Tv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Sv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const l=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let y=0;y<l;y++){const w=o.getByIndex(y);h.push(this.queries[w.indexInDeclarationView].clone())}return new Sv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==Q0(r,o).matches&&this.queries[o].setDirty()}}class $0{constructor(r,o,l=null){this.predicate=r,this.flags=o,this.read=l}}class Av{constructor(r=[]){this.queries=r}elementStart(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let l=0;l<this.length;l++){const h=null!==o?o.length:0,y=this.getByIndex(l).embeddedTView(r,h);y&&(y.indexInDeclarationView=l,null!==o?o.push(y):o=[y])}return null!==o?new Av(o):null}template(r,o){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class xv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new xv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==o;)l=l.parent;return o===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const l=this.metadata.predicate;if(Array.isArray(l))for(let h=0;h<l.length;h++){const y=l[h];this.matchTNodeWithReadOption(r,o,Qw(o,y)),this.matchTNodeWithReadOption(r,o,Ye(o,r,y,!1,!1))}else l===Rm?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,Ye(o,r,l,!1,!1))}matchTNodeWithReadOption(r,o,l){if(null!==l){const h=this.metadata.read;if(null!==h)if(h===Tm||h===a_||h===Rm&&4&o.type)this.addMatch(o.index,-2);else{const y=Ye(o,r,h,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,l)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function Qw(n,r){const o=n.localNames;if(null!==o)for(let l=0;l<o.length;l+=2)if(o[l]===r)return o[l+1];return null}function Xw(n,r,o,l){return-1===o?function Jw(n,r){return 11&n.type?ng(n,r):4&n.type?o_(n,r):null}(r,n):-2===o?function eI(n,r,o){return o===Tm?ng(r,n):o===Rm?o_(r,n):o===a_?H0(r,n):void 0}(n,r,l):ht(n,n[1],o,r)}function G0(n,r,o,l){const h=r[19].queries[l];if(null===h.matches){const y=n.data,w=o.matches,S=[];for(let N=0;N<w.length;N+=2){const H=w[N];S.push(H<0?null:Xw(r,y[H],w[N+1],o.metadata.read))}h.matches=S}return h.matches}function Rv(n,r,o,l){const h=n.queries.getByIndex(o),y=h.matches;if(null!==y){const w=G0(n,r,h,o);for(let S=0;S<y.length;S+=2){const N=y[S];if(N>0)l.push(w[S/2]);else{const H=y[S+1],z=r[-N];for(let re=10;re<z.length;re++){const _e=z[re];_e[17]===_e[3]&&Rv(_e[1],_e,H,l)}if(null!==z[9]){const re=z[9];for(let _e=0;_e<re.length;_e++){const Fe=re[_e];Rv(Fe[1],Fe,H,l)}}}}}return l}function W0(n){const r=gt(),o=Vn(),l=ja();Ha(l+1);const h=Q0(o,l);if(n.dirty&&An(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const y=h.crossesNgTemplate?Rv(o,r,l,[]):G0(o,r,h,l);n.reset(y,mw),n.notifyOnChanges()}return!0}return!1}function z0(n,r,o){const l=Vn();l.firstCreatePass&&(Y0(l,new $0(n,r,o),-1),2==(2&r)&&(l.staticViewQueries=!0)),Z0(l,gt(),r)}function K0(n,r,o,l){const h=Vn();if(h.firstCreatePass){const y=er();Y0(h,new $0(r,o,l),y.index),function nI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}Z0(h,gt(),o)}function q0(){return function tI(n,r){return n[19].queries[r].queryList}(gt(),ja())}function Z0(n,r,o){const l=new Dv(4==(4&o));mp(n,r,l,l.destroy),null===r[19]&&(r[19]=new Sv),r[19].queries.push(new Tv(l))}function Y0(n,r,o){null===n.queries&&(n.queries=new Av),n.queries.track(new xv(r,o))}function Q0(n,r){return n.queries.getByIndex(r)}function J0(n,r){return o_(n,r)}function c_(...n){}const gE=new Dr("Application Initializer");let Lv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=c_,this.reject=c_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,h)=>{this.resolve=l,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const y=this.appInits[h]();if(Wp(y))o.push(y);else if(gy(y)){const w=new Promise((S,N)=>{y.subscribe({complete:S,error:N})});o.push(w)}}Promise.all(o).then(()=>{l()}).catch(h=>{this.reject(h)}),0===o.length&&l(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(ft(gE,8))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mE=new Dr("AppId",{providedIn:"root",factory:function yE(){return`${Fv()}${Fv()}${Fv()}`}});function Fv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _E=new Dr("Platform Initializer"),vI=new Dr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vE=new Dr("appBootstrapListener");let EI=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Uv=new Dr("LocaleId",{providedIn:"root",factory:()=>vn(Uv,Zt.Optional|Zt.SkipSelf)||function wI(){return"undefined"!=typeof $localize&&$localize.locale||Zf}()}),II=new Dr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class CI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let DI=(()=>{class n{compileModuleSync(o){return new Iv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const l=this.compileModuleSync(o),y=as(yr(o).declarations).reduce((w,S)=>{const N=mr(S);return N&&w.push(new wv(N)),w},[]);return new CI(l,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TI=(()=>Promise.resolve(0))();function Vv(n){"undefined"==typeof Zone?TI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class fc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new td(!1),this.onMicrotaskEmpty=new td(!1),this.onStable=new td(!1),this.onError=new td(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!l&&o,h.shouldCoalesceRunChangeDetection=l,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function SI(){let n=Jt.requestAnimationFrame,r=Jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function RI(n){const r=()=>{!function xI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Jt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,jv(n),n.isCheckStableRunning=!0,Bv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),jv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,l,h,y,w,S)=>{try{return EE(n),o.invokeTask(h,y,w,S)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),wE(n)}},onInvoke:(o,l,h,y,w,S,N)=>{try{return EE(n),o.invoke(h,y,w,S,N)}finally{n.shouldCoalesceRunChangeDetection&&r(),wE(n)}},onHasTask:(o,l,h,y)=>{o.hasTask(h,y),l===h&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,jv(n),Bv(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,l,h,y)=>(o.handleError(h,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!fc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(fc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,l){return this._inner.run(r,o,l)}runTask(r,o,l,h){const y=this._inner,w=y.scheduleEventTask("NgZoneEvent: "+h,r,AI,c_,c_);try{return y.runTask(w,o,l)}finally{y.cancelTask(w)}}runGuarded(r,o,l){return this._inner.runGuarded(r,o,l)}runOutsideAngular(r){return this._outer.run(r)}}const AI={};function Bv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function EE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wE(n){n._nesting--,Bv(n)}class MI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new td,this.onMicrotaskEmpty=new td,this.onStable=new td,this.onError=new td}run(r,o,l){return r.apply(o,l)}runGuarded(r,o,l){return r.apply(o,l)}runOutsideAngular(r){return r()}runTask(r,o,l,h){return r.apply(o,l)}}let IE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{fc.assertNotInAngularZone(),Vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(o)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,l,h){let y=-1;l&&l>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==y),o(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:h})}whenStable(o,l,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,l,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,l,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(ft(fc))},n.\u0275prov=jt({token:n,factory:n.\u0275fac}),n})(),NI=(()=>{class n{constructor(){this._applications=new Map,Hv.addToWindow(this)}registerApplication(o,l){this._applications.set(o,l)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,l=!0){return Hv.findTestabilityInTree(this,o,l)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class PI{addToWindow(r){}findTestabilityInTree(r,o,l){return null}}function OI(n){Hv=n}let Hv=new PI,Xf=null;const CE=new Dr("AllowMultipleToken"),DE=new Dr("PlatformOnDestroy");class FI{constructor(r,o){this.name=r,this.token=o}}function bE(n,r,o=[]){const l=`Platform: ${r}`,h=new Dr(l);return(y=[])=>{let w=$v();if(!w||w.injector.get(CE,!1)){const S=[...o,...y,{provide:h,useValue:!0}];n?n(S):function UI(n){if(Xf&&!Xf.get(CE,!1))throw new st(400,"");Xf=n;const r=n.get(TE),o=n.get(_E,null);o&&o.forEach(l=>l())}(function BI(n=[],r){return Oa.create({name:r,providers:[{provide:Ig,useValue:"platform"},{provide:DE,useValue:()=>Xf=null},...n]})}(S,l))}return function VI(n){const r=$v();if(!r)throw new st(401,"");return r}()}}function $v(){var n;return null!==(n=null==Xf?void 0:Xf.get(TE))&&void 0!==n?n:null}let TE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,l){const S=function jI(n,r){let o;return o="noop"===n?new MI:("zone.js"===n?void 0:n)||new fc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),N=[{provide:fc,useValue:S}];return S.run(()=>{const H=Oa.create({providers:N,parent:this.injector,name:o.moduleType.name}),z=o.create(H),re=z.injector.get(Vu,null);if(!re)throw new st(402,"");return S.runOutsideAngular(()=>{const _e=S.onError.subscribe({next:Fe=>{re.handleError(Fe)}});z.onDestroy(()=>{Wv(this._modules,z),_e.unsubscribe()})}),function HI(n,r,o){try{const l=o();return Wp(l)?l.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(re,S,()=>{const _e=z.injector.get(Lv);return _e.runInitializers(),_e.donePromise.then(()=>(function Wd(n){Ut(n,"Expected localeId to be defined"),"string"==typeof n&&(Gd=n.toLowerCase().replace(/_/g,"-"))}(z.injector.get(Uv,Zf)||Zf),this._moduleDoBootstrap(z),z))})})}bootstrapModule(o,l=[]){const h=SE({},l);return function kI(n,r,o){const l=new Iv(o);return Promise.resolve(l)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,h))}_moduleDoBootstrap(o){const l=o.injector.get(Gv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>l.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new st(403,"");o.instance.ngDoBootstrap(l)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new st(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const o=this._injector.get(DE,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(ft(Oa))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function SE(n,r){return Array.isArray(r)?r.reduce(SE,n):Object.assign(Object.assign({},n),r)}let Gv=(()=>{class n{constructor(o,l,h,y){this._zone=o,this._injector=l,this._exceptionHandler=h,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new Q.y(N=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{N.next(this._stable),N.complete()})}),S=new Q.y(N=>{let H;this._zone.runOutsideAngular(()=>{H=this._zone.onStable.subscribe(()=>{fc.assertNotInAngularZone(),Vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,N.next(!0))})})});const z=this._zone.onUnstable.subscribe(()=>{fc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{N.next(!1)}))});return()=>{H.unsubscribe(),z.unsubscribe()}});this.isStable=(0,ve.T)(w,S.pipe((0,Ee.B)()))}bootstrap(o,l){if(!this._initStatus.done)throw new st(405,"");let h;h=o instanceof w0?o:this._injector.get(i_).resolveComponentFactory(o),this.componentTypes.push(h.componentType);const y=function LI(n){return n.isBoundToModule}(h)?void 0:this._injector.get(rg),S=h.create(Oa.NULL,[],l||h.selector,y),N=S.location.nativeElement,H=S.injector.get(IE,null),z=H&&S.injector.get(NI);return H&&z&&z.registerApplication(N,H),S.onDestroy(()=>{this.detachView(S.hostView),Wv(this.components,S),z&&z.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new st(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const l=o;this._views.push(l),l.attachToAppRef(this)}detachView(o){const l=o;Wv(this._views,l),l.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(vE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(ft(fc),ft(Oa),ft(Vu),ft(Lv))},n.\u0275prov=jt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Wv(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let xE=!0,RE=!1;function GI(){return RE=!0,xE}function WI(){if(RE)throw new Error("Cannot enable prod mode after platform setup.");xE=!1}let zI=(()=>{class n{}return n.__NG_ELEMENT_ID__=KI,n})();function KI(n){return function qI(n,r,o){if(Ds(n)&&!o){const l=Cn(n.index,r);return new Sm(l,l)}return 47&n.type?new Sm(r[16],r):null}(er(),gt(),16==(16&n))}class OE{constructor(){}supports(r){return Uh(r)}create(r){return new eC(r)}}const XI=(n,r)=>r;class eC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||XI}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,l=this._removalsHead,h=0,y=null;for(;o||l;){const w=!l||o&&o.currentIndex<LE(l,h,y)?o:l,S=LE(w,h,y),N=w.currentIndex;if(w===l)h--,l=l._nextRemoved;else if(o=o._next,null==w.previousIndex)h++;else{y||(y=[]);const H=S-h,z=N-h;if(H!=z){for(let _e=0;_e<H;_e++){const Fe=_e<y.length?y[_e]:y[_e]=0,at=Fe+_e;z<=at&&at<H&&(y[_e]=Fe+1)}y[w.previousIndex]=z-H}}S!==N&&r(w,S,N)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Uh(r))throw new st(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,y,w,o=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let S=0;S<this.length;S++)y=r[S],w=this._trackByFn(S,y),null!==o&&Object.is(o.trackById,w)?(l&&(o=this._verifyReinsertion(o,y,w,S)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,w,S),l=!0),o=o._next}else h=0,function T_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[$c()]();let l;for(;!(l=o.next()).done;)r(l.value)}}(r,S=>{w=this._trackByFn(h,S),null!==o&&Object.is(o.trackById,w)?(l&&(o=this._verifyReinsertion(o,S,w,h)),Object.is(o.item,S)||this._addIdentityChange(o,S)):(o=this._mismatch(o,S,w,h),l=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,l,h){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,y,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,y,h)):r=this._addAfter(new tC(o,l),y,h),r}_verifyReinsertion(r,o,l,h){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==y?r=this._reinsertAfter(y,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,y=r._nextRemoved;return null===h?this._removalsHead=y:h._nextRemoved=y,null===y?this._removalsTail=h:y._prevRemoved=h,this._insertAfter(r,o,l),this._addToMoves(r,l),r}_moveAfter(r,o,l){return this._unlink(r),this._insertAfter(r,o,l),this._addToMoves(r,l),r}_addAfter(r,o,l){return this._insertAfter(r,o,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,l){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new kE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,l=r._next;return null===o?this._itHead=l:o._next=l,null===l?this._itTail=o:l._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new kE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class tC{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===o||o<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const o=r._prevDup,l=r._nextDup;return null===o?this._head=l:o._nextDup=l,null===l?this._tail=o:l._prevDup=o,null===this._head}}class kE{constructor(){this.map=new Map}put(r){const o=r.trackById;let l=this.map.get(o);l||(l=new nC,this.map.set(o,l)),l.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LE(n,r,o){const l=n.previousIndex;if(null===l)return l;let h=0;return o&&l<o.length&&(h=o[l]),l+r+h}class FE{constructor(){}supports(r){return r instanceof Map||Of(r)}create(){return new rC}}class rC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Of(r)))throw new st(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,l),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(h,l);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let l=o;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const l=r._prev;return o._next=r,o._prev=l,r._prev=o,l&&(l._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const y=h._prev,w=h._next;return y&&(y._next=w),w&&(w._prev=y),h._next=null,h._prev=null,h}const l=new iC(r);return this._records.set(r,l),l.currentValue=o,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(l=>o(r[l],l))}}class iC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UE(){return new Yv([new OE])}let Yv=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(null!=l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||UE()),deps:[[n,new ys,new Bi]]}}find(o){const l=this.factories.find(h=>h.supports(o));if(null!=l)return l;throw new st(901,"")}}return n.\u0275prov=jt({token:n,providedIn:"root",factory:UE}),n})();function VE(){return new Qv([new FE])}let Qv=(()=>{class n{constructor(o){this.factories=o}static create(o,l){if(l){const h=l.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:l=>n.create(o,l||VE()),deps:[[n,new ys,new Bi]]}}find(o){const l=this.factories.find(y=>y.supports(o));if(l)return l;throw new st(901,"")}}return n.\u0275prov=jt({token:n,providedIn:"root",factory:VE}),n})();const aC=bE(null,"core",[]);let uC=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(ft(Gv))},n.\u0275mod=Ur({type:n}),n.\u0275inj=sn({}),n})()},4410:(Mt,Ve,V)=>{V.d(Ve,{F0:()=>xn,Bz:()=>oo,lC:()=>vo});var T=V(5e3),Y=V(8306),Q=V(4742),ve=V(8996),Ee=V(4671),be=V(3268),Pe=V(7669),Me=V(1810),Oe=V(5403),le=V(9672);function Ct(b,I,C){b?(0,le.f)(C,b,I):I()}var nt=V(576);function st(b,I){const C=(0,nt.m)(b)?b:()=>b,R=M=>M.error(C());return new Y.y(I?M=>I.schedule(R,0,M):R)}var Dt=V(8421);function Ge(b){return new Y.y(I=>{(0,Dt.Xf)(b()).subscribe(I)})}var et=V(727),Ie=V(4482);function At(){return(0,Ie.e)((b,I)=>{let C=null;b._refCount++;const R=(0,Oe.x)(I,void 0,void 0,void 0,()=>{if(!b||b._refCount<=0||0<--b._refCount)return void(C=null);const M=b._connection,B=C;C=null,M&&(!B||M===B)&&M.unsubscribe(),I.unsubscribe()});b.subscribe(R),R.closed||(C=b.connect())})}class tt extends Y.y{constructor(I,C){super(),this.source=I,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,Ie.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,null==I||I.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new et.w0;const C=this.getSubject();I.add(this.source.subscribe((0,Oe.x)(C,void 0,()=>{this._teardown(),C.complete()},R=>{this._teardown(),C.error(R)},()=>this._teardown()))),I.closed&&(this._connection=null,I=et.w0.EMPTY)}return I}refCount(){return At()(this)}}var Ne=V(9646),ke=V(1135),Tt=V(6805),wt=V(7272),J=V(515),Ze=V(7579);function oe(b){return(0,Ie.e)((I,C)=>{let B,R=null,M=!1;R=I.subscribe((0,Oe.x)(C,void 0,void 0,ne=>{B=(0,Dt.Xf)(b(ne,oe(b)(I))),R?(R.unsubscribe(),R=null,B.subscribe(C)):M=!0})),M&&(R.unsubscribe(),R=null,B.subscribe(C))})}var Se=V(9300);function xe(b){return b<=0?()=>J.E:(0,Ie.e)((I,C)=>{let R=[];I.subscribe((0,Oe.x)(C,M=>{R.push(M),b<R.length&&R.shift()},()=>{for(const M of R)C.next(M);C.complete()},void 0,()=>{R=null}))})}var We=V(8068),He=V(6590),xt=V(4004),Ut=V(3900),lt=V(5698),cn=V(8675),qt=V(5026),Wt=V(4351),jt=V(590),pn=V(5577),sn=V(8505),yn=V(8189),ur=V(9808);class Xn{constructor(I,C){this.id=I,this.url=C}}class or extends Xn{constructor(I,C,R="imperative",M=null){super(I,C),this.navigationTrigger=R,this.restoredState=M}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Kn extends Xn{constructor(I,C,R){super(I,C),this.urlAfterRedirects=R}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tr extends Xn{constructor(I,C,R){super(I,C),this.reason=R}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qn extends Xn{constructor(I,C,R){super(I,C),this.error=R}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hr extends Xn{constructor(I,C,R,M){super(I,C),this.urlAfterRedirects=R,this.state=M}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends Xn{constructor(I,C,R,M){super(I,C),this.urlAfterRedirects=R,this.state=M}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zt extends Xn{constructor(I,C,R,M,B){super(I,C),this.urlAfterRedirects=R,this.state=M,this.shouldActivate=B}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sn extends Xn{constructor(I,C,R,M){super(I,C),this.urlAfterRedirects=R,this.state=M}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rn extends Xn{constructor(I,C,R,M){super(I,C),this.urlAfterRedirects=R,this.state=M}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mn{constructor(I){this.route=I}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wi{constructor(I){this.route=I}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hi{constructor(I){this.snapshot=I}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Je{constructor(I){this.snapshot=I}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class me{constructor(I){this.snapshot=I}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ce{constructor(I){this.snapshot=I}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dt{constructor(I,C,R){this.routerEvent=I,this.position=C,this.anchor=R}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Le="primary";class pt{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C[0]:C}return null}getAll(I){if(this.has(I)){const C=this.params[I];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function St(b){return new pt(b)}const Dn="ngNavigationCancelingError";function on(b){const I=Error("NavigationCancelingError: "+b);return I[Dn]=!0,I}function Wr(b,I,C){const R=C.path.split("/");if(R.length>b.length||"full"===C.pathMatch&&(I.hasChildren()||R.length<b.length))return null;const M={};for(let B=0;B<R.length;B++){const ne=R[B],pe=b[B];if(ne.startsWith(":"))M[ne.substring(1)]=pe;else if(ne!==pe.path)return null}return{consumed:b.slice(0,R.length),posParams:M}}function Nn(b,I){const C=b?Object.keys(b):void 0,R=I?Object.keys(I):void 0;if(!C||!R||C.length!=R.length)return!1;let M;for(let B=0;B<C.length;B++)if(M=C[B],!ie(b[M],I[M]))return!1;return!0}function ie(b,I){if(Array.isArray(b)&&Array.isArray(I)){if(b.length!==I.length)return!1;const C=[...b].sort(),R=[...I].sort();return C.every((M,B)=>R[B]===M)}return b===I}function he(b){return Array.prototype.concat.apply([],b)}function ye(b){return b.length>0?b[b.length-1]:null}function ue(b,I){for(const C in b)b.hasOwnProperty(C)&&I(b[C],C)}function Re(b){return(0,T.CqO)(b)?b:(0,T.QGY)(b)?(0,ve.D)(Promise.resolve(b)):(0,Ne.of)(b)}const kt={exact:function dn(b,I,C){if(!pi(b.segments,I.segments)||!Ai(b.segments,I.segments,C)||b.numberOfChildren!==I.numberOfChildren)return!1;for(const R in I.children)if(!b.children[R]||!dn(b.children[R],I.children[R],C))return!1;return!0},subset:Ur},Yt={exact:function lr(b,I){return Nn(b,I)},subset:function Mr(b,I){return Object.keys(I).length<=Object.keys(b).length&&Object.keys(I).every(C=>ie(b[C],I[C]))},ignored:()=>!0};function Xt(b,I,C){return kt[C.paths](b.root,I.root,C.matrixParams)&&Yt[C.queryParams](b.queryParams,I.queryParams)&&!("exact"===C.fragment&&b.fragment!==I.fragment)}function Ur(b,I,C){return ws(b,I,I.segments,C)}function ws(b,I,C,R){if(b.segments.length>C.length){const M=b.segments.slice(0,C.length);return!(!pi(M,C)||I.hasChildren()||!Ai(M,C,R))}if(b.segments.length===C.length){if(!pi(b.segments,C)||!Ai(b.segments,C,R))return!1;for(const M in I.children)if(!b.children[M]||!Ur(b.children[M],I.children[M],R))return!1;return!0}{const M=C.slice(0,b.segments.length),B=C.slice(b.segments.length);return!!(pi(b.segments,M)&&Ai(b.segments,M,R)&&b.children[Le])&&ws(b.children[Le],I,B,R)}}function Ai(b,I,C){return I.every((R,M)=>Yt[C](b[M].parameters,R.parameters))}class Qi{constructor(I,C,R){this.root=I,this.queryParams=C,this.fragment=R}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}toString(){return Os.serialize(this)}}class En{constructor(I,C){this.segments=I,this.children=C,this.parent=null,ue(C,(R,M)=>R.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ji(this)}}class mr{constructor(I,C){this.path=I,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=St(this.parameters)),this._parameterMap}toString(){return ni(this)}}function pi(b,I){return b.length===I.length&&b.every((C,R)=>C.path===I[R].path)}class ui{}class Oo{parse(I){const C=new Ls(I);return new Qi(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(I){const C=`/${li(I.root,!0)}`,R=function Sr(b){const I=Object.keys(b).map(C=>{const R=b[C];return Array.isArray(R)?R.map(M=>`${xi(C)}=${xi(M)}`).join("&"):`${xi(C)}=${xi(R)}`}).filter(C=>!!C);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${C}${R}${"string"==typeof I.fragment?`#${function Yn(b){return encodeURI(b)}(I.fragment)}`:""}`}}const Os=new Oo;function Ji(b){return b.segments.map(I=>ni(I)).join("/")}function li(b,I){if(!b.hasChildren())return Ji(b);if(I){const C=b.children[Le]?li(b.children[Le],!1):"",R=[];return ue(b.children,(M,B)=>{B!==Le&&R.push(`${B}:${li(M,!1)}`)}),R.length>0?`${C}(${R.join("//")})`:C}{const C=function yr(b,I){let C=[];return ue(b.children,(R,M)=>{M===Le&&(C=C.concat(I(R,M)))}),ue(b.children,(R,M)=>{M!==Le&&(C=C.concat(I(R,M)))}),C}(b,(R,M)=>M===Le?[li(b.children[Le],!1)]:[`${M}:${li(R,!1)}`]);return 1===Object.keys(b.children).length&&null!=b.children[Le]?`${Ji(b)}/${C[0]}`:`${Ji(b)}/(${C.join("//")})`}}function cr(b){return encodeURIComponent(b).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xi(b){return cr(b).replace(/%3B/gi,";")}function bt(b){return cr(b).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ht(b){return decodeURIComponent(b)}function $n(b){return Ht(b.replace(/\+/g,"%20"))}function ni(b){return`${bt(b.path)}${function Xi(b){return Object.keys(b).map(I=>`;${bt(I)}=${bt(b[I])}`).join("")}(b.parameters)}`}const es=/^[^\/()?;=#]+/;function ar(b){const I=b.match(es);return I?I[0]:""}const Ri=/^[^=?&#]+/,hn=/^[^&#]+/;class Ls{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new En([],{}):new En([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let R={};return this.peekStartsWith("(")&&(R=this.parseParens(!1)),(I.length>0||Object.keys(C).length>0)&&(R[Le]=new En(I,C)),R}parseSegment(){const I=ar(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(I),new mr(Ht(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const C=ar(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const M=ar(this.remaining);M&&(R=M,this.capture(R))}I[Ht(C)]=Ht(R)}parseQueryParam(I){const C=function Ar(b){const I=b.match(Ri);return I?I[0]:""}(this.remaining);if(!C)return;this.capture(C);let R="";if(this.consumeOptional("=")){const ne=function ks(b){const I=b.match(hn);return I?I[0]:""}(this.remaining);ne&&(R=ne,this.capture(R))}const M=$n(C),B=$n(R);if(I.hasOwnProperty(M)){let ne=I[M];Array.isArray(ne)||(ne=[ne],I[M]=ne),ne.push(B)}else I[M]=B}parseParens(I){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const R=ar(this.remaining),M=this.remaining[R.length];if("/"!==M&&")"!==M&&";"!==M)throw new Error(`Cannot parse url '${this.url}'`);let B;R.indexOf(":")>-1?(B=R.substr(0,R.indexOf(":")),this.capture(B),this.capture(":")):I&&(B=Le);const ne=this.parseChildren();C[B]=1===Object.keys(ne).length?ne[Le]:new En([],ne),this.consumeOptional("//")}return C}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new Error(`Expected "${I}".`)}}class Is{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const C=this.pathFromRoot(I);return C.length>1?C[C.length-2]:null}children(I){const C=Ii(I,this._root);return C?C.children.map(R=>R.value):[]}firstChild(I){const C=Ii(I,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(I){const C=pr(I,this._root);return C.length<2?[]:C[C.length-2].children.map(M=>M.value).filter(M=>M!==I)}pathFromRoot(I){return pr(I,this._root).map(C=>C.value)}}function Ii(b,I){if(b===I.value)return I;for(const C of I.children){const R=Ii(b,C);if(R)return R}return null}function pr(b,I){if(b===I.value)return[I];for(const C of I.children){const R=pr(b,C);if(R.length)return R.unshift(I),R}return[]}class te{constructor(I,C){this.value=I,this.children=C}toString(){return`TreeNode(${this.value})`}}function zr(b){const I={};return b&&b.children.forEach(C=>I[C.value.outlet]=C),I}class Vr extends Is{constructor(I,C){super(I),this.snapshot=C,Kr(this,I)}toString(){return this.snapshot.toString()}}function Wn(b,I){const C=function Cs(b,I){const ne=new Fs([],{},{},"",{},Le,I,null,b.root,-1,{});return new Ds("",new te(ne,[]))}(b,I),R=new ke.X([new mr("",{})]),M=new ke.X({}),B=new ke.X({}),ne=new ke.X({}),pe=new ke.X(""),Ye=new ts(R,M,ne,pe,B,Le,I,C.root);return Ye.snapshot=C.root,new Vr(new te(Ye,[]),C)}class ts{constructor(I,C,R,M,B,ne,pe,Ye){this.url=I,this.params=C,this.queryParams=R,this.fragment=M,this.data=B,this.outlet=ne,this.component=pe,this._futureSnapshot=Ye}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,xt.U)(I=>St(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,xt.U)(I=>St(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function gi(b,I="emptyOnly"){const C=b.pathFromRoot;let R=0;if("always"!==I)for(R=C.length-1;R>=1;){const M=C[R],B=C[R-1];if(M.routeConfig&&""===M.routeConfig.path)R--;else{if(B.component)break;R--}}return function zi(b){return b.reduce((I,C)=>({params:Object.assign(Object.assign({},I.params),C.params),data:Object.assign(Object.assign({},I.data),C.data),resolve:Object.assign(Object.assign({},I.resolve),C._resolvedData)}),{params:{},data:{},resolve:{}})}(C.slice(R))}class Fs{constructor(I,C,R,M,B,ne,pe,Ye,ht,Bn,Bt){this.url=I,this.params=C,this.queryParams=R,this.fragment=M,this.data=B,this.outlet=ne,this.component=pe,this.routeConfig=Ye,this._urlSegment=ht,this._lastPathIndex=Bn,this._resolve=Bt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=St(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=St(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(R=>R.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ds extends Is{constructor(I,C){super(C),this.url=I,Kr(this,C)}toString(){return mi(this._root)}}function Kr(b,I){I.value._routerState=b,I.children.forEach(C=>Kr(b,C))}function mi(b){const I=b.children.length>0?` { ${b.children.map(mi).join(", ")} } `:"";return`${b.value}${I}`}function mo(b){if(b.snapshot){const I=b.snapshot,C=b._futureSnapshot;b.snapshot=C,Nn(I.queryParams,C.queryParams)||b.queryParams.next(C.queryParams),I.fragment!==C.fragment&&b.fragment.next(C.fragment),Nn(I.params,C.params)||b.params.next(C.params),function fr(b,I){if(b.length!==I.length)return!1;for(let C=0;C<b.length;++C)if(!Nn(b[C],I[C]))return!1;return!0}(I.url,C.url)||b.url.next(C.url),Nn(I.data,C.data)||b.data.next(C.data)}else b.snapshot=b._futureSnapshot,b.data.next(b._futureSnapshot.data)}function Us(b,I){const C=Nn(b.params,I.params)&&function fi(b,I){return pi(b,I)&&b.every((C,R)=>Nn(C.parameters,I[R].parameters))}(b.url,I.url);return C&&!(!b.parent!=!I.parent)&&(!b.parent||Us(b.parent,I.parent))}function nr(b,I,C){if(C&&b.shouldReuseRoute(I.value,C.value.snapshot)){const R=C.value;R._futureSnapshot=I.value;const M=function bs(b,I,C){return I.children.map(R=>{for(const M of C.children)if(b.shouldReuseRoute(R.value,M.value.snapshot))return nr(b,R,M);return nr(b,R)})}(b,I,C);return new te(R,M)}{if(b.shouldAttach(I.value)){const B=b.retrieve(I.value);if(null!==B){const ne=B.route;return ne.value._futureSnapshot=I.value,ne.children=I.children.map(pe=>nr(b,pe)),ne}}const R=function _o(b){return new ts(new ke.X(b.url),new ke.X(b.params),new ke.X(b.queryParams),new ke.X(b.fragment),new ke.X(b.data),b.outlet,b.component,b)}(I.value),M=I.children.map(B=>nr(b,B));return new te(R,M)}}function fe(b){return"object"==typeof b&&null!=b&&!b.outlets&&!b.segmentPath}function je(b){return"object"==typeof b&&null!=b&&b.outlets}function Xe(b,I,C,R,M){let B={};if(R&&ue(R,(pe,Ye)=>{B[Ye]=Array.isArray(pe)?pe.map(ht=>`${ht}`):`${pe}`}),b===I)return new Qi(C,B,M);const ne=mt(b,I,C);return new Qi(ne,B,M)}function mt(b,I,C){const R={};return ue(b.children,(M,B)=>{R[B]=M===I?C:mt(M,I,C)}),new En(b.segments,R)}class Ft{constructor(I,C,R){if(this.isAbsolute=I,this.numberOfDoubleDots=C,this.commands=R,I&&R.length>0&&fe(R[0]))throw new Error("Root segment cannot have matrix parameters");const M=R.find(je);if(M&&M!==ye(R))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qr{constructor(I,C,R){this.segmentGroup=I,this.processChildren=C,this.index=R}}function Ts(b,I,C){if(b||(b=new En([],{})),0===b.segments.length&&b.hasChildren())return ns(b,I,C);const R=function yi(b,I,C){let R=0,M=I;const B={match:!1,pathIndex:0,commandIndex:0};for(;M<b.segments.length;){if(R>=C.length)return B;const ne=b.segments[M],pe=C[R];if(je(pe))break;const Ye=`${pe}`,ht=R<C.length-1?C[R+1]:null;if(M>0&&void 0===Ye)break;if(Ye&&ht&&"object"==typeof ht&&void 0===ht.outlets){if(!ci(Ye,ht,ne))return B;R+=2}else{if(!ci(Ye,{},ne))return B;R++}M++}return{match:!0,pathIndex:M,commandIndex:R}}(b,I,C),M=C.slice(R.commandIndex);if(R.match&&R.pathIndex<b.segments.length){const B=new En(b.segments.slice(0,R.pathIndex),{});return B.children[Le]=new En(b.segments.slice(R.pathIndex),b.children),ns(B,0,M)}return R.match&&0===M.length?new En(b.segments,{}):R.match&&!b.hasChildren()?Ss(b,I,C):R.match?ns(b,0,M):Ss(b,I,C)}function ns(b,I,C){if(0===C.length)return new En(b.segments,{});{const R=function Mi(b){return je(b[0])?b[0].outlets:{[Le]:b}}(C),M={};return ue(R,(B,ne)=>{"string"==typeof B&&(B=[B]),null!==B&&(M[ne]=Ts(b.children[ne],I,B))}),ue(b.children,(B,ne)=>{void 0===R[ne]&&(M[ne]=B)}),new En(b.segments,M)}}function Ss(b,I,C){const R=b.segments.slice(0,I);let M=0;for(;M<C.length;){const B=C[M];if(je(B)){const Ye=Zr(B.outlets);return new En(R,Ye)}if(0===M&&fe(C[0])){R.push(new mr(b.segments[I].path,Fa(C[0]))),M++;continue}const ne=je(B)?B.outlets[Le]:`${B}`,pe=M<C.length-1?C[M+1]:null;ne&&pe&&fe(pe)?(R.push(new mr(ne,Fa(pe))),M+=2):(R.push(new mr(ne,{})),M++)}return new En(R,{})}function Zr(b){const I={};return ue(b,(C,R)=>{"string"==typeof C&&(C=[C]),null!==C&&(I[R]=Ss(new En([],{}),0,C))}),I}function Fa(b){const I={};return ue(b,(C,R)=>I[R]=`${C}`),I}function ci(b,I,C){return b==C.path&&Nn(I,C.parameters)}class ls{constructor(I,C,R,M){this.routeReuseStrategy=I,this.futureState=C,this.currState=R,this.forwardEvent=M}activate(I){const C=this.futureState._root,R=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,R,I),mo(this.futureState.root),this.activateChildRoutes(C,R,I)}deactivateChildRoutes(I,C,R){const M=zr(C);I.children.forEach(B=>{const ne=B.value.outlet;this.deactivateRoutes(B,M[ne],R),delete M[ne]}),ue(M,(B,ne)=>{this.deactivateRouteAndItsChildren(B,R)})}deactivateRoutes(I,C,R){const M=I.value,B=C?C.value:null;if(M===B)if(M.component){const ne=R.getContext(M.outlet);ne&&this.deactivateChildRoutes(I,C,ne.children)}else this.deactivateChildRoutes(I,C,R);else B&&this.deactivateRouteAndItsChildren(C,R)}deactivateRouteAndItsChildren(I,C){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,C):this.deactivateRouteAndOutlet(I,C)}detachAndStoreRouteSubtree(I,C){const R=C.getContext(I.value.outlet),M=R&&I.value.component?R.children:C,B=zr(I);for(const ne of Object.keys(B))this.deactivateRouteAndItsChildren(B[ne],M);if(R&&R.outlet){const ne=R.outlet.detach(),pe=R.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ne,route:I,contexts:pe})}}deactivateRouteAndOutlet(I,C){const R=C.getContext(I.value.outlet),M=R&&I.value.component?R.children:C,B=zr(I);for(const ne of Object.keys(B))this.deactivateRouteAndItsChildren(B[ne],M);R&&R.outlet&&(R.outlet.deactivate(),R.children.onOutletDeactivated(),R.attachRef=null,R.resolver=null,R.route=null)}activateChildRoutes(I,C,R){const M=zr(C);I.children.forEach(B=>{this.activateRoutes(B,M[B.value.outlet],R),this.forwardEvent(new Ce(B.value.snapshot))}),I.children.length&&this.forwardEvent(new Je(I.value.snapshot))}activateRoutes(I,C,R){const M=I.value,B=C?C.value:null;if(mo(M),M===B)if(M.component){const ne=R.getOrCreateContext(M.outlet);this.activateChildRoutes(I,C,ne.children)}else this.activateChildRoutes(I,C,R);else if(M.component){const ne=R.getOrCreateContext(M.outlet);if(this.routeReuseStrategy.shouldAttach(M.snapshot)){const pe=this.routeReuseStrategy.retrieve(M.snapshot);this.routeReuseStrategy.store(M.snapshot,null),ne.children.onOutletReAttached(pe.contexts),ne.attachRef=pe.componentRef,ne.route=pe.route.value,ne.outlet&&ne.outlet.attach(pe.componentRef,pe.route.value),mo(pe.route.value),this.activateChildRoutes(I,null,ne.children)}else{const pe=function ko(b){for(let I=b.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}(M.snapshot),Ye=pe?pe.module.componentFactoryResolver:null;ne.attachRef=null,ne.route=M,ne.resolver=Ye,ne.outlet&&ne.outlet.activateWith(M,Ye),this.activateChildRoutes(I,null,ne.children)}}else this.activateChildRoutes(I,null,R)}}class ea{constructor(I,C){this.routes=I,this.module=C}}function As(b){return"function"==typeof b}function Nr(b){return b instanceof Qi}const Ni=Symbol("INITIAL_VALUE");function ri(){return(0,Ut.w)(b=>function ae(...b){const I=(0,Pe.yG)(b),C=(0,Pe.jO)(b),{args:R,keys:M}=(0,Q.D)(b);if(0===R.length)return(0,ve.D)([],I);const B=new Y.y(function Ae(b,I,C=Ee.y){return R=>{Ct(I,()=>{const{length:M}=b,B=new Array(M);let ne=M,pe=M;for(let Ye=0;Ye<M;Ye++)Ct(I,()=>{const ht=(0,ve.D)(b[Ye],I);let Bn=!1;ht.subscribe((0,Oe.x)(R,Bt=>{B[Ye]=Bt,Bn||(Bn=!0,pe--),pe||R.next(C(B.slice()))},()=>{--ne||R.complete()}))},R)},R)}}(R,I,M?ne=>(0,Me.n)(M,ne):Ee.y));return C?B.pipe((0,be.Z)(C)):B}(b.map(I=>I.pipe((0,lt.q)(1),(0,cn.O)(Ni)))).pipe((0,qt.R)((I,C)=>{let R=!1;return C.reduce((M,B,ne)=>M!==Ni?M:(B===Ni&&(R=!0),R||!1!==B&&ne!==C.length-1&&!Nr(B)?M:B),I)},Ni),(0,Se.h)(I=>I!==Ni),(0,xt.U)(I=>Nr(I)?I:!0===I),(0,lt.q)(1)))}class na{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cs,this.attachRef=null}}class cs{constructor(){this.contexts=new Map}onChildOutletCreated(I,C){const R=this.getOrCreateContext(I);R.outlet=C,this.contexts.set(I,R)}onChildOutletDestroyed(I){const C=this.getContext(I);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const I=this.contexts;return this.contexts=new Map,I}onOutletReAttached(I){this.contexts=I}getOrCreateContext(I){let C=this.getContext(I);return C||(C=new na,this.contexts.set(I,C)),C}getContext(I){return this.contexts.get(I)||null}}let vo=(()=>{class b{constructor(C,R,M,B,ne){this.parentContexts=C,this.location=R,this.resolver=M,this.changeDetector=ne,this.activated=null,this._activatedRoute=null,this.activateEvents=new T.vpe,this.deactivateEvents=new T.vpe,this.attachEvents=new T.vpe,this.detachEvents=new T.vpe,this.name=B||Le,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,R){this.activated=C,this._activatedRoute=R,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,R){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;const ne=(R=R||this.resolver).resolveComponentFactory(C._futureSnapshot.routeConfig.component),pe=this.parentContexts.getOrCreateContext(this.name).children,Ye=new rs(C,pe,this.location.injector);this.activated=this.location.createComponent(ne,this.location.length,Ye),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return b.\u0275fac=function(C){return new(C||b)(T.Y36(cs),T.Y36(T.s_b),T.Y36(T._Vd),T.$8M("name"),T.Y36(T.sBO))},b.\u0275dir=T.lG2({type:b,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),b})();class rs{constructor(I,C,R){this.route=I,this.childContexts=C,this.parent=R}get(I,C){return I===ts?this.route:I===cs?this.childContexts:this.parent.get(I,C)}}let ra=(()=>{class b{}return b.\u0275fac=function(C){return new(C||b)},b.\u0275cmp=T.Xpm({type:b,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,R){1&C&&T._UZ(0,"router-outlet")},directives:[vo],encapsulation:2}),b})();function ds(b,I=""){for(let C=0;C<b.length;C++){const R=b[C];Eo(R,Un(I,R))}}function Eo(b,I){b.children&&ds(b.children,I)}function Un(b,I){return I?b||I.path?b&&!I.path?`${b}/`:!b&&I.path?I.path:`${b}/${I.path}`:"":b}function L(b){const I=b.children&&b.children.map(L),C=I?Object.assign(Object.assign({},b),{children:I}):Object.assign({},b);return!C.component&&(I||C.loadChildren)&&C.outlet&&C.outlet!==Le&&(C.component=ra),C}function G(b){return b.outlet||Le}function O(b,I){const C=b.filter(R=>G(R)===I);return C.push(...b.filter(R=>G(R)!==I)),C}const Z={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function de(b,I,C){var R;if(""===I.path)return"full"===I.pathMatch&&(b.hasChildren()||C.length>0)?Object.assign({},Z):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const B=(I.matcher||Wr)(C,b,I);if(!B)return Object.assign({},Z);const ne={};ue(B.posParams,(Ye,ht)=>{ne[ht]=Ye.path});const pe=B.consumed.length>0?Object.assign(Object.assign({},ne),B.consumed[B.consumed.length-1].parameters):ne;return{matched:!0,consumedSegments:B.consumed,remainingSegments:C.slice(B.consumed.length),parameters:pe,positionalParamSegments:null!==(R=B.posParams)&&void 0!==R?R:{}}}function Ke(b,I,C,R,M="corrected"){if(C.length>0&&function an(b,I,C){return C.some(R=>Cn(b,I,R)&&G(R)!==Le)}(b,C,R)){const ne=new En(I,function $t(b,I,C,R){const M={};M[Le]=R,R._sourceSegment=b,R._segmentIndexShift=I.length;for(const B of C)if(""===B.path&&G(B)!==Le){const ne=new En([],{});ne._sourceSegment=b,ne._segmentIndexShift=I.length,M[G(B)]=ne}return M}(b,I,R,new En(C,b.children)));return ne._sourceSegment=b,ne._segmentIndexShift=I.length,{segmentGroup:ne,slicedSegments:[]}}if(0===C.length&&function Hn(b,I,C){return C.some(R=>Cn(b,I,R))}(b,C,R)){const ne=new En(b.segments,function ct(b,I,C,R,M,B){const ne={};for(const pe of R)if(Cn(b,C,pe)&&!M[G(pe)]){const Ye=new En([],{});Ye._sourceSegment=b,Ye._segmentIndexShift="legacy"===B?b.segments.length:I.length,ne[G(pe)]=Ye}return Object.assign(Object.assign({},M),ne)}(b,I,C,R,b.children,M));return ne._sourceSegment=b,ne._segmentIndexShift=I.length,{segmentGroup:ne,slicedSegments:C}}const B=new En(b.segments,b.children);return B._sourceSegment=b,B._segmentIndexShift=I.length,{segmentGroup:B,slicedSegments:C}}function Cn(b,I,C){return(!(b.hasChildren()||I.length>0)||"full"!==C.pathMatch)&&""===C.path}function An(b,I,C,R){return!!(G(b)===R||R!==Le&&Cn(I,C,b))&&("**"===b.path||de(I,b,C).matched)}function Pr(b,I,C){return 0===I.length&&!b.children[C]}class ir{constructor(I){this.segmentGroup=I||null}}class _r{constructor(I){this.urlTree=I}}function Pi(b){return st(new ir(b))}function _i(b){return st(new _r(b))}class Fo{constructor(I,C,R,M,B){this.configLoader=C,this.urlSerializer=R,this.urlTree=M,this.config=B,this.allowRedirects=!0,this.ngModule=I.get(T.h0i)}apply(){const I=Ke(this.urlTree.root,[],[],this.config).segmentGroup,C=new En(I.segments,I.children);return this.expandSegmentGroup(this.ngModule,this.config,C,Le).pipe((0,xt.U)(B=>this.createUrlTree(wa(B),this.urlTree.queryParams,this.urlTree.fragment))).pipe(oe(B=>{if(B instanceof _r)return this.allowRedirects=!1,this.match(B.urlTree);throw B instanceof ir?this.noMatchError(B):B}))}match(I){return this.expandSegmentGroup(this.ngModule,this.config,I.root,Le).pipe((0,xt.U)(M=>this.createUrlTree(wa(M),I.queryParams,I.fragment))).pipe(oe(M=>{throw M instanceof ir?this.noMatchError(M):M}))}noMatchError(I){return new Error(`Cannot match any routes. URL Segment: '${I.segmentGroup}'`)}createUrlTree(I,C,R){const M=I.segments.length>0?new En([],{[Le]:I}):I;return new Qi(M,C,R)}expandSegmentGroup(I,C,R,M){return 0===R.segments.length&&R.hasChildren()?this.expandChildren(I,C,R).pipe((0,xt.U)(B=>new En([],B))):this.expandSegment(I,R,C,R.segments,M,!0)}expandChildren(I,C,R){const M=[];for(const B of Object.keys(R.children))"primary"===B?M.unshift(B):M.push(B);return(0,ve.D)(M).pipe((0,Wt.b)(B=>{const ne=R.children[B],pe=O(C,B);return this.expandSegmentGroup(I,pe,ne,B).pipe((0,xt.U)(Ye=>({segment:Ye,outlet:B})))}),(0,qt.R)((B,ne)=>(B[ne.outlet]=ne.segment,B),{}),function vt(b,I){const C=arguments.length>=2;return R=>R.pipe(b?(0,Se.h)((M,B)=>b(M,B,R)):Ee.y,xe(1),C?(0,He.d)(I):(0,We.T)(()=>new Tt.K))}())}expandSegment(I,C,R,M,B,ne){return(0,ve.D)(R).pipe((0,Wt.b)(pe=>this.expandSegmentAgainstRoute(I,C,R,pe,M,B,ne).pipe(oe(ht=>{if(ht instanceof ir)return(0,Ne.of)(null);throw ht}))),(0,jt.P)(pe=>!!pe),oe((pe,Ye)=>{if(pe instanceof Tt.K||"EmptyError"===pe.name)return Pr(C,M,B)?(0,Ne.of)(new En([],{})):Pi(C);throw pe}))}expandSegmentAgainstRoute(I,C,R,M,B,ne,pe){return An(M,C,B,ne)?void 0===M.redirectTo?this.matchSegmentAgainstRoute(I,C,M,B,ne):pe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,C,R,M,B,ne):Pi(C):Pi(C)}expandSegmentAgainstRouteUsingRedirect(I,C,R,M,B,ne){return"**"===M.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,R,M,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(I,C,R,M,B,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,C,R,M){const B=this.applyRedirectCommands([],R.redirectTo,{});return R.redirectTo.startsWith("/")?_i(B):this.lineralizeSegments(R,B).pipe((0,pn.z)(ne=>{const pe=new En(ne,{});return this.expandSegment(I,pe,C,ne,M,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,C,R,M,B,ne){const{matched:pe,consumedSegments:Ye,remainingSegments:ht,positionalParamSegments:Bn}=de(C,M,B);if(!pe)return Pi(C);const Bt=this.applyRedirectCommands(Ye,M.redirectTo,Bn);return M.redirectTo.startsWith("/")?_i(Bt):this.lineralizeSegments(M,Bt).pipe((0,pn.z)(tr=>this.expandSegment(I,C,R,tr.concat(ht),ne,!1)))}matchSegmentAgainstRoute(I,C,R,M,B){if("**"===R.path)return R.loadChildren?(R._loadedConfig?(0,Ne.of)(R._loadedConfig):this.configLoader.load(I.injector,R)).pipe((0,xt.U)(Bt=>(R._loadedConfig=Bt,new En(M,{})))):(0,Ne.of)(new En(M,{}));const{matched:ne,consumedSegments:pe,remainingSegments:Ye}=de(C,R,M);return ne?this.getChildConfig(I,R,M).pipe((0,pn.z)(Bn=>{const Bt=Bn.module,tr=Bn.routes,{segmentGroup:Qt,slicedSegments:ss}=Ke(C,pe,Ye,tr),bo=new En(Qt.segments,Qt.children);if(0===ss.length&&bo.hasChildren())return this.expandChildren(Bt,tr,bo).pipe((0,xt.U)(Zs=>new En(pe,Zs)));if(0===tr.length&&0===ss.length)return(0,Ne.of)(new En(pe,{}));const Go=G(R)===B;return this.expandSegment(Bt,bo,tr,ss,Go?Le:B,!0).pipe((0,xt.U)(tn=>new En(pe.concat(tn.segments),tn.children)))})):Pi(C)}getChildConfig(I,C,R){return C.children?(0,Ne.of)(new ea(C.children,I)):C.loadChildren?void 0!==C._loadedConfig?(0,Ne.of)(C._loadedConfig):this.runCanLoadGuards(I.injector,C,R).pipe((0,pn.z)(M=>M?this.configLoader.load(I.injector,C).pipe((0,xt.U)(B=>(C._loadedConfig=B,B))):function Bs(b){return st(on(`Cannot load children because the guard of the route "path: '${b.path}'" returned false`))}(C))):(0,Ne.of)(new ea([],I))}runCanLoadGuards(I,C,R){const M=C.canLoad;if(!M||0===M.length)return(0,Ne.of)(!0);const B=M.map(ne=>{const pe=I.get(ne);let Ye;if(function Lo(b){return b&&As(b.canLoad)}(pe))Ye=pe.canLoad(C,R);else{if(!As(pe))throw new Error("Invalid CanLoad guard");Ye=pe(C,R)}return Re(Ye)});return(0,Ne.of)(B).pipe(ri(),(0,sn.b)(ne=>{if(!Nr(ne))return;const pe=on(`Redirecting to "${this.urlSerializer.serialize(ne)}"`);throw pe.url=ne,pe}),(0,xt.U)(ne=>!0===ne))}lineralizeSegments(I,C){let R=[],M=C.root;for(;;){if(R=R.concat(M.segments),0===M.numberOfChildren)return(0,Ne.of)(R);if(M.numberOfChildren>1||!M.children[Le])return st(new Error(`Only absolute redirects can have named outlets. redirectTo: '${I.redirectTo}'`));M=M.children[Le]}}applyRedirectCommands(I,C,R){return this.applyRedirectCreatreUrlTree(C,this.urlSerializer.parse(C),I,R)}applyRedirectCreatreUrlTree(I,C,R,M){const B=this.createSegmentGroup(I,C.root,R,M);return new Qi(B,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(I,C){const R={};return ue(I,(M,B)=>{if("string"==typeof M&&M.startsWith(":")){const pe=M.substring(1);R[B]=C[pe]}else R[B]=M}),R}createSegmentGroup(I,C,R,M){const B=this.createSegments(I,C.segments,R,M);let ne={};return ue(C.children,(pe,Ye)=>{ne[Ye]=this.createSegmentGroup(I,pe,R,M)}),new En(B,ne)}createSegments(I,C,R,M){return C.map(B=>B.path.startsWith(":")?this.findPosParam(I,B,M):this.findOrReturn(B,R))}findPosParam(I,C,R){const M=R[C.path.substring(1)];if(!M)throw new Error(`Cannot redirect to '${I}'. Cannot find '${C.path}'.`);return M}findOrReturn(I,C){let R=0;for(const M of C){if(M.path===I.path)return C.splice(R),M;R++}return I}}function wa(b){const I={};for(const R of Object.keys(b.children)){const B=wa(b.children[R]);(B.segments.length>0||B.hasChildren())&&(I[R]=B)}return function io(b){if(1===b.numberOfChildren&&b.children[Le]){const I=b.children[Le];return new En(b.segments.concat(I.segments),I.children)}return b}(new En(b.segments,I))}class Ua{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class gt{constructor(I,C){this.component=I,this.route=C}}function Vn(b,I,C){const R=b._root;return js(R,I?I._root:null,C,[R.value])}function er(b,I,C){const R=function ia(b){if(!b)return null;for(let I=b.parent;I;I=I.parent){const C=I.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(I);return(R?R.module.injector:C).get(b)}function js(b,I,C,R,M={canDeactivateChecks:[],canActivateChecks:[]}){const B=zr(I);return b.children.forEach(ne=>{(function Hs(b,I,C,R,M={canDeactivateChecks:[],canActivateChecks:[]}){const B=b.value,ne=I?I.value:null,pe=C?C.getContext(b.value.outlet):null;if(ne&&B.routeConfig===ne.routeConfig){const Ye=function wo(b,I,C){if("function"==typeof C)return C(b,I);switch(C){case"pathParamsChange":return!pi(b.url,I.url);case"pathParamsOrQueryParamsChange":return!pi(b.url,I.url)||!Nn(b.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Us(b,I)||!Nn(b.queryParams,I.queryParams);default:return!Us(b,I)}}(ne,B,B.routeConfig.runGuardsAndResolvers);Ye?M.canActivateChecks.push(new Ua(R)):(B.data=ne.data,B._resolvedData=ne._resolvedData),js(b,I,B.component?pe?pe.children:null:C,R,M),Ye&&pe&&pe.outlet&&pe.outlet.isActivated&&M.canDeactivateChecks.push(new gt(pe.outlet.component,ne))}else ne&&$s(I,pe,M),M.canActivateChecks.push(new Ua(R)),js(b,null,B.component?pe?pe.children:null:C,R,M)})(ne,B[ne.value.outlet],C,R.concat([ne.value]),M),delete B[ne.value.outlet]}),ue(B,(ne,pe)=>$s(ne,C.getContext(pe),M)),M}function $s(b,I,C){const R=zr(b),M=b.value;ue(R,(B,ne)=>{$s(B,M.component?I?I.children.getContext(ne):null:I,C)}),C.canDeactivateChecks.push(new gt(M.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,M))}class Ki{}function Su(b){return new Y.y(I=>I.error(b))}class ru{constructor(I,C,R,M,B,ne){this.rootComponentType=I,this.config=C,this.urlTree=R,this.url=M,this.paramsInheritanceStrategy=B,this.relativeLinkResolution=ne}recognize(){const I=Ke(this.urlTree.root,[],[],this.config.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution).segmentGroup,C=this.processSegmentGroup(this.config,I,Le);if(null===C)return null;const R=new Fs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Le,this.rootComponentType,null,this.urlTree.root,-1,{}),M=new te(R,C),B=new Ds(this.url,M);return this.inheritParamsAndData(B._root),B}inheritParamsAndData(I){const C=I.value,R=gi(C,this.paramsInheritanceStrategy);C.params=Object.freeze(R.params),C.data=Object.freeze(R.data),I.children.forEach(M=>this.inheritParamsAndData(M))}processSegmentGroup(I,C,R){return 0===C.segments.length&&C.hasChildren()?this.processChildren(I,C):this.processSegment(I,C,C.segments,R)}processChildren(I,C){const R=[];for(const B of Object.keys(C.children)){const ne=C.children[B],pe=O(I,B),Ye=this.processSegmentGroup(pe,ne,B);if(null===Ye)return null;R.push(...Ye)}const M=ja(R);return function iu(b){b.sort((I,C)=>I.value.outlet===Le?-1:C.value.outlet===Le?1:I.value.outlet.localeCompare(C.value.outlet))}(M),M}processSegment(I,C,R,M){for(const B of I){const ne=this.processSegmentAgainstRoute(B,C,R,M);if(null!==ne)return ne}return Pr(C,R,M)?[]:null}processSegmentAgainstRoute(I,C,R,M){if(I.redirectTo||!An(I,C,R,M))return null;let B,ne=[],pe=[];if("**"===I.path){const Qt=R.length>0?ye(R).parameters:{};B=new Fs(R,Qt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,so(I),G(I),I.component,I,Au(C),Uo(C)+R.length,aa(I))}else{const Qt=de(C,I,R);if(!Qt.matched)return null;ne=Qt.consumedSegments,pe=Qt.remainingSegments,B=new Fs(ne,Qt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,so(I),G(I),I.component,I,Au(C),Uo(C)+ne.length,aa(I))}const Ye=function Ba(b){return b.children?b.children:b.loadChildren?b._loadedConfig.routes:[]}(I),{segmentGroup:ht,slicedSegments:Bn}=Ke(C,ne,pe,Ye.filter(Qt=>void 0===Qt.redirectTo),this.relativeLinkResolution);if(0===Bn.length&&ht.hasChildren()){const Qt=this.processChildren(Ye,ht);return null===Qt?null:[new te(B,Qt)]}if(0===Ye.length&&0===Bn.length)return[new te(B,[])];const Bt=G(I)===M,tr=this.processSegment(Ye,ht,Bn,Bt?Le:M);return null===tr?null:[new te(B,tr)]}}function su(b){const I=b.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function ja(b){const I=[],C=new Set;for(const R of b){if(!su(R)){I.push(R);continue}const M=I.find(B=>R.value.routeConfig===B.value.routeConfig);void 0!==M?(M.children.push(...R.children),C.add(M)):I.push(R)}for(const R of C){const M=ja(R.children);I.push(new te(R.value,M))}return I.filter(R=>!C.has(R))}function Au(b){let I=b;for(;I._sourceSegment;)I=I._sourceSegment;return I}function Uo(b){let I=b,C=I._segmentIndexShift?I._segmentIndexShift:0;for(;I._sourceSegment;)I=I._sourceSegment,C+=I._segmentIndexShift?I._segmentIndexShift:0;return C-1}function so(b){return b.data||{}}function aa(b){return b.resolve||{}}function Qn(b){return[...Object.keys(b),...Object.getOwnPropertySymbols(b)]}function ii(b){return(0,Ut.w)(I=>{const C=b(I);return C?(0,ve.D)(C).pipe((0,xt.U)(()=>I)):(0,Ne.of)(I)})}class kr extends class Jr{shouldDetach(I){return!1}store(I,C){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,C){return I.routeConfig===C.routeConfig}}{}const wn=new T.OlP("ROUTES");class fs{constructor(I,C,R,M){this.injector=I,this.compiler=C,this.onLoadStartListener=R,this.onLoadEndListener=M}load(I,C){if(C._loader$)return C._loader$;this.onLoadStartListener&&this.onLoadStartListener(C);const M=this.loadModuleFactory(C.loadChildren).pipe((0,xt.U)(B=>{this.onLoadEndListener&&this.onLoadEndListener(C);const ne=B.create(I);return new ea(he(ne.injector.get(wn,void 0,T.XFs.Self|T.XFs.Optional)).map(L),ne)}),oe(B=>{throw C._loader$=void 0,B}));return C._loader$=new tt(M,()=>new Ze.x).pipe(At()),C._loader$}loadModuleFactory(I){return Re(I()).pipe((0,pn.z)(C=>C instanceof T.YKP?(0,Ne.of)(C):(0,ve.D)(this.compiler.compileModuleAsync(C))))}}class Vo{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,C){return I}}function Ws(b){throw b}function Ru(b,I,C){return I.parse("/")}function Bo(b,I){return(0,Ne.of)(null)}const zs={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ua={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let xn=(()=>{class b{constructor(C,R,M,B,ne,pe,Ye){this.rootComponentType=C,this.urlSerializer=R,this.rootContexts=M,this.location=B,this.config=Ye,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ze.x,this.errorHandler=Ws,this.malformedUriErrorHandler=Ru,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Bo,afterPreactivation:Bo},this.urlHandlingStrategy=new Vo,this.routeReuseStrategy=new kr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ne.get(T.h0i),this.console=ne.get(T.c2e);const Bt=ne.get(T.R0b);this.isNgZoneEnabled=Bt instanceof T.R0b&&T.R0b.isInAngularZone(),this.resetConfig(Ye),this.currentUrlTree=function rt(){return new Qi(new En([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fs(ne,pe,tr=>this.triggerEvent(new Mn(tr)),tr=>this.triggerEvent(new Wi(tr))),this.routerState=Wn(this.currentUrlTree,this.rootComponentType),this.transitions=new ke.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const R=this.events;return C.pipe((0,Se.h)(M=>0!==M.id),(0,xt.U)(M=>Object.assign(Object.assign({},M),{extractedUrl:this.urlHandlingStrategy.extract(M.rawUrl)})),(0,Ut.w)(M=>{let B=!1,ne=!1;return(0,Ne.of)(M).pipe((0,sn.b)(pe=>{this.currentNavigation={id:pe.id,initialUrl:pe.currentRawUrl,extractedUrl:pe.extractedUrl,trigger:pe.source,extras:pe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ut.w)(pe=>{const Ye=this.browserUrlTree.toString(),ht=!this.navigated||pe.extractedUrl.toString()!==Ye||Ye!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ht)&&this.urlHandlingStrategy.shouldProcessUrl(pe.rawUrl))return ps(pe.source)&&(this.browserUrlTree=pe.extractedUrl),(0,Ne.of)(pe).pipe((0,Ut.w)(Bt=>{const tr=this.transitions.getValue();return R.next(new or(Bt.id,this.serializeUrl(Bt.extractedUrl),Bt.source,Bt.restoredState)),tr!==this.transitions.getValue()?J.E:Promise.resolve(Bt)}),function Tu(b,I,C,R){return(0,Ut.w)(M=>function Ea(b,I,C,R,M){return new Fo(b,I,C,R,M).apply()}(b,I,C,M.extractedUrl,R).pipe((0,xt.U)(B=>Object.assign(Object.assign({},M),{urlAfterRedirects:B}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,sn.b)(Bt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Bt.urlAfterRedirects})}),function Pn(b,I,C,R,M){return(0,pn.z)(B=>function Or(b,I,C,R,M="emptyOnly",B="legacy"){try{const ne=new ru(b,I,C,R,M,B).recognize();return null===ne?Su(new Ki):(0,Ne.of)(ne)}catch(ne){return Su(ne)}}(b,I,B.urlAfterRedirects,C(B.urlAfterRedirects),R,M).pipe((0,xt.U)(ne=>Object.assign(Object.assign({},B),{targetSnapshot:ne}))))}(this.rootComponentType,this.config,Bt=>this.serializeUrl(Bt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,sn.b)(Bt=>{if("eager"===this.urlUpdateStrategy){if(!Bt.extras.skipLocationChange){const Qt=this.urlHandlingStrategy.merge(Bt.urlAfterRedirects,Bt.rawUrl);this.setBrowserUrl(Qt,Bt)}this.browserUrlTree=Bt.urlAfterRedirects}const tr=new hr(Bt.id,this.serializeUrl(Bt.extractedUrl),this.serializeUrl(Bt.urlAfterRedirects),Bt.targetSnapshot);R.next(tr)}));if(ht&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:tr,extractedUrl:Qt,source:ss,restoredState:bo,extras:Go}=pe,ms=new or(tr,this.serializeUrl(Qt),ss,bo);R.next(ms);const tn=Wn(Qt,this.rootComponentType).snapshot;return(0,Ne.of)(Object.assign(Object.assign({},pe),{targetSnapshot:tn,urlAfterRedirects:Qt,extras:Object.assign(Object.assign({},Go),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=pe.rawUrl,pe.resolve(null),J.E}),ii(pe=>{const{targetSnapshot:Ye,id:ht,extractedUrl:Bn,rawUrl:Bt,extras:{skipLocationChange:tr,replaceUrl:Qt}}=pe;return this.hooks.beforePreactivation(Ye,{navigationId:ht,appliedUrlTree:Bn,rawUrlTree:Bt,skipLocationChange:!!tr,replaceUrl:!!Qt})}),(0,sn.b)(pe=>{const Ye=new Zn(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot);this.triggerEvent(Ye)}),(0,xt.U)(pe=>Object.assign(Object.assign({},pe),{guards:Vn(pe.targetSnapshot,pe.currentSnapshot,this.rootContexts)})),function jl(b,I){return(0,pn.z)(C=>{const{targetSnapshot:R,currentSnapshot:M,guards:{canActivateChecks:B,canDeactivateChecks:ne}}=C;return 0===ne.length&&0===B.length?(0,Ne.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function nl(b,I,C,R){return(0,ve.D)(b).pipe((0,pn.z)(M=>function Gs(b,I,C,R,M){const B=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!B||0===B.length)return(0,Ne.of)(!0);const ne=B.map(pe=>{const Ye=er(pe,I,M);let ht;if(function Yr(b){return b&&As(b.canDeactivate)}(Ye))ht=Re(Ye.canDeactivate(b,I,C,R));else{if(!As(Ye))throw new Error("Invalid CanDeactivate guard");ht=Re(Ye(b,I,C,R))}return ht.pipe((0,jt.P)())});return(0,Ne.of)(ne).pipe(ri())}(M.component,M.route,C,I,R)),(0,jt.P)(M=>!0!==M,!0))}(ne,R,M,b).pipe((0,pn.z)(pe=>pe&&function va(b){return"boolean"==typeof b}(pe)?function sa(b,I,C,R){return(0,ve.D)(I).pipe((0,Wt.b)(M=>(0,wt.z)(function Qr(b,I){return null!==b&&I&&I(new hi(b)),(0,Ne.of)(!0)}(M.route.parent,R),function oa(b,I){return null!==b&&I&&I(new me(b)),(0,Ne.of)(!0)}(M.route,R),function Ia(b,I,C){const R=I[I.length-1],B=I.slice(0,I.length-1).reverse().map(ne=>function Va(b){const I=b.routeConfig?b.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:b,guards:I}:null}(ne)).filter(ne=>null!==ne).map(ne=>Ge(()=>{const pe=ne.guards.map(Ye=>{const ht=er(Ye,ne.node,C);let Bn;if(function ta(b){return b&&As(b.canActivateChild)}(ht))Bn=Re(ht.canActivateChild(R,b));else{if(!As(ht))throw new Error("Invalid CanActivateChild guard");Bn=Re(ht(R,b))}return Bn.pipe((0,jt.P)())});return(0,Ne.of)(pe).pipe(ri())}));return(0,Ne.of)(B).pipe(ri())}(b,M.path,C),function xs(b,I,C){const R=I.routeConfig?I.routeConfig.canActivate:null;if(!R||0===R.length)return(0,Ne.of)(!0);const M=R.map(B=>Ge(()=>{const ne=er(B,I,C);let pe;if(function Br(b){return b&&As(b.canActivate)}(ne))pe=Re(ne.canActivate(I,b));else{if(!As(ne))throw new Error("Invalid CanActivate guard");pe=Re(ne(I,b))}return pe.pipe((0,jt.P)())}));return(0,Ne.of)(M).pipe(ri())}(b,M.route,C))),(0,jt.P)(M=>!0!==M,!0))}(R,B,b,I):(0,Ne.of)(pe)),(0,xt.U)(pe=>Object.assign(Object.assign({},C),{guardsResult:pe})))})}(this.ngModule.injector,pe=>this.triggerEvent(pe)),(0,sn.b)(pe=>{if(Nr(pe.guardsResult)){const ht=on(`Redirecting to "${this.serializeUrl(pe.guardsResult)}"`);throw ht.url=pe.guardsResult,ht}const Ye=new Zt(pe.id,this.serializeUrl(pe.extractedUrl),this.serializeUrl(pe.urlAfterRedirects),pe.targetSnapshot,!!pe.guardsResult);this.triggerEvent(Ye)}),(0,Se.h)(pe=>!!pe.guardsResult||(this.restoreHistory(pe),this.cancelNavigationTransition(pe,""),!1)),ii(pe=>{if(pe.guards.canActivateChecks.length)return(0,Ne.of)(pe).pipe((0,sn.b)(Ye=>{const ht=new Sn(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(ht)}),(0,Ut.w)(Ye=>{let ht=!1;return(0,Ne.of)(Ye).pipe(function On(b,I){return(0,pn.z)(C=>{const{targetSnapshot:R,guards:{canActivateChecks:M}}=C;if(!M.length)return(0,Ne.of)(C);let B=0;return(0,ve.D)(M).pipe((0,Wt.b)(ne=>function Tn(b,I,C,R){return function hs(b,I,C,R){const M=Qn(b);if(0===M.length)return(0,Ne.of)({});const B={};return(0,ve.D)(M).pipe((0,pn.z)(ne=>function xu(b,I,C,R){const M=er(b,I,R);return Re(M.resolve?M.resolve(I,C):M(I,C))}(b[ne],I,C,R).pipe((0,sn.b)(pe=>{B[ne]=pe}))),xe(1),(0,pn.z)(()=>Qn(B).length===M.length?(0,Ne.of)(B):J.E))}(b._resolve,b,I,R).pipe((0,xt.U)(B=>(b._resolvedData=B,b.data=Object.assign(Object.assign({},b.data),gi(b,C).resolve),null)))}(ne.route,R,b,I)),(0,sn.b)(()=>B++),xe(1),(0,pn.z)(ne=>B===M.length?(0,Ne.of)(C):J.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,sn.b)({next:()=>ht=!0,complete:()=>{ht||(this.restoreHistory(Ye),this.cancelNavigationTransition(Ye,"At least one route resolver didn't emit any value."))}}))}),(0,sn.b)(Ye=>{const ht=new Rn(Ye.id,this.serializeUrl(Ye.extractedUrl),this.serializeUrl(Ye.urlAfterRedirects),Ye.targetSnapshot);this.triggerEvent(ht)}))}),ii(pe=>{const{targetSnapshot:Ye,id:ht,extractedUrl:Bn,rawUrl:Bt,extras:{skipLocationChange:tr,replaceUrl:Qt}}=pe;return this.hooks.afterPreactivation(Ye,{navigationId:ht,appliedUrlTree:Bn,rawUrlTree:Bt,skipLocationChange:!!tr,replaceUrl:!!Qt})}),(0,xt.U)(pe=>{const Ye=function yo(b,I,C){const R=nr(b,I._root,C?C._root:void 0);return new Vr(R,I)}(this.routeReuseStrategy,pe.targetSnapshot,pe.currentRouterState);return Object.assign(Object.assign({},pe),{targetRouterState:Ye})}),(0,sn.b)(pe=>{this.currentUrlTree=pe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(pe.urlAfterRedirects,pe.rawUrl),this.routerState=pe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(pe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,pe),this.browserUrlTree=pe.urlAfterRedirects)}),((b,I,C)=>(0,xt.U)(R=>(new ls(I,R.targetRouterState,R.currentRouterState,C).activate(b),R)))(this.rootContexts,this.routeReuseStrategy,pe=>this.triggerEvent(pe)),(0,sn.b)({next(){B=!0},complete(){B=!0}}),function Nt(b){return(0,Ie.e)((I,C)=>{try{I.subscribe(C)}finally{C.add(b)}})}(()=>{var pe;B||ne||this.cancelNavigationTransition(M,`Navigation ID ${M.id} is not equal to the current navigation id ${this.navigationId}`),(null===(pe=this.currentNavigation)||void 0===pe?void 0:pe.id)===M.id&&(this.currentNavigation=null)}),oe(pe=>{if(ne=!0,function Jt(b){return b&&b[Dn]}(pe)){const Ye=Nr(pe.url);Ye||(this.navigated=!0,this.restoreHistory(M,!0));const ht=new Tr(M.id,this.serializeUrl(M.extractedUrl),pe.message);R.next(ht),Ye?setTimeout(()=>{const Bn=this.urlHandlingStrategy.merge(pe.url,this.rawUrlTree),Bt={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ps(M.source)};this.scheduleNavigation(Bn,"imperative",null,Bt,{resolve:M.resolve,reject:M.reject,promise:M.promise})},0):M.resolve(!1)}else{this.restoreHistory(M,!0);const Ye=new qn(M.id,this.serializeUrl(M.extractedUrl),pe);R.next(Ye);try{M.resolve(this.errorHandler(pe))}catch(ht){M.reject(ht)}}return J.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const R="popstate"===C.type?"popstate":"hashchange";"popstate"===R&&setTimeout(()=>{var M;const B={replaceUrl:!0},ne=(null===(M=C.state)||void 0===M?void 0:M.navigationId)?C.state:null;if(ne){const Ye=Object.assign({},ne);delete Ye.navigationId,delete Ye.\u0275routerPageId,0!==Object.keys(Ye).length&&(B.state=Ye)}const pe=this.parseUrl(C.url);this.scheduleNavigation(pe,R,ne,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){ds(C),this.config=C.map(L),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,R={}){const{relativeTo:M,queryParams:B,fragment:ne,queryParamsHandling:pe,preserveFragment:Ye}=R,ht=M||this.routerState.root,Bn=Ye?this.currentUrlTree.fragment:ne;let Bt=null;switch(pe){case"merge":Bt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),B);break;case"preserve":Bt=this.currentUrlTree.queryParams;break;default:Bt=B||null}return null!==Bt&&(Bt=this.removeEmptyProps(Bt)),function we(b,I,C,R,M){if(0===C.length)return Xe(I.root,I.root,I.root,R,M);const B=function rr(b){if("string"==typeof b[0]&&1===b.length&&"/"===b[0])return new Ft(!0,0,b);let I=0,C=!1;const R=b.reduce((M,B,ne)=>{if("object"==typeof B&&null!=B){if(B.outlets){const pe={};return ue(B.outlets,(Ye,ht)=>{pe[ht]="string"==typeof Ye?Ye.split("/"):Ye}),[...M,{outlets:pe}]}if(B.segmentPath)return[...M,B.segmentPath]}return"string"!=typeof B?[...M,B]:0===ne?(B.split("/").forEach((pe,Ye)=>{0==Ye&&"."===pe||(0==Ye&&""===pe?C=!0:".."===pe?I++:""!=pe&&M.push(pe))}),M):[...M,B]},[]);return new Ft(C,I,R)}(C);if(B.toRoot())return Xe(I.root,I.root,new En([],{}),R,M);const ne=function bn(b,I,C){if(b.isAbsolute)return new qr(I.root,!0,0);if(-1===C.snapshot._lastPathIndex){const B=C.snapshot._urlSegment;return new qr(B,B===I.root,0)}const R=fe(b.commands[0])?0:1;return function Ir(b,I,C){let R=b,M=I,B=C;for(;B>M;){if(B-=M,R=R.parent,!R)throw new Error("Invalid number of '../'");M=R.segments.length}return new qr(R,!1,M-B)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+R,b.numberOfDoubleDots)}(B,I,b),pe=ne.processChildren?ns(ne.segmentGroup,ne.index,B.commands):Ts(ne.segmentGroup,ne.index,B.commands);return Xe(I.root,ne.segmentGroup,pe,R,M)}(ht,this.currentUrlTree,C,Bt,null!=Bn?Bn:null)}navigateByUrl(C,R={skipLocationChange:!1}){const M=Nr(C)?C:this.parseUrl(C),B=this.urlHandlingStrategy.merge(M,this.rawUrlTree);return this.scheduleNavigation(B,"imperative",null,R)}navigate(C,R={skipLocationChange:!1}){return function ou(b){for(let I=0;I<b.length;I++){const C=b[I];if(null==C)throw new Error(`The requested path contains ${C} segment at index ${I}`)}}(C),this.navigateByUrl(this.createUrlTree(C,R),R)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let R;try{R=this.urlSerializer.parse(C)}catch(M){R=this.malformedUriErrorHandler(M,this.urlSerializer,C)}return R}isActive(C,R){let M;if(M=!0===R?Object.assign({},zs):!1===R?Object.assign({},ua):R,Nr(C))return Xt(this.currentUrlTree,C,M);const B=this.parseUrl(C);return Xt(this.currentUrlTree,B,M)}removeEmptyProps(C){return Object.keys(C).reduce((R,M)=>{const B=C[M];return null!=B&&(R[M]=B),R},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new Kn(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,R,M,B,ne){var pe,Ye;if(this.disposed)return Promise.resolve(!1);let ht,Bn,Bt;ne?(ht=ne.resolve,Bn=ne.reject,Bt=ne.promise):Bt=new Promise((ss,bo)=>{ht=ss,Bn=bo});const tr=++this.navigationId;let Qt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(M=this.location.getState()),Qt=M&&M.\u0275routerPageId?M.\u0275routerPageId:B.replaceUrl||B.skipLocationChange?null!==(pe=this.browserPageId)&&void 0!==pe?pe:0:(null!==(Ye=this.browserPageId)&&void 0!==Ye?Ye:0)+1):Qt=0,this.setTransition({id:tr,targetPageId:Qt,source:R,restoredState:M,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:B,resolve:ht,reject:Bn,promise:Bt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Bt.catch(ss=>Promise.reject(ss))}setBrowserUrl(C,R){const M=this.urlSerializer.serialize(C),B=Object.assign(Object.assign({},R.extras.state),this.generateNgRouterState(R.id,R.targetPageId));this.location.isCurrentPathEqualTo(M)||R.extras.replaceUrl?this.location.replaceState(M,"",B):this.location.go(M,"",B)}restoreHistory(C,R=!1){var M,B;if("computed"===this.canceledNavigationResolution){const ne=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(M=this.currentNavigation)||void 0===M?void 0:M.finalUrl)||0===ne?this.currentUrlTree===(null===(B=this.currentNavigation)||void 0===B?void 0:B.finalUrl)&&0===ne&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ne)}else"replace"===this.canceledNavigationResolution&&(R&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,R){const M=new Tr(C.id,this.serializeUrl(C.extractedUrl),R);this.triggerEvent(M),C.resolve(!1)}generateNgRouterState(C,R){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:R}:{navigationId:C}}}return b.\u0275fac=function(C){T.$Z()},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();function ps(b){return"imperative"!==b}class Wa{}class la{preload(I,C){return(0,Ne.of)(null)}}let kn=(()=>{class b{constructor(C,R,M,B){this.router=C,this.injector=M,this.preloadingStrategy=B,this.loader=new fs(M,R,Ye=>C.triggerEvent(new Mn(Ye)),Ye=>C.triggerEvent(new Wi(Ye)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Se.h)(C=>C instanceof Kn),(0,Wt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const C=this.injector.get(T.h0i);return this.processRoutes(C,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,R){const M=[];for(const B of R)if(B.loadChildren&&!B.canLoad&&B._loadedConfig){const ne=B._loadedConfig;M.push(this.processRoutes(ne.module,ne.routes))}else B.loadChildren&&!B.canLoad?M.push(this.preloadConfig(C,B)):B.children&&M.push(this.processRoutes(C,B.children));return(0,ve.D)(M).pipe((0,yn.J)(),(0,xt.U)(B=>{}))}preloadConfig(C,R){return this.preloadingStrategy.preload(R,()=>(R._loadedConfig?(0,Ne.of)(R._loadedConfig):this.loader.load(C.injector,R)).pipe((0,pn.z)(B=>(R._loadedConfig=B,this.processRoutes(B.module,B.routes)))))}}return b.\u0275fac=function(C){return new(C||b)(T.LFG(xn),T.LFG(T.Sil),T.LFG(T.zs3),T.LFG(Wa))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})(),xr=(()=>{class b{constructor(C,R,M={}){this.router=C,this.viewportScroller=R,this.options=M,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},M.scrollPositionRestoration=M.scrollPositionRestoration||"disabled",M.anchorScrolling=M.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof or?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Kn&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof dt&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,R){this.router.triggerEvent(new dt(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,R))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return b.\u0275fac=function(C){T.$Z()},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();const Ho=new T.OlP("ROUTER_CONFIGURATION"),jr=new T.OlP("ROUTER_FORROOT_GUARD"),za=[ur.Ye,{provide:ui,useClass:Oo},{provide:xn,useFactory:function vi(b,I,C,R,M,B,ne={},pe,Ye){const ht=new xn(null,b,I,C,R,M,he(B));return pe&&(ht.urlHandlingStrategy=pe),Ye&&(ht.routeReuseStrategy=Ye),function Io(b,I){b.errorHandler&&(I.errorHandler=b.errorHandler),b.malformedUriErrorHandler&&(I.malformedUriErrorHandler=b.malformedUriErrorHandler),b.onSameUrlNavigation&&(I.onSameUrlNavigation=b.onSameUrlNavigation),b.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=b.paramsInheritanceStrategy),b.relativeLinkResolution&&(I.relativeLinkResolution=b.relativeLinkResolution),b.urlUpdateStrategy&&(I.urlUpdateStrategy=b.urlUpdateStrategy),b.canceledNavigationResolution&&(I.canceledNavigationResolution=b.canceledNavigationResolution)}(ne,ht),ne.enableTracing&&ht.events.subscribe(Bn=>{var Bt,tr;null===(Bt=console.group)||void 0===Bt||Bt.call(console,`Router Event: ${Bn.constructor.name}`),console.log(Bn.toString()),console.log(Bn),null===(tr=console.groupEnd)||void 0===tr||tr.call(console)}),ht},deps:[ui,cs,ur.Ye,T.zs3,T.Sil,wn,Ho,[class pc{},new T.FiY],[class is{},new T.FiY]]},cs,{provide:ts,useFactory:function Co(b){return b.routerState.root},deps:[xn]},kn,la,class gs{preload(I,C){return C().pipe(oe(()=>(0,Ne.of)(null)))}},{provide:Ho,useValue:{enableTracing:!1}}];function qs(){return new T.PXZ("Router",xn)}let oo=(()=>{class b{constructor(C,R){}static forRoot(C,R){return{ngModule:b,providers:[za,ao(C),{provide:jr,useFactory:Da,deps:[[xn,new T.FiY,new T.tp0]]},{provide:Ho,useValue:R||{}},{provide:ur.S$,useFactory:vr,deps:[ur.lw,[new T.tBr(ur.mr),new T.FiY],Ho]},{provide:xr,useFactory:qi,deps:[xn,ur.EM,Ho]},{provide:Wa,useExisting:R&&R.preloadingStrategy?R.preloadingStrategy:la},{provide:T.PXZ,multi:!0,useFactory:qs},[Ka,{provide:T.ip1,multi:!0,useFactory:ba,deps:[Ka]},{provide:Er,useFactory:_t,deps:[Ka]},{provide:T.tb,multi:!0,useExisting:Er}]]}}static forChild(C){return{ngModule:b,providers:[ao(C)]}}}return b.\u0275fac=function(C){return new(C||b)(T.LFG(jr,8),T.LFG(xn,8))},b.\u0275mod=T.oAB({type:b}),b.\u0275inj=T.cJS({}),b})();function qi(b,I,C){return C.scrollOffset&&I.setOffset(C.scrollOffset),new xr(b,I,C)}function vr(b,I,C={}){return C.useHash?new ur.Do(b,I):new ur.b0(b,I)}function Da(b){return"guarded"}function ao(b){return[{provide:T.deG,multi:!0,useValue:b},{provide:wn,multi:!0,useValue:b}]}let Ka=(()=>{class b{constructor(C){this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ze.x}appInitializer(){return this.injector.get(ur.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let R=null;const M=new Promise(pe=>R=pe),B=this.injector.get(xn),ne=this.injector.get(Ho);return"disabled"===ne.initialNavigation?(B.setUpLocationChangeListener(),R(!0)):"enabled"===ne.initialNavigation||"enabledBlocking"===ne.initialNavigation?(B.hooks.afterPreactivation=()=>this.initNavigation?(0,Ne.of)(null):(this.initNavigation=!0,R(!0),this.resultOfPreactivationDone),B.initialNavigation()):R(!0),M})}bootstrapListener(C){const R=this.injector.get(Ho),M=this.injector.get(kn),B=this.injector.get(xr),ne=this.injector.get(xn),pe=this.injector.get(T.z2F);C===pe.components[0]&&(("enabledNonBlocking"===R.initialNavigation||void 0===R.initialNavigation)&&ne.initialNavigation(),M.setUpPreloading(),B.init(),ne.resetRootComponentType(pe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return b.\u0275fac=function(C){return new(C||b)(T.LFG(T.zs3))},b.\u0275prov=T.Yz7({token:b,factory:b.\u0275fac}),b})();function ba(b){return b.appInitializer.bind(b)}function _t(b){return b.bootstrapListener.bind(b)}const Er=new T.OlP("Router Initializer")},3942:(Mt,Ve,V)=>{V.d(Ve,{Z:()=>st});var T=V(2090),Y=V(4859),Q=V(9681),ve=V(1877);class Ee{constructor(Ge,et){this._delegate=Ge,this.firebase=et,(0,Q._addComponent)(Ge,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=Ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ge){this._delegate.automaticDataCollectionEnabled=Ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ge=>{this._delegate.checkDestroyed(),Ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Q.deleteApp)(this._delegate)))}_getService(Ge,et=Q._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const At=this._delegate.container.getProvider(Ge);return!At.isInitialized()&&"EXPLICIT"===(null===(Ie=At.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&At.initialize(),At.getImmediate({identifier:et})}_removeServiceInstance(Ge,et=Q._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ge).clearInstance(et)}_addComponent(Ge){(0,Q._addComponent)(this._delegate,Ge)}_addOrOverwriteComponent(Ge){(0,Q._addOrOverwriteComponent)(this._delegate,Ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new T.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Oe(){const Dt=function Me(Dt){const Ge={},et={__esModule:!0,initializeApp:function tt(wt,J={}){const Ze=Q.initializeApp(wt,J);if((0,T.r3)(Ge,Ze.name))return Ge[Ze.name];const oe=new Dt(Ze,et);return Ge[Ze.name]=oe,oe},app:At,registerVersion:Q.registerVersion,setLogLevel:Q.setLogLevel,onLog:Q.onLog,apps:null,SDK_VERSION:Q.SDK_VERSION,INTERNAL:{registerComponent:function ke(wt){const J=wt.name,Ze=J.replace("-compat","");if(Q._registerComponent(wt)&&"PUBLIC"===wt.type){const oe=(Se=At())=>{if("function"!=typeof Se[Ze])throw Pe.create("invalid-app-argument",{appName:J});return Se[Ze]()};void 0!==wt.serviceProps&&(0,T.ZB)(oe,wt.serviceProps),et[Ze]=oe,Dt.prototype[Ze]=function(...Se){return this._getService.bind(this,J).apply(this,wt.multipleInstances?Se:[])}}return"PUBLIC"===wt.type?et[Ze]:null},removeApp:function Ie(wt){delete Ge[wt]},useAsService:function Tt(wt,J){return"serverAuth"===J?null:J},modularAPIs:Q}};function At(wt){if(!(0,T.r3)(Ge,wt=wt||Q._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:wt});return Ge[wt]}return et.default=et,Object.defineProperty(et,"apps",{get:function Ne(){return Object.keys(Ge).map(wt=>Ge[wt])}}),At.App=Dt,et}(Ee);return Dt.INTERNAL=Object.assign(Object.assign({},Dt.INTERNAL),{createFirebaseNamespace:Oe,extendNamespace:function Ge(et){(0,T.ZB)(Dt,et)},createSubscribe:T.ne,ErrorFactory:T.LL,deepExtend:T.ZB}),Dt}(),ae=new ve.Yd("@firebase/app-compat");if((0,T.jU)()&&void 0!==self.firebase){ae.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&ae.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=le;!function nt(Dt){(0,Q.registerVersion)("@firebase/app-compat","0.1.27",Dt)}()},9681:(Mt,Ve,V)=>{V.r(Ve),V.d(Ve,{FirebaseError:()=>ve.ZR,SDK_VERSION:()=>Tr,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>Wt,_addOrOverwriteComponent:()=>jt,_apps:()=>cn,_clearComponents:()=>ur,_components:()=>qt,_getProvider:()=>sn,_registerComponent:()=>pn,_removeServiceInstance:()=>yn,deleteApp:()=>Zt,getApp:()=>hr,getApps:()=>Zn,initializeApp:()=>qn,onLog:()=>Mn,registerVersion:()=>Rn,setLogLevel:()=>Wi});var T=V(5861),Y=V(4859),Q=V(1877),ve=V(2090),Ee=V(8766);class be{constructor(Re){this.container=Re}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function Pe(ue){const Re=ue.getComponent();return"VERSION"===(null==Re?void 0:Re.type)}(rt)){const kt=rt.getImmediate();return`${kt.library}/${kt.version}`}return null}).filter(rt=>rt).join(" ")}}const Me="@firebase/app",le=new Q.Yd("@firebase/app"),Ut="[DEFAULT]",lt={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},cn=new Map,qt=new Map;function Wt(ue,Re){try{ue.container.addComponent(Re)}catch(rt){le.debug(`Component ${Re.name} failed to register with FirebaseApp ${ue.name}`,rt)}}function jt(ue,Re){ue.container.addOrOverwriteComponent(Re)}function pn(ue){const Re=ue.name;if(qt.has(Re))return le.debug(`There were multiple attempts to register component ${Re}.`),!1;qt.set(Re,ue);for(const rt of cn.values())Wt(rt,ue);return!0}function sn(ue,Re){const rt=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),ue.container.getProvider(Re)}function yn(ue,Re,rt=Ut){sn(ue,Re).clearInstance(rt)}function ur(){qt.clear()}const or=new ve.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Kn{constructor(Re,rt,kt){this._isDeleted=!1,this._options=Object.assign({},Re),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=kt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this.checkDestroyed(),this._automaticDataCollectionEnabled=Re}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Re){this._isDeleted=Re}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}const Tr="9.8.3";function qn(ue,Re={}){"object"!=typeof Re&&(Re={name:Re});const rt=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},Re),kt=rt.name;if("string"!=typeof kt||!kt)throw or.create("bad-app-name",{appName:String(kt)});const Yt=cn.get(kt);if(Yt){if((0,ve.vZ)(ue,Yt.options)&&(0,ve.vZ)(rt,Yt.config))return Yt;throw or.create("duplicate-app",{appName:kt})}const Xt=new Y.H0(kt);for(const dn of qt.values())Xt.addComponent(dn);const lr=new Kn(ue,rt,Xt);return cn.set(kt,lr),lr}function hr(ue=Ut){const Re=cn.get(ue);if(!Re)throw or.create("no-app",{appName:ue});return Re}function Zn(){return Array.from(cn.values())}function Zt(ue){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,T.Z)(function*(ue){const Re=ue.name;cn.has(Re)&&(cn.delete(Re),yield Promise.all(ue.container.getProviders().map(rt=>rt.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function Rn(ue,Re,rt){var kt;let Yt=null!==(kt=lt[ue])&&void 0!==kt?kt:ue;rt&&(Yt+=`-${rt}`);const Xt=Yt.match(/\s|\//),lr=Re.match(/\s|\//);if(Xt||lr){const dn=[`Unable to register library "${Yt}" with version "${Re}":`];return Xt&&dn.push(`library name "${Yt}" contains illegal characters (whitespace or "/")`),Xt&&lr&&dn.push("and"),lr&&dn.push(`version name "${Re}" contains illegal characters (whitespace or "/")`),void le.warn(dn.join(" "))}pn(new Y.wA(`${Yt}-version`,()=>({library:Yt,version:Re}),"VERSION"))}function Mn(ue,Re){if(null!==ue&&"function"!=typeof ue)throw or.create("invalid-log-argument");(0,Q.Am)(ue,Re)}function Wi(ue){(0,Q.Ub)(ue)}const me="firebase-heartbeat-store";let Ce=null;function dt(){return Ce||(Ce=(0,Ee.X3)("firebase-heartbeat-database",1,{upgrade:(ue,Re)=>{0===Re&&ue.createObjectStore(me)}}).catch(ue=>{throw or.create("storage-open",{originalErrorMessage:ue.message})})),Ce}function pt(){return(pt=(0,T.Z)(function*(ue){var Re;try{return(yield dt()).transaction(me).objectStore(me).get(on(ue))}catch(rt){throw or.create("storage-get",{originalErrorMessage:null===(Re=rt)||void 0===Re?void 0:Re.message})}})).apply(this,arguments)}function St(ue,Re){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,T.Z)(function*(ue,Re){var rt;try{const Yt=(yield dt()).transaction(me,"readwrite");return yield Yt.objectStore(me).put(Re,on(ue)),Yt.done}catch(kt){throw or.create("storage-set",{originalErrorMessage:null===(rt=kt)||void 0===rt?void 0:rt.message})}})).apply(this,arguments)}function on(ue){return`${ue.name}!${ue.options.appId}`}class fr{constructor(Re){this.container=Re,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new he(rt),this._heartbeatsCachePromise=this._storage.read().then(kt=>(this._heartbeatsCache=kt,kt))}triggerHeartbeat(){var Re=this;return(0,T.Z)(function*(){const kt=Re.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Yt=Nn();if(null===Re._heartbeatsCache&&(Re._heartbeatsCache=yield Re._heartbeatsCachePromise),Re._heartbeatsCache.lastSentHeartbeatDate!==Yt&&!Re._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Yt))return Re._heartbeatsCache.heartbeats.push({date:Yt,agent:kt}),Re._heartbeatsCache.heartbeats=Re._heartbeatsCache.heartbeats.filter(Xt=>{const lr=new Date(Xt.date).valueOf();return Date.now()-lr<=2592e6}),Re._storage.overwrite(Re._heartbeatsCache)})()}getHeartbeatsHeader(){var Re=this;return(0,T.Z)(function*(){if(null===Re._heartbeatsCache&&(yield Re._heartbeatsCachePromise),null===Re._heartbeatsCache||0===Re._heartbeatsCache.heartbeats.length)return"";const rt=Nn(),{heartbeatsToSend:kt,unsentEntries:Yt}=function ie(ue,Re=1024){const rt=[];let kt=ue.slice();for(const Yt of ue){const Xt=rt.find(lr=>lr.agent===Yt.agent);if(Xt){if(Xt.dates.push(Yt.date),ye(rt)>Re){Xt.dates.pop();break}}else if(rt.push({agent:Yt.agent,dates:[Yt.date]}),ye(rt)>Re){rt.pop();break}kt=kt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:kt}}(Re._heartbeatsCache.heartbeats),Xt=(0,ve.L)(JSON.stringify({version:2,heartbeats:kt}));return Re._heartbeatsCache.lastSentHeartbeatDate=rt,Yt.length>0?(Re._heartbeatsCache.heartbeats=Yt,yield Re._storage.overwrite(Re._heartbeatsCache)):(Re._heartbeatsCache.heartbeats=[],Re._storage.overwrite(Re._heartbeatsCache)),Xt})()}}function Nn(){return(new Date).toISOString().substring(0,10)}class he{constructor(Re){this.app=Re,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,T.Z)(function*(){return!!(0,ve.hl)()&&(0,ve.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Re=this;return(0,T.Z)(function*(){return(yield Re._canUseIndexedDBPromise)&&(yield function Le(ue){return pt.apply(this,arguments)}(Re.app))||{heartbeats:[]}})()}overwrite(Re){var rt=this;return(0,T.Z)(function*(){var kt;if(yield rt._canUseIndexedDBPromise){const Xt=yield rt.read();return St(rt.app,{lastSentHeartbeatDate:null!==(kt=Re.lastSentHeartbeatDate)&&void 0!==kt?kt:Xt.lastSentHeartbeatDate,heartbeats:Re.heartbeats})}})()}add(Re){var rt=this;return(0,T.Z)(function*(){var kt;if(yield rt._canUseIndexedDBPromise){const Xt=yield rt.read();return St(rt.app,{lastSentHeartbeatDate:null!==(kt=Re.lastSentHeartbeatDate)&&void 0!==kt?kt:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...Re.heartbeats]})}})()}}function ye(ue){return(0,ve.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function it(ue){pn(new Y.wA("platform-logger",Re=>new be(Re),"PRIVATE")),pn(new Y.wA("heartbeat",Re=>new fr(Re),"PRIVATE")),Rn(Me,"0.7.26",ue),Rn(Me,"0.7.26","esm2017"),Rn("fire-js","")}("")},4859:(Mt,Ve,V)=>{V.d(Ve,{H0:()=>Me,wA:()=>Q,zt:()=>Ee});var T=V(5861),Y=V(2090);class Q{constructor(le,ae,Ae){this.name=le,this.instanceFactory=ae,this.type=Ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const ve="[DEFAULT]";class Ee{constructor(le,ae){this.name=le,this.container=ae,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const ae=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(ae)){const Ae=new Y.BH;if(this.instancesDeferred.set(ae,Ae),this.isInitialized(ae)||this.shouldAutoInitialize())try{const Ct=this.getOrInitializeService({instanceIdentifier:ae});Ct&&Ae.resolve(Ct)}catch(Ct){}}return this.instancesDeferred.get(ae).promise}getImmediate(le){var ae;const Ae=this.normalizeInstanceIdentifier(null==le?void 0:le.identifier),Ct=null!==(ae=null==le?void 0:le.optional)&&void 0!==ae&&ae;if(!this.isInitialized(Ae)&&!this.shouldAutoInitialize()){if(Ct)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ae})}catch(nt){if(Ct)return null;throw nt}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function Pe(Oe){return"EAGER"===Oe.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:ve})}catch(ae){}for(const[ae,Ae]of this.instancesDeferred.entries()){const Ct=this.normalizeInstanceIdentifier(ae);try{const nt=this.getOrInitializeService({instanceIdentifier:Ct});Ae.resolve(nt)}catch(nt){}}}}clearInstance(le=ve){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,T.Z)(function*(){const ae=Array.from(le.instances.values());yield Promise.all([...ae.filter(Ae=>"INTERNAL"in Ae).map(Ae=>Ae.INTERNAL.delete()),...ae.filter(Ae=>"_delete"in Ae).map(Ae=>Ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=ve){return this.instances.has(le)}getOptions(le=ve){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:ae={}}=le,Ae=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Ae))throw Error(`${this.name}(${Ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ct=this.getOrInitializeService({instanceIdentifier:Ae,options:ae});for(const[nt,st]of this.instancesDeferred.entries())Ae===this.normalizeInstanceIdentifier(nt)&&st.resolve(Ct);return Ct}onInit(le,ae){var Ae;const Ct=this.normalizeInstanceIdentifier(ae),nt=null!==(Ae=this.onInitCallbacks.get(Ct))&&void 0!==Ae?Ae:new Set;nt.add(le),this.onInitCallbacks.set(Ct,nt);const st=this.instances.get(Ct);return st&&le(st,Ct),()=>{nt.delete(le)}}invokeOnInitCallbacks(le,ae){const Ae=this.onInitCallbacks.get(ae);if(Ae)for(const Ct of Ae)try{Ct(le,ae)}catch(nt){}}getOrInitializeService({instanceIdentifier:le,options:ae={}}){let Ae=this.instances.get(le);if(!Ae&&this.component&&(Ae=this.component.instanceFactory(this.container,{instanceIdentifier:(Oe=le,Oe===ve?void 0:Oe),options:ae}),this.instances.set(le,Ae),this.instancesOptions.set(le,ae),this.invokeOnInitCallbacks(Ae,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Ae)}catch(Ct){}var Oe;return Ae||null}normalizeInstanceIdentifier(le=ve){return this.component?this.component.multipleInstances?le:ve:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const ae=this.getProvider(le.name);if(ae.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);ae.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const ae=new Ee(le,this);return this.providers.set(le,ae),ae}getProviders(){return Array.from(this.providers.values())}}},1877:(Mt,Ve,V)=>{V.d(Ve,{Am:()=>Oe,Ub:()=>Me,Yd:()=>Pe,in:()=>Y});const T=[];var Y=(()=>{return(le=Y||(Y={}))[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",Y;var le})();const Q={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},ve=Y.INFO,Ee={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},be=(le,ae,...Ae)=>{if(ae<le.logLevel)return;const Ct=(new Date).toISOString(),nt=Ee[ae];if(!nt)throw new Error(`Attempted to log a message with an invalid logType (value: ${ae})`);console[nt](`[${Ct}]  ${le.name}:`,...Ae)};class Pe{constructor(ae){this.name=ae,this._logLevel=ve,this._logHandler=be,this._userLogHandler=null,T.push(this)}get logLevel(){return this._logLevel}set logLevel(ae){if(!(ae in Y))throw new TypeError(`Invalid value "${ae}" assigned to \`logLevel\``);this._logLevel=ae}setLogLevel(ae){this._logLevel="string"==typeof ae?Q[ae]:ae}get logHandler(){return this._logHandler}set logHandler(ae){if("function"!=typeof ae)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ae}get userLogHandler(){return this._userLogHandler}set userLogHandler(ae){this._userLogHandler=ae}debug(...ae){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...ae),this._logHandler(this,Y.DEBUG,...ae)}log(...ae){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...ae),this._logHandler(this,Y.VERBOSE,...ae)}info(...ae){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...ae),this._logHandler(this,Y.INFO,...ae)}warn(...ae){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...ae),this._logHandler(this,Y.WARN,...ae)}error(...ae){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...ae),this._logHandler(this,Y.ERROR,...ae)}}function Me(le){T.forEach(ae=>{ae.setLogLevel(le)})}function Oe(le,ae){for(const Ae of T){let Ct=null;ae&&ae.level&&(Ct=Q[ae.level]),Ae.userLogHandler=null===le?null:(nt,st,...Dt)=>{const Ge=Dt.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch(Ie){return null}}).filter(et=>et).join(" ");st>=(null!=Ct?Ct:nt.logLevel)&&le({level:Y[st].toLowerCase(),message:Ge,args:Dt,type:nt.name})}}}},8766:(Mt,Ve,V)=>{V.d(Ve,{Lj:()=>tt,X3:()=>At});var T=V(5861);let Q,ve;const Pe=new WeakMap,Me=new WeakMap,Oe=new WeakMap,le=new WeakMap,ae=new WeakMap;let nt={get(J,Ze,oe){if(J instanceof IDBTransaction){if("done"===Ze)return Me.get(J);if("objectStoreNames"===Ze)return J.objectStoreNames||Oe.get(J);if("store"===Ze)return oe.objectStoreNames[1]?void 0:oe.objectStore(oe.objectStoreNames[0])}return et(J[Ze])},set:(J,Ze,oe)=>(J[Ze]=oe,!0),has:(J,Ze)=>J instanceof IDBTransaction&&("done"===Ze||"store"===Ze)||Ze in J};function Ge(J){return"function"==typeof J?function Dt(J){return J!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function be(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(J)?function(...Ze){return J.apply(Ie(this),Ze),et(Pe.get(this))}:function(...Ze){return et(J.apply(Ie(this),Ze))}:function(Ze,...oe){const Se=J.call(Ie(this),Ze,...oe);return Oe.set(Se,Ze.sort?Ze.sort():[Ze]),et(Se)}}(J):(J instanceof IDBTransaction&&function Ct(J){if(Me.has(J))return;const Ze=new Promise((oe,Se)=>{const xe=()=>{J.removeEventListener("complete",We),J.removeEventListener("error",He),J.removeEventListener("abort",He)},We=()=>{oe(),xe()},He=()=>{Se(J.error||new DOMException("AbortError","AbortError")),xe()};J.addEventListener("complete",We),J.addEventListener("error",He),J.addEventListener("abort",He)});Me.set(J,Ze)}(J),((J,Ze)=>Ze.some(oe=>J instanceof oe))(J,function Ee(){return Q||(Q=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(J,nt):J)}function et(J){if(J instanceof IDBRequest)return function Ae(J){const Ze=new Promise((oe,Se)=>{const xe=()=>{J.removeEventListener("success",We),J.removeEventListener("error",He)},We=()=>{oe(et(J.result)),xe()},He=()=>{Se(J.error),xe()};J.addEventListener("success",We),J.addEventListener("error",He)});return Ze.then(oe=>{oe instanceof IDBCursor&&Pe.set(oe,J)}).catch(()=>{}),ae.set(Ze,J),Ze}(J);if(le.has(J))return le.get(J);const Ze=Ge(J);return Ze!==J&&(le.set(J,Ze),ae.set(Ze,J)),Ze}const Ie=J=>ae.get(J);function At(J,Ze,{blocked:oe,upgrade:Se,blocking:xe,terminated:We}={}){const He=indexedDB.open(J,Ze),vt=et(He);return Se&&He.addEventListener("upgradeneeded",Nt=>{Se(et(He.result),Nt.oldVersion,Nt.newVersion,et(He.transaction))}),oe&&He.addEventListener("blocked",()=>oe()),vt.then(Nt=>{We&&Nt.addEventListener("close",()=>We()),xe&&Nt.addEventListener("versionchange",()=>xe())}).catch(()=>{}),vt}function tt(J,{blocked:Ze}={}){const oe=indexedDB.deleteDatabase(J);return Ze&&oe.addEventListener("blocked",()=>Ze()),et(oe).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Tt=new Map;function wt(J,Ze){if(!(J instanceof IDBDatabase)||Ze in J||"string"!=typeof Ze)return;if(Tt.get(Ze))return Tt.get(Ze);const oe=Ze.replace(/FromIndex$/,""),Se=Ze!==oe,xe=ke.includes(oe);if(!(oe in(Se?IDBIndex:IDBObjectStore).prototype)||!xe&&!Ne.includes(oe))return;const We=function(){var He=(0,T.Z)(function*(vt,...Nt){const xt=this.transaction(vt,xe?"readwrite":"readonly");let Ut=xt.store;return Se&&(Ut=Ut.index(Nt.shift())),(yield Promise.all([Ut[oe](...Nt),xe&&xt.done]))[0]});return function(Nt){return He.apply(this,arguments)}}();return Tt.set(Ze,We),We}!function st(J){nt=J(nt)}(J=>$E(HE({},J),{get:(Ze,oe,Se)=>wt(Ze,oe)||J.get(Ze,oe,Se),has:(Ze,oe)=>!!wt(Ze,oe)||J.has(Ze,oe)}))},5861:(Mt,Ve,V)=>{function T(Q,ve,Ee,be,Pe,Me,Oe){try{var le=Q[Me](Oe),ae=le.value}catch(Ae){return void Ee(Ae)}le.done?ve(ae):Promise.resolve(ae).then(be,Pe)}function Y(Q){return function(){var ve=this,Ee=arguments;return new Promise(function(be,Pe){var Me=Q.apply(ve,Ee);function Oe(ae){T(Me,be,Pe,Oe,le,"next",ae)}function le(ae){T(Me,be,Pe,Oe,le,"throw",ae)}Oe(void 0)})}}V.d(Ve,{Z:()=>Y})}},Mt=>{Mt(Mt.s=8753)}]);