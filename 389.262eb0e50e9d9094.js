"use strict";(self.webpackChunkangfiretest=self.webpackChunkangfiretest||[]).push([[389],{5389:(A,g,u)=>{u.r(g),u.d(g,{AuthModule:()=>P});var h=u(9808),l=u(4410),p=u(5861),r=u(2382);const d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function m(n){return null===n.value||""===n.value||d.test(n.value)?null:{email:!0}}var t=u(5e3),f=u(1205);let C=(()=>{class n{constructor(e,o){this.firebaseAuth=e,this.router=o,this.isLoggedIn=!1}signIn(e,o){var i=this;return(0,p.Z)(function*(){return yield i.firebaseAuth.signInWithEmailAndPassword(e,o).then(a=>{a&&(i.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(a.user)),i.router.navigate(["main"]))})})()}signUp(e,o){var i=this;return(0,p.Z)(function*(){return yield i.firebaseAuth.createUserWithEmailAndPassword(e,o).then(a=>{var c;a&&(null===(c=a.user)||void 0===c||c.sendEmailVerification(),i.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(a.user)),i.router.navigate(["main"]))})})()}logout(){return this.firebaseAuth.signOut().then(()=>{this.router.navigate(["auth"]).then(()=>localStorage.removeItem("user"))})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.zQ),t.LFG(l.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var M=u(7579);const O=["inputElement"];let v=(()=>{class n{constructor(){this.id="input"+Math.random().toString(36).substring(2),this.labelText="",this.placeholder="",this.maxLength=100,this.minLength=2,this.type="text",this.autocomplete="",this.errorMassage="",this.$destroy=new M.x,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){}get isValid(){return this.control&&!this.control.pending&&!this.control.errors&&!this.control.invalid}validate(e){return this.control=e,e.valid?null:e.errors}writeValue(e){this.value!==e&&(this.value=e,this.onChange(e))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}ngOnDestroy(){this.$destroy.next(!0),this.$destroy.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-input"]],viewQuery:function(e,o){if(1&e&&t.Gf(O,5),2&e){let i;t.iGM(i=t.CRH())&&(o.input=i.first)}},inputs:{id:"id",value:"value",labelText:"labelText",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",type:"type",disable:"disable",autocomplete:"autocomplete",errorMassage:"errorMassage"},features:[t._Bn([{provide:r.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0},{provide:r.Cf,useExisting:(0,t.Gpc)(()=>n),multi:!0}])],decls:10,vars:21,consts:[[1,"input-container"],[1,"input",3,"id","type","disabled","autocomplete","maxlength","minlength","ngModel","ngModelChange"],["inputElement",""],[1,"error"],[1,"label",3,"for"],[1,"placeholder"],[1,"border-bottom"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"input",1,2),t.NdJ("ngModelChange",function(a){return o.value=a})("ngModelChange",function(a){return o.onChange(a)}),t.qZA(),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"label",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.qZA(),t._UZ(9,"div",6),t.qZA()),2&e&&(t.ekj("invalid",!o.isValid&&o.control.dirty),t.xp6(1),t.ekj("has-value",o.value),t.Q6J("id",o.id)("type",o.type)("disabled",o.disable)("autocomplete",o.autocomplete)("maxlength",o.maxLength)("minlength",o.minLength)("ngModel",o.value),t.xp6(2),t.ekj("active-error",o.errorMassage&&!o.isValid&&o.control.dirty),t.xp6(1),t.Oqu(o.errorMassage),t.xp6(1),t.ekj("active-label",o.value),t.Q6J("for",o.id),t.xp6(1),t.Oqu(o.labelText),t.xp6(1),t.ekj("active-placeholder",o.value),t.xp6(1),t.Oqu(o.placeholder))},directives:[r.Fj,r.nD,r.wO,r.JJ,r.On],styles:["[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]{position:relative;margin-bottom:1.4rem}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;left:1rem;top:1rem;transition:.3s;cursor:text;font-style:italic}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .active-label[_ngcontent-%COMP%], [_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus ~ .label[_ngcontent-%COMP%]{top:.1rem;font-size:.7rem}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .active-placeholder[_ngcontent-%COMP%]{z-index:-1;opacity:0}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .border-bottom[_ngcontent-%COMP%]{position:absolute;bottom:0;width:0;height:2px;transition:all .3s;background:blue}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{border:none;border-bottom:2px solid #cccccc;border-top-right-radius:.6rem;border-top-left-radius:.6rem;padding:1.1rem 1rem .5rem}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{position:absolute;top:1.1rem;left:1rem;font-size:.9rem;transition:.3s;z-index:-1;opacity:0}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{position:absolute;font-size:.8rem;color:red;z-index:-1;transition:.3s;opacity:0;bottom:0}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .active-error[_ngcontent-%COMP%]{opacity:1;bottom:-1.2rem}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus ~ .border-bottom[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .input-container[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]:focus:not(.has-value) ~ .placeholder[_ngcontent-%COMP%]{z-index:0;opacity:1}[_nghost-%COMP%]   .invalid[_ngcontent-%COMP%]   .border-bottom[_ngcontent-%COMP%]{background-color:red}[_nghost-%COMP%]   .invalid[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:red}"]}),n})();const b=[{path:"",component:(()=>{class n{constructor(e,o){this.fb=e,this.authService=o,this.signType="sign In"}get messageText(){switch(this.signType){case"sign In":return"If you do not have an account, please Sign Up";case"sign Up":return"If you already have an account, please Sign In";default:return""}}get emailErrorText(){const e=this.credentialsForm.controls.email.errors;if(e){if(e.required)return"enter your email";if(e.email)return"email invalid"}return""}get passwordErrorText(){const e=this.credentialsForm.controls.pass.errors;if(e){if(e.required)return"enter your password";if(e.minlength)return`min length is ${e.minlength.requiredLength}, now is ${e.minlength.actualLength}`}return""}ngOnInit(){this.initForm()}onSubmit(){var e=this;return(0,p.Z)(function*(){const{email:o,pass:i}=e.credentialsForm.value;switch(e.signType){case"sign In":yield e.authService.signIn(o,i);break;case"sign Up":yield e.authService.signUp(o,i)}})()}changeMethod(){this.signType="sign In"===this.signType?"sign Up":"sign In"}initForm(){return this.credentialsForm=this.fb.group({email:new r.NI("",[r.kI.required,m]),pass:new r.NI("",[r.kI.required,r.kI.minLength(6)])})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-auth"]],decls:10,vars:7,consts:[[1,"title","text-center"],[3,"formGroup","ngSubmit"],["autocomplete","email","formControlName","email","type","email","labelText","Login","placeholder","Write your email...",1,"input",3,"errorMassage"],["autocomplete","new-password","formControlName","pass","type","password","labelText","Password","placeholder","Write your password...",1,"input",3,"errorMassage"],[1,"sign-up-button",3,"click"],[1,"button",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div")(1,"h1",0),t._uU(2),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t._UZ(4,"app-input",2)(5,"app-input",3),t.TgZ(6,"p",4),t.NdJ("click",function(){return o.changeMethod()}),t._uU(7),t.qZA(),t.TgZ(8,"button",5),t._uU(9),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(o.signType),t.xp6(1),t.Q6J("formGroup",o.credentialsForm),t.xp6(1),t.Q6J("errorMassage",o.emailErrorText),t.xp6(1),t.Q6J("errorMassage",o.passwordErrorText),t.xp6(2),t.Oqu(o.messageText),t.xp6(1),t.Q6J("disabled",o.credentialsForm.invalid),t.xp6(1),t.Oqu(o.signType))},directives:[r._Y,r.JL,r.sg,v,r.JJ,r.u],styles:["[_nghost-%COMP%]{height:100%;display:grid;justify-items:center;align-items:center}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{color:#000;margin-bottom:1rem;text-transform:capitalize}[_nghost-%COMP%]   .sign-up-button[_ngcontent-%COMP%]{cursor:pointer;margin-bottom:1rem;text-decoration:underline;color:#00f}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:100%;height:3rem;text-transform:capitalize;border:.5px solid #cccccc;border-radius:5px;font-size:1.5rem;cursor:not-allowed}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]:not(:disabled){cursor:pointer}"]}),n})()}];let _=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.Bz.forChild(b)],l.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,r.u5]]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,_,r.UX,y]]}),n})()}}]);